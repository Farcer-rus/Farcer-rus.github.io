function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e,t,n){"use strict";n.$,n._,n.Promise;!function(t){e.Mango.sbjs=t()}(function(){return function r(e,t,n){function o(s,a){if(!t[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=t[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return o(n?n:t)},c,c.exports,r,e,t,n)}return t[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,n){var r=e("./init"),o={init:function(e){this.get=r(e),e&&e.callback&&"function"==typeof e.callback&&e.callback(this.get)}};t.exports=o},{"./init":6}],2:[function(e,n,r){var o=e("./terms"),i=e("./helpers/utils"),s={containers:{current:"mgo_sb_current",current_extra:"mgo_sb_current_add",first:"mgo_sb_first",first_extra:"mgo_sb_first_add",session:"mgo_sb_session",udata:"mgo_sb_udata",promocode:"mgo_sb_promo"},service:{migrations:"mgo_sb_migrations"},delimiter:"|*|",aliases:{main:{type:"typ",source:"src",medium:"mdm",campaign:"cmp",content:"cnt",term:"trm",mango:"mango"},extra:{fire_date:"fd",entrance_point:"ep",referer:"rf"},session:{pages_seen:"pgs",current_page:"cpg"},udata:{visits:"vst",ip:"uip",agent:"uag"},promo:"code"},pack:{main:function(e){return s.aliases.main.type+"="+e.type+s.delimiter+s.aliases.main.source+"="+e.source+s.delimiter+s.aliases.main.medium+"="+e.medium+s.delimiter+s.aliases.main.campaign+"="+e.campaign+s.delimiter+s.aliases.main.content+"="+e.content+s.delimiter+s.aliases.main.term+"="+e.term+s.delimiter+s.aliases.main.mango+"="+e.mango},extra:function(e){return s.aliases.extra.fire_date+"="+i.setDate(new Date,e)+s.delimiter+s.aliases.extra.entrance_point+"="+t.location.href+s.delimiter+s.aliases.extra.referer+"="+(t.referrer||o.none)},user:function(e,t){return s.aliases.udata.visits+"="+e+s.delimiter+s.aliases.udata.ip+"="+t+s.delimiter+s.aliases.udata.agent+"="+navigator.userAgent},session:function(e){return s.aliases.session.pages_seen+"="+e+s.delimiter+s.aliases.session.current_page+"="+t.location.href},promo:function(e){return s.aliases.promo+"="+i.setLeadingZeroToInt(i.randomInt(e.min,e.max),e.max.toString().length)}}};n.exports=s},{"./helpers/utils":5,"./terms":9}],3:[function(e,t,r){var o=e("../data").delimiter;t.exports={encodeData:function(e){return encodeURIComponent(e).replace(/\!/g,"%21").replace(/\~/g,"%7E").replace(/\*/g,"%2A").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")},decodeData:function(e){try{return decodeURIComponent(e).replace(/\%21/g,"!").replace(/\%7E/g,"~").replace(/\%2A/g,"*").replace(/\%27/g,"'").replace(/\%28/g,"(").replace(/\%29/g,")")}catch(t){try{return unescape(e)}catch(n){return""}}},set:function(e,t,r,o,i){var s={};r&&(s.expires=60*r),s.domain=!o||i||o.match(/[а-яё]/)?"":o,n.Cookies.set(this.encodeData(e),this.encodeData(t),s)},get:function(e){var t=n.Cookies.get(this.encodeData(e));return void 0!==t?this.decodeData(t):null},destroy:function(e,t,n){this.set(e,"",-1,t,n)},parse:function(e){var t=[],n={};if("string"==typeof e)t.push(e);else for(var r in e)e.hasOwnProperty(r)&&t.push(e[r]);for(var i=0;i<t.length;i++){var s;n[this.unsbjs(t[i])]={},s=this.get(t[i])?this.get(t[i]).split(o):[];for(var a=0;a<s.length;a++){var u=s[a].split("="),l=u.splice(0,1);l.push(u.join("=")),n[this.unsbjs(t[i])][l[0]]=this.decodeData(l[1])}}return n},unsbjs:function(e){return e.replace("mgo_sb_","")}}},{"../data":2}],4:[function(t,n,r){n.exports={parse:function(e){for(var t=this.parseOptions,n=t.parser[t.strictMode?"strict":"loose"].exec(e),r={},o=14;o--;)r[t.key[o]]=n[o]||"";return r[t.q.name]={},r[t.key[12]].replace(t.q.parser,function(e,n,o){n&&(r[t.q.name][n]=o)}),r},parseOptions:{strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},getParam:function(t){for(var n={},r=t?t:e.location.search.substring(1),o=r.split("&"),i=0;i<o.length;i++){var s=o[i].split("=");if("undefined"==typeof n[s[0]])n[s[0]]=s[1];else if("string"==typeof n[s[0]]){var a=[n[s[0]],s[1]];n[s[0]]=a}else n[s[0]].push(s[1])}return n},getHost:function(e){return this.parse(e).host.replace("www.","")}}},{}],5:[function(e,t,n){t.exports={escapeRegexp:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},setDate:function(e,t){var n=e.getTimezoneOffset()/60,r=e.getHours(),o=t||0===t?t:-n;e.setHours(r+n+o);var i=e.getFullYear(),s=this.setLeadingZeroToInt(e.getMonth()+1,2),a=this.setLeadingZeroToInt(e.getDate(),2),u=this.setLeadingZeroToInt(e.getHours(),2),l=this.setLeadingZeroToInt(e.getMinutes(),2),c=this.setLeadingZeroToInt(e.getSeconds(),2);return i+"-"+s+"-"+a+" "+u+":"+l+":"+c},setLeadingZeroToInt:function(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n},randomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}}},{}],6:[function(e,n,r){var o=e("./data"),i=e("./terms"),s=e("./helpers/cookies"),a=e("./helpers/uri"),u=e("./helpers/utils"),l=e("./params"),c=e("./migrations");n.exports=function(e){function n(){var e;if("undefined"!=typeof y.utm_source||"undefined"!=typeof y.utm_medium||"undefined"!=typeof y.utm_campaign||"undefined"!=typeof y.utm_content||"undefined"!=typeof y.utm_term||"undefined"!=typeof y.mango||"undefined"!=typeof y.gclid||"undefined"!=typeof y.yclid||"undefined"!=typeof y[g.campaign_param])m(),e=r(i.traffic.utm);else if(h(i.traffic.organic))m(),e=r(i.traffic.organic);else if(!s.get(o.containers.session)&&h(i.traffic.referral))m(),e=r(i.traffic.referral);else{if(s.get(o.containers.first)||s.get(o.containers.current))return s.get(o.containers.current);m(),e=r(i.traffic.typein)}return e}function r(e){switch(e){case i.traffic.utm:C=i.traffic.utm,S="undefined"!=typeof y.utm_source?y.utm_source:"undefined"!=typeof y.gclid?"google":"undefined"!=typeof y.yclid?"yandex":i.none,"undefined"!=typeof y.utm_medium?"undefined"==typeof y.utm_source||"yandex"!==y.utm_source&&"yandex.ru"!==y.utm_source||y.utm_medium!==i.referer.referral?A=y.utm_medium:(C=i.traffic.organic,S="yandex",A=i.referer.organic):A="undefined"!=typeof y.gclid?"cpc":"undefined"!=typeof y.yclid?"cpc":i.none,E="undefined"!=typeof y.utm_campaign?y.utm_campaign:"undefined"!=typeof y[g.campaign_param]?y[g.campaign_param]:"undefined"!=typeof y.gclid?"google_cpc":"undefined"!=typeof y.yclid?"yandex_cpc":i.none,T="undefined"!=typeof y.mango?y.mango:i.none,k=y.utm_content||i.none,M=p()||i.none;break;case i.traffic.organic:C=i.traffic.organic,S=S||a.getHost(t.referrer),A=i.referer.organic,E=i.none,k=i.none,M=i.none,T=i.none;break;case i.traffic.referral:S=S||a.getHost(t.referrer),A=A||i.referer.referral,"yandex"!==S&&"yandex.ru"!==S||A!==i.referer.referral?C=i.traffic.referral:(C=i.traffic.organic,S="yandex",A=i.referer.organic),E=i.none,k=a.parse(t.referrer).path,M=i.none,T=i.none;break;case i.traffic.typein:C=i.traffic.typein,S=g.typein_attributes.source,A=g.typein_attributes.medium,E=i.none,k=i.none,M=i.none,T=i.none;break;default:C=i.oops,S=i.oops,A=i.oops,E=i.oops,k=i.oops,M=i.oops,T=i.oops}var n={type:C,source:S,medium:A,campaign:E,content:k,term:M,mango:T};return o.pack.main(n)}function p(){var e=t.referrer;if(y.utm_term)return y.utm_term;if(!(e&&a.parse(e).host&&a.parse(e).host.match(/^(?:.*\.)?yandex\..{2,9}$/i)))return!1;try{return a.getParam(a.parse(t.referrer).query).text}catch(n){return!1}}function h(e){var n=t.referrer;switch(e){case i.traffic.organic:return!!n&&d(n)&&f(n);case i.traffic.referral:return!!n&&d(n)&&_(n);default:return!1}}function d(e){if(g.domain){if(b)return a.getHost(e)!==a.getHost(v);var n=new RegExp("^(?:.*\\.)?"+u.escapeRegexp(v)+"$","i");return!a.getHost(e).match(n)}return a.getHost(e)!==a.getHost(t.location.href)}function f(e){var t="yandex",n="text",r="google",o=new RegExp("^(?:.*\\.)?"+u.escapeRegexp(t)+"\\..{2,9}$"),i=new RegExp(".*"+u.escapeRegexp(n)+"=.*"),s=new RegExp("^(?:www\\.)?"+u.escapeRegexp(r)+"\\..{2,9}$");if(a.parse(e).query&&a.parse(e).host.match(o)&&a.parse(e).query.match(i))return S=t,!0;if(a.parse(e).host.match(s))return S=r,!0;if(!a.parse(e).query)return!1;for(var l=0;l<g.organics.length;l++){if(a.parse(e).host.match(new RegExp("^(?:.*\\.)?"+u.escapeRegexp(g.organics[l].host)+"$","i"))&&a.parse(e).query.match(new RegExp(".*"+u.escapeRegexp(g.organics[l].param)+"=.*","i")))return S=g.organics[l].display||g.organics[l].host,!0;if(l+1===g.organics.length)return!1}}function _(e){if(!(g.referrals.length>0))return S=a.getHost(e),!0;for(var t=0;t<g.referrals.length;t++){if(a.parse(e).host.match(new RegExp("^(?:.*\\.)?"+u.escapeRegexp(g.referrals[t].host)+"$","i")))return S=g.referrals[t].display||g.referrals[t].host,
A=g.referrals[t].medium||i.referer.referral,!0;if(t+1===g.referrals.length)return S=a.getHost(e),!0}}function m(){}var g=l.fetch(e),y=a.getParam(),v=g.domain.host,b=g.domain.isolate,w=g.lifetime;c.go(w,v,b);var C,S,A,E,k,M,T;return function(){s.set(o.containers.current,n(),w,v,b),s.get(o.containers.first)||s.set(o.containers.first,s.get(o.containers.current),w,v,b);var e;s.get(o.containers.session)?(e=parseInt(s.parse(o.containers.session)[s.unsbjs(o.containers.session)][o.aliases.session.pages_seen])||1,e+=1):e=1,s.set(o.containers.session,o.pack.session(e),g.session_length,v,b),g.promocode&&!s.get(o.containers.promocode)&&s.set(o.containers.promocode,o.pack.promo(g.promocode),w,v,b)}(),s.parse(o.containers)}},{"./data":2,"./helpers/cookies":3,"./helpers/uri":4,"./helpers/utils":5,"./migrations":7,"./params":8,"./terms":9}],7:[function(e,t,n){var r=e("./data"),o=e("./helpers/cookies");t.exports={go:function(e,t,n){var i,s=this.migrations,a={l:e,d:t,i:n};if(o.get(r.containers.first)||o.get(r.service.migrations)){if(!o.get(r.service.migrations))for(i=0;i<s.length;i++)s[i].go(s[i].id,a)}else{var u=[];for(i=0;i<s.length;i++)u.push(s[i].id);var l="";for(i=0;i<u.length;i++)l+=u[i]+"=1",i<u.length-1&&(l+=r.delimiter);o.set(r.service.migrations,l,a.l,a.d,a.i)}},migrations:[{id:"1418474375998",version:"1.0.0-beta",go:function(e,t){var n=e+"=1",i=e+"=0",s=function(e,t,n){return t||n?e:r.delimiter};try{var a=[];for(var u in r.containers)r.containers.hasOwnProperty(u)&&a.push(r.containers[u]);for(var l=0;l<a.length;l++)if(o.get(a[l])){var c=o.get(a[l]).replace(/(\|)?\|(\|)?/g,s);o.destroy(a[l],t.d,t.i),o.destroy(a[l],t.d,!t.i),o.set(a[l],c,t.l,t.d,t.i)}o.get(r.containers.session)&&o.set(r.containers.session,r.pack.session(0),t.l,t.d,t.i),o.set(r.service.migrations,n,t.l,t.d,t.i)}catch(p){o.set(r.service.migrations,i,t.l,t.d,t.i)}}}]}},{"./data":2,"./helpers/cookies":3}],8:[function(e,n,r){var o=e("./terms"),i=e("./helpers/uri");n.exports={fetch:function(e){var n=e||{},r={};if(r.lifetime=this.validate.checkFloat(n.lifetime)||6,r.lifetime=parseInt(30*r.lifetime*24*60),r.session_length=this.validate.checkInt(n.session_length)||30,r.timezone_offset=this.validate.checkInt(n.timezone_offset),r.campaign_param=n.campaign_param||!1,r.user_ip=n.user_ip||o.none,n.promocode?(r.promocode={},r.promocode.min=parseInt(n.promocode.min)||1e5,r.promocode.max=parseInt(n.promocode.max)||999999):r.promocode=!1,n.typein_attributes&&n.typein_attributes.source&&n.typein_attributes.medium?(r.typein_attributes={},r.typein_attributes.source=n.typein_attributes.source,r.typein_attributes.medium=n.typein_attributes.medium):r.typein_attributes={source:"(direct)",medium:"(none)"},n.domain&&this.validate.isString(n.domain)?r.domain={host:n.domain,isolate:!1}:n.domain&&n.domain.host?r.domain=n.domain:r.domain={host:i.getHost(t.location.hostname),isolate:!1},r.referrals=[],n.referrals&&n.referrals.length>0)for(var s=0;s<n.referrals.length;s++)n.referrals[s].host&&r.referrals.push(n.referrals[s]);if(r.organics=[],n.organics&&n.organics.length>0)for(var a=0;a<n.organics.length;a++)n.organics[a].host&&n.organics[a].param&&r.organics.push(n.organics[a]);return r.organics.push({host:"bing.com",param:"q",display:"bing"}),r.organics.push({host:"yahoo.com",param:"p",display:"yahoo"}),r.organics.push({host:"about.com",param:"q",display:"about"}),r.organics.push({host:"aol.com",param:"q",display:"aol"}),r.organics.push({host:"ask.com",param:"q",display:"ask"}),r.organics.push({host:"globososo.com",param:"q",display:"globo"}),r.organics.push({host:"go.mail.ru",param:"q",display:"go.mail.ru"}),r.organics.push({host:"rambler.ru",param:"query",display:"rambler"}),r.organics.push({host:"tut.by",param:"query",display:"tut.by"}),r.referrals.push({host:"t.co",display:"twitter.com"}),r.referrals.push({host:"plus.url.google.com",display:"plus.google.com"}),r},validate:{checkFloat:function(e){return!(!e||!this.isNumeric(parseFloat(e)))&&parseFloat(e)},checkInt:function(e){return!(!e||!this.isNumeric(parseInt(e)))&&parseInt(e)},isNumeric:function(e){return!isNaN(e)},isString:function(e){return"[object String]"===Object.prototype.toString.call(e)}}}},{"./helpers/uri":4,"./terms":9}],9:[function(e,t,n){t.exports={traffic:{utm:"utm",organic:"organic",referral:"referral",typein:"typein"},referer:{referral:"referral",organic:"organic",social:"social"},none:"(none)",oops:"(Houston, we have a problem)"}},{}]},{},[1])(1)})}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";var r=n.$,o=n._,i=n.Promise;!function(t){e.Mango.Promise=t()}(function(){var n,r,o;return function s(e,t,n){function r(i,a){if(!t[i]){if(!e[i]){var u="function"==typeof _dereq_&&_dereq_;if(!a&&u)return u(i,!0);if(o)return o(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var c=t[i]={exports:{}};e[i][0].call(c.exports,function(t){var n=e[i][1][t];return r(n?n:t)},c,c.exports,s,e,t,n)}return t[i].exports}for(var o="function"==typeof _dereq_&&_dereq_,i=0;i<n.length;i++)r(n[i]);return r}({1:[function(e,t,n){t.exports=function(e){function t(e){var t=new n(e),r=t.promise();return t.setHowMany(1),t.setUnwrap(),t.init(),r}var n=e._SomePromiseArray;e.any=function(e){return t(e)},e.prototype.any=function(){return t(this)}}},{}],2:[function(e,t,n){function r(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new c(16),this._normalQueue=new c(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=l}function o(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function i(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function s(e){this._normalQueue._pushOne(e),this._queueTick()}var a;try{throw new Error}catch(u){a=u}var l=e("./schedule"),c=e("./queue"),p=e("./util");r.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},r.prototype.hasCustomScheduler=function(){return this._customScheduler},r.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},r.prototype.disableTrampolineIfNecessary=function(){p.hasDevTools&&(this._trampolineEnabled=!1)},r.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},r.prototype.fatalError=function(e,t){t?(process.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),process.exit(2)):this.throwLater(e)},r.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},p.hasDevTools?(r.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?o.call(this,e,t,n):this._schedule(function(){setTimeout(function(){e.call(t,n)},100)})},r.prototype.invoke=function(e,t,n){this._trampolineEnabled?i.call(this,e,t,n):this._schedule(function(){e.call(t,n)})},r.prototype.settlePromises=function(e){this._trampolineEnabled?s.call(this,e):this._schedule(function(){e._settlePromises()})}):(r.prototype.invokeLater=o,r.prototype.invoke=i,r.prototype.settlePromises=s),r.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if("function"==typeof t){var n=e.shift(),r=e.shift();t.call(n,r)}else t._settlePromises()}},r.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},t.exports=r,t.exports.firstLineError=a},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,n){t.exports=function(e,t,n,r){var o=!1,i=function(e,t){this._reject(t)},s=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(i,i,null,this,e)},a=function(e,t){0===(50397184&this._bitField)&&this._resolveCallback(t.target)},u=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(i){o||(o=!0,e.prototype._propagateFrom=r.propagateFromFunction(),e.prototype._boundValue=r.boundValueFunction());var l=n(i),c=new e(t);c._propagateFrom(this,1);var p=this._target();if(c._setBoundTo(l),l instanceof e){var h={promiseRejectionQueued:!1,promise:c,target:p,bindingPromise:l};p._then(t,s,void 0,c,h),l._then(a,u,void 0,c,h),c._setOnCancel(l)}else c._resolveCallback(p);return c},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=this._bitField&-2097153},e.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},e.bind=function(t,n){return e.resolve(n).bind(t)}}},{}],4:[function(e,t,n){function r(){try{i===s&&(i=o)}catch(e){}return s}var o;"undefined"!=typeof i&&(o=i);var s=e("./promise")();s.noConflict=r,t.exports=s},{"./promise":22}],5:[function(e,t,n){var r=Object.create;if(r){var o=r(null),i=r(null);o[" size"]=i[" size"]=0}t.exports=function(t){function n(e,n){var r;if(null!=e&&(r=e[n]),"function"!=typeof r){var o="Object "+a.classString(e)+" has no method '"+a.toString(n)+"'";throw new t.TypeError(o)}return r}function r(e){var t=this.pop(),r=n(e,t);return r.apply(e,this)}function o(e){return e[this]}function i(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}var s,a=e("./util"),u=a.canEvaluate;a.isIdentifier;t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(r,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t,n="number"==typeof e;if(n)t=i;else if(u){var r=s(e);t=null!==r?r:o}else t=o;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,n){t.exports=function(t,n,r,o){var i=e("./util"),s=i.tryCatch,a=i.errorObj,u=t._async;t.prototype["break"]=t.prototype.cancel=function(){if(!o.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(i.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"==typeof e){if(!t){var r=s(e).call(this._boundValue());r===a&&(this._attachExtraTrace(r.e),u.throwLater(r.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,n){t.exports=function(t){function n(e,n,a){return function(u){var l=a._boundValue();e:for(var c=0;c<e.length;++c){var p=e[c];if(p===Error||null!=p&&p.prototype instanceof Error){if(u instanceof p)return i(n).call(l,u)}else if("function"==typeof p){var h=i(p).call(l,u);if(h===s)return h;if(h)return i(n).call(l,u)}else if(r.isObject(u)){for(var d=o(p),f=0;f<d.length;++f){var _=d[f];if(p[_]!=u[_])continue e}return i(n).call(l,u)}}return t}}var r=e("./util"),o=e("./es5").keys,i=r.tryCatch,s=r.errorObj;return n}},{"./es5":13,"./util":36}],8:[function(e,t,n){t.exports=function(e){function t(){this._trace=new t.CapturedTrace(r())}function n(){if(o)return new t}function r(){var e=i.length-1;if(e>=0)return i[e]}var o=!1,i=[];return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},t.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,i.push(this._trace))},t.prototype._popContext=function(){if(void 0!==this._trace){var e=i.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},t.CapturedTrace=null,t.create=n,t.deactivateLongStackTraces=function(){},t.activateLongStackTraces=function(){var n=e.prototype._pushContext,i=e.prototype._popContext,s=e._peekContext,a=e.prototype._peekContext,u=e.prototype._promiseCreated;t.deactivateLongStackTraces=function(){e.prototype._pushContext=n,e.prototype._popContext=i,e._peekContext=s,e.prototype._peekContext=a,e.prototype._promiseCreated=u,o=!1},o=!0,e.prototype._pushContext=t.prototype._pushContext,e.prototype._popContext=t.prototype._popContext,e._peekContext=e.prototype._peekContext=r,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},t}},{}],9:[function(e,n,r){n.exports=function(n,r){function o(e,t){return{promise:t}}function i(){return!1}function s(e,t,n){var r=this;try{e(t,n,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+B.toString(e));r._attachCancellationCallback(e)})}catch(o){return o}}function a(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?B.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function u(){return this._onCancelField}function l(e){this._onCancelField=e}function c(){this._cancellationParent=void 0,this._onCancelField=void 0}function p(e,t){if(0!==(1&t)){this._cancellationParent=e;var n=e._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function h(e,t){0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function d(){var e=this._boundTo;return void 0!==e&&e instanceof n?e.isFulfilled()?e.value():void 0:e}function f(){this._trace=new I(this._peekContext())}function _(e,t){if(U(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var r=A(e);B.notEnumerableProp(e,"stack",r.message+"\n"+r.stack.join("\n")),B.notEnumerableProp(e,"__stackCleaned__",!0)}}}function m(e,t,n,r,o){if(void 0===e&&null!==t&&X){if(void 0!==o&&o._returnedNonUndefined())return;if(0===(65535&r._bitField))return;n&&(n+=" ");var i="",s="";if(t._trace){for(var a=t._trace.stack.split("\n"),u=C(a),l=u.length-1;l>=0;--l){var c=u[l];if(!z.test(c)){var p=c.match(H);p&&(i="at "+p[1]+":"+p[2]+":"+p[3]+" ");break}}if(u.length>0)for(var h=u[0],l=0;l<a.length;++l)if(a[l]===h){l>0&&(s="\n"+a[l-1]);break}}var d="a promise was created in a "+n+"handler "+i+"but was not returned from it, see http://goo.gl/rRqMUw"+s;r._warn(d,!0,t)}}function g(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),y(n)}function y(e,t,r){if(se.warnings){var o,i=new $(e);if(t)r._attachExtraTrace(i);else if(se.longStackTraces&&(o=n._peekContext()))o.attachExtraTrace(i);else{var s=A(i);i.stack=s.message+"\n"+s.stack.join("\n")}te("warning",i)||E(i,"",!0)}}function v(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}function b(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}function w(e){for(var t=e[0],n=1;n<e.length;++n){for(var r=e[n],o=t.length-1,i=t[o],s=-1,a=r.length-1;a>=0;--a)if(r[a]===i){s=a;break}for(var a=s;a>=0;--a){var u=r[a];if(t[o]!==u)break;t.pop(),o--}t=r}}function C(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],o="    (No stack trace)"===r||V.test(r),i=o&&re(r);o&&!i&&(G&&" "!==r.charAt(0)&&(r="    "+r),t.push(r))}return t}function S(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||V.test(r))break}return n>0&&"SyntaxError"!=e.name&&(t=t.slice(n)),t}function A(e){var t=e.stack,n=e.toString();return t="string"==typeof t&&t.length>0?S(e):["    (No stack trace)"],{message:n,stack:"SyntaxError"==e.name?t:C(t)}}function E(e,t,n){if("undefined"!=typeof console){var r;if(B.isObject(e)){var o=e.stack;r=t+W(o,e)}else r=t+String(e);"function"==typeof D?D(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function k(e,t,n,r){var o=!1;try{"function"==typeof t&&(o=!0,"rejectionHandled"===e?t(r):t(n,r))}catch(i){j.throwLater(i)}"unhandledRejection"===e?te(e,n,r)||o||E(n,"Unhandled rejection "):te(e,r)}function M(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():B.toString(e);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(t))try{var r=JSON.stringify(e);t=r}catch(o){}0===t.length&&(t="(empty array)")}return"(<"+T(t)+">, no stack trace)"}function T(e){var t=41;return e.length<t?e:e.substr(0,t-3)+"..."}function P(){return"function"==typeof ie}function O(e){var t=e.match(oe);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function x(e,t){if(P()){for(var n,r,o=e.stack.split("\n"),i=t.stack.split("\n"),s=-1,a=-1,u=0;u<o.length;++u){var l=O(o[u]);if(l){n=l.fileName,s=l.line;break}}for(var u=0;u<i.length;++u){var l=O(i[u]);if(l){r=l.fileName,a=l.line;break}}s<0||a<0||!n||!r||n!==r||s>=a||(re=function(e){if(L.test(e))return!0;var t=O(e);return!!(t&&t.fileName===n&&s<=t.line&&t.line<=a)})}}function I(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);ie(this,I),t>32&&this.uncycle()}var R,N,D,F=n._getDomain,j=n._async,$=e("./errors").Warning,B=e("./util"),U=B.canAttachTrace,L=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,z=/\((?:timers\.js):\d+:\d+\)/,H=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,V=null,W=null,G=!1,q=!(0==B.env("BLUEBIRD_DEBUG")),Y=!(0==B.env("BLUEBIRD_WARNINGS")||!q&&!B.env("BLUEBIRD_WARNINGS")),K=!(0==B.env("BLUEBIRD_LONG_STACK_TRACES")||!q&&!B.env("BLUEBIRD_LONG_STACK_TRACES")),X=0!=B.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(Y||!!B.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=e._bitField&-1048577|524288},n.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),j.invokeLater(this._notifyUnhandledRejection,this,void 0))},n.prototype._notifyUnhandledRejectionIsHandled=function(){k("rejectionHandled",R,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),k("unhandledRejection",N,e,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(e,t,n){return y(e,t,n||this)},n.onPossiblyUnhandledRejection=function(e){var t=F();N="function"==typeof e?null===t?e:B.domainBind(t,e):void 0},n.onUnhandledRejectionHandled=function(e){var t=F();R="function"==typeof e?null===t?e:B.domainBind(t,e):void 0};var J=function(){};n.longStackTraces=function(){if(j.haveItemsQueued()&&!se.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!se.longStackTraces&&P()){var e=n.prototype._captureStackTrace,t=n.prototype._attachExtraTrace;se.longStackTraces=!0,J=function(){if(j.haveItemsQueued()&&!se.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=e,n.prototype._attachExtraTrace=t,r.deactivateLongStackTraces(),j.enableTrampoline(),se.longStackTraces=!1},n.prototype._captureStackTrace=f,n.prototype._attachExtraTrace=_,r.activateLongStackTraces(),j.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return se.longStackTraces&&P()};var Z=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return B.global.dispatchEvent(e),function(e,t){var n=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:!0});return!B.global.dispatchEvent(n)}}if("function"==typeof Event){var e=new Event("CustomEvent");return B.global.dispatchEvent(e),function(e,t){var n=new Event(e.toLowerCase(),{cancelable:!0});return n.detail=t,!B.global.dispatchEvent(n)}}var e=t.createEvent("CustomEvent");return e.initCustomEvent("testingtheevent",!1,!0,{}),B.global.dispatchEvent(e),function(e,n){var r=t.createEvent("CustomEvent");return r.initCustomEvent(e.toLowerCase(),!1,!0,n),!B.global.dispatchEvent(r)}}catch(n){}return function(){return!1}}(),Q=function(){return B.isNode?function(){return process.emit.apply(process,arguments)}:B.global?function(e){var t="on"+e.toLowerCase(),n=B.global[t];return!!n&&(n.apply(B.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),ee={promiseCreated:o,promiseFulfilled:o,promiseRejected:o,promiseResolved:o,promiseCancelled:o,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:o},te=function(e){var t=!1;try{t=Q.apply(null,arguments)}catch(n){j.throwLater(n),t=!0}var r=!1;try{r=Z(e,ee[e].apply(null,arguments))}catch(n){j.throwLater(n),r=!0}return r||t};n.config=function(e){if(e=Object(e),"longStackTraces"in e&&(e.longStackTraces?n.longStackTraces():!e.longStackTraces&&n.hasLongStackTraces()&&J()),"warnings"in e){var t=e.warnings;se.warnings=!!t,X=se.warnings,B.isObject(t)&&"wForgottenReturn"in t&&(X=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!se.cancellation){if(j.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=c,n.prototype._propagateFrom=p,n.prototype._onCancel=u,n.prototype._setOnCancel=l,n.prototype._attachCancellationCallback=a,n.prototype._execute=s,ne=p,se.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!se.monitoring?(se.monitoring=!0,n.prototype._fireEvent=te):!e.monitoring&&se.monitoring&&(se.monitoring=!1,n.prototype._fireEvent=i)),n},n.prototype._fireEvent=i,n.prototype._execute=function(e,t,n){try{e(t,n)}catch(r){return r}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(e){},n.prototype._attachCancellationCallback=function(e){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(e,t){};var ne=h,re=function(){return!1},oe=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;B.inherits(I,Error),r.CapturedTrace=I,I.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],n={},r=0,o=this;void 0!==o;++r)t.push(o),o=o._parent;e=this._length=r;for(var r=e-1;r>=0;--r){var i=t[r].stack;void 0===n[i]&&(n[i]=r)}for(var r=0;r<e;++r){var s=t[r].stack,a=n[s];if(void 0!==a&&a!==r){a>0&&(t[a-1]._parent=void 0,t[a-1]._length=1),t[r]._parent=void 0,t[r]._length=1;var u=r>0?t[r-1]:this;a<e-1?(u._parent=t[a+1],u._parent.uncycle(),u._length=u._parent._length+1):(u._parent=void 0,u._length=1);for(var l=u._length+1,c=r-2;c>=0;--c)t[c]._length=l,l++;return}}}},I.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=A(e),n=t.message,r=[t.stack],o=this;void 0!==o;)r.push(C(o.stack.split("\n"))),o=o._parent;w(r),b(r),B.notEnumerableProp(e,"stack",v(n,r)),B.notEnumerableProp(e,"__stackCleaned__",!0)}};var ie=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():M(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,V=e,W=t;var n=Error.captureStackTrace;return re=function(e){return L.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return V=/@/,W=t,G=!0,function(e){e.stack=(new Error).stack};var o;try{throw new Error}catch(i){o="stack"in i}return"stack"in r||!o||"number"!=typeof Error.stackTraceLimit?(W=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?M(t):t.toString()},null):(V=e,W=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(D=function(e){console.warn(e)},B.isNode&&process.stderr.isTTY?D=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}:B.isNode||"string"!=typeof(new Error).stack||(D=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var se={warnings:!1,longStackTraces:!1,cancellation:!1,monitoring:!1};return K&&n.longStackTraces(),{longStackTraces:function(){return se.longStackTraces},warnings:function(){return se.warnings},cancellation:function(){return se.cancellation},monitoring:function(){return se.monitoring},propagateFromFunction:function(){return ne},boundValueFunction:function(){return d},checkForgottenReturns:m,setBounds:x,warn:y,deprecated:g,CapturedTrace:I,fireDomEvent:Z,fireGlobalEvent:Q}}},{"./errors":12,"./util":36}],10:[function(e,t,n){t.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype["return"]=e.prototype.thenReturn=function(n){return n instanceof e&&n.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:n},void 0)},e.prototype["throw"]=e.prototype.thenThrow=function(e){return this._then(n,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:e},void 0);var t=arguments[1],r=function(){throw t};return this.caught(e,r)},e.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof e&&n.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:n},void 0);var r=arguments[1];r instanceof e&&r.suppressUnhandledRejections();var o=function(){return r};return this.caught(n,o)}}},{}],11:[function(e,t,n){t.exports=function(e,t){function n(){return i(this)}function r(e,n){return o(e,n,t,t)}var o=e.reduce,i=e.all;e.prototype.each=function(e){return o(this,e,t,0)._then(n,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return o(this,e,t,t)},e.each=function(e,r){return o(e,r,t,0)._then(n,void 0,void 0,e,void 0)},e.mapSeries=r}},{}],12:[function(e,t,n){function r(e,t){function n(r){return this instanceof n?(p(this,"message","string"==typeof r?r:t),p(this,"name",e),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(r)}return c(n,Error),n}function o(e){return this instanceof o?(p(this,"name","OperationalError"),p(this,"message",e),this.cause=e,this.isOperational=!0,void(e instanceof Error?(p(this,"message",e.message),p(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new o(e)}var i,s,a=e("./es5"),u=a.freeze,l=e("./util"),c=l.inherits,p=l.notEnumerableProp,h=r("Warning","warning"),d=r("CancellationError","cancellation error"),f=r("TimeoutError","timeout error"),_=r("AggregateError","aggregate error");try{i=TypeError,s=RangeError}catch(m){i=r("TypeError","type error"),s=r("RangeError","range error")}for(var g="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),y=0;y<g.length;++y)"function"==typeof Array.prototype[g[y]]&&(_.prototype[g[y]]=Array.prototype[g[y]]);a.defineProperty(_.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),_.prototype.isOperational=!0;var v=0;_.prototype.toString=function(){var e=Array(4*v+1).join(" "),t="\n"+e+"AggregateError of:\n";v++,e=Array(4*v+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",o=r.split("\n"),i=0;i<o.length;++i)o[i]=e+o[i];r=o.join("\n"),t+=r+"\n"}return v--,t},c(o,Error);var b=Error.__BluebirdErrorTypes__;b||(b=u({CancellationError:d,TimeoutError:f,OperationalError:o,RejectionError:o,AggregateError:_}),a.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:i,RangeError:s,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(e,t,n){var r=function(){return void 0===this}();if(r)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var o={}.hasOwnProperty,i={}.toString,s={}.constructor.prototype,a=function(e){var t=[];for(var n in e)o.call(e,n)&&t.push(n);return t},u=function(e,t){return{value:e[t]}},l=function(e,t,n){return e[t]=n.value,e},c=function(e){return e},p=function(e){try{return Object(e).constructor.prototype}catch(t){return s}},h=function(e){try{return"[object Array]"===i.call(e)}catch(t){return!1}};t.exports={isArray:h,keys:a,names:a,defineProperty:l,getDescriptor:u,freeze:c,getPrototypeOf:p,isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,n){t.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,r){return n(this,e,r,t)},e.filter=function(e,r,o){return n(e,r,o,t)}}},{}],15:[function(e,t,n){t.exports=function(t,n,r){function o(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function i(e){this.finallyHandler=e}function s(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function a(){return l.call(this,this.promise._target()._settledValue())}function u(e){if(!s(this,e))return h.e=e,h}function l(e){var o=this.promise,l=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?l.call(o._boundValue()):l.call(o._boundValue(),e);if(c===r)return c;if(void 0!==c){o._setReturnedNonUndefined();var d=n(c,o);if(d instanceof t){if(null!=this.cancelPromise){if(d._isCancelled()){var f=new p("late cancellation observer");return o._attachExtraTrace(f),h.e=f,h}d.isPending()&&d._attachCancellationCallback(new i(this))}return d._then(a,u,void 0,this,void 0)}}}return o.isRejected()?(s(this),h.e=e,h):(s(this),e)}var c=e("./util"),p=t.CancellationError,h=c.errorObj,d=e("./catch_filter")(r);
return o.prototype.isFinallyHandler=function(){return 0===this.type},i.prototype._resultCancelled=function(){s(this.finallyHandler)},t.prototype._passThrough=function(e,t,n,r){return"function"!=typeof e?this.then():this._then(n,r,void 0,new o(this,t,e),void 0)},t.prototype.lastly=t.prototype["finally"]=function(e){return this._passThrough(e,0,l,l)},t.prototype.tap=function(e){return this._passThrough(e,1,l)},t.prototype.tapCatch=function(e){var n=arguments.length;if(1===n)return this._passThrough(e,1,void 0,l);var r,o=new Array(n-1),i=0;for(r=0;r<n-1;++r){var s=arguments[r];if(!c.isObject(s))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+c.classString(s)));o[i++]=s}o.length=i;var a=arguments[r];return this._passThrough(d(o,a,this),1,void 0,l)},o}},{"./catch_filter":7,"./util":36}],16:[function(e,t,n){t.exports=function(t,n,r,o,i,s){function a(e,n,r){for(var i=0;i<n.length;++i){r._pushContext();var s=d(n[i])(e);if(r._popContext(),s===h){r._pushContext();var a=t.reject(h.e);return r._popContext(),a}var u=o(s,r);if(u instanceof t)return u}return null}function u(e,n,o,i){if(s.cancellation()){var a=new t(r),u=this._finallyPromise=new t(r);this._promise=a.lastly(function(){return u}),a._captureStackTrace(),a._setOnCancel(this)}else{var l=this._promise=new t(r);l._captureStackTrace()}this._stack=i,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof o?[o].concat(f):f,this._yieldedPromise=null,this._cancellationPhase=!1}var l=e("./errors"),c=l.TypeError,p=e("./util"),h=p.errorObj,d=p.tryCatch,f=[];p.inherits(u,i),u.prototype._isResolved=function(){return null===this._promise},u.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},u.prototype._promiseCancelled=function(){if(!this._isResolved()){var e,n="undefined"!=typeof this._generator["return"];if(n)this._promise._pushContext(),e=d(this._generator["return"]).call(this._generator,void 0),this._promise._popContext();else{var r=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),e=d(this._generator["throw"]).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},u.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=d(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},u.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=d(this._generator["throw"]).call(this._generator,e);this._promise._popContext(),this._continue(t)},u.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},u.prototype.promise=function(){return this._promise},u.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},u.prototype._continue=function(e){var n=this._promise;if(e===h)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(e.e,!1);var r=e.value;if(e.done===!0)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var i=o(r,this._promise);if(!(i instanceof t)&&(i=a(i,this._yieldHandlers,this._promise),null===i))return void this._promiseRejected(new c("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));i=i._target();var s=i._bitField;0===(50397184&s)?(this._yieldedPromise=i,i._proxy(this,null)):0!==(33554432&s)?t._async.invoke(this._promiseFulfilled,this,i._value()):0!==(16777216&s)?t._async.invoke(this._promiseRejected,this,i._reason()):this._promiseCancelled()},t.coroutine=function(e,t){if("function"!=typeof e)throw new c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler,r=u,o=(new Error).stack;return function(){var t=e.apply(this,arguments),i=new r((void 0),(void 0),n,o),s=i.promise();return i._generator=t,i._promiseFulfilled(void 0),s}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new c("expecting a function but got "+p.classString(e));f.push(e)},t.spawn=function(e){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new u(e,this),o=r.promise();return r._run(t.spawn),o}}},{"./errors":12,"./util":36}],17:[function(e,t,n){t.exports=function(t,n,r,o,i,s){var a=e("./util");a.canEvaluate,a.tryCatch,a.errorObj;t.join=function(){var e,t=arguments.length-1;if(t>0&&"function"==typeof arguments[t]){e=arguments[t];var r}var o=[].slice.call(arguments);e&&o.pop();var r=new n(o).promise();return void 0!==e?r.spread(e):r}}},{"./util":36}],18:[function(e,t,n){t.exports=function(t,n,r,o,i,s){function a(e,t,n,r){this.constructor$(e),this._promise._captureStackTrace();var o=l();this._callback=null===o?t:c.domainBind(o,t),this._preservedValues=r===i?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],d.invoke(this._asyncInit,this,void 0)}function u(e,n,o,i){if("function"!=typeof n)return r("expecting a function but got "+c.classString(n));var s=0;if(void 0!==o){if("object"!=typeof o||null===o)return t.reject(new TypeError("options argument must be an object but it is "+c.classString(o)));if("number"!=typeof o.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+c.classString(o.concurrency)));s=o.concurrency}return s="number"==typeof s&&isFinite(s)&&s>=1?s:0,new a(e,n,s,i).promise()}var l=t._getDomain,c=e("./util"),p=c.tryCatch,h=c.errorObj,d=t._async;c.inherits(a,n),a.prototype._asyncInit=function(){this._init$(void 0,-2)},a.prototype._init=function(){},a.prototype._promiseFulfilled=function(e,n){var r=this._values,i=this.length(),a=this._preservedValues,u=this._limit;if(n<0){if(n=n*-1-1,r[n]=e,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(u>=1&&this._inFlight>=u)return r[n]=e,this._queue.push(n),!1;null!==a&&(a[n]=e);var l=this._promise,c=this._callback,d=l._boundValue();l._pushContext();var f=p(c).call(d,e,n,i),_=l._popContext();if(s.checkForgottenReturns(f,_,null!==a?"Promise.filter":"Promise.map",l),f===h)return this._reject(f.e),!0;var m=o(f,this._promise);if(m instanceof t){m=m._target();var g=m._bitField;if(0===(50397184&g))return u>=1&&this._inFlight++,r[n]=m,m._proxy(this,(n+1)*-1),!1;if(0===(33554432&g))return 0!==(16777216&g)?(this._reject(m._reason()),!0):(this._cancel(),!0);f=m._value()}r[n]=f}var y=++this._totalResolved;return y>=i&&(null!==a?this._filter(r,a):this._resolve(r),!0)},a.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var r=e.pop();this._promiseFulfilled(n[r],r)}},a.prototype._filter=function(e,t){for(var n=t.length,r=new Array(n),o=0,i=0;i<n;++i)e[i]&&(r[o++]=t[i]);r.length=o,this._resolve(r)},a.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return u(this,e,t,null)},t.map=function(e,t,n,r){return u(e,t,n,r)}}},{"./util":36}],19:[function(e,t,n){t.exports=function(t,n,r,o,i){var s=e("./util"),a=s.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+s.classString(e));return function(){var r=new t(n);r._captureStackTrace(),r._pushContext();var o=a(e).apply(this,arguments),s=r._popContext();return i.checkForgottenReturns(o,s,"Promise.method",r),r._resolveFromSyncValue(o),r}},t.attempt=t["try"]=function(e){if("function"!=typeof e)return o("expecting a function but got "+s.classString(e));var r=new t(n);r._captureStackTrace(),r._pushContext();var u;if(arguments.length>1){i.deprecated("calling Promise.try with more than 1 argument");var l=arguments[1],c=arguments[2];u=s.isArray(l)?a(e).apply(c,l):a(e).call(c,l)}else u=a(e)();var p=r._popContext();return i.checkForgottenReturns(u,p,"Promise.try",r),r._resolveFromSyncValue(u),r},t.prototype._resolveFromSyncValue=function(e){e===s.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,n){function r(e){return e instanceof Error&&c.getPrototypeOf(e)===Error.prototype}function o(e){var t;if(r(e)){t=new l(e),t.name=e.name,t.message=e.message,t.stack=e.stack;for(var n=c.keys(e),o=0;o<n.length;++o){var i=n[o];p.test(i)||(t[i]=e[i])}return t}return s.markAsOriginatingFromRejection(e),e}function i(e,t){return function(n,r){if(null!==e){if(n){var i=o(a(n));e._attachExtraTrace(i),e._reject(i)}else if(t){var s=[].slice.call(arguments,1);e._fulfill(s)}else e._fulfill(r);e=null}}}var s=e("./util"),a=s.maybeWrapAsError,u=e("./errors"),l=u.OperationalError,c=e("./es5"),p=/^(?:name|message|stack|cause)$/;t.exports=i},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,n){t.exports=function(t){function n(e,t){var n=this;if(!i.isArray(e))return r.call(n,e,t);var o=a(t).apply(n._boundValue(),[null].concat(e));o===u&&s.throwLater(o.e)}function r(e,t){var n=this,r=n._boundValue(),o=void 0===e?a(t).call(r,null):a(t).call(r,null,e);o===u&&s.throwLater(o.e)}function o(e,t){var n=this;if(!e){var r=new Error(e+"");r.cause=e,e=r}var o=a(t).call(n._boundValue(),e);o===u&&s.throwLater(o.e)}var i=e("./util"),s=t._async,a=i.tryCatch,u=i.errorObj;t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var i=r;void 0!==t&&Object(t).spread&&(i=n),this._then(i,o,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,t,n){t.exports=function(){function n(){}function r(e,t){if(null==e||e.constructor!==o)throw new y("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new y("expecting a function but got "+d.classString(t))}function o(e){e!==b&&r(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function i(e){this.promise._resolveCallback(e)}function s(e){this.promise._rejectCallback(e,!1)}function a(e){var t=new o(b);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}var u,l=function(){return new y("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},c=function(){return new o.PromiseInspection(this._target())},p=function(e){return o.reject(new y(e))},h={},d=e("./util");u=d.isNode?function(){var e=process.domain;return void 0===e&&(e=null),e}:function(){return null},d.notEnumerableProp(o,"_getDomain",u);var f=e("./es5"),_=e("./async"),m=new _;f.defineProperty(o,"_async",{value:m});var g=e("./errors"),y=o.TypeError=g.TypeError;o.RangeError=g.RangeError;var v=o.CancellationError=g.CancellationError;o.TimeoutError=g.TimeoutError,o.OperationalError=g.OperationalError,o.RejectionError=g.OperationalError,o.AggregateError=g.AggregateError;var b=function(){},w={},C={},S=e("./thenables")(o,b),A=e("./promise_array")(o,b,S,p,n),E=e("./context")(o),k=E.create,M=e("./debuggability")(o,E),T=(M.CapturedTrace,e("./finally")(o,S,C)),P=e("./catch_filter")(C),O=e("./nodeback"),x=d.errorObj,I=d.tryCatch;return o.prototype.toString=function(){return"[object Promise]"},o.prototype.caught=o.prototype["catch"]=function(e){var t=arguments.length;if(t>1){var n,r=new Array(t-1),o=0;for(n=0;n<t-1;++n){var i=arguments[n];if(!d.isObject(i))return p("Catch statement predicate: expecting an object but got "+d.classString(i));r[o++]=i}return r.length=o,e=arguments[n],this.then(void 0,P(r,e,this))}return this.then(void 0,e)},o.prototype.reflect=function(){return this._then(c,c,void 0,this,void 0)},o.prototype.then=function(e,t){if(M.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+d.classString(e);arguments.length>1&&(n+=", "+d.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},o.prototype.done=function(e,t){var n=this._then(e,t,void 0,void 0,void 0);n._setIsFinal()},o.prototype.spread=function(e){return"function"!=typeof e?p("expecting a function but got "+d.classString(e)):this.all()._then(e,void 0,void 0,w,void 0)},o.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},o.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new A(this).promise()},o.prototype.error=function(e){return this.caught(d.originatesFromRejection,e)},o.getNewLibraryCopy=t.exports,o.is=function(e){return e instanceof o},o.fromNode=o.fromCallback=function(e){var t=new o(b);t._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=I(e)(O(t,n));return r===x&&t._rejectCallback(r.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},o.all=function(e){return new A(e).promise()},o.cast=function(e){var t=S(e);return t instanceof o||(t=new o(b),t._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},o.resolve=o.fulfilled=o.cast,o.reject=o.rejected=function(e){var t=new o(b);return t._captureStackTrace(),t._rejectCallback(e,!0),t},o.setScheduler=function(e){if("function"!=typeof e)throw new y("expecting a function but got "+d.classString(e));return m.setScheduler(e)},o.prototype._then=function(e,t,n,r,i){var s=void 0!==i,a=s?i:new o(b),l=this._target(),c=l._bitField;s||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===r&&0!==(2097152&this._bitField)&&(r=0!==(50397184&c)?this._boundValue():l===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,a));var p=u();if(0!==(50397184&c)){var h,f,_=l._settlePromiseCtx;0!==(33554432&c)?(f=l._rejectionHandler0,h=e):0!==(16777216&c)?(f=l._fulfillmentHandler0,h=t,l._unsetRejectionIsUnhandled()):(_=l._settlePromiseLateCancellationObserver,f=new v("late cancellation observer"),l._attachExtraTrace(f),h=t),m.invoke(_,l,{handler:null===p?h:"function"==typeof h&&d.domainBind(p,h),promise:a,receiver:r,value:f})}else l._addCallbacks(e,t,a,r,p);return a},o.prototype._length=function(){return 65535&this._bitField},o.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},o.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},o.prototype._setLength=function(e){this._bitField=this._bitField&-65536|65535&e},o.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},o.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},o.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},o.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},o.prototype._isFinal=function(){return(4194304&this._bitField)>0},o.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},o.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},o.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},o.prototype._setAsyncGuaranteed=function(){m.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},o.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==h)return void 0===t&&this._isBound()?this._boundValue():t},o.prototype._promiseAt=function(e){return this[4*e-4+2]},o.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},o.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},o.prototype._boundValue=function(){},o.prototype._migrateCallback0=function(e){var t=(e._bitField,e._fulfillmentHandler0),n=e._rejectionHandler0,r=e._promise0,o=e._receiverAt(0);void 0===o&&(o=h),this._addCallbacks(t,n,r,o,null)},o.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),o=e._promiseAt(t),i=e._receiverAt(t);void 0===i&&(i=h),this._addCallbacks(n,r,o,i,null)},o.prototype._addCallbacks=function(e,t,n,r,o){var i=this._length();if(i>=65531&&(i=0,this._setLength(0)),0===i)this._promise0=n,this._receiver0=r,"function"==typeof e&&(this._fulfillmentHandler0=null===o?e:d.domainBind(o,e)),"function"==typeof t&&(this._rejectionHandler0=null===o?t:d.domainBind(o,t));else{var s=4*i-4;this[s+2]=n,this[s+3]=r,"function"==typeof e&&(this[s+0]=null===o?e:d.domainBind(o,e)),"function"==typeof t&&(this[s+1]=null===o?t:d.domainBind(o,t))}return this._setLength(i+1),i},o.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},o.prototype._resolveCallback=function(e,t){if(0===(117506048&this._bitField)){if(e===this)return this._rejectCallback(l(),!1);var n=S(e,this);if(!(n instanceof o))return this._fulfill(e);t&&this._propagateFrom(n,2);var r=n._target();if(r===this)return void this._reject(l());var i=r._bitField;if(0===(50397184&i)){var s=this._length();s>0&&r._migrateCallback0(this);for(var a=1;a<s;++a)r._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!==(33554432&i))this._fulfill(r._value());else if(0!==(16777216&i))this._reject(r._reason());else{var u=new v("late cancellation observer");r._attachExtraTrace(u),this._reject(u)}}},o.prototype._rejectCallback=function(e,t,n){var r=d.ensureErrorObject(e),o=r===e;if(!o&&!n&&M.warnings()){var i="a promise was rejected with a non-error: "+d.classString(e);this._warn(i,!0)}this._attachExtraTrace(r,!!t&&o),this._reject(e)},o.prototype._resolveFromExecutor=function(e){if(e!==b){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=!1,this._popContext(),void 0!==r&&t._rejectCallback(r,!0)}},o.prototype._settlePromiseFromHandler=function(e,t,n,r){var o=r._bitField;if(0===(65536&o)){r._pushContext();var i;t===w?n&&"number"==typeof n.length?i=I(e).apply(this._boundValue(),n):(i=x,i.e=new y("cannot .spread() a non-array: "+d.classString(n))):i=I(e).call(t,n);var s=r._popContext();o=r._bitField,0===(65536&o)&&(i===C?r._reject(n):i===x?r._rejectCallback(i.e,!1):(M.checkForgottenReturns(i,s,"",r,this),r._resolveCallback(i)))}},o.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},o.prototype._followee=function(){return this._rejectionHandler0},o.prototype._setFollowee=function(e){this._rejectionHandler0=e},o.prototype._settlePromise=function(e,t,r,i){var s=e instanceof o,a=this._bitField,u=0!==(134217728&a);0!==(65536&a)?(s&&e._invokeInternalOnCancel(),r instanceof T&&r.isFinallyHandler()?(r.cancelPromise=e,I(t).call(r,i)===x&&e._reject(x.e)):t===c?e._fulfill(c.call(r)):r instanceof n?r._promiseCancelled(e):s||e instanceof A?e._cancel():r.cancel()):"function"==typeof t?s?(u&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,r,i,e)):t.call(r,i,e):r instanceof n?r._isResolved()||(0!==(33554432&a)?r._promiseFulfilled(i,e):r._promiseRejected(i,e)):s&&(u&&e._setAsyncGuaranteed(),0!==(33554432&a)?e._fulfill(i):e._reject(i))},o.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,r=e.receiver,i=e.value;"function"==typeof t?n instanceof o?this._settlePromiseFromHandler(t,r,i,n):t.call(r,i,n):n instanceof o&&n._reject(i)},o.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},o.prototype._settlePromise0=function(e,t,n){var r=this._promise0,o=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,e,o,t)},o.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},o.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=l();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!==(134217728&t)?this._settlePromises():m.settlePromises(this))}},o.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16))return this._setRejected(),this._fulfillmentHandler0=e,this._isFinal()?m.fatalError(e,d.isNode):void((65535&t)>0?m.settlePromises(this):this._ensurePossibleRejectionHandled())},o.prototype._fulfillPromises=function(e,t){for(var n=1;n<e;n++){var r=this._fulfillmentHandlerAt(n),o=this._promiseAt(n),i=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(o,r,i,t)}},o.prototype._rejectPromises=function(e,t){for(var n=1;n<e;n++){var r=this._rejectionHandlerAt(n),o=this._promiseAt(n),i=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(o,r,i,t)}},o.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!==(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,e),this._fulfillPromises(t,r)}this._setLength(0)}this._clearCancellationData()},o.prototype._settledValue=function(){var e=this._bitField;return 0!==(33554432&e)?this._rejectionHandler0:0!==(16777216&e)?this._fulfillmentHandler0:void 0},o.defer=o.pending=function(){M.deprecated("Promise.defer","new Promise");var e=new o(b);return{promise:e,resolve:i,reject:s}},d.notEnumerableProp(o,"_makeSelfResolutionError",l),e("./method")(o,b,S,p,M),e("./bind")(o,b,S,M),e("./cancel")(o,A,p,M),e("./direct_resolve")(o),e("./synchronous_inspection")(o),e("./join")(o,A,S,b,m,u),o.Promise=o,o.version="3.5.0",e("./map.js")(o,A,p,S,b,M),e("./call_get.js")(o),e("./using.js")(o,p,S,k,b,M),e("./timers.js")(o,b,M),e("./generators.js")(o,p,b,S,n,M),e("./nodeify.js")(o),e("./promisify.js")(o,b),e("./props.js")(o,A,S,p),e("./race.js")(o,b,S,p),e("./reduce.js")(o,A,p,S,b,M),e("./settle.js")(o,A,M),e("./some.js")(o,A,p),e("./filter.js")(o,b),e("./each.js")(o,b),e("./any.js")(o),d.toFastProperties(o),d.toFastProperties(o.prototype),a({a:1}),a({b:2}),a({c:3}),a(1),a(function(){}),a(void 0),a(!1),a(new o(b)),M.setBounds(_.firstLineError,d.lastLineError),o}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t,n){t.exports=function(t,n,r,o,i){function s(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}function a(e){var r=this._promise=new t(n);e instanceof t&&r._propagateFrom(e,3),r._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var u=e("./util");u.isArray;return u.inherits(a,i),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function l(e,n){var i=r(this._values,this._promise);if(i instanceof t){i=i._target();var a=i._bitField;if(this._values=i,0===(50397184&a))return this._promise._setAsyncGuaranteed(),i._then(l,this._reject,void 0,this,n);if(0===(33554432&a))return 0!==(16777216&a)?this._reject(i._reason()):this._cancel();i=i._value()}if(i=u.asArray(i),null===i){var c=o("expecting an array or an iterable object but got "+u.classString(i)).reason();return void this._promise._rejectCallback(c,!1)}return 0===i.length?void(n===-5?this._resolveEmptyArray():this._resolve(s(n))):void this._iterate(i)},a.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var o=this._promise,i=!1,s=null,a=0;a<n;++a){var u=r(e[a],o);u instanceof t?(u=u._target(),s=u._bitField):s=null,i?null!==s&&u.suppressUnhandledRejections():null!==s?0===(50397184&s)?(u._proxy(this,a),this._values[a]=u):i=0!==(33554432&s)?this._promiseFulfilled(u._value(),a):0!==(16777216&s)?this._promiseRejected(u._reason(),a):this._promiseCancelled(a):i=this._promiseFulfilled(u,a)}i||o._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},a.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(e){return e},a}},{"./util":36}],24:[function(e,t,n){t.exports=function(t,n){function r(e){return!C.test(e)}function o(e){try{return e.__isPromisified__===!0}catch(t){return!1}}function i(e,t,n){var r=d.getDataPropertyOrDefault(e,t+n,b);return!!r&&o(r)}function s(e,t,n){for(var r=0;r<e.length;r+=2){var o=e[r];if(n.test(o))for(var i=o.replace(n,""),s=0;s<e.length;s+=2)if(e[s]===i)throw new y("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}function a(e,t,n,r){for(var a=d.inheritedDataKeys(e),u=[],l=0;l<a.length;++l){var c=a[l],p=e[c],h=r===S||S(c,p,e);"function"!=typeof p||o(p)||i(e,c,t)||!r(c,p,e,h)||u.push(c,p)}return s(u,t,n),u}function u(e,r,o,i,s,a){function u(){var o=r;r===h&&(o=this);var i=new t(n);i._captureStackTrace();var s="string"==typeof c&&this!==l?this[c]:e,u=f(i,a);try{s.apply(o,_(arguments,u))}catch(p){i._rejectCallback(m(p),!0,!0)}return i._isFateSealed()||i._setAsyncGuaranteed(),i}var l=function(){return this}(),c=e;return"string"==typeof c&&(e=i),d.notEnumerableProp(u,"__isPromisified__",!0),u}function l(e,t,n,r,o){for(var i=new RegExp(A(t)+"$"),s=a(e,t,i,n),u=0,l=s.length;u<l;u+=2){var c=s[u],p=s[u+1],f=c+t;if(r===E)e[f]=E(c,h,c,p,t,o);else{var _=r(p,function(){return E(c,h,c,p,t,o)});d.notEnumerableProp(_,"__isPromisified__",!0),e[f]=_}}return d.toFastProperties(e),e}function c(e,t,n){return E(e,t,void 0,e,null,n)}var p,h={},d=e("./util"),f=e("./nodeback"),_=d.withAppended,m=d.maybeWrapAsError,g=d.canEvaluate,y=e("./errors").TypeError,v="Async",b={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],C=new RegExp("^(?:"+w.join("|")+")$"),S=function(e){return d.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e},A=function(e){return e.replace(/([$])/,"\\$")},E=g?p:u;t.promisify=function(e,t){if("function"!=typeof e)throw new y("expecting a function but got "+d.classString(e));if(o(e))return e;t=Object(t);var n=void 0===t.context?h:t.context,i=!!t.multiArgs,s=c(e,n,i);return d.copyDescriptors(e,s,r),s},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new y("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");t=Object(t);var n=!!t.multiArgs,r=t.suffix;"string"!=typeof r&&(r=v);var o=t.filter;"function"!=typeof o&&(o=S);var i=t.promisifier;if("function"!=typeof i&&(i=E),!d.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=d.inheritedDataKeys(e),a=0;a<s.length;++a){var u=e[s[a]];"constructor"!==s[a]&&d.isClass(u)&&(l(u.prototype,r,o,i,n),l(u,r,o,i,n))}return l(e,r,o,i,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,n){t.exports=function(t,n,r,o){function i(e){var t,n=!1;if(void 0!==a&&e instanceof a)t=p(e),n=!0;else{var r=c.keys(e),o=r.length;t=new Array(2*o);for(var i=0;i<o;++i){var s=r[i];t[i]=e[s],t[i+o]=s}}this.constructor$(t),this._isMap=n,this._init$(void 0,n?-6:-3)}function s(e){var n,s=r(e);return l(s)?(n=s instanceof t?s._then(t.props,void 0,void 0,void 0,void 0):new i(s).promise(),s instanceof t&&n._propagateFrom(s,2),n):o("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var a,u=e("./util"),l=u.isObject,c=e("./es5");"function"==typeof Map&&(a=Map);var p=function(){function e(e,r){this[t]=e,this[t+n]=r,t++}var t=0,n=0;return function(r){n=r.size,t=0;var o=new Array(2*r.size);return r.forEach(e,o),o}}(),h=function(e){for(var t=new a,n=e.length/2|0,r=0;r<n;++r){var o=e[n+r],i=e[r];t.set(o,i)}return t};u.inherits(i,n),i.prototype._init=function(){},i.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;if(n>=this._length){var r;if(this._isMap)r=h(this._values);else{r={};for(var o=this.length(),i=0,s=this.length();i<s;++i)r[this._values[i+o]]=this._values[i]}return this._resolve(r),!0}return!1},i.prototype.shouldCopyValues=function(){return!1},i.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return s(this)},t.props=function(e){return s(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,n){function r(e,t,n,r,o){for(var i=0;i<o;++i)n[i+r]=e[i+t],e[i+t]=void 0}function o(e){this._capacity=e,this._length=0,this._front=0}o.prototype._willBeOverCapacity=function(e){return this._capacity<e},o.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1);var n=this._front+t&this._capacity-1;this[n]=e,this._length=t+1},o.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var o=this._front+r-3;this._checkCapacity(r);var i=this._capacity-1;this[o+0&i]=e,this[o+1&i]=t,this[o+2&i]=n,this._length=r},o.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},o.prototype.length=function(){return this._length},o.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},o.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;var n=this._front,o=this._length,i=n+o&t-1;r(this,0,this,t,i)},t.exports=o},{}],27:[function(e,t,n){t.exports=function(t,n,r,o){function i(e,i){var u=r(e);if(u instanceof t)return a(u);if(e=s.asArray(e),null===e)return o("expecting an array or an iterable object but got "+s.classString(e));var l=new t(n);void 0!==i&&l._propagateFrom(i,3);for(var c=l._fulfill,p=l._reject,h=0,d=e.length;h<d;++h){var f=e[h];(void 0!==f||h in e)&&t.cast(f)._then(c,p,void 0,l,null)}return l}var s=e("./util"),a=function(e){return e.then(function(t){return i(t,e)})};t.race=function(e){return i(e,void 0)},t.prototype.race=function(){return i(this,void 0)}}},{"./util":36}],28:[function(e,t,n){t.exports=function(t,n,r,o,i,s){function a(e,n,r,o){this.constructor$(e);var s=h();this._fn=null===s?n:d.domainBind(s,n),void 0!==r&&(r=t.resolve(r),r._attachCancellationCallback(this)),this._initialValue=r,this._currentCancellable=null,o===i?this._eachValues=Array(this._length):0===o?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function u(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function l(e,t,n,o){if("function"!=typeof t)return r("expecting a function but got "+d.classString(t));
var i=new a(e,t,n,o);return i.promise()}function c(e){this.accum=e,this.array._gotAccum(e);var n=o(this.value,this.array._promise);return n instanceof t?(this.array._currentCancellable=n,n._then(p,void 0,void 0,this,void 0)):p.call(this,n)}function p(e){var n=this.array,r=n._promise,o=f(n._fn);r._pushContext();var i;i=void 0!==n._eachValues?o.call(r._boundValue(),e,this.index,this.length):o.call(r._boundValue(),this.accum,e,this.index,this.length),i instanceof t&&(n._currentCancellable=i);var a=r._popContext();return s.checkForgottenReturns(i,a,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),i}var h=t._getDomain,d=e("./util"),f=d.tryCatch;d.inherits(a,n),a.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==i&&this._eachValues.push(e)},a.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},a.prototype._init=function(){},a.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},a.prototype.shouldCopyValues=function(){return!1},a.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},a.prototype._resultCancelled=function(e){return e===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel()))},a.prototype._iterate=function(e){this._values=e;var n,r,o=e.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=t.resolve(e[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<o;++r){var i={accum:null,value:e[r],index:r,length:o,array:this};n=n._then(c,void 0,void 0,i,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(u,u,void 0,n,this)},t.prototype.reduce=function(e,t){return l(this,e,t,null)},t.reduce=function(e,t,n,r){return l(e,t,n,r)}}},{"./util":36}],29:[function(n,r,o){var i,s=n("./util"),a=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},u=s.getNativePromise();if(s.isNode&&"undefined"==typeof MutationObserver){var l=global.setImmediate,c=process.nextTick;i=s.isRecentNode?function(e){l.call(global,e)}:function(e){c.call(process,e)}}else if("function"==typeof u&&"function"==typeof u.resolve){var p=u.resolve();i=function(e){p.then(e)}}else i="undefined"==typeof MutationObserver||"undefined"!=typeof e&&e.navigator&&(e.navigator.standalone||e.cordova)?"undefined"!=typeof setImmediate?function(e){setImmediate(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:a:function(){var e=t.createElement("div"),n={attributes:!0},r=!1,o=t.createElement("div"),i=new MutationObserver(function(){e.classList.toggle("foo"),r=!1});i.observe(o,n);var s=function(){r||(r=!0,o.classList.toggle("foo"))};return function(t){var r=new MutationObserver(function(){r.disconnect(),t()});r.observe(e,n),s()}}();r.exports=i},{"./util":36}],30:[function(e,t,n){t.exports=function(t,n,r){function o(e){this.constructor$(e)}var i=t.PromiseInspection,s=e("./util");s.inherits(o,n),o.prototype._promiseResolved=function(e,t){this._values[e]=t;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(e,t){var n=new i;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},o.prototype._promiseRejected=function(e,t){var n=new i;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},t.settle=function(e){return r.deprecated(".settle()",".reflect()"),new o(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,n){t.exports=function(t,n,r){function o(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function i(e,t){if((0|t)!==t||t<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new o(e),i=n.promise();return n.setHowMany(t),n.init(),i}var s=e("./util"),a=e("./errors").RangeError,u=e("./errors").AggregateError,l=s.isArray,c={};s.inherits(o,n),o.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var e=l(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},o.prototype.init=function(){this._initialized=!0,this._init()},o.prototype.setUnwrap=function(){this._unwrap=!0},o.prototype.howMany=function(){return this._howMany},o.prototype.setHowMany=function(e){this._howMany=e},o.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},o.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},o.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(c),this._checkOutcome())},o.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new u,t=this.length();t<this._values.length;++t)this._values[t]!==c&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},o.prototype._fulfilled=function(){return this._totalResolved},o.prototype._rejected=function(){return this._values.length-this.length()},o.prototype._addRejected=function(e){this._values.push(e)},o.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},o.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},o.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new a(t)},o.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return i(e,t)},t.prototype.some=function(e){return i(this,e)},t._SomePromiseArray=o}},{"./errors":12,"./util":36}],32:[function(e,t,n){t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},o=t.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},i=t.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},s=t.prototype.isPending=function(){return 0===(50397184&this._bitField)},a=t.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},e.prototype.isPending=function(){return s.call(this._target())},e.prototype.isRejected=function(){return i.call(this._target())},e.prototype.isFulfilled=function(){return o.call(this._target())},e.prototype.isResolved=function(){return a.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),r.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,n){t.exports=function(t,n){function r(e,r){if(c(e)){if(e instanceof t)return e;var o=i(e);if(o===l){r&&r._pushContext();var u=t.reject(o.e);return r&&r._popContext(),u}if("function"==typeof o){if(s(e)){var u=new t(n);return e._then(u._fulfill,u._reject,void 0,u,null),u}return a(e,o,r)}}return e}function o(e){return e.then}function i(e){try{return o(e)}catch(t){return l.e=t,l}}function s(e){try{return p.call(e,"_promise0")}catch(t){return!1}}function a(e,r,o){function i(e){a&&(a._resolveCallback(e),a=null)}function s(e){a&&(a._rejectCallback(e,p,!0),a=null)}var a=new t(n),c=a;o&&o._pushContext(),a._captureStackTrace(),o&&o._popContext();var p=!0,h=u.tryCatch(r).call(e,i,s);return p=!1,a&&h===l&&(a._rejectCallback(h.e,!0,!0),a=null),c}var u=e("./util"),l=u.errorObj,c=u.isObject,p={}.hasOwnProperty;return r}},{"./util":36}],34:[function(e,t,n){t.exports=function(t,n,r){function o(e){this.handle=e}function i(e){return clearTimeout(this.handle),e}function s(e){throw clearTimeout(this.handle),e}var a=e("./util"),u=t.TimeoutError;o.prototype._resultCancelled=function(){clearTimeout(this.handle)};var l=function(e){return c(+this).thenReturn(e)},c=t.delay=function(e,i){var s,a;return void 0!==i?(s=t.resolve(i)._then(l,null,null,e,void 0),r.cancellation()&&i instanceof t&&s._setOnCancel(i)):(s=new t(n),a=setTimeout(function(){s._fulfill()},+e),r.cancellation()&&s._setOnCancel(new o(a)),s._captureStackTrace()),s._setAsyncGuaranteed(),s};t.prototype.delay=function(e){return c(e,this)};var p=function(e,t,n){var r;r="string"!=typeof t?t instanceof Error?t:new u("operation timed out"):new u(t),a.markAsOriginatingFromRejection(r),e._attachExtraTrace(r),e._reject(r),null!=n&&n.cancel()};t.prototype.timeout=function(e,t){e=+e;var n,a,u=new o(setTimeout(function(){n.isPending()&&p(n,t,a)},e));return r.cancellation()?(a=this.then(),n=a._then(i,s,void 0,u,void 0),n._setOnCancel(u)):n=this._then(i,s,void 0,u,void 0),n}}},{"./util":36}],35:[function(e,t,n){t.exports=function(t,n,r,o,i,s){function a(e){setTimeout(function(){throw e},0)}function u(e){var t=r(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}function l(e,n){function o(){if(s>=l)return c._fulfill();var i=u(e[s++]);if(i instanceof t&&i._isDisposable()){try{i=r(i._getDisposer().tryDispose(n),e.promise)}catch(p){return a(p)}if(i instanceof t)return i._then(o,a,null,null,null)}o()}var s=0,l=e.length,c=new t(i);return o(),c}function c(e,t,n){this._data=e,this._promise=t,this._context=n}function p(e,t,n){this.constructor$(e,t,n)}function h(e){return c.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function d(e){this.length=e,this.promise=null,this[e-1]=null}var f=e("./util"),_=e("./errors").TypeError,m=e("./util").inherits,g=f.errorObj,y=f.tryCatch,v={};c.prototype.data=function(){return this._data},c.prototype.promise=function(){return this._promise},c.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():v},c.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=t!==v?this.doDispose(t,e):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},c.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},m(p,c),p.prototype.doDispose=function(e,t){var n=this.data();return n.call(e,e,t)},d.prototype._resultCancelled=function(){for(var e=this.length,n=0;n<e;++n){var r=this[n];r instanceof t&&r.cancel()}},t.using=function(){var e=arguments.length;if(e<2)return n("you must pass at least 2 arguments to Promise.using");var o=arguments[e-1];if("function"!=typeof o)return n("expecting a function but got "+f.classString(o));var i,a=!0;2===e&&Array.isArray(arguments[0])?(i=arguments[0],e=i.length,a=!1):(i=arguments,e--);for(var u=new d(e),p=0;p<e;++p){var _=i[p];if(c.isDisposer(_)){var m=_;_=_.promise(),_._setDisposable(m)}else{var v=r(_);v instanceof t&&(_=v._then(h,null,null,{resources:u,index:p},void 0))}u[p]=_}for(var b=new Array(u.length),p=0;p<b.length;++p)b[p]=t.resolve(u[p]).reflect();var w=t.all(b).then(function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return g.e=n.error(),g;if(!n.isFulfilled())return void w.cancel();e[t]=n.value()}C._pushContext(),o=y(o);var r=a?o.apply(void 0,e):o(e),i=C._popContext();return s.checkForgottenReturns(r,i,"Promise.using",C),r}),C=w.lastly(function(){var e=new t.PromiseInspection(w);return l(u,e)});return u.promise=C,C._setOnCancel(u),C},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new p(e,this,o());throw new _}}},{"./errors":12,"./util":36}],36:[function(t,n,r){function o(){try{var e=x;return x=null,e.apply(this,arguments)}catch(t){return O.e=t,O}}function s(e){return x=e,o}function a(e){return null==e||e===!0||e===!1||"string"==typeof e||"number"==typeof e}function u(e){return"function"==typeof e||"object"==typeof e&&null!==e}function l(e){return a(e)?new Error(y(e)):e}function c(e,t){var n,r=e.length,o=new Array(r+1);for(n=0;n<r;++n)o[n]=e[n];return o[n]=t,o}function p(e,t,n){if(!T.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var r=Object.getOwnPropertyDescriptor(e,t);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function h(e,t,n){if(a(e))return e;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return T.defineProperty(e,t,r),e}function d(e){throw e}function f(e){try{if("function"==typeof e){var t=T.names(e.prototype),n=T.isES5&&t.length>1,r=t.length>0&&!(1===t.length&&"constructor"===t[0]),o=D.test(e+"")&&T.names(e).length>0;if(n||r||o)return!0}return!1}catch(i){return!1}}function _(e){function t(){}t.prototype=e;for(var n=8;n--;)new t;return e}function m(e){return F.test(e)}function g(e,t,n){for(var r=new Array(e),o=0;o<e;++o)r[o]=t+o+n;return r}function y(e){try{return e+""}catch(t){return"[no string representation]"}}function v(e){return null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function b(e){try{h(e,"isOperational",!0)}catch(t){}}function w(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||e.isOperational===!0)}function C(e){return v(e)&&T.propertyIsWritable(e,"stack")}function S(e){return{}.toString.call(e)}function A(e,t,n){for(var r=T.names(e),o=0;o<r.length;++o){var i=r[o];if(n(i))try{T.defineProperty(t,i,T.getDescriptor(e,i))}catch(s){}}}function E(e){return L?process.env[e]:void 0}function k(){if("function"==typeof i)try{var e=new i(function(){});if("[object Promise]"==={}.toString.call(e))return i}catch(t){}}function M(e,t){return e.bind(t)}var T=t("./es5"),P="undefined"==typeof navigator,O={e:{}},x,I="undefined"!=typeof self?self:"undefined"!=typeof e?e:"undefined"!=typeof global?global:void 0!==this?this:null,R=function(e,t){function n(){this.constructor=e,this.constructor$=t;for(var n in t.prototype)r.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}var r={}.hasOwnProperty;return n.prototype=t.prototype,e.prototype=new n,e.prototype},N=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(T.isES5){var n=Object.getOwnPropertyNames;return function(e){for(var r=[],o=Object.create(null);null!=e&&!t(e);){var i;try{i=n(e)}catch(s){return r}for(var a=0;a<i.length;++a){var u=i[a];if(!o[u]){o[u]=!0;var l=Object.getOwnPropertyDescriptor(e,u);null!=l&&null==l.get&&null==l.set&&r.push(u)}}e=T.getPrototypeOf(e)}return r}}var r={}.hasOwnProperty;return function(n){if(t(n))return[];var o=[];e:for(var i in n)if(r.call(n,i))o.push(i);else{for(var s=0;s<e.length;++s)if(r.call(e[s],i))continue e;o.push(i)}return o}}(),D=/this\s*\.\s*\S+\s*=/,F=/^[a-z$_][a-z$_0-9]*$/i,j=function(){return"stack"in new Error?function(e){return C(e)?e:new Error(y(e))}:function(e){if(C(e))return e;try{throw new Error(y(e))}catch(t){return t}}}(),$=function(e){return T.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var B="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],r=e[Symbol.iterator]();!(t=r.next()).done;)n.push(t.value);return n};$=function(e){return T.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?B(e):null}}var U="undefined"!=typeof process&&"[object process]"===S(process).toLowerCase(),L="undefined"!=typeof process&&"undefined"!=typeof process.env,z={isClass:f,isIdentifier:m,inheritedDataKeys:N,getDataPropertyOrDefault:p,thrower:d,isArray:T.isArray,asArray:$,notEnumerableProp:h,isPrimitive:a,isObject:u,isError:v,canEvaluate:P,errorObj:O,tryCatch:s,inherits:R,withAppended:c,maybeWrapAsError:l,toFastProperties:_,filledRange:g,toString:y,canAttachTrace:C,ensureErrorObject:j,originatesFromRejection:w,markAsOriginatingFromRejection:b,classString:S,copyDescriptors:A,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:U,hasEnvVariables:L,env:E,global:I,getNativePromise:k,domainBind:M};z.isRecentNode=z.isNode&&function(){var e=process.versions.node.split(".").map(Number);return 0===e[0]&&e[1]>10||e[0]>0}(),z.isNode&&z.toFastProperties(process);try{throw new Error}catch(H){z.lastLineError=H}n.exports=z},{"./es5":13}]},{},[4])(4)})}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;n.$=function(){function t(e){return null==e?String(e):K[X.call(e)]||"object"}function n(e){return"function"==t(e)}function r(e){return null!=e&&e==e.window}function o(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function i(e){return"object"==t(e)}function s(e){return i(e)&&!r(e)&&Object.getPrototypeOf(e)==Object.prototype}function a(e){var t=!!e&&"length"in e&&e.length,n=E.type(e);return"function"!=n&&!r(e)&&("array"==n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function u(e){return x.call(e,function(e){return null!=e})}function l(e){return e.length>0?E.fn.concat.apply([],e):e}function c(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function p(e){return e in D?D[e]:D[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function h(e,t){return"number"!=typeof t||F[c(e)]?t:t+"px"}function d(e){var t,n;return N[e]||(t=R.createElement(e),R.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),N[e]=n),N[e]}function f(e){return"children"in e?I.call(e.children):E.map(e.childNodes,function(e){if(1==e.nodeType)return e})}function _(e,t){var n,r=e?e.length:0;for(n=0;n<r;n++)this[n]=e[n];this.length=r,this.selector=t||""}function m(e,t,n){for(A in t)n&&(s(t[A])||ee(t[A]))?(s(t[A])&&!s(e[A])&&(e[A]={}),ee(t[A])&&!ee(e[A])&&(e[A]=[]),m(e[A],t[A],n)):t[A]!==S&&(e[A]=t[A])}function g(e,t){return null==t?E(e):E(e).filter(t)}function y(e,t,r,o){return n(t)?t.call(e,r,o):t}function v(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function b(e,t){var n=e.className||"",r=n&&n.baseVal!==S;return t===S?r?n.baseVal:n:void(r?n.baseVal=t:e.className=t)}function w(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?E.parseJSON(e):e):e}catch(t){return e}}function C(e,t){t(e);for(var n=0,r=e.childNodes.length;n<r;n++)C(e.childNodes[n],t)}var S,A,E,k,M,T,P=[],O=P.concat,x=P.filter,I=P.slice,R=e.document,N={},D={},F={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},j=/^\s*<(\w+|!)[^>]*>/,$=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,B=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,U=/^(?:body|html)$/i,L=/([A-Z])/g,z=["val","css","html","text","data","width","height","offset"],H=["after","prepend","before","append"],V=R.createElement("table"),W=R.createElement("tr"),G={tr:R.createElement("tbody"),tbody:V,thead:V,tfoot:V,td:W,th:W,"*":R.createElement("div")},q=/complete|loaded|interactive/,Y=/^[\w-]*$/,K={},X=K.toString,J={},Z=R.createElement("div"),Q={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},ee=Array.isArray||function(e){return e instanceof Array};return J.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,o=e.parentNode,i=!o;return i&&(o=Z).appendChild(e),r=~J.qsa(o,t).indexOf(e),i&&Z.removeChild(e),r},M=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},T=function(e){return x.call(e,function(t,n){return e.indexOf(t)==n})},J.fragment=function(e,t,n){var r,o,i;return $.test(e)&&(r=E(R.createElement(RegExp.$1))),r||(e.replace&&(e=e.replace(B,"<$1></$2>")),t===S&&(t=j.test(e)&&RegExp.$1),t in G||(t="*"),i=G[t],i.innerHTML=""+e,r=E.each(I.call(i.childNodes),function(){i.removeChild(this)})),s(n)&&(o=E(r),E.each(n,function(e,t){z.indexOf(e)>-1?o[e](t):o.attr(e,t)})),r},J.Z=function(e,t){return new _(e,t)},J.isZ=function(e){return e instanceof J.Z},J.init=function(e,t){var r;if(!e)return J.Z();if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&j.test(e))r=J.fragment(e,RegExp.$1,t),e=null;else{if(t!==S)return E(t).find(e);r=J.qsa(R,e)}else{if(n(e))return E(R).ready(e);if(J.isZ(e))return e;if(ee(e))r=u(e);else if(i(e))r=[e],e=null;else if(j.test(e))r=J.fragment(e.trim(),RegExp.$1,t),e=null;else{if(t!==S)return E(t).find(e);r=J.qsa(R,e)}}return J.Z(r,e)},E=function(e,t){return J.init(e,t)},E.extend=function(e){var t,n=I.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach(function(n){m(e,n,t)}),e},J.qsa=function(e,t){var n,r="#"==t[0],o=!r&&"."==t[0],i=r||o?t.slice(1):t,s=Y.test(i);return e.getElementById&&s&&r?(n=e.getElementById(i))?[n]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:I.call(s&&!r&&e.getElementsByClassName?o?e.getElementsByClassName(i):e.getElementsByTagName(t):e.querySelectorAll(t))},E.contains=R.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},E.type=t,E.isFunction=n,E.isWindow=r,E.isArray=ee,E.isPlainObject=s,E.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},E.isNumeric=function(e){var t=Number(e),n=typeof e;return null!=e&&"boolean"!=n&&("string"!=n||e.length)&&!isNaN(t)&&isFinite(t)||!1},E.inArray=function(e,t,n){return P.indexOf.call(t,e,n)},E.camelCase=M,E.trim=function(e){return null==e?"":String.prototype.trim.call(e)},E.uuid=0,E.support={},E.expr={},E.noop=function(){},E.map=function(e,t){var n,r,o,i=[];if(a(e))for(r=0;r<e.length;r++)n=t(e[r],r),null!=n&&i.push(n);else for(o in e)n=t(e[o],o),null!=n&&i.push(n);return l(i)},E.each=function(e,t){var n,r;if(a(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(r in e)if(t.call(e[r],r,e[r])===!1)return e;return e},E.grep=function(e,t){return x.call(e,t)},e.JSON&&(E.parseJSON=JSON.parse),E.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){K["[object "+t+"]"]=t.toLowerCase()}),E.fn={constructor:J.Z,length:0,forEach:P.forEach,reduce:P.reduce,push:P.push,sort:P.sort,splice:P.splice,indexOf:P.indexOf,concat:function(){var e,t,n=[];for(e=0;e<arguments.length;e++)t=arguments[e],n[e]=J.isZ(t)?t.toArray():t;return O.apply(J.isZ(this)?this.toArray():this,n)},map:function(e){return E(E.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return E(I.apply(this,arguments))},ready:function(e){return q.test(R.readyState)&&R.body?e(E):R.addEventListener("DOMContentLoaded",function(){e(E)},!1),this},get:function(e){return e===S?I.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return P.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this},filter:function(e){return n(e)?this.not(this.not(e)):E(x.call(this,function(t){return J.matches(t,e)}))},add:function(e,t){return E(T(this.concat(E(e,t))))},is:function(e){return this.length>0&&J.matches(this[0],e)},not:function(e){var t=[];if(n(e)&&e.call!==S)this.each(function(n){e.call(this,n)||t.push(this)});else{var r="string"==typeof e?this.filter(e):a(e)&&n(e.item)?I.call(e):E(e);this.forEach(function(e){r.indexOf(e)<0&&t.push(e)})}return E(t)},has:function(e){return this.filter(function(){return i(e)?E.contains(this,e):E(this).find(e).size()})},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!i(e)?e:E(e)},last:function(){var e=this[this.length-1];return e&&!i(e)?e:E(e)},find:function(e){var t,n=this;return t=e?"object"==typeof e?E(e).filter(function(){var e=this;return P.some.call(n,function(t){return E.contains(t,e)})}):1==this.length?E(J.qsa(this[0],e)):this.map(function(){return J.qsa(this,e)}):E()},closest:function(e,t){var n=[],r="object"==typeof e&&E(e);return this.each(function(i,s){for(;s&&!(r?r.indexOf(s)>=0:J.matches(s,e));)s=s!==t&&!o(s)&&s.parentNode;s&&n.indexOf(s)<0&&n.push(s)}),E(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=E.map(n,function(e){if((e=e.parentNode)&&!o(e)&&t.indexOf(e)<0)return t.push(e),e});return g(t,e)},parent:function(e){return g(T(this.pluck("parentNode")),e)},children:function(e){return g(this.map(function(){return f(this)}),e)},contents:function(){return this.map(function(){return this.contentDocument||I.call(this.childNodes)})},siblings:function(e){return g(this.map(function(e,t){return x.call(f(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return E.map(this,function(t){return t[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=d(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=n(e);if(this[0]&&!t)var r=E(e).get(0),o=r.parentNode||this.length>1;return this.each(function(n){E(this).wrapAll(t?e.call(this,n):o?r.cloneNode(!0):r)})},wrapAll:function(e){if(this[0]){E(this[0]).before(e=E(e));for(var t;(t=e.children()).length;)e=t.first();E(e).append(this)}return this},wrapInner:function(e){var t=n(e);return this.each(function(n){var r=E(this),o=r.contents(),i=t?e.call(this,n):e;o.length?o.wrapAll(i):r.append(i)})},unwrap:function(){return this.parent().each(function(){E(this).replaceWith(E(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=E(this);(e===S?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(e){return E(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return E(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(t){var n=this.innerHTML;E(this).empty().append(y(this,e,t,n))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){var n=y(this,e,t,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this.pluck("textContent").join(""):null},attr:function(e,t){var n;return"string"!=typeof e||1 in arguments?this.each(function(n){if(1===this.nodeType)if(i(e))for(A in e)v(this,A,e[A]);else v(this,e,y(this,t,n,this.getAttribute(e)))}):0 in this&&1==this[0].nodeType&&null!=(n=this[0].getAttribute(e))?n:S},removeAttr:function(e){return this.each(function(){1===this.nodeType&&e.split(" ").forEach(function(e){v(this,e)},this)})},prop:function(e,t){return e=Q[e]||e,1 in arguments?this.each(function(n){this[e]=y(this,t,n,this[e])}):this[0]&&this[0][e]},removeProp:function(e){return e=Q[e]||e,this.each(function(){delete this[e]})},data:function(e,t){var n="data-"+e.replace(L,"-$1").toLowerCase(),r=1 in arguments?this.attr(n,t):this.attr(n);return null!==r?w(r):S},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each(function(t){this.value=y(this,e,t,this.value)})):this[0]&&(this[0].multiple?E(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var n=E(this),r=y(this,t,e,n.offset()),o=n.offsetParent().offset(),i={top:r.top-o.top,left:r.left-o.left};"static"==n.css("position")&&(i.position="relative"),n.css(i)});if(!this.length)return null;if(R.documentElement!==this[0]&&!E.contains(R.documentElement,this[0]))return{top:0,left:0};var n=this[0].getBoundingClientRect();return{left:n.left+e.pageXOffset,top:n.top+e.pageYOffset,width:Math.round(n.width),height:Math.round(n.height)}},css:function(e,n){if(arguments.length<2){var r=this[0];if("string"==typeof e){if(!r)return;return r.style[M(e)]||getComputedStyle(r,"").getPropertyValue(e)}if(ee(e)){if(!r)return;var o={},i=getComputedStyle(r,"");return E.each(e,function(e,t){o[t]=r.style[M(t)]||i.getPropertyValue(t)}),o}}var s="";if("string"==t(e))n||0===n?s=c(e)+":"+h(e,n):this.each(function(){this.style.removeProperty(c(e))});else for(A in e)e[A]||0===e[A]?s+=c(A)+":"+h(A,e[A])+";":this.each(function(){this.style.removeProperty(c(A))});return this.each(function(){this.style.cssText+=";"+s})},index:function(e){return e?this.indexOf(E(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&P.some.call(this,function(e){return this.test(b(e))},p(e))},addClass:function(e){return e?this.each(function(t){if("className"in this){k=[];var n=b(this),r=y(this,e,t,n);r.split(/\s+/g).forEach(function(e){E(this).hasClass(e)||k.push(e)},this),k.length&&b(this,n+(n?" ":"")+k.join(" "))}}):this},removeClass:function(e){return this.each(function(t){if("className"in this){if(e===S)return b(this,"");k=b(this),y(this,e,t,k).split(/\s+/g).forEach(function(e){k=k.replace(p(e)," ")}),b(this,k.trim())}})},toggleClass:function(e,t){return e?this.each(function(n){var r=E(this),o=y(this,e,n,b(this));o.split(/\s+/g).forEach(function(e){(t===S?!r.hasClass(e):t)?r.addClass(e):r.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===S?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===S?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),r=U.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(E(e).css("margin-top"))||0,n.left-=parseFloat(E(e).css("margin-left"))||0,r.top+=parseFloat(E(t[0]).css("border-top-width"))||0,r.left+=parseFloat(E(t[0]).css("border-left-width"))||0,{top:n.top-r.top,left:n.left-r.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||R.body;e&&!U.test(e.nodeName)&&"static"==E(e).css("position");)e=e.offsetParent;return e})}},E.fn.detach=E.fn.remove,["width","height"].forEach(function(e){var t=e.replace(/./,function(e){return e[0].toUpperCase()});E.fn[e]=function(n){var i,s=this[0];return n===S?r(s)?s["inner"+t]:o(s)?s.documentElement["scroll"+t]:(i=this.offset())&&i[e]:this.each(function(t){s=E(this),s.css(e,y(this,n,t,s[e]()))})}}),H.forEach(function(n,r){var o=r%2;E.fn[n]=function(){var n,i,s=E.map(arguments,function(e){
var r=[];return n=t(e),"array"==n?(e.forEach(function(e){return e.nodeType!==S?r.push(e):E.zepto.isZ(e)?r=r.concat(e.get()):void(r=r.concat(J.fragment(e)))}),r):"object"==n||null==e?e:J.fragment(e)}),a=this.length>1;return s.length<1?this:this.each(function(t,n){i=o?n:n.parentNode,n=0==r?n.nextSibling:1==r?n.firstChild:2==r?n:null;var u=E.contains(R.documentElement,i);s.forEach(function(t){if(a)t=t.cloneNode(!0);else if(!i)return E(t).remove();i.insertBefore(t,n),u&&C(t,function(t){if(!(null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src)){var n=t.ownerDocument?t.ownerDocument.defaultView:e;n.eval.call(n,t.innerHTML)}})})})},E.fn[o?n+"To":"insert"+(r?"Before":"After")]=function(e){return E(e)[n](this),this}}),J.Z.prototype=_.prototype=E.fn,J.uniq=T,J.deserializeValue=w,E.zepto=J,E}()}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;!function(n){function r(e){return e._zid||(e._zid=f++)}function o(e,t,n,o){if(t=i(t),t.ns)var a=s(t.ns);return(y[r(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||a.test(e.ns))&&(!n||r(e.fn)===r(n))&&(!o||e.sel==o)})}function i(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function s(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function a(e,t){return e.del&&!b&&e.e in w||!!t}function u(e){return C[e]||b&&w[e]||e}function l(e,o,s,l,c,h,f){var _=r(e),m=y[_]||(y[_]=[]);o.split(/\s/).forEach(function(r){if("ready"==r)return n(t).ready(s);var o=i(r);o.fn=s,o.sel=c,o.e in C&&(s=function(e){var t=e.relatedTarget;if(!t||t!==this&&!n.contains(this,t))return o.fn.apply(this,arguments)}),o.del=h;var _=h||s;o.proxy=function(t){if(t=p(t),!t.isImmediatePropagationStopped()){t.data=l;var n=_.apply(e,t._args==d?[t]:[t].concat(t._args));return n===!1&&(t.preventDefault(),t.stopPropagation()),n}},o.i=m.length,m.push(o),"addEventListener"in e&&e.addEventListener(u(o.e),o.proxy,a(o,f))})}function c(e,t,n,i,s){var l=r(e);(t||"").split(/\s/).forEach(function(t){o(e,t,n,i).forEach(function(t){delete y[l][t.i],"removeEventListener"in e&&e.removeEventListener(u(t.e),t.proxy,a(t,s))})})}function p(e,t){return!t&&e.isDefaultPrevented||(t||(t=e),n.each(k,function(n,r){var o=t[n];e[n]=function(){return this[r]=S,o&&o.apply(t,arguments)},e[r]=A}),(t.defaultPrevented!==d?t.defaultPrevented:"returnValue"in t?t.returnValue===!1:t.getPreventDefault&&t.getPreventDefault())&&(e.isDefaultPrevented=S)),e}function h(e){var t,n={originalEvent:e};for(t in e)E.test(t)||e[t]===d||(n[t]=e[t]);return p(n,e)}var d,f=1,_=Array.prototype.slice,m=n.isFunction,g=function(e){return"string"==typeof e},y={},v={},b="onfocusin"in e,w={focus:"focusin",blur:"focusout"},C={mouseenter:"mouseover",mouseleave:"mouseout"};v.click=v.mousedown=v.mouseup=v.mousemove="MouseEvents",n.event={add:l,remove:c},n.proxy=function(e,t){var o=2 in arguments&&_.call(arguments,2);if(m(e)){var i=function(){return e.apply(t,o?o.concat(_.call(arguments)):arguments)};return i._zid=r(e),i}if(g(t))return o?(o.unshift(e[t],e),n.proxy.apply(null,o)):n.proxy(e[t],e);throw new TypeError("expected function")},n.fn.bind=function(e,t,n){return this.on(e,t,n)},n.fn.unbind=function(e,t){return this.off(e,t)},n.fn.one=function(e,t,n,r){return this.on(e,t,n,r,1)};var S=function(){return!0},A=function(){return!1},E=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,k={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};n.fn.delegate=function(e,t,n){return this.on(t,e,n)},n.fn.undelegate=function(e,t,n){return this.off(t,e,n)},n.fn.live=function(e,r){return n(t.body).delegate(this.selector,e,r),this},n.fn.die=function(e,r){return n(t.body).undelegate(this.selector,e,r),this},n.fn.on=function(e,t,r,o,i){var s,a,u=this;return e&&!g(e)?(n.each(e,function(e,n){u.on(e,t,r,n,i)}),u):(g(t)||m(o)||o===!1||(o=r,r=t,t=d),o!==d&&r!==!1||(o=r,r=d),o===!1&&(o=A),u.each(function(u,p){i&&(s=function(e){return c(p,e.type,o),o.apply(this,arguments)}),t&&(a=function(e){var r,i=n(e.target).closest(t,p).get(0);if(i&&i!==p)return r=n.extend(h(e),{currentTarget:i,liveFired:p}),(s||o).apply(i,[r].concat(_.call(arguments,1)))}),l(p,e,o,r,t,a||s)}))},n.fn.off=function(e,t,r){var o=this;return e&&!g(e)?(n.each(e,function(e,n){o.off(e,t,n)}),o):(g(t)||m(r)||r===!1||(r=t,t=d),r===!1&&(r=A),o.each(function(){c(this,e,r,t)}))},n.fn.trigger=function(e,t){return e=g(e)||n.isPlainObject(e)?n.Event(e):p(e),e._args=t,this.each(function(){e.type in w&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):n(this).triggerHandler(e,t)})},n.fn.triggerHandler=function(e,t){var r,i;return this.each(function(s,a){r=h(g(e)?n.Event(e):e),r._args=t,r.target=a,n.each(o(a,e.type||e),function(e,t){if(i=t.proxy(r),r.isImmediatePropagationStopped())return!1})}),i},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){n.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),n.Event=function(e,n){g(e)||(n=e,e=n.type);var r=t.createEvent(v[e]||"Events"),o=!0;if(n)for(var i in n)"bubbles"==i?o=!!n[i]:r[i]=n[i];return r.initEvent(e,o,!0),p(r)}}(n.$)}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;!function(t){function n(e,n,r){var o=t.Event(n);return t(e).trigger(o,r),!o.isDefaultPrevented()}function r(e,t,r,o){if(e.global)return n(t||b,r,o)}function o(e){e.global&&0===t.active++&&r(e,null,"ajaxStart")}function i(e){e.global&&!--t.active&&r(e,null,"ajaxStop")}function s(e,t){var n=t.context;return t.beforeSend.call(n,e,t)!==!1&&r(t,n,"ajaxBeforeSend",[e,t])!==!1&&void r(t,n,"ajaxSend",[e,t])}function a(e,t,n,o){var i=n.context,s="success";n.success.call(i,e,s,t),o&&o.resolveWith(i,[e,s,t]),r(n,i,"ajaxSuccess",[t,n,e]),l(s,t,n)}function u(e,t,n,o,i){var s=o.context;o.error.call(s,n,t,e),i&&i.rejectWith(s,[n,t,e]),r(o,s,"ajaxError",[n,o,e||t]),l(t,n,o)}function l(e,t,n){var o=n.context;n.complete.call(o,t,e),r(n,o,"ajaxComplete",[t,n]),i(n)}function c(e,t,n){if(n.dataFilter==p)return e;var r=n.context;return n.dataFilter.call(r,e,t)}function p(){}function h(e){return e&&(e=e.split(";",2)[0]),e&&(e==E?"html":e==A?"json":C.test(e)?"script":S.test(e)&&"xml")||"text"}function d(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function f(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()&&"jsonp"!=e.dataType||(e.url=d(e.url,e.data),e.data=void 0)}function _(e,n,r,o){return t.isFunction(n)&&(o=r,r=n,n=void 0),t.isFunction(r)||(o=r,r=void 0),{url:e,data:n,success:r,dataType:o}}function m(e,n,r,o){var i,s=t.isArray(n),a=t.isPlainObject(n);t.each(n,function(n,u){i=t.type(u),o&&(n=r?o:o+"["+(a||"object"==i||"array"==i?n:"")+"]"),!o&&s?e.add(u.name,u.value):"array"==i||!r&&"object"==i?m(e,u,r,n):e.add(n,u)})}var g,y,v=+new Date,b=e.document,w=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,C=/^(?:text|application)\/javascript/i,S=/^(?:text|application)\/xml/i,A="application/json",E="text/html",k=/^\s*$/,M=b.createElement("a");M.href=e.location.href,t.active=0,t.ajaxJSONP=function(n,r){if(!("type"in n))return t.ajax(n);var o,i,l=n.jsonpCallback,c=(t.isFunction(l)?l():l)||"Zepto"+v++,p=b.createElement("script"),h=e[c],d=function(e){t(p).triggerHandler("error",e||"abort")},f={abort:d};return r&&r.promise(f),t(p).on("load error",function(s,l){clearTimeout(i),t(p).off().remove(),"error"!=s.type&&o?a(o[0],f,n,r):u(null,l||"error",f,n,r),e[c]=h,o&&t.isFunction(h)&&h(o[0]),h=o=void 0}),s(f,n)===!1?(d("abort"),f):(e[c]=function(){o=arguments},p.src=n.url.replace(/\?(.+)=\?/,"?$1="+c),b.head.appendChild(p),n.timeout>0&&(i=setTimeout(function(){d("timeout")},n.timeout)),f)},t.ajaxSettings={type:"GET",beforeSend:p,success:p,error:p,complete:p,context:null,global:!0,xhr:function(){return new e.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:A,xml:"application/xml, text/xml",html:E,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:p},t.ajax=function(n){var r,i,l=t.extend({},n||{}),_=t.Deferred&&t.Deferred();for(g in t.ajaxSettings)void 0===l[g]&&(l[g]=t.ajaxSettings[g]);o(l),l.crossDomain||(r=b.createElement("a"),r.href=l.url,r.href=r.href,l.crossDomain=M.protocol+"//"+M.host!=r.protocol+"//"+r.host),l.url||(l.url=e.location.toString()),(i=l.url.indexOf("#"))>-1&&(l.url=l.url.slice(0,i)),f(l);var m=l.dataType,v=/\?.+=\?/.test(l.url);if(v&&(m="jsonp"),l.cache!==!1&&(n&&n.cache===!0||"script"!=m&&"jsonp"!=m)||(l.url=d(l.url,"_="+Date.now())),"jsonp"==m)return v||(l.url=d(l.url,l.jsonp?l.jsonp+"=?":l.jsonp===!1?"":"callback=?")),t.ajaxJSONP(l,_);var w,C=l.accepts[m],S={},A=function(e,t){S[e.toLowerCase()]=[e,t]},E=/^([\w-]+:)\/\//.test(l.url)?RegExp.$1:e.location.protocol,T=l.xhr(),P=T.setRequestHeader;if(_&&_.promise(T),l.crossDomain||A("X-Requested-With","XMLHttpRequest"),A("Accept",C||"*/*"),(C=l.mimeType||C)&&(C.indexOf(",")>-1&&(C=C.split(",",2)[0]),T.overrideMimeType&&T.overrideMimeType(C)),(l.contentType||l.contentType!==!1&&l.data&&"GET"!=l.type.toUpperCase())&&A("Content-Type",l.contentType||"application/x-www-form-urlencoded"),l.headers)for(y in l.headers)A(y,l.headers[y]);if(T.setRequestHeader=A,T.onreadystatechange=function(){if(4==T.readyState){T.onreadystatechange=p,clearTimeout(w);var e,n=!1;if(T.status>=200&&T.status<300||304==T.status||0==T.status&&"file:"==E){if(m=m||h(l.mimeType||T.getResponseHeader("content-type")),"arraybuffer"==T.responseType||"blob"==T.responseType)e=T.response;else{e=T.responseText;try{e=c(e,m,l),"script"==m?(0,eval)(e):"xml"==m?e=T.responseXML:"json"==m&&(e=k.test(e)?null:t.parseJSON(e))}catch(r){n=r}if(n)return u(n,"parsererror",T,l,_)}a(e,T,l,_)}else u(T.statusText||null,T.status?"error":"abort",T,l,_)}},s(T,l)===!1)return T.abort(),u(null,"abort",T,l,_),T;var O=!("async"in l)||l.async;if(T.open(l.type,l.url,O,l.username,l.password),l.xhrFields)for(y in l.xhrFields)T[y]=l.xhrFields[y];for(y in S)P.apply(T,S[y]);return l.timeout>0&&(w=setTimeout(function(){T.onreadystatechange=p,T.abort(),u(null,"timeout",T,l,_)},l.timeout)),T.send(l.data?l.data:null),T},t.get=function(){return t.ajax(_.apply(null,arguments))},t.post=function(){var e=_.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=_.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,n,r){if(!this.length)return this;var o,i=this,s=e.split(/\s/),a=_(e,n,r),u=a.success;return s.length>1&&(a.url=s[0],o=s[1]),a.success=function(e){i.html(o?t("<div>").html(e.replace(w,"")).find(o):e),u&&u.apply(i,arguments)},t.ajax(a),this};var T=encodeURIComponent;t.param=function(e,n){var r=[];return r.add=function(e,n){t.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(T(e)+"="+T(n))},m(r,e,n),r.join("&").replace(/%20/g,"+")}}(n.$)}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;!function(e){e.fn.serializeArray=function(){var t,n,r=[],o=function(e){return e.forEach?e.forEach(o):void r.push({name:t,value:e})};return this[0]&&e.each(this[0].elements,function(r,i){n=i.type,t=i.name,t&&"fieldset"!=i.nodeName.toLowerCase()&&!i.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&"file"!=n&&("radio"!=n&&"checkbox"!=n||i.checked)&&o(e(i).val())}),r},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(0 in arguments)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(n.$)}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;!function(){try{getComputedStyle(void 0)}catch(t){var n=getComputedStyle;e.getComputedStyle=function(e,t){try{return n(e,t)}catch(r){return null}}}}()}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;!function(e){e.Callbacks=function(t){t=e.extend({},t);var n,r,o,i,s,a,u=[],l=!t.once&&[],c=function(e){for(n=t.memory&&e,r=!0,a=i||0,i=0,s=u.length,o=!0;u&&a<s;++a)if(u[a].apply(e[0],e[1])===!1&&t.stopOnFalse){n=!1;break}o=!1,u&&(l?l.length&&c(l.shift()):n?u.length=0:p.disable())},p={add:function(){if(u){var r=u.length,a=function(n){e.each(n,function(e,n){"function"==typeof n?t.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!=typeof n&&a(n)})};a(arguments),o?s=u.length:n&&(i=r,c(n))}return this},remove:function(){return u&&e.each(arguments,function(t,n){for(var r;(r=e.inArray(n,u,r))>-1;)u.splice(r,1),o&&(r<=s&&--s,r<=a&&--a)}),this},has:function(t){return!(!u||!(t?e.inArray(t,u)>-1:u.length))},empty:function(){return s=u.length=0,this},disable:function(){return u=l=n=void 0,this},disabled:function(){return!u},lock:function(){return l=void 0,n||p.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!u||r&&!l||(t=t||[],t=[e,t.slice?t.slice():t],o?l.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments)},fired:function(){return!!r}};return p}}(n.$)}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;!function(e){function t(n){var r=[["resolve","done",e.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",e.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",e.Callbacks({memory:1})]],o="pending",i={state:function(){return o},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var n=arguments;return t(function(t){e.each(r,function(r,o){var a=e.isFunction(n[r])&&n[r];s[o[1]](function(){var n=a&&a.apply(this,arguments);if(n&&e.isFunction(n.promise))n.promise().done(t.resolve).fail(t.reject).progress(t.notify);else{var r=this===i?t.promise():this,s=a?[n]:arguments;t[o[0]+"With"](r,s)}})}),n=null}).promise()},promise:function(t){return null!=t?e.extend(t,i):i}},s={};return e.each(r,function(e,t){var n=t[2],a=t[3];i[t[1]]=n.add,a&&n.add(function(){o=a},r[1^e][2].disable,r[2][2].lock),s[t[0]]=function(){return s[t[0]+"With"](this===s?i:this,arguments),this},s[t[0]+"With"]=n.fireWith}),i.promise(s),n&&n.call(s,s),s}var n=Array.prototype.slice;e.when=function(r){var o,i,s,a=n.call(arguments),u=a.length,l=0,c=1!==u||r&&e.isFunction(r.promise)?u:0,p=1===c?r:t(),h=function(e,t,r){return function(i){t[e]=this,r[e]=arguments.length>1?n.call(arguments):i,r===o?p.notifyWith(t,r):--c||p.resolveWith(t,r)}};if(u>1)for(o=new Array(u),i=new Array(u),s=new Array(u);l<u;++l)a[l]&&e.isFunction(a[l].promise)?a[l].promise().done(h(l,s,a)).fail(p.reject).progress(h(l,i,o)):--c;return c||p.resolveWith(s,a),p.promise()},e.Deferred=t}(n.$)}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;(function(){function e(e,t){return e.push.apply(e,t),e}function t(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function r(e){return function(t){return null==t?rt:t[e]}}function o(e){return function(t){return null==e?rt:e[t]}}function i(e,t,n,r,o){return o(e,function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)}),n}function s(e,t){return T(t,function(t){return e[t]})}function a(){return!1}function u(e,t){return function(n){return e(t(n))}}function l(e){return e instanceof c?e:new c(e)}function c(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t}function p(e,t,n,r){return e===rt||be(e,It[n])&&!Rt.call(r,n)?t:e}function h(e,t,n){var r=e[t];Rt.call(e,t)&&be(r,n)&&(n!==rt||t in e)||(e[t]=n)}function d(e){return Oe(e)?jt(e):{}}function f(e,t,n){if("function"!=typeof e)throw new TypeError(it);return setTimeout(function(){e.apply(rt,n)},t)}function _(e,t){var n=!0;return zt(e,function(e,r,o){return n=!!t(e,r,o)}),n}function m(e,t,n){for(var r=-1,o=e.length;++r<o;){var i=e[r],s=t(i);if(null!=s&&(a===rt?s===s&&!0:n(s,a)))var a=s,u=i}return u}function g(e,t){var n=[];return zt(e,function(e,r,o){t(e,r,o)&&n.push(e)}),n}function y(t,n,r,o,i){var s=-1,a=t.length;for(r||(r=q),i||(i=[]);++s<a;){var u=t[s];n>0&&r(u)?n>1?y(u,n-1,r,o,i):e(i,u):o||(i[i.length]=u)}return i}function v(e,t){return e&&Ht(e,t,on)}function b(e,t){return g(t,function(t){return Te(e[t])})}function w(e,t){return e>t}function C(e){return xe(e)&&Dt.call(e)==_t}function S(e,t,n,r,o){return e===t||(null==e||null==t||!Oe(e)&&!xe(t)?e!==e&&t!==t:A(e,t,S,n,r,o))}function A(e,t,n,r,o,i){var s=Kt(e),u=Kt(t),l=dt,c=dt;s||(l=Dt.call(e),l=l==ht?bt:l),u||(c=Dt.call(t),c=c==ht?bt:c);var p=l==bt&&!a(e),h=c==bt&&!a(t),d=l==c;i||(i=[]);var f=Wt(i,function(t){return t[0]==e}),_=Wt(i,function(e){return e[0]==t});if(f&&_)return f[1]==t;if(i.push([e,t]),i.push([t,e]),d&&!p){var m=s?V(e,t,n,r,o,i):W(e,t,l,n,r,o,i);return i.pop(),m}if(!(o&lt)){var g=p&&Rt.call(e,"__wrapped__"),y=h&&Rt.call(t,"__wrapped__");if(g||y){var v=g?e.value():e,b=y?t.value():t,m=n(v,b,r,o,i);return i.pop(),m}}if(!d)return!1;var m=G(e,t,n,r,o,i);return i.pop(),m}function E(e){return Oe(e)&&Dt.call(e)==wt}function k(e){return"function"==typeof e?e:null==e?Ve:("object"==typeof e?P:r)(e)}function M(e,t){return e<t}function T(e,t){var n=-1,r=Ce(e)?Array(e.length):[];return zt(e,function(e,o,i){r[++n]=t(e,o,i)}),r}function P(e){var t=Ut(e);return function(n){var r=t.length;if(null==n)return!r;for(n=Object(n);r--;){var o=t[r];if(!(o in n&&S(e[o],n[o],rt,ut|lt)))return!1}return!0}}function O(e,t){return e=Object(e),he(t,function(t,n){return n in e&&(t[n]=e[n]),t},{})}function x(e,t){return t=Lt(t===rt?e.length-1:t,0),function(){for(var n=arguments,r=-1,o=Lt(n.length-t,0),i=Array(o);++r<o;)i[r]=n[t+r];r=-1;for(var s=Array(t+1);++r<t;)s[r]=n[r];return s[t]=i,e.apply(this,s)}}function I(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),n=n>o?o:n,n<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i}function R(e){return I(e,0,e.length)}function N(e,t){var n;return zt(e,function(e,r,o){return n=t(e,r,o),!n}),!!n}function D(t,n){var r=t;return he(n,function(t,n){return n.func.apply(n.thisArg,e([t],n.args))},r)}function F(e,t){if(e!==t){var n=e!==rt,r=null===e,o=e===e,i=!1,s=t!==rt,a=null===t,u=t===t,l=!1;if(!a&&!l&&!i&&e>t||i&&s&&u&&!a&&!l||r&&s&&u||!n&&u||!o)return 1;if(!r&&!i&&!l&&e<t||l&&n&&o&&!r&&!i||a&&n&&o||!s&&o||!u)return-1}return 0}function j(e,t,n,r){n||(n={});for(var o=-1,i=t.length;++o<i;){var s=t[o],a=r?r(n[s],e[s],s,n,e):rt;h(n,s,a===rt?e[s]:a)}return n}function $(e){return x(function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:rt;for(i=e.length>3&&"function"==typeof i?(o--,i):rt,t=Object(t);++r<o;){var s=n[r];s&&e(t,s,r,i)}return t})}function B(e,t){return function(n,r){if(null==n)return n;if(!Ce(n))return e(n,r);for(var o=n.length,i=t?o:-1,s=Object(n);(t?i--:++i<o)&&r(s[i],i,s)!==!1;);return n}}function U(e){return function(t,n,r){for(var o=-1,i=Object(t),s=r(t),a=s.length;a--;){var u=s[e?a:++o];if(n(i[u],u,i)===!1)break}return t}}function L(e){return function(){var t=arguments,n=d(e.prototype),r=e.apply(n,t);return Oe(r)?r:n}}function z(e){return function(t,n,r){var o=Object(t);if(!Ce(t)){var i=k(n,3);t=on(t),n=function(e){return i(o[e],e,o)}}var s=e(t,n,r);return s>-1?o[i?t[s]:s]:rt}}function H(e,t,n,r){function o(){for(var t=-1,a=arguments.length,u=-1,l=r.length,c=Array(l+a),p=this&&this!==Tt&&this instanceof o?s:e;++u<l;)c[u]=r[u];for(;a--;)c[u++]=arguments[++t];return p.apply(i?n:this,c)}if("function"!=typeof e)throw new TypeError(it);var i=t&st,s=L(e);return o}function V(e,t,n,r,o,i){var s=o&lt,a=e.length,u=t.length;if(a!=u&&!(s&&u>a))return!1;for(var l=-1,c=!0,p=o&ut?[]:rt;++l<a;){var h,d=e[l],f=t[l];if(h!==rt){if(h)continue;c=!1;break}if(p){if(!N(t,function(e,t){if(!te(p,t)&&(d===e||n(d,e,r,o,i)))return p.push(t)})){c=!1;break}}else if(d!==f&&!n(d,f,r,o,i)){c=!1;break}}return c}function W(e,t,n,r,o,i,s){switch(n){case ft:case _t:case vt:return be(+e,+t);case mt:return e.name==t.name&&e.message==t.message;case wt:case Ct:return e==t+""}return!1}function G(e,t,n,r,o,i){var s=o&lt,a=on(e),u=a.length,l=on(t),c=l.length;if(u!=c&&!s)return!1;for(var p=u;p--;){var h=a[p];if(!(s?h in t:Rt.call(t,h)))return!1}for(var d=!0,f=s;++p<u;){h=a[p];var _,m=e[h],g=t[h];if(!(_===rt?m===g||n(m,g,r,o,i):_)){d=!1;break}f||(f="constructor"==h)}if(d&&!f){var y=e.constructor,v=t.constructor;y!=v&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v)&&(d=!1)}return d}function q(e){return Kt(e)||we(e)}function Y(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}function K(e){return g(e,Boolean)}function X(){for(var t=arguments.length,n=Array(t?t-1:0),r=arguments[0],o=t;o--;)n[o-1]=arguments[o];return t?e(Kt(r)?R(r):[r],y(n,1)):[]}function J(e,n,r){var o=e?e.length:0;if(!o)return-1;var i=null==r?0:Zt(r);return i<0&&(i=Lt(o+i,0)),t(e,k(n,3),i)}function Z(e){var t=e?e.length:0;return t?y(e,1):[]}function Q(e){var t=e?e.length:0;return t?y(e,ct):[]}function ee(e){return e&&e.length?e[0]:rt}function te(e,t,n){var r=e?e.length:0;n="number"==typeof n?n<0?Lt(r+n,0):n:0;for(var o=(n||0)-1,i=t===t;++o<r;){var s=e[o];if(i?s===t:s!==s)return o}return-1}function ne(e){var t=e?e.length:0;return t?e[t-1]:rt}function re(e,t,n){var r=e?e.length:0;return t=null==t?0:+t,n=n===rt?r:+n,r?I(e,t,n):[]}function oe(e){var t=l(e);return t.__chain__=!0,t}function ie(e,t){return t(e),e}function se(e,t){return t(e)}function ae(){return D(this.__wrapped__,this.__actions__)}function ue(e,t,n){return t=n?rt:t,_(e,k(t))}function le(e,t){return g(e,k(t))}function ce(e,t){return zt(e,k(t))}function pe(e,t){return T(e,k(t))}function he(e,t,n){return i(e,k(t),n,arguments.length<3,zt)}function de(e){return null==e?0:(e=Ce(e)?e:Ut(e),e.length)}function fe(e,t,n){return t=n?rt:t,N(e,k(t))}function _e(e,t){var n=0;return t=k(t),T(T(e,function(e,r,o){return{value:e,index:n++,criteria:t(e,r,o)}}).sort(function(e,t){return F(e.criteria,t.criteria)||e.index-t.index}),r("value"))}function me(e,t){var n;if("function"!=typeof t)throw new TypeError(it);return e=Zt(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=rt),n}}function ge(e){if("function"!=typeof e)throw new TypeError(it);return function(){var t=arguments;return!e.apply(this,t)}}function ye(e){return me(2,e)}function ve(e){return Oe(e)?Kt(e)?R(e):j(e,Ut(e)):e}function be(e,t){return e===t||e!==e&&t!==t}function we(e){return Se(e)&&Rt.call(e,"callee")&&(!$t.call(e,"callee")||Dt.call(e)==ht)}function Ce(e){return null!=e&&Pe(e.length)&&!Te(e)}function Se(e){return xe(e)&&Ce(e)}function Ae(e){return e===!0||e===!1||xe(e)&&Dt.call(e)==ft}function Ee(e){return Ce(e)&&(Kt(e)||De(e)||Te(e.splice)||we(e))?!e.length:!Ut(e).length}function ke(e,t){return S(e,t)}function Me(e){return"number"==typeof e&&Bt(e)}function Te(e){var t=Oe(e)?Dt.call(e):"";return t==gt||t==yt}function Pe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=pt}function Oe(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function xe(e){return!!e&&"object"==typeof e}function Ie(e){return Ne(e)&&e!=+e}function Re(e){return null===e}function Ne(e){return"number"==typeof e||xe(e)&&Dt.call(e)==vt}function De(e){return"string"==typeof e||!Kt(e)&&xe(e)&&Dt.call(e)==Ct}function Fe(e){return e===rt}function je(e){return Ce(e)?e.length?R(e):[]:ze(e)}function $e(e){return"string"==typeof e?e:null==e?"":e+""}function Be(e,t){var n=d(e);return t?en(n,t):n}function Ue(e,t){return null!=e&&Rt.call(e,t)}function Le(e,t,n){var r=null==e?rt:e[t];return r===rt&&(r=n),Te(r)?r.call(e):r}function ze(e){return e?s(e,on(e)):[]}function He(e){return e=$e(e),e&&At.test(e)?e.replace(St,Ot):e}function Ve(e){return e}function We(e){return P(en({},e))}function Ge(t,n,r){var o=on(n),i=b(n,o);null!=r||Oe(n)&&(i.length||!o.length)||(r=n,n=t,t=this,i=b(n,on(n)));var s=!(Oe(r)&&"chain"in r&&!r.chain),a=Te(t);return zt(i,function(r){var o=n[r];t[r]=o,a&&(t.prototype[r]=function(){var n=this.__chain__;if(s||n){var r=t(this.__wrapped__),i=r.__actions__=R(this.__actions__);return i.push({func:o,args:arguments,thisArg:t}),r.__chain__=n,r}return o.apply(t,e([this.value()],arguments))})}),t}function qe(e,t,n){"__proto__"==t&&defineProperty?defineProperty(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Ye(){var e=l.iteratee||un;return e=e===un?k:e,arguments.length?e(arguments[0],arguments[1]):e}function Ke(e,t,n,r){for(var o=-1,i=null==e?0:e.length;++o<i;){var s=e[o];t(r,s,n(s),e)}return r}function Xe(e,t){return function(n,r){var o=Kt(n)?Ke:baseAggregator,i=t?t():{};return o(n,e,Ye(r,2),i)}}function Je(e,t){return null==e?e:Ht(e,Ye(t,3),sn)}function Ze(){return Tt._===this&&(Tt._=Ft),this}function Qe(){}function et(e){var t=++Nt;return $e(e)+t}function tt(e){return e&&e.length?m(e,Ve,w):rt}function nt(e){return e&&e.length?m(e,Ve,M):rt}var rt,ot="4.14.2",it="Expected a function",st=1,at=32,ut=1,lt=2,ct=1/0,pt=9007199254740991,ht="[object Arguments]",dt="[object Array]",ft="[object Boolean]",_t="[object Date]",mt="[object Error]",gt="[object Function]",yt="[object GeneratorFunction]",vt="[object Number]",bt="[object Object]",wt="[object RegExp]",Ct="[object String]",St=/[&<>"'`]/g,At=RegExp(St.source),Et={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},kt="object"==typeof global&&global&&global.Object===Object&&global,Mt="object"==typeof self&&self&&self.Object===Object&&self,Tt=kt||Mt||Function("return this")(),Pt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ot=(Pt&&"object"==typeof module&&module&&!module.nodeType&&module,o(Et)),xt=Array.prototype,It=Object.prototype,Rt=It.hasOwnProperty,Nt=0,Dt=It.toString,Ft=Tt._,jt=Object.create,$t=It.propertyIsEnumerable,Bt=Tt.isFinite,Ut=u(Object.keys,Object),Lt=Math.max;c.prototype=d(l.prototype),c.prototype.constructor=c;var zt=B(v),Ht=U(),Vt=String,Wt=z(J),Gt=x(function(e,t,n){return H(e,st|at,t,n)}),qt=x(function(e,t){return f(e,1,t)}),Yt=x(function(e,t,n){return f(e,Qt(t)||0,n)}),Kt=Array.isArray,Xt=C,Jt=E,Zt=Number,Qt=Number,en=$(function(e,t){j(t,Ut(t),e)}),tn=$(function(e,t){j(t,Y(t),e)}),nn=$(function(e,t,n,r){j(t,sn(t),e,r)}),rn=x(function(e){return e.push(rt,p),nn.apply(rt,e)}),on=Ut,sn=Y,an=x(function(e,t){return null==e?{}:O(e,T(y(t,1),Vt))}),un=k,ln=Xe(function(e,t,n){Rt.call(e,n)?e[n].push(t):qe(e,n,[t])});l.assignIn=tn,l.before=me,l.bind=Gt,l.chain=oe,l.compact=K,l.concat=X,l.create=Be,l.defaults=rn,l.defer=qt,l.delay=Yt,l.filter=le,l.flatten=Z,l.flattenDeep=Q,l.iteratee=un,l.keys=on,l.map=pe,l.matches=We,l.mixin=Ge,l.negate=ge,l.once=ye,l.pick=an,l.slice=re,l.sortBy=_e,l.tap=ie,l.thru=se,l.toArray=je,l.values=ze,l.groupBy=ln,l.forIn=Je,l.extend=tn,Ge(l,l),l.clone=ve,l.escape=He,l.every=ue,l.find=Wt,l.forEach=ce,l.has=Ue,l.head=ee,l.identity=Ve,l.indexOf=te,l.isArguments=we,l.isArray=Kt,l.isBoolean=Ae,l.isDate=Xt,l.isEmpty=Ee,l.isEqual=ke,l.isFinite=Me,l.isFunction=Te,l.isNaN=Ie,l.isNull=Re,l.isNumber=Ne,l.isObject=Oe,l.isRegExp=Jt,l.isString=De,l.isUndefined=Fe,l.last=ne,l.max=tt,l.min=nt,l.noConflict=Ze,l.noop=Qe,l.reduce=he,l.result=Le,l.size=de,l.some=fe,l.uniqueId=et,l.each=ce,l.first=ee,Ge(l,function(){var e={};return v(l,function(t,n){Rt.call(l.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),l.VERSION=ot,zt(["pop","join","replace","reverse","split","push","shift","sort","splice","unshift"],function(e){var t=(/^(?:replace|split)$/.test(e)?String.prototype:xt)[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|join|replace|shift)$/.test(e);l.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(Kt(o)?o:[],e)}return this[n](function(n){return t.apply(Kt(n)?n:[],e)})}}),l.prototype.toJSON=l.prototype.valueOf=l.prototype.value=ae,n._=l}).call(this)}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;!function(e){n.Backbone=e(n,{},n._,n.$)}(function(e,t,n,r){Array.prototype.slice;t.VERSION="1.3.3",t.$=r;var o=t.Events={},i=/\s+/,s=function(e,t,r,o,a){var u,l=0;if(r&&"object"==typeof r){void 0!==o&&"context"in a&&void 0===a.context&&(a.context=o);for(u=n.keys(r);l<u.length;l++)t=s(e,t,u[l],r[u[l]],a)}else if(r&&i.test(r))for(u=r.split(i);l<u.length;l++)t=e(t,u[l],o,a);else t=e(t,r,o,a);return t};o.on=function(e,t,n){return a(this,e,t,n)};var a=function(e,t,n,r,o){if(e._events=s(u,e._events||{},t,n,{context:r,ctx:e,listening:o}),o){var i=e._listeners||(e._listeners={});i[o.id]=o}return e};o.listenTo=function(e,t,r){if(!e)return this;var o=e._listenId||(e._listenId=n.uniqueId("l")),i=this._listeningTo||(this._listeningTo={}),s=i[o];if(!s){var u=this._listenId||(this._listenId=n.uniqueId("l"));s=i[o]={obj:e,objId:o,id:u,listeningTo:i,count:0}}return a(e,t,r,this,s),this};var u=function(e,t,n,r){if(n){var o=e[t]||(e[t]=[]),i=r.context,s=r.ctx,a=r.listening;a&&a.count++,o.push({callback:n,context:i,ctx:i||s,listening:a})}return e};o.off=function(e,t,n){return this._events?(this._events=s(l,this._events,e,t,{context:n,listeners:this._listeners}),this):this},o.stopListening=function(e,t,r){var o=this._listeningTo;if(!o)return this;for(var i=e?[e._listenId]:n.keys(o),s=0;s<i.length;s++){var a=o[i[s]];if(!a)break;a.obj.off(t,r,this)}return this};var l=function(e,t,r,o){if(e){var i,s=0,a=o.context,u=o.listeners;if(t||r||a){for(var l=t?[t]:n.keys(e);s<l.length;s++){t=l[s];var c=e[t];if(!c)break;for(var p=[],h=0;h<c.length;h++){var d=c[h];r&&r!==d.callback&&r!==d.callback._callback||a&&a!==d.context?p.push(d):(i=d.listening,i&&0===--i.count&&(delete u[i.id],delete i.listeningTo[i.objId]))}p.length?e[t]=p:delete e[t]}return e}for(var f=n.keys(u);s<f.length;s++)i=u[f[s]],delete u[i.id],delete i.listeningTo[i.objId]}};o.once=function(e,t,r){var o=s(c,{},e,t,n.bind(this.off,this));return"string"==typeof e&&null==r&&(t=void 0),this.on(o,t,r)},o.listenToOnce=function(e,t,r){var o=s(c,{},t,r,n.bind(this.stopListening,this,e));return this.listenTo(e,o)};var c=function(e,t,r,o){if(r){var i=e[t]=n.once(function(){o(t,i),r.apply(this,arguments)});i._callback=r}return e};o.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),r=0;r<t;r++)n[r]=arguments[r+1];return s(p,this._events,e,void 0,n),this};var p=function(e,t,n,r){if(e){var o=e[t],i=e.all;o&&i&&(i=i.slice()),o&&h(o,r),i&&h(i,[t].concat(r))}return e},h=function(e,t){var n,r=-1,o=e.length,i=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++r<o;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<o;)(n=e[r]).callback.call(n.ctx,i);return;case 2:for(;++r<o;)(n=e[r]).callback.call(n.ctx,i,s);return;case 3:for(;++r<o;)(n=e[r]).callback.call(n.ctx,i,s,a);return;default:for(;++r<o;)(n=e[r]).callback.apply(n.ctx,t);return}};return o.bind=o.on,o.unbind=o.off,n.extend(t,o),t})}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;!function(e,t){var r=function(e){if("object"!=typeof e.document)throw new Error("Cookies.js requires a `window` with a `document` object");var n=function(e,t,r){return 1===arguments.length?n.get(e):n.set(e,t,r)};return n._document=e.document,n._cacheKeyPrefix="cookey.",n._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),n.defaults={path:"/",secure:!1},n.get=function(e){n._cachedDocumentCookie!==n._document.cookie&&n._renewCache();var r=n._cache[n._cacheKeyPrefix+e];return r===t?t:decodeURIComponent(r)},n.set=function(e,r,o){return o=n._getExtendedOptions(o),o.expires=n._getExpiresDate(r===t?-1:o.expires),n._document.cookie=n._generateCookieString(e,r,o),n},n.expire=function(e,r){return n.set(e,t,r)},n._getExtendedOptions=function(e){return{path:e&&e.path||n.defaults.path,domain:e&&e.domain||n.defaults.domain,expires:e&&e.expires||n.defaults.expires,secure:e&&e.secure!==t?e.secure:n.defaults.secure}},n._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},n._getExpiresDate=function(e,t){
if(t=t||new Date,"number"==typeof e?e=e===1/0?n._maxExpireDate:new Date(t.getTime()+1e3*e):"string"==typeof e&&(e=new Date(e)),e&&!n._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},n._generateCookieString=function(e,t,n){e=e.replace(/[^#$&+\^`|]/g,encodeURIComponent),e=e.replace(/\(/g,"%28").replace(/\)/g,"%29"),t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),n=n||{};var r=e+"="+t;return r+=n.path?";path="+n.path:"",r+=n.domain?";domain="+n.domain:"",r+=n.expires?";expires="+n.expires.toUTCString():"",r+=n.secure?";secure":""},n._getCacheFromString=function(e){for(var r={},o=e?e.split("; "):[],i=0;i<o.length;i++){var s=n._getKeyValuePairFromCookieString(o[i]);r[n._cacheKeyPrefix+s.key]===t&&(r[n._cacheKeyPrefix+s.key]=s.value)}return r},n._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("=");t=t<0?e.length:t;var n,r=e.substr(0,t);try{n=decodeURIComponent(r)}catch(o){console&&"function"==typeof console.error&&console.error('Could not decode cookie with key "'+r+'"',o)}return{key:n,value:e.substr(t+1)}},n._renewCache=function(){n._cache=n._getCacheFromString(n._document.cookie),n._cachedDocumentCookie=n._document.cookie},n._areEnabled=function(){var e="cookies.js",t="1"===n.set(e,1).get(e);return n.expire(e),t},n.enabled=n._areEnabled(),n},o="object"==typeof e.document?r(e):r;n.Cookies=o}("undefined"==typeof e?this:e)}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;(function(t){function n(){return"assign"in Object}function r(){return"isNaN"in Number}function o(e){return"Symbol"in e}function i(e){return"Map"in e&&function(){try{return 2===new Map([[1,1],[2,2]]).size}catch(e){return!1}}()}function s(e){if(!("WeakMap"in e))return!1;var t={},n=new WeakMap([[t,"test"]]);return"test"===n.get(t)}function a(e){return"Set"in e&&function(){return 2===new Set([1,2]).size}()}e.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),n()||!function(){function e(e){if(null===e||e===t)throw new TypeError("Cannot call method on "+e);return Object(e)}Object.defineProperty(Object,"assign",{value:function(n,r){var o=e(n);if(1===arguments.length)return o;var i,s,a,u,l=Array.prototype.slice.call(arguments,1);for(i=0;i<l.length;i++){var c=l[i];for(c===t||null===c?a=[]:(u=e(c),a=Object.keys(u)),s=0;s<a.length;s++){var p=a[s],h=Object.getOwnPropertyDescriptor(u,p);if(h!==t&&h.enumerable){var d=u[p];o[p]=d}}}return o}})}(),r()||(Number.isNaN=Number.isNaN||function(e){return"number"==typeof e&&isNaN(e)}),o(this)||!function(t,n,r){var o,i=0,s=""+Math.random(),a="__symbol:",u=a.length,l="__symbol@@"+s,c="defineProperty",p="defineProperties",h="getOwnPropertyNames",d="getOwnPropertyDescriptor",f="propertyIsEnumerable",_=t.prototype,m=_.hasOwnProperty,g=_[f],y=_.toString,v=Array.prototype.concat,b="object"==typeof e?t.getOwnPropertyNames(e):[],w=t[h],C=function(e){if("[object Window]"===y.call(e))try{return w(e)}catch(t){return v.call([],b)}return w(e)},S=t[d],A=t.create,E=t.keys,k=t.freeze||t,M=t[c],T=t[p],P=S(t,h),O=function(e,t,n){if(!m.call(e,l))try{M(e,l,{enumerable:!1,configurable:!1,writable:!1,value:{}})}catch(r){e[l]={}}e[l]["@@"+t]=n},x=function(e,t){var n=A(e);return C(t).forEach(function(e){F.call(t,e)&&z(n,e,t[e])}),n},I=function(e){var t=A(e);return t.enumerable=!1,t},R=function(){},N=function(e){return e!=l&&!m.call(B,e)},D=function(e){return e!=l&&m.call(B,e)},F=function(e){var t=""+e;return D(t)?m.call(this,t)&&this[l]["@@"+t]:g.call(this,e)},j=function(e){var n={enumerable:!1,configurable:!0,get:R,set:function(t){o(this,e,{enumerable:!1,configurable:!0,writable:!0,value:t}),O(this,e,!0)}};try{M(_,e,n)}catch(r){_[e]=n.value}return k(B[e]=M(t(e),"constructor",U))},$=function W(e){if(this instanceof W)throw new TypeError("Symbol is not a constructor");return j(a.concat(e||"",s,++i))},B=A(null),U={value:$},L=function(e){return B[e]},z=function(e,t,n){var r=""+t;return D(r)?(o(e,r,n.enumerable?I(n):n),O(e,r,!!n.enumerable)):M(e,t,n),e},H=function(e){return function(t){return m.call(e,l)&&m.call(e[l],"@@"+t)}},V=function(e){return C(e).filter(e===_?H(e):D).map(L)};P.value=z,M(t,c,P),P.value=V,M(t,n,P),P.value=function(e){return C(e).filter(N)},M(t,h,P),P.value=function(e,t){var n=V(t);return n.length?E(t).concat(n).forEach(function(n){F.call(t,n)&&z(e,n,t[n])}):T(e,t),e},M(t,p,P),P.value=F,M(_,f,P),P.value=$,M(r,"Symbol",P),P.value=function(e){var t=a.concat(a,e,s);return t in _?B[t]:j(t)},M($,"for",P),P.value=function(e){if(N(e))throw new TypeError(e+" is not a symbol");return m.call(B,e)?e.slice(2*u,-s.length):void 0},M($,"keyFor",P),P.value=function(e,t){var n=S(e,t);return n&&D(t)&&(n.enumerable=F.call(e,t)),n},M(t,d,P),P.value=function(e,t){return 1===arguments.length||"undefined"==typeof t?A(e):x(e,t)},M(t,"create",P),P.value=function(){var e=y.call(this);return"[object String]"===e&&D(this)?"[object Symbol]":e},M(_,"toString",P),o=function(e,t,n){var r=S(_,t);delete _[t],M(e,t,n),e!==_&&M(_,t,r)}}(Object,"getOwnPropertySymbols",this),!1 in this&&!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}({0:function(t,n,r){(function(t){var n=r(80);try{(t||{}).Promise=n,e.Promise=n}catch(o){}}).call(n,function(){return this}())},80:function(t,n){(function(n){!function(){function r(){return se[z][V]||W}function o(e,t){for(var n in t)e[n]=t[n]}function i(e){return e&&"object"==typeof e}function s(e){return"function"==typeof e}function a(e,t){return e instanceof t}function u(e){return a(e,$)}function l(e,t,n){if(!t(e))throw f(n)}function c(){try{return P.apply(O,arguments)}catch(e){return re.e=e,re}}function p(e,t){return P=e,O=t,c}function h(e,t){function n(){for(var n=0;n<o;)t(r[n],r[n+1]),r[n++]=T,r[n++]=T;o=0,r.length>e&&(r.length=e)}var r=j(e),o=0;return function(e,t){r[o++]=e,r[o++]=t,2===o&&se.nextTick(n)}}function d(e,t){var n,r,o,i,u=0;if(!e)throw f(J);var l=e[se[z][H]];if(s(l))r=l.call(e);else{if(!s(e.next)){if(a(e,j)){for(n=e.length;u<n;)t(e[u],u++);return u}throw f(J)}r=e}for(;!(o=r.next()).done;)if(i=p(t)(o.value,u++),i===re)throw s(r[G])&&r[G](),i.e;return u}function f(e){return new TypeError(e)}function _(e){return(e?"":Z)+(new $).stack}function m(e,t){var n="on"+e.toLowerCase(),r=R[n];N&&N.listeners(e).length?e===ne?N.emit(e,t._v,t):N.emit(e,t):r?r({reason:t._v,promise:t}):se[e](t._v,t)}function g(e){return e&&e._s}function y(e){if(g(e))return new e(oe);var t,n,r;return t=new e(function(e,o){if(t)throw f();n=e,r=o}),l(n,s),l(r,s),t}function v(e,t){return function(n){F&&(e[K]=_(!0)),t===U?E(e,n):A(e,t,n)}}function b(e,t,n,r){return s(n)&&(t._onFulfilled=n),s(r)&&(e[q]&&m(te,e),t._onRejected=r),F&&(t._p=e),e[e._c++]=t,e._s!==L&&ae(e,t),t}function w(e){if(e._umark)return!0;e._umark=!0;for(var t,n=0,r=e._c;n<r;)if(t=e[n++],t._onRejected||w(t))return!0}function C(e,t){function n(e){return r.push(e.replace(/^\s+|\s+$/g,""))}var r=[];return F&&(t[K]&&n(t[K]),function o(e){e&&Y in e&&(o(e._next),n(e[Y]+""),o(e._p))}(t)),(e&&e.stack?e.stack:e)+("\n"+r.join("\n")).replace(ie,"")}function S(e,t){return e(t)}function A(e,t,n){var r=0,o=e._c;if(e._s===L)for(e._s=t,e._v=n,t===B&&(F&&u(n)&&(n.longStack=C(n,e)),ue(e));r<o;)ae(e,e[r++]);return e}function E(e,t){if(t===e&&t)return A(e,B,f(Q)),e;if(t!==x&&(s(t)||i(t))){var n=p(k)(t);if(n===re)return A(e,B,n.e),e;s(n)?(F&&g(t)&&(e._next=t),g(t)?M(e,t,n):se.nextTick(function(){M(e,t,n)})):A(e,U,t)}else A(e,U,t);return e}function k(e){return e.then}function M(e,t,n){var r=p(n,t)(function(n){t&&(t=x,E(e,n))},function(n){t&&(t=x,A(e,B,n))});r===re&&t&&(A(e,B,r.e),t=x)}var T,P,O,x=null,I="object"==typeof e,R=I?e:n,N=R.process,D=R.console,F=!1,j=Array,$=Error,B=1,U=2,L=3,z="Symbol",H="iterator",V="species",W=z+"("+V+")",G="return",q="_uh",Y="_pt",K="_st",X="Invalid this",J="Invalid argument",Z="\nFrom previous ",Q="Chaining cycle detected for promise",ee="Uncaught (in promise)",te="rejectionHandled",ne="unhandledRejection",re={e:x},oe=function(){},ie=/^.+\/node_modules\/yaku\/.+\n?/gm,se=t.exports=function(e){var t,n=this;if(!i(n)||n._s!==T)throw f(X);if(n._s=L,F&&(n[Y]=_()),e!==oe){if(!s(e))throw f(J);t=p(e)(v(n,U),v(n,B)),t===re&&A(n,B,t.e)}};se["default"]=se,o(se.prototype,{then:function(e,t){if(void 0===this._s)throw f();return b(this,y(se.speciesConstructor(this,se)),e,t)},"catch":function(e){return this.then(T,e)},"finally":function(e){function t(t){return se.resolve(e()).then(function(){return t})}return this.then(t,t)},_c:0,_p:x}),se.resolve=function(e){return g(e)?e:E(y(this),e)},se.reject=function(e){return A(y(this),B,e)},se.race=function(e){var t=this,n=y(t),r=function(e){A(n,U,e)},o=function(e){A(n,B,e)},i=p(d)(e,function(e){t.resolve(e).then(r,o)});return i===re?t.reject(i.e):n},se.all=function(e){function t(e){A(o,B,e)}var n,r=this,o=y(r),i=[];return n=p(d)(e,function(e,s){r.resolve(e).then(function(e){i[s]=e,--n||A(o,U,i)},t)}),n===re?r.reject(n.e):(n||A(o,U,[]),o)},se.Symbol=R[z]||{},p(function(){Object.defineProperty(se,r(),{get:function(){return this}})})(),se.speciesConstructor=function(e,t){var n=e.constructor;return n?n[r()]||t:t},se.unhandledRejection=function(e,t){D&&D.error(ee,F?t.longStack:C(e,t))},se.rejectionHandled=oe,se.enableLongStackTrace=function(){F=!0},se.nextTick=I?function(e){setTimeout(e)}:N.nextTick,se._s=1;var ae=h(999,function(e,t){var n,r;return r=e._s!==B?t._onFulfilled:t._onRejected,r===T?void A(t,e._s,e._v):(n=p(S)(r,e._v),n===re?void A(t,B,n.e):void E(t,n))}),ue=h(9,function(e){w(e)||(e[q]=1,m(ne,e))})}()}).call(n,function(){return this}())}}),i(this)||!function(e){function n(e){return Number.isNaN(e)?u:e}function r(e){return e===u?NaN:e}function o(e,t){var n=0,r=!1;return{next:function(){if(e.size&&n!==e._keys.length||(r=!0),r)return{value:void 0,done:!0};for(;n<=e._keys.length&&e._keys[n]===a;)n++;return e.size&&n!==e._keys.length?{value:t.call(e,n++),done:!1}:{value:void 0,done:!0}}}}function i(e,t){return"function"==typeof e[t]}var s,a=Symbol("undef"),u=Symbol("NaN"),l=function h(){if(!(this instanceof h))throw new TypeError('Constructor Map requires "new"');var e=arguments[0];Object.defineProperty(this,"_keys",{configurable:!0,enumerable:!1,writable:!0,value:[]}),Object.defineProperty(this,"_values",{configurable:!0,enumerable:!1,writable:!0,value:[]}),Object.defineProperty(this,"_size",{configurable:!0,enumerable:!1,writable:!0,value:0});try{Object.defineProperty(h.prototype,"size",{configurable:!0,enumerable:!1,get:function(){return this._size},set:t}),Object.defineProperty(this,"size",{configurable:!0,enumerable:!1,get:function(){return this._size},set:t}),s=!0}catch(n){s=!1,Object.defineProperty(this,"size",{configurable:!0,enumerable:!1,writable:!0,value:0})}e&&i(e,"forEach")&&(e instanceof h||i(e,"clear")&&i(e,"delete")&&i(e,"entries")&&i(e,"forEach")&&i(e,"get")&&i(e,"has")&&i(e,"keys")&&i(e,"set")&&i(e,"values")?e.forEach(function(e,t){this.set.apply(this,[t,e])},this):e.forEach(function(e){this.set.apply(this,e)},this))};Object.defineProperty(l,"prototype",{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(l.prototype,"get",{configurable:!0,enumerable:!1,writable:!0,value:function(e){var r=this._keys.indexOf(n(e));return r!==-1?this._values[r]:t}}),Object.defineProperty(l.prototype,"set",{configurable:!0,enumerable:!1,writable:!0,value:function(e,t){var r=this._keys.indexOf(n(e));return r!==-1?this._values[r]=t:(this._keys.push(n(e)),this._values.push(t),++this._size,s||(this.size=this._size)),this}}),Object.defineProperty(l.prototype,"has",{configurable:!0,enumerable:!1,writable:!0,value:function(e){return this._keys.indexOf(n(e))!==-1}}),Object.defineProperty(l.prototype,"delete",{configurable:!0,enumerable:!1,writable:!0,value:function(e){var t=this._keys.indexOf(n(e));return t!==-1&&(this._keys[t]=a,this._values[t]=a,--this._size,s||(this.size=this._size),!0)}}),Object.defineProperty(l.prototype,"clear",{configurable:!0,enumerable:!1,writable:!0,value:function(){this._keys=[],this._values=[],this._size=0,s||(this.size=this._size)}}),Object.defineProperty(l.prototype,"values",{configurable:!0,enumerable:!1,writable:!0,value:function(){var e=o(this,function(e){return this._values[e]});return e[Symbol.iterator]=this.values.bind(this),e}}),Object.defineProperty(l.prototype,"keys",{configurable:!0,enumerable:!1,writable:!0,value:function(){var e=o(this,function(e){return r(this._keys[e])});return e[Symbol.iterator]=this.keys.bind(this),e}});var c=function(){var e=o(this,function(e){return[r(this._keys[e]),this._values[e]]});return e[Symbol.iterator]=this.entries.bind(this),e};Object.defineProperty(l.prototype,Symbol.iterator,{configurable:!0,enumerable:!1,writable:!0,value:c}),Object.defineProperty(l.prototype,"entries",{configurable:!0,enumerable:!1,writable:!0,value:c}),Object.defineProperty(l.prototype,"forEach",{configurable:!0,enumerable:!1,writable:!0,value:function(t,n){n=n||e;for(var r=this.entries(),o=r.next();o.done===!1;)t.call(n,o.value[1],o.value[0],this),o=r.next()}}),Object.defineProperty(l.prototype,"constructor",{configurable:!0,enumerable:!1,writable:!0,value:l});try{Object.defineProperty(l,Symbol.species,{configurable:!0,enumerable:!1,get:function(){return l}})}catch(p){}"name"in l||Object.defineProperty(l,"name",{configurable:!0,enumerable:!1,writable:!1,value:"Map"});try{Object.defineProperty(e,"Map",{configurable:!0,enumerable:!1,writable:!0,value:l})}catch(p){Object.defineProperty(e,"Map",{configurable:!0,enumerable:!0,writable:!0,value:l})}}(this),s(this)||!function(e){var n=Object.defineProperty,r=Date.now()%1e9,o=function(e){this.name="__st"+(1e9*Math.random()>>>0)+(r++ +"__"),e&&e.forEach&&e.forEach(function(e){this.set.apply(this,e)},this)};o.prototype.set=function(e,t){if("object"!=typeof e&&"function"!=typeof e)throw new TypeError("Invalid value used as weak map key");var r=e[this.name];return r&&r[0]===e?r[1]=t:n(e,this.name,{value:[e,t],writable:!0}),this},o.prototype.get=function(e){var n;return(n=e[this.name])&&n[0]===e?n[1]:t},o.prototype["delete"]=function(e){var n=e[this.name];return!(!n||n[0]!==e)&&(n[0]=n[1]=t,!0)},o.prototype.has=function(e){var t=e[this.name];return!!t&&t[0]===e},o.prototype.constructor=o,o.name="WeakMap",e.WeakMap=o}(this),a(this)||!function(e){function t(e){return Number.isNaN(e)?i:e}function n(e){return e===i?NaN:e}function r(e,t){var n=0;return{next:function(){for(;e._values[n]===o;)n++;return n===e._values.length?{value:void 0,done:!0}:{value:t.call(e,n++),done:!1}}}}var o=Symbol("undef"),i=Symbol("NaN"),s=function(){var e=arguments[0];this._values=[],this.size=this._size=0,e&&"function"==typeof e.forEach&&e.forEach(function(e){this.add.call(this,e)},this)};try{Object.defineProperty(s.prototype,"size",{get:function(){return this._size},set:function(e){this._size=e}})}catch(a){}s.prototype.add=function(e){return e=t(e),this._values.indexOf(e)===-1&&(this._values.push(e),this.size=++this._size),this},s.prototype.has=function(e){return this._values.indexOf(t(e))!==-1},s.prototype["delete"]=function(e){var n=this._values.indexOf(t(e));return n!==-1&&(this._values[n]=o,this.size=--this._size,!0)},s.prototype.clear=function(){this._values=[],this.size=this._size=0},s.prototype[Symbol.iterator]=s.prototype.values=s.prototype.keys=function(){var e=r(this,function(e){return n(this._values[e])});return e[Symbol.iterator]=this.keys.bind(this),e},s.prototype.entries=function(){var e=r(this,function(e){return[n(this._values[e]),n(this._values[e])]});return e[Symbol.iterator]=this.entries.bind(this),e},s.prototype.forEach=function(t,n){n=n||e;for(var r=this.entries(),o=r.next();o.done===!1;)t.call(n,o.value[1],o.value[0],this),o=r.next()},s.prototype.constructor=s.prototype[Symbol.species]=s,s.prototype.constructor=s,s.name="Set",e.Set=s}(this)}).call("object"==typeof e&&e||"object"==typeof self&&self||"object"==typeof global&&global||{})}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;!function(e,t){t(e.Redux=e.Redux||{})}(e.Mango,function(t){function n(e){var t=g.call(e,v),n=e[v];try{e[v]=void 0;var r=!0}catch(e){}var o=y.call(e);return r&&(t?e[v]=n:delete e[v]),o}function r(e){return b.call(e)}function o(e){return null==e?void 0===e?C:w:S&&S in Object(e)?n(e):r(e)}function i(e){return null!=e&&"object"==typeof e}function s(e){if(!i(e)||o(e)!=E)return!1;var t=A(e);if(null===t)return!0;var n=P.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&T.call(n)==O}function a(e,t,n){function r(){d===h&&(d=h.slice())}function o(){return p}function i(e){if("function"!=typeof e)throw Error("Expected listener to be a function.");var t=!0;return r(),d.push(e),function(){if(t){t=!1,r();var n=d.indexOf(e);d.splice(n,1)}}}function u(e){if(!s(e))throw Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(f)throw Error("Reducers may not dispatch actions.");try{f=!0,p=c(p,e)}finally{f=!1}for(var t=h=d,n=0;t.length>n;n++)(0,t[n])();return e}var l;if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw Error("Expected the enhancer to be a function.");return n(a)(e,t)}if("function"!=typeof e)throw Error("Expected the reducer to be a function.");var c=e,p=t,h=[],d=h,f=!1;return u({type:I.INIT}),l={dispatch:u,subscribe:i,getState:o,replaceReducer:function(e){if("function"!=typeof e)throw Error("Expected the nextReducer to be a function.");c=e,u({type:I.INIT})}},l[x]=function(){var e,t=i;return e={subscribe:function(e){function n(){e.next&&e.next(o())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");return n(),{unsubscribe:t(n)}}},e[x]=function(){return this},e},l}function u(e,t){var n=t&&t.type;return"Given action "+(n&&'"'+n+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function l(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:I.INIT}))throw Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+I.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}function c(e,t){return function(){return t(e.apply(void 0,arguments))}}function p(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}var h,d="object"==typeof global&&global&&global.Object===Object&&global,f="object"==typeof self&&self&&self.Object===Object&&self,_=(d||f||Function("return this")()).Symbol,m=Object.prototype,g=m.hasOwnProperty,y=m.toString,v=_?_.toStringTag:void 0,b=Object.prototype.toString,w="[object Null]",C="[object Undefined]",S=_?_.toStringTag:void 0,A=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object),E="[object Object]",k=Function.prototype,M=Object.prototype,T=k.toString,P=M.hasOwnProperty,O=T.call(Object),x=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}(h="undefined"!=typeof self?self:"undefined"!=typeof e?e:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()),I={INIT:"@@redux/INIT"},R=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.createStore=a,t.combineReducers=function(e){for(var t=Object.keys(e),n={},r=0;t.length>r;r++){var o=t[r];"function"==typeof e[o]&&(n[o]=e[o])}var i=Object.keys(n),s=void 0;try{l(n)}catch(e){s=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(s)throw s;for(var r=!1,o={},a=0;i.length>a;a++){var l=i[a],c=n[l],p=e[l],h=c(p,t);if(void 0===h){var d=u(l,t);throw Error(d)}o[l]=h,r=r||h!==p}return r?o:e}},t.bindActionCreators=function(e,t){if("function"==typeof e)return c(e,t);if("object"!=typeof e||null===e)throw Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),r={},o=0;n.length>o;o++){var i=n[o],s=e[i];"function"==typeof s&&(r[i]=c(s,t))}return r},t.applyMiddleware=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(e){return function(n,r,o){var i=e(n,r,o),s=i.dispatch,a=[],u={getState:i.getState,dispatch:function(e){return s(e)}};return a=t.map(function(e){return e(u)}),s=p.apply(void 0,a)(i.dispatch),R({},i,{dispatch:s})}}},t.compose=p,Object.defineProperty(t,"__esModule",{value:!0})})}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;!function(e,t){t(e.Inferno={})}(e.Mango,function(n){function r(e){return!h(e.prototype)&&!h(e.prototype.render)}function o(e){var t=typeof e;return"string"===t||"number"===t}function i(e){return h(e)||c(e)}function s(e){return c(e)||!1===e||p(e)||h(e)}function a(e){return"function"==typeof e}function u(e){return"string"==typeof e}function l(e){return"number"==typeof e}function c(e){return null===e}function p(e){return!0===e}function h(e){return void 0===e}function d(e){return"object"==typeof e}function f(e){throw e||(e=mt),new Error("Inferno Error: "+e)}function _(e,t){var n={};if(e)for(var r in e)n[r]=e[r];if(t)for(var o in t)n[o]=t[o];return n}function m(){this.listeners=[]}function g(e,n,r,o){var i=Ot.get(e);if(r)i||((i={items:new Map,docEvent:null}).docEvent=w(e,i),Ot.set(e,i)),n||Pt&&"onClick"===e&&S(o),i.items.set(o,r);else if(i){var s=i.items;s["delete"](o)&&0===s.size&&(t.removeEventListener(v(e),i.docEvent),Ot["delete"](e))}}function y(e,t,n,r,o,i){for(var s=t;r>0;){var a=n.get(s);if(a&&(r--,i.dom=s,a.event?a.event(a.data,e):a(e),e.cancelBubble))return;if(null===(s=s.parentNode)||o&&s.disabled)return}}function v(e){return e.substr(2).toLowerCase()}function b(){this.cancelBubble=!0,this.stopImmediatePropagation()}function w(e,n){var r=function(e){var r=n.items.size;if(r>0){e.stopPropagation=b;var o={dom:t};try{Object.defineProperty(e,"currentTarget",{configurable:!0,get:function(){return o.dom}})}catch(e){}y(e,e.target,n.items,r,"click"===e.type,o)}};return t.addEventListener(v(e),r),r}function C(){}function S(e){e.onclick=C}function A(e){return"checkbox"===e||"radio"===e}function E(e){var t=this.vNode,n=t.props||Ft,r=t.dom,o=n.value;if(n.onInput){var i=n.onInput;i.event?i.event(i.data,e):i(e)}else n.oninput&&n.oninput(e);var s=this.vNode.props||Ft;o!==s.value&&P(s,r)}function k(e){var t=(this.vNode.props||Ft).onChange;t.event?t.event(t.data,e):t(e)}function M(e){e.stopPropagation();var t=this.vNode,n=t.props||Ft,r=t.dom;if(n.onClick){var o=n.onClick;o.event?o.event(o.data,e):o(e)}else n.onclick&&n.onclick(e);P(this.vNode.props||Ft,r)}function T(e,t,n,r,o){P(n,t),o&&(t.vNode=e,r&&(A(n.type)?(t.onclick=M,t.onclick.wrapped=!0):(t.oninput=E,t.oninput.wrapped=!0),n.onChange&&(t.onchange=k,t.onchange.wrapped=!0)))}function P(e,t){var n=e.type,r=e.value,o=e.checked,s=e.multiple,a=e.defaultValue,u=!i(r);n&&n!==t.type&&t.setAttribute("type",n),s&&s!==t.multiple&&(t.multiple=s),i(a)||u||(t.defaultValue=a+""),A(n)?(u&&(t.value=r),i(o)||(t.checked=o)):u&&t.value!==r?(t.defaultValue=r,t.value=r):i(o)||(t.checked=o)}function O(e,t){if("optgroup"===e.type){var n=e.children;if(yt(n))for(var r=0,o=n.length;r<o;r++)x(n[r],t);else ot(n)&&x(n,t)}else x(e,t)}function x(e,t){var n=e.props||Ft,r=e.dom;r.value=n.value,yt(t)&&-1!==t.indexOf(n.value)||n.value===t?r.selected=!0:i(t)&&i(n.selected)||(r.selected=n.selected||!1)}function I(e){var t=this.vNode,n=t.props||Ft,r=t.dom,o=n.value;if(n.onChange){var i=n.onChange;i.event?i.event(i.data,e):i(e)}else n.onchange&&n.onchange(e);var s=this.vNode,a=s.props||Ft;o!==a.value&&N(s,r,a,!1)}function R(e,t,n,r,o){N(e,t,n,r),o&&(t.vNode=e,r&&(t.onchange=I,t.onchange.wrapped=!0))}function N(e,t,n,r){n.multiple!==t.multiple&&(t.multiple=n.multiple);var o=e.children;if(!s(o)){var a=n.value;if(r&&i(a)&&(a=n.defaultValue),yt(o))for(var u=0,l=o.length;u<l;u++)O(o[u],a);else ot(o)&&O(o,a)}}function D(e){var t=(this.vNode.props||Ft).onChange;t.event?t.event(t.data,e):t(e)}function F(e){var t=this.vNode,n=t.props||Ft,r=n.value;if(n.onInput){var o=n.onInput;o.event?o.event(o.data,e):o(e)}else n.oninput&&n.oninput(e);var i=this.vNode;r!==(i.props||Ft).value&&$(i,t.dom,!1)}function j(e,t,n,r,o){$(n,t,r),o&&(t.vNode=e,r&&(t.oninput=F,t.oninput.wrapped=!0,n.onChange&&(t.onchange=D,t.onchange.wrapped=!0)))}function $(e,t,n){var r=e.value,o=t.value;if(i(r)){if(n){var s=e.defaultValue;i(s)?""!==o&&(t.defaultValue="",t.value=""):s!==o&&(t.defaultValue=s,t.value=s)}}else o!==r&&(t.defaultValue=r,t.value=r)}function B(e,t,n,r,o,i){512&e&&T(t,n,r,o,i),2048&e&&R(t,n,r,o,i),1024&e&&j(t,n,r,o,i)}function U(e){return e.type&&A(e.type)?!i(e.checked):!i(e.value)}function L(e){for(var n=e.firstChild;n;)if(8===n.nodeType)if("!"===n.data){var r=t.createTextNode("");e.replaceChild(r,n),n=n.nextSibling}else{var o=n.previousSibling;e.removeChild(n),n=o||e.firstChild}else n=n.nextSibling}function z(e,t,n,r,o,i){var s=e.type,a=e.ref,u=e.props||Ft;if(i){var l=t.namespaceURI===Ct,c=De(e,s,u,r,l,n),p=c._lastInput;c._vNode=e,q(p,t,n,c._childContext,l),e.dom=p.dom,Ie(e,a,c,n),c._updating=!1,vt.findDOMNodeEnabled&&Rt.set(c,t)}else{var h=$e(e,s,u,r);q(h,t,n,r,o),e.children=h,e.dom=h.dom,Re(u,a,t,n)}return t}function H(e,t,n,r,o){var a=e.children,u=e.props,l=e.className,c=e.flags,p=e.ref;if(o=o||(128&c)>0,1!==t.nodeType||t.tagName.toLowerCase()!==e.type){var h=Pe(e,null,n,r,o);return e.dom=h,We(t.parentNode,h,t),h}if(e.dom=t,s(a)?null===t.firstChild||Je(t,u)||(t.textContent=""):V(a,t,n,r,o),u){var d=!1,f=(3584&c)>0;f&&(d=U(u));for(var _ in u)Ce(_,null,u[_],t,o,d);f&&B(c,e,t,u,!0,d)}return i(l)?""!==t.className&&t.removeAttribute("class"):o?t.setAttribute("class",l):t.className=l,p&&Ne(t,p,n),t}function V(e,n,r,i,s){L(n);var a=n.firstChild;if(o(e))c(a)||3!==a.nodeType?""===e?n.appendChild(t.createTextNode("")):n.textContent=e:a.nodeValue!==e&&(a.nodeValue=e),c(a)||(a=a.nextSibling);else if(yt(e))for(var u=0,l=e.length;u<l;u++){var p=e[u];if(!c(p)&&d(p))if(c(a))ke(p,n,r,i,s);else{var h=a.nextSibling;q(p,a,r,i,s),a=h}}else c(a)?ke(e,n,r,i,s):(q(e,a,r,i,s),a=a.nextSibling);for(;a;){var f=a.nextSibling;n.removeChild(a),a=f}}function W(e,t){if(3!==t.nodeType){var n=Me(e,null);return e.dom=n,We(t.parentNode,n,t),n}var r=e.children;return t.nodeValue!==r&&(t.nodeValue=r),e.dom=t,t}function G(e,t){return e.dom=t,t}function q(e,t,n,r,o){var i=e.flags;28&i?z(e,t,n,r,o,(4&i)>0):3970&i?H(e,t,n,r,o):1&i?W(e,t):4096&i?G(e,t):f()}function Y(e,t,n){if(!c(t)){var r=t.firstChild;if(!c(r)){for(q(e,r,n,Ft,!1),r=t.firstChild;r=r.nextSibling;)t.removeChild(r);return!0}}return!1}function K(e,t,n,r){var o=e.type,i=It.get(o);if(!h(i)){var s=e.key,a=null===s?i.nonKeyed:i.keyed.get(s);if(!h(a)){var u=a.pop();if(!h(u))return de(u,e,null,t,n,r,!0),e.dom}}return null}function X(e){var t=e.type,n=e.key,r=It.get(t);if(h(r)&&(r={keyed:new Map,nonKeyed:[]},It.set(t,r)),c(n))r.nonKeyed.push(e);else{var o=r.keyed.get(n);h(o)&&(o=[],r.keyed.set(n,o)),o.push(e)}}function J(e,t,n,r){var o=e.type,i=xt.get(o);if(!h(i)){var s=e.key,a=null===s?i.nonKeyed:i.keyed.get(s);if(!h(a)){var u=a.pop();if(!h(u)&&!_e(u,e,null,t,n,r,(4&e.flags)>0,!0))return e.dom}}return null}function Z(e){var t=e.ref;if(!t||!(t.onComponentWillMount||t.onComponentWillUnmount||t.onComponentDidMount||t.onComponentWillUpdate||t.onComponentDidUpdate)){var n=e.type,r=e.key,o=xt.get(n);if(h(o)&&(o={keyed:new Map,nonKeyed:[]},xt.set(n,o)),c(r))o.nonKeyed.push(e);else{var i=o.keyed.get(r);h(i)&&(i=[],o.keyed.set(r,i)),i.push(e)}}}function Q(e,t,n,r,o){var i=e.flags;28&i?te(e,t,n,r,o):3970&i?ne(e,t,n,r,o):4097&i&&ee(e,t)}function ee(e,t){c(t)||Ge(t,e.dom)}function te(e,t,n,r,o){var s=e.children,a=4&e.flags,u=e.props||Ft,l=e.ref,p=e.dom;o||(a?s._unmounted||(c(vt.beforeUnmount)||vt.beforeUnmount(e),h(s.componentWillUnmount)||s.componentWillUnmount(),l&&!o&&l(null),s._unmounted=!0,vt.findDOMNodeEnabled&&Rt["delete"](s),Q(s._lastInput,null,s._lifecycle,!1,o)):(i(l)||i(l.onComponentWillUnmount)||l.onComponentWillUnmount(p,u),Q(s,null,n,!1,o))),t&&Ge(t,p),vt.recyclingEnabled&&!a&&(t||r)&&Z(e)}function ne(e,t,n,r,o){var s=e.dom,a=e.ref,u=e.props;a&&!o&&oe(a);var l=e.children;if(i(l)||re(l,n,o),!c(u))for(var p in u)null!==u[p]&&we(p)&&(Se(p,u[p],null,s),u[p]=null);c(t)||Ge(t,s),vt.recyclingEnabled&&(t||r)&&X(e)}function re(e,t,n){if(yt(e))for(var r=0,o=e.length;r<o;r++){var i=e[r];!s(i)&&d(i)&&Q(i,null,t,!1,n)}else d(e)&&Q(e,null,t,!1,n)}function oe(e){if(a(e))e(null);else{if(s(e))return;f()}}function ie(e){vt.findDOMNodeEnabled||f();var t=e&&e.nodeType?e:null;return Rt.get(e)||t}function se(e){for(var t=0,n=Nt.length;t<n;t++){var r=Nt[t];if(r.dom===e)return r}return null}function ae(e,t,n){var r={dom:e,input:t,lifecycle:n};return Nt.push(r),r}function ue(e){for(var t=0,n=Nt.length;t<n;t++)if(Nt[t]===e)return void Nt.splice(t,1)}function le(e,t){if(Dt===t&&f(),e!==_t){var n=se(t);if(c(n)){var r=new m;s(e)||(e.dom&&(e=et(e)),Y(e,t,r)||ke(e,t,r,Ft,!1),n=ae(t,e,r),r.trigger())}else{var o=n.lifecycle;o.listeners=[],i(e)?(Q(n.input,t,o,!1,!1),ue(n)):(e.dom&&(e=et(e)),pe(n.input,e,t,o,Ft,!1,!1)),n.input=e,o.trigger()}if(n){var a=n.input;if(a&&28&a.flags)return a.children}}}function ce(e){return function(t,n){e||(e=t),le(n,e)}}function pe(e,t,n,r,o,i,s){if(e!==t){var a=e.flags,u=t.flags;if(28&u){var l=(4&u)>0;28&a?_e(e,t,n,r,o,i,l,s):je(n,xe(t,null,r,o,i,l),e,r,s)}else 3970&u?3970&a?de(e,t,n,r,o,i,s):je(n,Pe(t,null,r,o,i),e,r,s):1&u?1&a?me(e,t):je(n,Me(t,null),e,r,s):4096&u?4096&a?ge(e,t):je(n,Te(t,null),e,r,s):Fe(e,t,n,r,o,i,s)}}function he(e,t,n,r){ot(e)?Q(e,t,n,!0,r):yt(e)?qe(t,e,n,r):t.textContent=""}function de(e,t,n,r,o,s,a){var u=t.type;if(e.type!==u)Ve(e,t,n,r,o,s,a);else{var l=e.dom,c=e.props,p=t.props,h=e.children,d=t.children,f=e.flags,_=t.flags,m=t.ref,g=e.className,y=t.className;if(t.dom=l,s=s||(128&_)>0,h!==d&&fe(f,_,h,d,l,r,o,!0===s&&"foreignObject"!==t.type,a),c!==p){var v=c||Ft,b=p||Ft,w=!1;if(b!==Ft){var C=(3584&_)>0;C&&(w=U(b));for(var S in b){var A=b[S];Ce(S,v[S],A,l,s,w)}C&&B(_,t,l,b,a,w)}if(v!==Ft)for(var E in v)i(b[E])&&!i(v[E])&&Ee(E,v[E],l,_)}g!==y&&(i(y)?l.removeAttribute("class"):s?l.setAttribute("class",y):l.className=y),m&&(e.ref!==m||a)&&Ne(l,m,r)}}function fe(e,t,n,r,i,a,u,l,c){var p=!1,h=!1;64&t?p=!0:(32&e)>0&&(32&t)>0?(h=!0,p=!0):s(r)?he(n,i,a,c):s(n)?o(r)?Be(i,r):yt(r)?Oe(r,i,a,u,l):ke(r,i,a,u,l):o(r)?o(n)?Ue(i,r):(he(n,i,a,c),Be(i,r)):yt(r)?yt(n)?(p=!0,Ke(n,r)&&(h=!0)):(he(n,i,a,c),Oe(r,i,a,u,l)):yt(n)?(qe(i,n,a,c),ke(r,i,a,u,l)):ot(r)&&(ot(n)?pe(n,r,i,a,u,l,c):(he(n,i,a,c),ke(r,i,a,u,l))),p&&(h?ve(n,r,i,a,u,l,c):ye(n,r,i,a,u,l,c))}function _e(e,t,n,r,a,u,l,p){var m=e.type,g=t.type,y=e.key,v=t.key;if(m!==g||y!==v)return Ve(e,t,n,r,a,u,p),!1;var b=t.props||Ft;if(l){var w=e.children;
if(w._updating=!0,w._unmounted){if(c(n))return!0;We(n,xe(t,null,r,a,u,(4&t.flags)>0),e.dom)}else{var C=!h(w.componentDidUpdate),S=w.state,A=C?_(S,null):S,E=w.props;t.children=w,w._isSVG=u;var k,M=w._lastInput,T=w._updateComponent(A,S,E,b,a,!1,!1),P=!0;i(w.getChildContext)||(k=w.getChildContext()),k=i(k)?a:_(a,k),w._childContext=k,s(T)?T=nt():T===_t?(T=M,P=!1):o(T)?T=rt(T,null):yt(T)?f():d(T)&&(c(T.dom)||(T=et(T))),28&T.flags?T.parentVNode=t:28&M.flags&&(M.parentVNode=t),w._lastInput=T,w._vNode=t,P&&(pe(M,T,n,r,k,u,p),C&&w.componentDidUpdate&&w.componentDidUpdate(E,A),c(vt.afterUpdate)||vt.afterUpdate(t),vt.findDOMNodeEnabled&&Rt.set(w,T.dom)),t.dom=T.dom}w._updating=!1}else{var O=!0,x=e.props,I=t.ref,R=!i(I),N=e.children,D=N;t.dom=e.dom,t.children=N,y!==v?O=!0:R&&!i(I.onComponentShouldUpdate)&&(O=I.onComponentShouldUpdate(x,b)),!1!==O&&(R&&!i(I.onComponentWillUpdate)&&I.onComponentWillUpdate(x,b),s(D=g(b,a))?D=nt():o(D)&&D!==_t?D=rt(D,null):yt(D)?f():d(D)&&(c(D.dom)||(D=et(D))),D!==_t&&(pe(N,D,n,r,a,u,p),t.children=D,R&&!i(I.onComponentDidUpdate)&&I.onComponentDidUpdate(x,b),t.dom=D.dom)),28&D.flags?D.parentVNode=t:28&N.flags&&(N.parentVNode=t)}return!1}function me(e,t){var n=t.children,r=e.dom;t.dom=r,e.children!==n&&(r.nodeValue=n)}function ge(e,t){t.dom=e.dom}function ye(e,t,n,r,o,i,s){for(var a=e.length,u=t.length,l=a>u?u:a,c=0;c<l;c++){var p=t[c];p.dom&&(p=t[c]=et(p)),pe(e[c],p,n,r,o,i,s)}if(a<u)for(c=l;c<u;c++){var h=t[c];h.dom&&(h=t[c]=et(h)),Le(n,ke(h,null,r,o,i))}else if(0===u)qe(n,e,r,s);else if(a>u)for(c=l;c<a;c++)Q(e[c],n,r,!1,s)}function ve(e,t,n,r,o,i,s){var a,u,l,p,d,f,_,m=e.length,g=t.length,y=m-1,v=g-1,b=0,w=0;if(0!==m)if(0!==g){var C=e[b],S=t[w],A=e[y],E=t[v];S.dom&&(t[w]=S=et(S)),E.dom&&(t[v]=E=et(E));e:for(;;){for(;C.key===S.key;){if(pe(C,S,n,r,o,i,s),b++,w++,b>y||w>v)break e;C=e[b],(S=t[w]).dom&&(t[w]=S=et(S))}for(;A.key===E.key;){if(pe(A,E,n,r,o,i,s),y--,v--,b>y||w>v)break e;A=e[y],(E=t[v]).dom&&(t[v]=E=et(E))}if(A.key!==S.key){if(C.key!==E.key)break;pe(C,E,n,r,o,i,s),d=(f=v+1)<t.length?t[f].dom:null,ze(n,E.dom,d),v--,C=e[++b],(E=t[v]).dom&&(t[v]=E=et(E))}else pe(A,S,n,r,o,i,s),ze(n,S.dom,C.dom),w++,A=e[--y],(S=t[w]).dom&&(t[w]=S=et(S))}if(b>y){if(w<=v)for(d=(f=v+1)<t.length?t[f].dom:null;w<=v;)(_=t[w]).dom&&(t[w]=_=et(_)),w++,ze(n,ke(_,null,r,o,i),d)}else if(w>v)for(;b<=y;)Q(e[b++],n,r,!1,s);else{m=y-b+1,g=v-w+1;var k=new Array(g);for(a=0;a<g;a++)k[a]=-1;var M=!1,T=0,P=0;if(g<=4||m*g<=16){for(a=b;a<=y;a++)if(l=e[a],P<g)for(u=w;u<=v;u++)if(p=t[u],l.key===p.key){k[u-w]=a,T>u?M=!0:T=u,p.dom&&(t[u]=p=et(p)),pe(l,p,n,r,o,i,s),P++,e[a]=null;break}}else{var O=new Map;for(a=w;a<=v;a++)O.set(t[a].key,a);for(a=b;a<=y;a++)l=e[a],P<g&&(h(u=O.get(l.key))||(p=t[u],k[u-w]=a,T>u?M=!0:T=u,p.dom&&(t[u]=p=et(p)),pe(l,p,n,r,o,i,s),P++,e[a]=null))}if(m===e.length&&0===P)for(qe(n,e,r,s);w<g;)(_=t[w]).dom&&(t[w]=_=et(_)),w++,ze(n,ke(_,null,r,o,i),null);else{for(a=m-P;a>0;)c(l=e[b++])||(Q(l,n,r,!0,s),a--);if(M){var x=be(k);for(u=x.length-1,a=g-1;a>=0;a--)-1===k[a]?((_=t[T=a+w]).dom&&(t[T]=_=et(_)),d=(f=T+1)<t.length?t[f].dom:null,ze(n,ke(_,null,r,o,i),d)):u<0||a!==x[u]?(_=t[T=a+w],d=(f=T+1)<t.length?t[f].dom:null,ze(n,_.dom,d)):u--}else if(P!==g)for(a=g-1;a>=0;a--)-1===k[a]&&((_=t[T=a+w]).dom&&(t[T]=_=et(_)),d=(f=T+1)<t.length?t[f].dom:null,ze(n,ke(_,null,r,o,i),d))}}}else qe(n,e,r,s);else g>0&&Oe(t,n,r,o,i)}function be(e){var t,n,r,o,i,s=e.slice(0),a=[0],u=e.length;for(t=0;t<u;t++){var l=e[t];if(-1!==l)if(n=a[a.length-1],e[n]<l)s[t]=n,a.push(t);else{for(r=0,o=a.length-1;r<o;)e[a[i=(r+o)/2|0]]<l?r=i+1:o=i;l<e[a[r]]&&(r>0&&(s[t]=a[r-1]),a[r]=t)}}for(o=a[(r=a.length)-1];r-- >0;)a[r]=o,o=s[o];return a}function we(e){return"o"===e[0]&&"n"===e[1]}function Ce(e,t,n,r,o,s){if(t!==n){if(Mt.has(e)||s&&"value"===e)return;if(At.has(e))r[e="autoFocus"===e?e.toLowerCase():e]=!!n;else if(St.has(e)){var a=i(n)?"":n;r[e]!==a&&(r[e]=a)}else if(we(e))Se(e,t,n,r);else if(i(n))r.removeAttribute(e);else if("style"===e)Ae(t,n,r);else if("dangerouslySetInnerHTML"===e){var u=t&&t.__html,l=n&&n.__html;u!==l&&(i(l)||Xe(r,l)||(r.innerHTML=l))}else o&&Et.has(e)?r.setAttributeNS(Et.get(e),e,n):r.setAttribute(e,n)}}function Se(e,t,n,r){if(t!==n)if(Tt.has(e))g(e,t,n,r);else{var o=e.toLowerCase(),s=r[o];if(s&&s.wrapped)return;if(a(n)||i(n))r[o]=n;else{var u=n.event;u&&a(u)?r[o]=function(e){u(n.data,e)}:f()}}}function Ae(e,t,n){var r,o,s=n.style;if(u(t))s.cssText=t;else if(i(e)||u(e))for(r in t)o=t[r],s[r]=!l(o)||kt.has(r)?o:o+"px";else{for(r in t)(o=t[r])!==e[r]&&(s[r]=!l(o)||kt.has(r)?o:o+"px");for(r in e)i(t[r])&&(s[r]="")}}function Ee(e,t,n,r){"value"===e?n.value=2048&r?null:"":"style"===e?n.removeAttribute("style"):we(e)?g(e,t,null,n):n.removeAttribute(e)}function ke(e,t,n,r,o){var i=e.flags;return 3970&i?Pe(e,t,n,r,o):28&i?xe(e,t,n,r,o,(4&i)>0):4096&i?Te(e,t):1&i?Me(e,t):void f()}function Me(e,n){var r=t.createTextNode(e.children);return e.dom=r,c(n)||Le(n,r),r}function Te(e,n){var r=t.createTextNode("");return e.dom=r,c(n)||Le(n,r),r}function Pe(e,t,n,r,i){var a;if(vt.recyclingEnabled&&(a=K(e,n,r,i),!c(a)))return c(t)||Le(t,a),a;var u=e.flags;i=i||(128&u)>0,a=He(e.type,i);var l=e.children,p=e.props,h=e.className,d=e.ref;if(e.dom=a,!s(l))if(o(l))Be(a,l);else{var f=!0===i&&"foreignObject"!==e.type;yt(l)?Oe(l,a,n,r,f):ot(l)&&ke(l,a,n,r,f)}if(!c(p)){var _=!1,m=(3584&u)>0;m&&(_=U(p));for(var g in p)Ce(g,null,p[g],a,i,_);m&&B(u,e,a,p,!0,_)}return null!==h&&(i?a.setAttribute("class",h):a.className=h),c(d)||Ne(a,d,n),c(t)||Le(t,a),a}function Oe(e,t,n,r,o){for(var i=0,a=e.length;i<a;i++){var u=e[i];s(u)||(u.dom&&(e[i]=u=et(u)),ke(e[i],t,n,r,o))}}function xe(e,t,n,r,o,i){var s;if(vt.recyclingEnabled&&(s=J(e,n,r,o),!c(s)))return c(t)||Le(t,s),s;var a=e.type,u=e.props||Ft,l=e.ref;if(i){var p=De(e,a,u,r,o,n),h=p._lastInput;p._vNode=e,e.dom=s=ke(h,null,n,p._childContext,o),c(t)||Le(t,s),Ie(e,l,p,n),p._updating=!1,vt.findDOMNodeEnabled&&Rt.set(p,s)}else{var d=$e(e,a,u,r);e.dom=s=ke(d,null,n,r,o),e.children=d,Re(u,l,s,n),c(t)||Le(t,s)}return s}function Ie(e,t,n,r){t&&(a(t)?t(n):f());var o=!h(n.componentDidMount),i=vt.afterMount;!o&&c(i)||r.addListener(function(){n._updating=!0,i&&i(e),o&&n.componentDidMount(),n._updating=!1})}function Re(e,t,n,r){t&&(i(t.onComponentWillMount)||t.onComponentWillMount(e),i(t.onComponentDidMount)||r.addListener(function(){return t.onComponentDidMount(n,e)}))}function Ne(e,t,n){if(a(t))n.addListener(function(){return t(e)});else{if(s(t))return;f()}}function De(e,t,n,r,a,u){h(r)&&(r=Ft);var l=new t(n,r);e.children=l,l._blockSetState=!1,l.context=r,l.props===Ft&&(l.props=n),l._lifecycle=u,l._unmounted=!1,l._pendingSetState=!0,l._isSVG=a,i(l.componentWillMount)||(l._blockRender=!0,l.componentWillMount(),l._blockRender=!1);var p;i(l.getChildContext)||(p=l.getChildContext()),i(p)?l._childContext=r:l._childContext=_(r,p),c(vt.beforeRender)||vt.beforeRender(l);var d=l.render(n,l.state,r);return c(vt.afterRender)||vt.afterRender(l),yt(d)?f():s(d)?d=nt():o(d)?d=rt(d,null):(d.dom&&(d=et(d)),28&d.flags&&(d.parentVNode=e)),l._pendingSetState=!1,l._lastInput=d,l}function Fe(e,t,n,r,o,i,s){je(n,ke(t,null,r,o,i),e,r,s)}function je(e,t,n,r,o){Q(n,null,r,!1,o),We(e,t,n.dom)}function $e(e,t,n,r){var i=t(n,r);return yt(i)?f():s(i)?i=nt():o(i)?i=rt(i,null):(i.dom&&(i=et(i)),28&i.flags&&(i.parentVNode=e)),i}function Be(e,n){""!==n?e.textContent=n:e.appendChild(t.createTextNode(""))}function Ue(e,t){e.firstChild.nodeValue=t}function Le(e,t){e.appendChild(t)}function ze(e,t,n){i(n)?Le(e,t):e.insertBefore(t,n)}function He(e,n){return!0===n?t.createElementNS(Ct,e):t.createElement(e)}function Ve(e,t,n,r,o,i,s){Q(e,null,r,!1,s);var a=ke(t,null,r,o,i);t.dom=a,We(n,a,e.dom)}function We(e,t,n){e||(e=n.parentNode),e.replaceChild(t,n)}function Ge(e,t){e.removeChild(t)}function qe(e,t,n,r){(!vt.recyclingEnabled||vt.recyclingEnabled&&!r)&&Ye(null,t,n,r),e.textContent=""}function Ye(e,t,n,r){for(var o=0,i=t.length;o<i;o++){var a=t[o];s(a)||Q(a,e,n,!0,r)}}function Ke(e,t){return t.length>0&&!i(t[0])&&!i(t[0].key)&&e.length>0&&!i(e[0])&&!i(e[0].key)}function Xe(e,n){var r=t.createElement("i");return r.innerHTML=n,r.innerHTML===e.innerHTML}function Je(e,t){return Boolean(t&&t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html&&Xe(e,t.dangerouslySetInnerHTML.__html))}function Ze(e,t,n,r,o,i,s){this.children=e,this.className=t,this.dom=null,this.flags=n,this.key=r,this.props=o,this.ref=i,this.type=s}function Qe(e,t,n,o,i,s,a,u){16&e&&(e=r(t)?4:8);var l=new Ze(void 0===o?null:o,void 0===n?null:n,e,void 0===s?null:s,void 0===i?null:i,void 0===a?null:a,t);return!0!==u&&dt(l),null!==vt.createVNode&&vt.createVNode(l),l}function et(e){var t,n=e.flags;if(28&n){var r,i=e.props;if(c(i))r=Ft;else{r={};for(var a in i)r[a]=i[a]}var u=(t=Qe(n,e.type,null,null,r,e.key,e.ref,!0)).props,l=u.children;if(l)if(yt(l)){var p=l.length;if(p>0){for(var h=[],d=0;d<p;d++){var f=l[d];o(f)?h.push(f):!s(f)&&ot(f)&&h.push(et(f))}u.children=h}}else ot(l)&&(u.children=et(l));t.children=null}else if(3970&n){var _,m=e.children,g=e.props;if(null===g)_=Ft;else{_={};for(var y in g)_[y]=g[y]}t=Qe(n,e.type,e.className,m,_,e.key,e.ref,!m)}else 1&n&&(t=rt(e.children,e.key));return t}function tt(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];var i=n,a=n.length;a>0&&!h(n[0])&&(t||(t={}),1===a&&(i=n[0]),h(i)||(t.children=i));var u;if(yt(e)){for(var l=[],c=0,p=e.length;c<p;c++)l.push(et(e[c]));u=l}else{var d=e.flags,f=e.className,m=e.key,g=e.ref;if(t&&(t.hasOwnProperty("className")&&(f=t.className),t.hasOwnProperty("ref")&&(g=t.ref),t.hasOwnProperty("key")&&(m=t.key)),28&d){var y=(u=Qe(d,e.type,f,null,e.props||t?_(e.props,t):Ft,m,g,!0)).props;if(y){var v=y.children;if(v)if(yt(v)){var b=v.length;if(b>0){for(var w=[],C=0;C<b;C++){var S=v[C];o(S)?w.push(S):!s(S)&&ot(S)&&w.push(et(S))}y.children=w}}else ot(v)&&(y.children=et(v))}u.children=null}else 3970&d?(i=t&&!h(t.children)?t.children:e.children,u=Qe(d,e.type,f,i,e.props||t?_(e.props,t):Ft,m,g,!1)):1&d&&(u=rt(e.children,m))}return u}function nt(){return Qe(4096,null)}function rt(e,t){return Qe(1,null,null,e,null,t)}function ot(e){return!!e.flags}function it(e,t){return t.key=e,t}function st(e,t){return l(e)&&(e="."+e),c(t.key)||"."===t.key[0]?it(e,t):t}function at(e,t){return t.key=e+t.key,t}function ut(e,t,n,r){for(var i=e.length;n<i;n++){var a=e[n],u=r+"."+n;s(a)||(yt(a)?ut(a,t,0,u):(o(a)?a=rt(a,null):(ot(a)&&a.dom||a.key&&"."===a.key[0])&&(a=et(a)),a=c(a.key)||"."===a.key[0]?it(u,a):at(r,a),t.push(a)))}}function lt(e){var t;!0===e.$?e=e.slice():e.$=!0;for(var n=0,r=e.length;n<r;n++){var i=e[n];if(s(i)||yt(i)){var a=(t||e).slice(0,n);return ut(e,a,n,""),a}o(i)?(t||(t=e.slice(0,n)),t.push(st(n,rt(i,null)))):ot(i)&&null!==i.dom||c(i.key)&&0==(64&i.flags)?(t||(t=e.slice(0,n)),t.push(st(n,et(i)))):t&&t.push(st(n,et(i)))}return t||e}function ct(e){return yt(e)?lt(e):ot(e)&&null!==e.dom?et(e):e}function pt(e,t,n){3970&e.flags&&(i(n)&&t.hasOwnProperty("children")&&(e.children=t.children),t.hasOwnProperty("className")&&(e.className=t.className||null,delete t.className)),t.hasOwnProperty("ref")&&(e.ref=t.ref,delete t.ref),t.hasOwnProperty("key")&&(e.key=t.key,delete t.key)}function ht(e){return"svg"===e?128:"input"===e?512:"select"===e?2048:"textarea"===e?1024:"media"===e?256:2}function dt(e){var t=e.props,n=e.children;if(28&e.flags){var r=e.type,o=r.defaultProps;if(!i(o))if(t)for(var a in o)h(t[a])&&(t[a]=o[a]);else t=e.props=o;u(r)&&(e.flags=ht(r),t&&t.children&&(e.children=t.children,n=t.children))}t&&(pt(e,t,n),s(t.children)||(t.children=ct(t.children))),s(n)||(e.children=ct(n))}function ft(e,t){return a(t)?{data:e,event:t}:null}var _t="$NO_OP",mt="a runtime error occured! Use Inferno in development environment to find the error.",gt=!("undefined"==typeof e||!e.document),yt=Array.isArray;m.prototype.addListener=function(e){this.listeners.push(e)},m.prototype.trigger=function(){for(var e,t=this.listeners;e=t.shift();)e()};var vt={afterMount:null,afterRender:null,afterUpdate:null,beforeRender:null,beforeUnmount:null,createVNode:null,findDOMNodeEnabled:!1,recyclingEnabled:!1,roots:[]},bt="http://www.w3.org/1999/xlink",wt="http://www.w3.org/XML/1998/namespace",Ct="http://www.w3.org/2000/svg",St=new Set;St.add("volume"),St.add("defaultChecked");var At=new Set;At.add("muted"),At.add("scoped"),At.add("loop"),At.add("open"),At.add("checked"),At.add("default"),At.add("capture"),At.add("disabled"),At.add("readOnly"),At.add("required"),At.add("autoplay"),At.add("controls"),At.add("seamless"),At.add("reversed"),At.add("allowfullscreen"),At.add("novalidate"),At.add("hidden"),At.add("autoFocus"),At.add("selected"),At.add("indeterminate");var Et=new Map;Et.set("xlink:href",bt),Et.set("xlink:arcrole",bt),Et.set("xlink:actuate",bt),Et.set("xlink:show",bt),Et.set("xlink:role",bt),Et.set("xlink:title",bt),Et.set("xlink:type",bt),Et.set("xml:base",wt),Et.set("xml:lang",wt),Et.set("xml:space",wt);var kt=new Set;kt.add("animationIterationCount"),kt.add("borderImageOutset"),kt.add("borderImageSlice"),kt.add("borderImageWidth"),kt.add("boxFlex"),kt.add("boxFlexGroup"),kt.add("boxOrdinalGroup"),kt.add("columnCount"),kt.add("flex"),kt.add("flexGrow"),kt.add("flexPositive"),kt.add("flexShrink"),kt.add("flexNegative"),kt.add("flexOrder"),kt.add("gridRow"),kt.add("gridColumn"),kt.add("fontWeight"),kt.add("lineClamp"),kt.add("lineHeight"),kt.add("opacity"),kt.add("order"),kt.add("orphans"),kt.add("tabSize"),kt.add("widows"),kt.add("zIndex"),kt.add("zoom"),kt.add("fillOpacity"),kt.add("floodOpacity"),kt.add("stopOpacity"),kt.add("strokeDasharray"),kt.add("strokeDashoffset"),kt.add("strokeMiterlimit"),kt.add("strokeOpacity"),kt.add("strokeWidth");var Mt=new Set;Mt.add("children"),Mt.add("childrenType"),Mt.add("defaultValue"),Mt.add("ref"),Mt.add("key"),Mt.add("checked"),Mt.add("multiple");var Tt=new Set;Tt.add("onClick"),Tt.add("onMouseDown"),Tt.add("onMouseUp"),Tt.add("onMouseMove"),Tt.add("onSubmit"),Tt.add("onDblClick"),Tt.add("onKeyDown"),Tt.add("onKeyUp"),Tt.add("onKeyPress");var Pt=gt&&!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),Ot=new Map,xt=new Map,It=new Map,Rt=new Map,Nt=vt.roots,Dt=gt?t.body:null,Ft={},jt={EMPTY_OBJ:Ft,NO_OP:_t,cloneVNode:tt,createRenderer:ce,createVNode:Qe,findDOMNode:ie,getFlagsForElementVnode:ht,internal_DOMNodeMap:Rt,internal_isUnitlessNumber:kt,internal_normalize:dt,internal_patch:pe,linkEvent:ft,options:vt,render:le,version:"3.8.0"};n["default"]=jt,n.EMPTY_OBJ=Ft,n.NO_OP=_t,n.cloneVNode=tt,n.createRenderer=ce,n.createVNode=Qe,n.findDOMNode=ie,n.getFlagsForElementVnode=ht,n.internal_DOMNodeMap=Rt,n.internal_isUnitlessNumber=kt,n.internal_normalize=dt,n.internal_patch=pe,n.linkEvent=ft,n.options=vt,n.render=le,n.version="3.8.0",Object.defineProperty(n,"__esModule",{value:!0})})}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";var r=(n.$,n._,n.Promise);!function(e,t){e.Inferno=e.Inferno||{},e.Inferno.Component=t(e.Inferno)}(e.Mango,function(t){function n(e){var t=typeof e;return"string"===t||"number"===t}function o(e){return l(e)||a(e)}function i(e){return a(e)||e===!1||u(e)||l(e)}function s(e){return"function"==typeof e}function a(e){return null===e}function u(e){return e===!0}function l(e){return void 0===e}function c(e){throw e||(e=g),new Error("Inferno Error: "+e)}function p(e,t){var n={};if(e)for(var r in e)n[r]=e[r];if(t)for(var o in t)n[o]=t[o];return n}function h(e,t){if(28&e.flags){var n=e.parentVNode;n&&(n.dom=t,h(n,t))}}function d(e,t,n){var r=w.get(e);void 0===r&&(r=[],w.set(e,r),C.then(function(){w["delete"](e),e._updating=!0,_(e,t,function(){for(var e=0,t=r.length;e<t;e++)r[e]()}),e._updating=!1})),o(n)||r.push(n)}function f(e,t,n){s(t)&&(t=t(e.state,e.props,e.context));var r=e._pendingState;if(null===r)e._pendingState=r=t;else for(var i in t)r[i]=t[i];if(!y||e._pendingSetState||e._blockRender){var a=e.state;if(null===a)e.state=r;else for(var u in r)a[u]=r[u];e._pendingState=null,!o(n)&&e._blockRender&&e._lifecycle.addListener(n.bind(e))}else e._updating?d(e,!1,n):(e._pendingSetState=!0,e._updating=!0,_(e,!1,n),e._updating=!1)}function _(e,r,s){if(!e._unmounted){if(r||!e._blockRender){e._pendingSetState=!1;var u=e._pendingState,d=e.state,f=p(d,u),_=e.props,g=e.context;e._pendingState=null;var y=e._updateComponent(d,f,_,_,g,r,!0),b=!0;i(y)?y=t.createVNode(4096,null):y===m?(y=e._lastInput,b=!1):n(y)?y=t.createVNode(1,null,null,y):v(y)&&(c("a valid Inferno VNode (or null) must be returned from a component render. You may have returned an array or an invalid object."),c());var w=e._lastInput,C=e._vNode,S=w.dom&&w.dom.parentNode||(w.dom=C.dom);if(e._lastInput=y,b){var A;l(e.getChildContext)||(A=e.getChildContext()),A=o(A)?e._childContext:p(g,A);var E=e._lifecycle;t.internal_patch(w,y,S,E,A,e._isSVG,!1),E.trigger(),l(e.componentDidUpdate)||e.componentDidUpdate(_,d,g),a(t.options.afterUpdate)||t.options.afterUpdate(C)}var k=C.dom=y.dom;t.options.findDOMNodeEnabled&&t.internal_DOMNodeMap.set(e,y.dom),h(C,k)}else e.state=e._pendingState,e._pendingState=null;o(s)||s.call(e)}}var m="$NO_OP",g="a runtime error occured! Use Inferno in development environment to find the error.",y=!("undefined"==typeof e||!e.document),v=Array.isArray,b=g;b="Inferno Error: Can only update a mounted or mounting component. This usually means you called setState() or forceUpdate() on an unmounted component. This is a no-op.";var w=new Map,C=r.resolve(),S=!1,A=function(e,n){this.state=null,this._blockRender=!1,this._blockSetState=!0,this._pendingSetState=!1,this._pendingState=null,this._lastInput=null,this._vNode=null,this._unmounted=!1,this._lifecycle=null,this._childContext=null,this._isSVG=!1,this._updating=!0,this.props=e||t.EMPTY_OBJ,this.context=n||t.EMPTY_OBJ};return A.prototype.forceUpdate=function(e){!this._unmounted&&y&&_(this,!0,e)},A.prototype.setState=function(e,t){this._unmounted||(this._blockSetState?(c("cannot update state via setState() in componentWillUpdate() or constructor."),c()):f(this,e,t))},A.prototype.setStateSync=function(e){S||(S=!0,console.warn("Inferno WARNING: setStateSync has been deprecated and will be removed in next release. Use setState instead.")),this.setState(e)},A.prototype._updateComponent=function(e,n,r,o,i,s,a){if(this._unmounted===!0&&(c(b),c()),r!==o||o===t.EMPTY_OBJ||e!==n||s){if(r===o&&o!==t.EMPTY_OBJ||(l(this.componentWillReceiveProps)||a||(this._blockRender=!0,this.componentWillReceiveProps(o,i),this._blockRender=!1),this._pendingSetState&&(n=p(n,this._pendingState),this._pendingSetState=!1,this._pendingState=null)),l(this.shouldComponentUpdate)||this.shouldComponentUpdate(o,n,i)||s){l(this.componentWillUpdate)||(this._blockSetState=!0,this.componentWillUpdate(o,n,i),this._blockSetState=!1),this.props=o,this.state=n,this.context=i,t.options.beforeRender&&t.options.beforeRender(this);var u=this.render(o,n,i);return t.options.afterRender&&t.options.afterRender(this),u}this.props=o,this.state=n,this.context=i}return m},A.prototype.render=function(e,t,n){},A})}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;!function(e){function t(e,t,i){if("string"!=typeof t){var s=Object.getOwnPropertyNames(t);o&&(s=s.concat(Object.getOwnPropertySymbols(t)));for(var a=0;a<s.length;++a)if(!(n[s[a]]||r[s[a]]||i&&i[s[a]]))try{e[s[a]]=t[s[a]]}catch(u){}}return e}var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},o="function"==typeof Object.getOwnPropertySymbols;e.hoistStatics=t,function(e){function t(e){return s(e)||o(e)}function n(e){return o(e)||e===!1||i(e)||s(e)}function r(e){return"string"==typeof e}function o(e){return null===e}function i(e){return e===!0}function s(e){return void 0===e}function a(e){return"object"==typeof e}function u(o,i){for(var u=[],c=arguments.length-2;c-- >0;)u[c]=arguments[c+2];if(n(o)||a(o))throw new Error("Inferno Error: createElement() name parameter cannot be undefined, null, false or true, It must be a string, class or function.");var p,h=u,d=null,f=null,_=null,m=0;if(u&&(1===u.length?h=u[0]:0===u.length&&(h=void 0)),r(o)){if(m=e.getFlagsForElementVnode(o),!t(i)){p={};for(var g in i)"className"===g||"class"===g?_=i[g]:"key"===g?f=i.key:"children"===g&&s(h)?h=i.children:"ref"===g?d=i.ref:p[g]=i[g]}}else if(m=16,s(h)||(i||(i={}),i.children=h,h=null),!t(i)){p={};for(var y in i)l.has(y)?(d||(d={}),d[y]=i[y]):"key"===y?f=i.key:p[y]=i[y]}return e.createVNode(m,o,_,h,p,f,d)}var l=new Set;l.add("onComponentWillMount"),l.add("onComponentDidMount"),l.add("onComponentWillUnmount"),l.add("onComponentShouldUpdate"),l.add("onComponentWillUpdate"),l.add("onComponentDidUpdate"),e.createElement=u}(e.Inferno)}(e.Mango)}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;!function(e,t){e.ReduxThunk=t()}(e.Mango,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t){function n(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(o){return"function"==typeof o?o(n,r,e):t(o)}}}}t.__esModule=!0;var r=n();r.withExtraArgument=n,t["default"]=r}])})}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;!function(e,t){t((e.Inferno=e.Inferno||{},e.Inferno.Redux={}),e.hoistStatics,e.Inferno.Component,e.Inferno.createElement,e.redux)}(e.Mango,function(e,t,n,r,o){function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]]);return n}function s(e){return"ConnectAdvanced("+e+")"}function a(e,o){var a=o.getDisplayName;void 0===a&&(a=s);var u=o.methodName;void 0===u&&(u="connectAdvanced");var l=o.renderCountProp;void 0===l&&(l=null);var c=o.shouldHandleStateChanges;void 0===c&&(c=!0);var p=o.storeKey;void 0===p&&(p="store");var h=o.withRef;void 0===h&&(h=!1);var d=i(o,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),f=p+"Subscription",_=S++,m=function(o){M("function"==typeof o,"You must pass a component to the function returned by connect. Instead received "+o);var i=o.displayName||o.name||"Component",s=a(i),m=Object.assign({},d,{WrappedComponent:o,displayName:s,getDisplayName:a,methodName:u,renderCountProp:l,shouldHandleStateChanges:c,storeKey:p,withRef:h,wrappedComponentName:i}),g=function(t){function n(e,n){t.call(this,e,n),this.version=_,this.state={},this.renderCount=0,this.store=this.props[p]||this.context[p],this.propsMode=Boolean(e[p]),this.setWrappedInstance=this.setWrappedInstance.bind(this),M(!!this.store,'Could not find "'+p+'" in either the context or props of "'+s+'". Either wrap the root component in a <Provider>, or explicitly pass "'+p+'" as a prop to "'+s+'".'),this.initSelector(),this.initSubscription()}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.getChildContext=function(){var e=this.propsMode?null:this.subscription;return t={},t[f]=e||this.context[f],t;var t},n.prototype.componentDidMount=function(){c&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},n.prototype.componentWillReceiveProps=function(e){this.selector.run(e)},n.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},n.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=E,this.store=null,this.selector.run=E,this.selector.shouldComponentUpdate=!1},n.prototype.getWrappedInstance=function(){return M(h,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+u+"() call."),this.wrappedInstance},n.prototype.setWrappedInstance=function(e){this.wrappedInstance=e},n.prototype.initSelector=function(){var t=e(this.store.dispatch,m);this.selector=k(t,this.store),this.selector.run(this.props)},n.prototype.initSubscription=function(){if(c){var e=(this.propsMode?this.props:this.context)[f];this.subscription=new C(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},n.prototype.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(A)):this.notifyNestedSubs()},n.prototype.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},n.prototype.isSubscribed=function(){return Boolean(this.subscription&&this.subscription.isSubscribed())},n.prototype.addExtraProps=function(e){if(!h&&!l)return e;var t=Object.assign({},e);return h&&(t.ref=this.setWrappedInstance),l&&(t[l]=this.renderCount++),this.propsMode&&this.subscription&&(t[f]=this.subscription),t},n.prototype.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return r(o,this.addExtraProps(e.props))},n}(n);return g.displayName=s,g.WrappedComponent=o,g.prototype.componentWillUpdate=function(){this.version!==_&&(this.version=_,this.initSelector(),this.subscription&&this.subscription.tryUnsubscribe(),this.initSubscription(),c&&this.subscription.trySubscribe())},t(g,o)};return m}function u(e){return T(e)?e:e?[e]:e}function l(e){return p(e)||c(e)}function c(e){return null===e}function p(e){return void 0===e}function h(e){var t=U.call(e,z),n=e[z];try{e[z]=void 0;var r=!0}catch(o){}var i=L.call(e);return r&&(t?e[z]=n:delete e[z]),i}function d(e){return V.call(e)}function f(e){return null==e?void 0===e?G:W:q&&q in Object(e)?h(e):d(e)}function _(e,t){return function(n){return e(t(n))}}function m(e){return null!=e&&"object"==typeof e}function g(e){if(!m(e)||f(e)!=K)return!1;var t=Y(e);if(null===t)return!0;var n=Q.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Z.call(n)==ee}t=t&&t.hasOwnProperty("default")?t["default"]:t,n=n&&n.hasOwnProperty("default")?n["default"]:n,r=r&&r.hasOwnProperty("default")?r["default"]:r;var y=null,v=function(){},b={clear:function(){},notify:function(){},subscribe:function(e){return v}},w=function(){var e=[],t=[];return{clear:function(){t=y,e=y},notify:function(){for(var n=e=t,r=0;r<n.length;r++)n[r]()},subscribe:function(n){var r=!0;t===e&&(t=e.slice()),t.push(n);var o=function(){r&&null!==e&&(r=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(n),1))};return o}}},C=function(e,t,n){this.store=e,this.parentSub=t,this.onStateChange=n,this.unsubscribe=null,this.listeners=b};C.prototype.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},C.prototype.notifyNestedSubs=function(){this.listeners.notify()},C.prototype.isSubscribed=function(){return Boolean(this.unsubscribe)},C.prototype.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=w())},C.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=b)};var S=0,A={},E=function(){},k=function(e,t){var n={error:null,props:{},run:function(r){try{var o=e(t.getState(),r);(o!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=o,n.error=null)}catch(i){n.shouldComponentUpdate=!0,n.error=i}},shouldComponentUpdate:!1};return n},M=function(e,t){if(!e)throw new Error(t)},T=Array.isArray,P=function(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(t){}},O=!1,x=function(){O||(O=!0,P("<Provider> does not support changing `store` on the fly."))},I=function(e){function t(t,n){e.call(this,t,n),this.store=t.store}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getChildContext=function(){return{store:this.store,storeSubscription:null}},t.prototype.render=function(){if(l(this.props.children)||1!==u(this.props.children).length)throw Error("Inferno Error: Only one child is allowed within the `Provider` component");return this.props.children},t}(n);I.displayName="Provider",I.prototype.componentWillReceiveProps=function(e){var t=this,n=t.store,r=e.store;n!==r&&x()};var R=Object.prototype.hasOwnProperty,N=function(e,t){if(e===t)return!0;var n=0,r=0;for(var o in e){if(R.call(e,o)&&e[o]!==t[o])return!1;n++}for(var i in t)R.call(t,i)&&r++;return n===r},D="object"==typeof global&&global&&global.Object===Object&&global,F="object"==typeof self&&self&&self.Object===Object&&self,j=D||F||Function("return this")(),$=j.Symbol,B=Object.prototype,U=B.hasOwnProperty,L=B.toString,z=$?$.toStringTag:void 0,H=Object.prototype,V=H.toString,W="[object Null]",G="[object Undefined]",q=$?$.toStringTag:void 0,Y=_(Object.getPrototypeOf,Object),K="[object Object]",X=Function.prototype,J=Object.prototype,Z=X.toString,Q=J.hasOwnProperty,ee=Z.call(Object),te=function(e,t,n){g(e)||P(n+"() in "+t+" must return a plain object. Instead received "+e+".")},ne=function(e){var t=function(t,n){var r=e(t,n),o=function(){return r};return o.dependsOnOwnProps=!1,o};return t},re=function(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?!!e.dependsOnOwnProps:1!==e.length},oe=function(e,t){var n=function(n,r){var o=r.displayName,i=function(e,t){return i.dependsOnOwnProps?i.mapToProps(e,t):i.mapToProps(e)};return i.dependsOnOwnProps=re(e),i.mapToProps=function(n,r){i.mapToProps=e;var s=i(n,r);return"function"==typeof s&&(i.mapToProps=s,i.dependsOnOwnProps=re(s),s=i(n,r)),te(s,o,t),s},i};return n},ie=function(e){return"function"==typeof e?oe(e,"mapDispatchToProps"):void 0},se=function(e){return e?void 0:ne(function(e){return{dispatch:e}})},ae=function(e){return e&&"object"==typeof e?ne(function(t){return o.bindActionCreators(e,t)}):void 0},ue=[ie,se,ae],le=function(e){return"function"==typeof e?oe(e,"mapStateToProps"):void 0},ce=function(e){return e?void 0:ne(function(){return{}})},pe=[le,ce],he=function(e,t,n){return Object.assign({},n,e,t)},de=function(e){var t=function(t,n){var r,o=n.displayName,i=n.pure,s=n.areMergedPropsEqual,a=!1,u=function(t,n,u){var l=e(t,n,u);return a?i&&s(l,r)||(r=l):(a=!0,r=l,te(r,o,"mergeProps")),r};return u};return t},fe=function(e){return"function"==typeof e?de(e):void 0},_e=function(e){return e?void 0:function(){return he}},me=[fe,_e],ge=function(e,t,n){if(!e)throw new Error("Unexpected value for "+t+" in "+n+".");"mapStateToProps"!==t&&"mapDispatchToProps"!==t||e.hasOwnProperty("dependsOnOwnProps")||P("The selector for "+t+" of "+n+" did not specify a value for dependsOnOwnProps.")},ye=function(e,t,n,r){ge(e,"mapStateToProps",r),ge(t,"mapDispatchToProps",r),ge(n,"mergeProps",r)},ve=function(e,t,n,r){var o=function(o,i){return n(e(o,i),t(r,i),i)};return o},be=function(e,t,n,r,o){var i,s,a,u,l,c=o.areStatesEqual,p=o.areOwnPropsEqual,h=o.areStatePropsEqual,d=!1,f=function(o,c){return i=o,s=c,a=e(i,s),u=t(r,s),l=n(a,u,s),d=!0,l},_=function(){return a=e(i,s),t.dependsOnOwnProps&&(u=t(r,s)),l=n(a,u,s)},m=function(){return e.dependsOnOwnProps&&(a=e(i,s)),t.dependsOnOwnProps&&(u=t(r,s)),l=n(a,u,s)},g=function(){var t=e(i,s),r=!h(t,a);return a=t,r&&(l=n(a,u,s)),l},y=function(e,t){var n=!p(t,s),r=!c(e,i);return i=e,s=t,n&&r?_():n?m():r?g():l},v=function(e,t){return d?y(e,t):f(e,t)};return v},we=function(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,o=t.initMergeProps,s=i(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=s,u=n(e,a),l=r(e,a),c=o(e,a);ye(u,l,c,a.displayName);var p=a.pure?be:ve;return p(u,l,c,e,a)},Ce=function(e,t,n){for(var r=t.length-1;r>=0;r--){var o=t[r](e);if(o)return o;
}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}},Se=function(e,t){return e===t},Ae=function(e){void 0===e&&(e={});var t=e.connectHOC;void 0===t&&(t=a);var n=e.mapStateToPropsFactories;void 0===n&&(n=pe);var r=e.mapDispatchToPropsFactories;void 0===r&&(r=ue);var o=e.mergePropsFactories;void 0===o&&(o=me);var s=e.selectorFactory;return void 0===s&&(s=we),function(e,a,u,l){void 0===l&&(l={});var c=l.pure;void 0===c&&(c=!0);var p=l.areStatesEqual;void 0===p&&(p=Se);var h=l.areOwnPropsEqual;void 0===h&&(h=N);var d=l.areStatePropsEqual;void 0===d&&(d=N);var f=l.areMergedPropsEqual;void 0===f&&(f=N);var _=i(l,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),m=Ce(e,n,"mapStateToProps"),g=Ce(a,r,"mapDispatchToProps"),y=Ce(u,o,"mergeProps");return t(s,Object.assign({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:!!e,initMapStateToProps:m,initMapDispatchToProps:g,initMergeProps:y,pure:c,areStatesEqual:p,areOwnPropsEqual:h,areStatePropsEqual:d,areMergedPropsEqual:f},_))}},Ee=Ae(),ke={Provider:I,connectAdvanced:a,connect:Ee};e.Provider=I,e.connectAdvanced=a,e.connect=Ee,e["default"]=ke,Object.defineProperty(e,"__esModule",{value:!0})})}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;!function(e,t){e.moment=t()}(e.Mango,function(){function e(){return vr.apply(null,arguments)}function t(e){vr=e}function n(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function r(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function o(e){var t;for(t in e)return!1;return!0}function i(e){return void 0===e}function s(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function a(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function u(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e,t){for(var n in t)l(t,n)&&(e[n]=t[n]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,r){return yt(e,t,n,r,!0).utc()}function h(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function d(e){return null==e._pf&&(e._pf=h()),e._pf}function f(e){if(null==e._isValid){var t=d(e),n=wr.call(t.parsedDateParts,function(e){return null!=e}),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(r=r&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return r;e._isValid=r}return e._isValid}function _(e){var t=p(NaN);return null!=e?c(d(t),e):d(t).userInvalidated=!0,t}function m(e,t){var n,r,o;if(i(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),i(t._i)||(e._i=t._i),i(t._f)||(e._f=t._f),i(t._l)||(e._l=t._l),i(t._strict)||(e._strict=t._strict),i(t._tzm)||(e._tzm=t._tzm),i(t._isUTC)||(e._isUTC=t._isUTC),i(t._offset)||(e._offset=t._offset),i(t._pf)||(e._pf=d(t)),i(t._locale)||(e._locale=t._locale),Cr.length>0)for(n=0;n<Cr.length;n++)r=Cr[n],o=t[r],i(o)||(e[r]=o);return e}function g(t){m(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Sr===!1&&(Sr=!0,e.updateOffset(this),Sr=!1)}function y(e){return e instanceof g||null!=e&&null!=e._isAMomentObject}function v(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function b(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=v(t)),n}function w(e,t,n){var r,o=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0;for(r=0;r<o;r++)(n&&e[r]!==t[r]||!n&&b(e[r])!==b(t[r]))&&s++;return s+i}function C(t){e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function S(t,n){var r=!0;return c(function(){if(null!=e.deprecationHandler&&e.deprecationHandler(null,t),r){for(var o,i=[],s=0;s<arguments.length;s++){if(o="","object"==typeof arguments[s]){o+="\n["+s+"] ";for(var a in arguments[0])o+=a+": "+arguments[0][a]+", ";o=o.slice(0,-2)}else o=arguments[s];i.push(o)}C(t+"\nArguments: "+Array.prototype.slice.call(i).join("")+"\n"+(new Error).stack),r=!1}return n.apply(this,arguments)},n)}function A(t,n){null!=e.deprecationHandler&&e.deprecationHandler(t,n),Ar[t]||(C(n),Ar[t]=!0)}function E(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function k(e){var t,n;for(n in e)t=e[n],E(t)?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function M(e,t){var n,o=c({},e);for(n in t)l(t,n)&&(r(e[n])&&r(t[n])?(o[n]={},c(o[n],e[n]),c(o[n],t[n])):null!=t[n]?o[n]=t[n]:delete o[n]);for(n in e)l(e,n)&&!l(t,n)&&r(e[n])&&(o[n]=c({},o[n]));return o}function T(e){null!=e&&this.set(e)}function P(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return E(r)?r.call(t,n):r}function O(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function x(){return this._invalidDate}function I(e){return this._ordinal.replace("%d",e)}function R(e,t,n,r){var o=this._relativeTime[n];return E(o)?o(e,t,n,r):o.replace(/%d/i,e)}function N(e,t){var n=this._relativeTime[e>0?"future":"past"];return E(n)?n(t):n.replace(/%s/i,t)}function D(e,t){var n=e.toLowerCase();Nr[n]=Nr[n+"s"]=Nr[t]=e}function F(e){return"string"==typeof e?Nr[e]||Nr[e.toLowerCase()]:void 0}function j(e){var t,n,r={};for(n in e)l(e,n)&&(t=F(n),t&&(r[t]=e[n]));return r}function $(e,t){Dr[e]=t}function B(e){var t=[];for(var n in e)t.push({unit:n,priority:Dr[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}function U(t,n){return function(r){return null!=r?(z(this,t,r),e.updateOffset(this,n),this):L(this,t)}}function L(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function z(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n)}function H(e){return e=F(e),E(this[e])?this[e]():this}function V(e,t){if("object"==typeof e){e=j(e);for(var n=B(e),r=0;r<n.length;r++)this[n[r].unit](e[n[r].unit])}else if(e=F(e),E(this[e]))return this[e](t);return this}function W(e,t,n){var r=""+Math.abs(e),o=t-r.length,i=e>=0;return(i?n?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+r}function G(e,t,n,r){var o=r;"string"==typeof r&&(o=function(){return this[r]()}),e&&(Br[e]=o),t&&(Br[t[0]]=function(){return W(o.apply(this,arguments),t[1],t[2])}),n&&(Br[n]=function(){return this.localeData().ordinal(o.apply(this,arguments),e)})}function q(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Y(e){var t,n,r=e.match(Fr);for(t=0,n=r.length;t<n;t++)Br[r[t]]?r[t]=Br[r[t]]:r[t]=q(r[t]);return function(t){var o,i="";for(o=0;o<n;o++)i+=E(r[o])?r[o].call(t,e):r[o];return i}}function K(e,t){return e.isValid()?(t=X(t,e.localeData()),$r[t]=$r[t]||Y(t),$r[t](e)):e.localeData().invalidDate()}function X(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(jr.lastIndex=0;r>=0&&jr.test(e);)e=e.replace(jr,n),jr.lastIndex=0,r-=1;return e}function J(e,t,n){ro[e]=E(t)?t:function(e,r){return e&&n?n:t}}function Z(e,t){return l(ro,e)?ro[e](t._strict,t._locale):new RegExp(Q(e))}function Q(e){return ee(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,o){return t||n||r||o}))}function ee(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function te(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),s(t)&&(r=function(e,n){n[t]=b(e)}),n=0;n<e.length;n++)oo[e[n]]=r}function ne(e,t){te(e,function(e,n,r,o){r._w=r._w||{},t(e,r._w,r,o)})}function re(e,t,n){null!=t&&l(oo,e)&&oo[e](t,n._a,n,e)}function oe(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function ie(e,t){return e?n(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||mo).test(t)?"format":"standalone"][e.month()]:n(this._months)?this._months:this._months.standalone}function se(e,t){return e?n(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[mo.test(t)?"format":"standalone"][e.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ae(e,t,n){var r,o,i,s=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)i=p([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(i,"").toLocaleLowerCase();return n?"MMM"===t?(o=_o.call(this._shortMonthsParse,s),o!==-1?o:null):(o=_o.call(this._longMonthsParse,s),o!==-1?o:null):"MMM"===t?(o=_o.call(this._shortMonthsParse,s),o!==-1?o:(o=_o.call(this._longMonthsParse,s),o!==-1?o:null)):(o=_o.call(this._longMonthsParse,s),o!==-1?o:(o=_o.call(this._shortMonthsParse,s),o!==-1?o:null))}function ue(e,t,n){var r,o,i;if(this._monthsParseExact)return ae.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(o=p([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(i="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function le(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=b(t);else if(t=e.localeData().monthsParse(t),!s(t))return e;return n=Math.min(e.date(),oe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function ce(t){return null!=t?(le(this,t),e.updateOffset(this,!0),this):L(this,"Month")}function pe(){return oe(this.year(),this.month())}function he(e){return this._monthsParseExact?(l(this,"_monthsRegex")||fe.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=vo),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function de(e){return this._monthsParseExact?(l(this,"_monthsRegex")||fe.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=bo),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function fe(){function e(e,t){return t.length-e.length}var t,n,r=[],o=[],i=[];for(t=0;t<12;t++)n=p([2e3,t]),r.push(this.monthsShort(n,"")),o.push(this.months(n,"")),i.push(this.months(n,"")),i.push(this.monthsShort(n,""));for(r.sort(e),o.sort(e),i.sort(e),t=0;t<12;t++)r[t]=ee(r[t]),o[t]=ee(o[t]);for(t=0;t<24;t++)i[t]=ee(i[t]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function _e(e){return me(e)?366:365}function me(e){return e%4===0&&e%100!==0||e%400===0}function ge(){return me(this.year())}function ye(e,t,n,r,o,i,s){var a=new Date(e,t,n,r,o,i,s);return e<100&&e>=0&&isFinite(a.getFullYear())&&a.setFullYear(e),a}function ve(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function be(e,t,n){var r=7+t-n,o=(7+ve(e,0,r).getUTCDay()-t)%7;return-o+r-1}function we(e,t,n,r,o){var i,s,a=(7+n-r)%7,u=be(e,r,o),l=1+7*(t-1)+a+u;return l<=0?(i=e-1,s=_e(i)+l):l>_e(e)?(i=e+1,s=l-_e(e)):(i=e,s=l),{year:i,dayOfYear:s}}function Ce(e,t,n){var r,o,i=be(e.year(),t,n),s=Math.floor((e.dayOfYear()-i-1)/7)+1;return s<1?(o=e.year()-1,r=s+Se(o,t,n)):s>Se(e.year(),t,n)?(r=s-Se(e.year(),t,n),o=e.year()+1):(o=e.year(),r=s),{week:r,year:o}}function Se(e,t,n){var r=be(e,t,n),o=be(e+1,t,n);return(_e(e)-r+o)/7}function Ae(e){return Ce(e,this._week.dow,this._week.doy).week}function Ee(){return this._week.dow}function ke(){return this._week.doy}function Me(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Te(e){var t=Ce(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Pe(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Oe(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function xe(e,t){return e?n(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:n(this._weekdays)?this._weekdays:this._weekdays.standalone}function Ie(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Re(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Ne(e,t,n){var r,o,i,s=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)i=p([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(i,"").toLocaleLowerCase();return n?"dddd"===t?(o=_o.call(this._weekdaysParse,s),o!==-1?o:null):"ddd"===t?(o=_o.call(this._shortWeekdaysParse,s),o!==-1?o:null):(o=_o.call(this._minWeekdaysParse,s),o!==-1?o:null):"dddd"===t?(o=_o.call(this._weekdaysParse,s),o!==-1?o:(o=_o.call(this._shortWeekdaysParse,s),o!==-1?o:(o=_o.call(this._minWeekdaysParse,s),o!==-1?o:null))):"ddd"===t?(o=_o.call(this._shortWeekdaysParse,s),o!==-1?o:(o=_o.call(this._weekdaysParse,s),o!==-1?o:(o=_o.call(this._minWeekdaysParse,s),o!==-1?o:null))):(o=_o.call(this._minWeekdaysParse,s),o!==-1?o:(o=_o.call(this._weekdaysParse,s),o!==-1?o:(o=_o.call(this._shortWeekdaysParse,s),o!==-1?o:null)))}function De(e,t,n){var r,o,i;if(this._weekdaysParseExact)return Ne.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(o=p([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(o,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(o,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(o,"").replace(".",".?")+"$","i")),this._weekdaysParse[r]||(i="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[r]=new RegExp(i.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function Fe(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Pe(e,this.localeData()),this.add(e-t,"d")):t}function je(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function $e(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Oe(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Be(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||ze.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=ko),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ue(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||ze.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Mo),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Le(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||ze.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=To),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function ze(){function e(e,t){return t.length-e.length}var t,n,r,o,i,s=[],a=[],u=[],l=[];for(t=0;t<7;t++)n=p([2e3,1]).day(t),r=this.weekdaysMin(n,""),o=this.weekdaysShort(n,""),i=this.weekdays(n,""),s.push(r),a.push(o),u.push(i),l.push(r),l.push(o),l.push(i);for(s.sort(e),a.sort(e),u.sort(e),l.sort(e),t=0;t<7;t++)a[t]=ee(a[t]),u[t]=ee(u[t]),l[t]=ee(l[t]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function He(){return this.hours()%12||12}function Ve(){return this.hours()||24}function We(e,t){G(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Ge(e,t){return t._meridiemParse}function qe(e){return"p"===(e+"").toLowerCase().charAt(0)}function Ye(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Ke(e){return e?e.toLowerCase().replace("_","-"):e}function Xe(e){for(var t,n,r,o,i=0;i<e.length;){for(o=Ke(e[i]).split("-"),t=o.length,n=Ke(e[i+1]),n=n?n.split("-"):null;t>0;){if(r=Je(o.slice(0,t).join("-")))return r;if(n&&n.length>=t&&w(o,n,!0)>=t-1)break;t--}i++}return null}function Je(e){var t=null;if(!Ro[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=Po._abbr,require("./locale/"+e),Ze(t)}catch(n){}return Ro[e]}function Ze(e,t){var n;return e&&(n=i(t)?tt(e):Qe(e,t),n&&(Po=n)),Po._abbr}function Qe(e,t){if(null!==t){var n=Io;if(t.abbr=e,null!=Ro[e])A("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Ro[e]._config;else if(null!=t.parentLocale){if(null==Ro[t.parentLocale])return No[t.parentLocale]||(No[t.parentLocale]=[]),No[t.parentLocale].push({name:e,config:t}),null;n=Ro[t.parentLocale]._config}return Ro[e]=new T(M(n,t)),No[e]&&No[e].forEach(function(e){Qe(e.name,e.config)}),Ze(e),Ro[e]}return delete Ro[e],null}function et(e,t){if(null!=t){var n,r=Io;null!=Ro[e]&&(r=Ro[e]._config),t=M(r,t),n=new T(t),n.parentLocale=Ro[e],Ro[e]=n,Ze(e)}else null!=Ro[e]&&(null!=Ro[e].parentLocale?Ro[e]=Ro[e].parentLocale:null!=Ro[e]&&delete Ro[e]);return Ro[e]}function tt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Po;if(!n(e)){if(t=Je(e))return t;e=[e]}return Xe(e)}function nt(){return Mr(Ro)}function rt(e){var t,n=e._a;return n&&d(e).overflow===-2&&(t=n[so]<0||n[so]>11?so:n[ao]<1||n[ao]>oe(n[io],n[so])?ao:n[uo]<0||n[uo]>24||24===n[uo]&&(0!==n[lo]||0!==n[co]||0!==n[po])?uo:n[lo]<0||n[lo]>59?lo:n[co]<0||n[co]>59?co:n[po]<0||n[po]>999?po:-1,d(e)._overflowDayOfYear&&(t<io||t>ao)&&(t=ao),d(e)._overflowWeeks&&t===-1&&(t=ho),d(e)._overflowWeekday&&t===-1&&(t=fo),d(e).overflow=t),e}function ot(e){var t,n,r,o,i,s,a=e._i,u=Do.exec(a)||Fo.exec(a);if(u){for(d(e).iso=!0,t=0,n=$o.length;t<n;t++)if($o[t][1].exec(u[1])){o=$o[t][0],r=$o[t][2]!==!1;break}if(null==o)return void(e._isValid=!1);if(u[3]){for(t=0,n=Bo.length;t<n;t++)if(Bo[t][1].exec(u[3])){i=(u[2]||" ")+Bo[t][0];break}if(null==i)return void(e._isValid=!1)}if(!r&&null!=i)return void(e._isValid=!1);if(u[4]){if(!jo.exec(u[4]))return void(e._isValid=!1);s="Z"}e._f=o+(i||"")+(s||""),pt(e)}else e._isValid=!1}function it(e){var t,n,r,o,i,s,a,u,l={" GMT":" +0000"," EDT":" -0400"," EST":" -0500"," CDT":" -0500"," CST":" -0600"," MDT":" -0600"," MST":" -0700"," PDT":" -0700"," PST":" -0800"},c="YXWVUTSRQPONZABCDEFGHIKLM";if(t=e._i.replace(/\([^\)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s|\s$/g,""),n=Lo.exec(t)){if(r=n[1]?"ddd"+(5===n[1].length?", ":" "):"",o="D MMM "+(n[2].length>10?"YYYY ":"YY "),i="HH:mm"+(n[4]?":ss":""),n[1]){var p=new Date(n[2]),h=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][p.getDay()];if(n[1].substr(0,3)!==h)return d(e).weekdayMismatch=!0,void(e._isValid=!1)}switch(n[5].length){case 2:0===u?a=" +0000":(u=c.indexOf(n[5][1].toUpperCase())-12,a=(u<0?" -":" +")+(""+u).replace(/^-?/,"0").match(/..$/)[0]+"00");break;case 4:a=l[n[5]];break;default:a=l[" GMT"]}n[5]=a,e._i=n.splice(1).join(""),s=" ZZ",e._f=r+o+i+s,pt(e),d(e).rfc2822=!0}else e._isValid=!1}function st(t){var n=Uo.exec(t._i);return null!==n?void(t._d=new Date((+n[1]))):(ot(t),void(t._isValid===!1&&(delete t._isValid,it(t),t._isValid===!1&&(delete t._isValid,e.createFromInputFallback(t)))))}function at(e,t,n){return null!=e?e:null!=t?t:n}function ut(t){var n=new Date(e.now());return t._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function lt(e){var t,n,r,o,i=[];if(!e._d){for(r=ut(e),e._w&&null==e._a[ao]&&null==e._a[so]&&ct(e),null!=e._dayOfYear&&(o=at(e._a[io],r[io]),(e._dayOfYear>_e(o)||0===e._dayOfYear)&&(d(e)._overflowDayOfYear=!0),n=ve(o,0,e._dayOfYear),e._a[so]=n.getUTCMonth(),e._a[ao]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=i[t]=r[t];for(;t<7;t++)e._a[t]=i[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[uo]&&0===e._a[lo]&&0===e._a[co]&&0===e._a[po]&&(e._nextDay=!0,e._a[uo]=0),e._d=(e._useUTC?ve:ye).apply(null,i),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[uo]=24)}}function ct(e){var t,n,r,o,i,s,a,u;if(t=e._w,null!=t.GG||null!=t.W||null!=t.E)i=1,s=4,n=at(t.GG,e._a[io],Ce(vt(),1,4).year),r=at(t.W,1),o=at(t.E,1),(o<1||o>7)&&(u=!0);else{i=e._locale._week.dow,s=e._locale._week.doy;var l=Ce(vt(),i,s);n=at(t.gg,e._a[io],l.year),r=at(t.w,l.week),null!=t.d?(o=t.d,(o<0||o>6)&&(u=!0)):null!=t.e?(o=t.e+i,(t.e<0||t.e>6)&&(u=!0)):o=i}r<1||r>Se(n,i,s)?d(e)._overflowWeeks=!0:null!=u?d(e)._overflowWeekday=!0:(a=we(n,r,o,i,s),e._a[io]=a.year,e._dayOfYear=a.dayOfYear)}function pt(t){if(t._f===e.ISO_8601)return void ot(t);if(t._f===e.RFC_2822)return void it(t);t._a=[],d(t).empty=!0;var n,r,o,i,s,a=""+t._i,u=a.length,l=0;for(o=X(t._f,t._locale).match(Fr)||[],n=0;n<o.length;n++)i=o[n],r=(a.match(Z(i,t))||[])[0],r&&(s=a.substr(0,a.indexOf(r)),s.length>0&&d(t).unusedInput.push(s),a=a.slice(a.indexOf(r)+r.length),l+=r.length),Br[i]?(r?d(t).empty=!1:d(t).unusedTokens.push(i),re(i,r,t)):t._strict&&!r&&d(t).unusedTokens.push(i);d(t).charsLeftOver=u-l,a.length>0&&d(t).unusedInput.push(a),t._a[uo]<=12&&d(t).bigHour===!0&&t._a[uo]>0&&(d(t).bigHour=void 0),d(t).parsedDateParts=t._a.slice(0),d(t).meridiem=t._meridiem,t._a[uo]=ht(t._locale,t._a[uo],t._meridiem),lt(t),rt(t)}function ht(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(r=e.isPM(n),r&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function dt(e){var t,n,r,o,i;if(0===e._f.length)return d(e).invalidFormat=!0,void(e._d=new Date(NaN));for(o=0;o<e._f.length;o++)i=0,t=m({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[o],pt(t),f(t)&&(i+=d(t).charsLeftOver,i+=10*d(t).unusedTokens.length,d(t).score=i,(null==r||i<r)&&(r=i,n=t));c(e,n||t)}function ft(e){if(!e._d){var t=j(e._i);e._a=u([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),lt(e)}}function _t(e){var t=new g(rt(mt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function mt(e){var t=e._i,r=e._f;return e._locale=e._locale||tt(e._l),null===t||void 0===r&&""===t?_({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),y(t)?new g(rt(t)):(a(t)?e._d=t:n(r)?dt(e):r?pt(e):gt(e),f(e)||(e._d=null),e))}function gt(t){var o=t._i;i(o)?t._d=new Date(e.now()):a(o)?t._d=new Date(o.valueOf()):"string"==typeof o?st(t):n(o)?(t._a=u(o.slice(0),function(e){return parseInt(e,10)}),lt(t)):r(o)?ft(t):s(o)?t._d=new Date(o):e.createFromInputFallback(t)}function yt(e,t,i,s,a){var u={};return i!==!0&&i!==!1||(s=i,i=void 0),(r(e)&&o(e)||n(e)&&0===e.length)&&(e=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=a,u._l=i,u._i=e,u._f=t,u._strict=s,_t(u)}function vt(e,t,n,r){return yt(e,t,n,r,!1)}function bt(e,t){var r,o;if(1===t.length&&n(t[0])&&(t=t[0]),!t.length)return vt();for(r=t[0],o=1;o<t.length;++o)t[o].isValid()&&!t[o][e](r)||(r=t[o]);return r}function wt(){var e=[].slice.call(arguments,0);return bt("isBefore",e)}function Ct(){var e=[].slice.call(arguments,0);return bt("isAfter",e)}function St(e){for(var t in e)if(Wo.indexOf(t)===-1||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,r=0;r<Wo.length;++r)if(e[Wo[r]]){if(n)return!1;parseFloat(e[Wo[r]])!==b(e[Wo[r]])&&(n=!0)}return!0}function At(){return this._isValid}function Et(){return Vt(NaN)}function kt(e){var t=j(e),n=t.year||0,r=t.quarter||0,o=t.month||0,i=t.week||0,s=t.day||0,a=t.hour||0,u=t.minute||0,l=t.second||0,c=t.millisecond||0;this._isValid=St(t),this._milliseconds=+c+1e3*l+6e4*u+1e3*a*60*60,this._days=+s+7*i,this._months=+o+3*r+12*n,this._data={},this._locale=tt(),this._bubble()}function Mt(e){return e instanceof kt}function Tt(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function Pt(e,t){G(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+W(~~(e/60),2)+t+W(~~e%60,2)})}function Ot(e,t){var n=(t||"").match(e);if(null===n)return null;var r=n[n.length-1]||[],o=(r+"").match(Go)||["-",0,0],i=+(60*o[1])+b(o[2]);return 0===i?0:"+"===o[0]?i:-i}function xt(t,n){var r,o;return n._isUTC?(r=n.clone(),o=(y(t)||a(t)?t.valueOf():vt(t).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+o),e.updateOffset(r,!1),r):vt(t).local()}function It(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Rt(t,n,r){var o,i=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(t=Ot(eo,t),null===t)return this}else Math.abs(t)<16&&!r&&(t=60*t);return!this._isUTC&&n&&(o=It(this)),this._offset=t,this._isUTC=!0,null!=o&&this.add(o,"m"),i!==t&&(!n||this._changeInProgress?Kt(this,Vt(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:It(this)}function Nt(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Dt(e){return this.utcOffset(0,e)}function Ft(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(It(this),"m")),this}function jt(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Ot(Qr,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function $t(e){return!!this.isValid()&&(e=e?vt(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function Bt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ut(){if(!i(this._isDSTShifted))return this._isDSTShifted;var e={};if(m(e,this),e=mt(e),e._a){var t=e._isUTC?p(e._a):vt(e._a);this._isDSTShifted=this.isValid()&&w(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Lt(){return!!this.isValid()&&!this._isUTC}function zt(){return!!this.isValid()&&this._isUTC}function Ht(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Vt(e,t){var n,r,o,i=e,a=null;return Mt(e)?i={ms:e._milliseconds,d:e._days,M:e._months}:s(e)?(i={},t?i[t]=e:i.milliseconds=e):(a=qo.exec(e))?(n="-"===a[1]?-1:1,i={y:0,d:b(a[ao])*n,h:b(a[uo])*n,m:b(a[lo])*n,s:b(a[co])*n,ms:b(Tt(1e3*a[po]))*n}):(a=Yo.exec(e))?(n="-"===a[1]?-1:1,i={y:Wt(a[2],n),M:Wt(a[3],n),w:Wt(a[4],n),d:Wt(a[5],n),h:Wt(a[6],n),m:Wt(a[7],n),s:Wt(a[8],n)}):null==i?i={}:"object"==typeof i&&("from"in i||"to"in i)&&(o=qt(vt(i.from),vt(i.to)),i={},i.ms=o.milliseconds,i.M=o.months),r=new kt(i),Mt(e)&&l(e,"_locale")&&(r._locale=e._locale),r}function Wt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Gt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function qt(e,t){var n;return e.isValid()&&t.isValid()?(t=xt(t,e),e.isBefore(t)?n=Gt(e,t):(n=Gt(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Yt(e,t){return function(n,r){var o,i;return null===r||isNaN(+r)||(A(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),n="string"==typeof n?+n:n,o=Vt(n,r),Kt(this,o,e),this}}function Kt(t,n,r,o){var i=n._milliseconds,s=Tt(n._days),a=Tt(n._months);t.isValid()&&(o=null==o||o,i&&t._d.setTime(t._d.valueOf()+i*r),s&&z(t,"Date",L(t,"Date")+s*r),a&&le(t,L(t,"Month")+a*r),o&&e.updateOffset(t,s||a))}function Xt(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Jt(t,n){var r=t||vt(),o=xt(r,this).startOf("day"),i=e.calendarFormat(this,o)||"sameElse",s=n&&(E(n[i])?n[i].call(this,r):n[i]);return this.format(s||this.localeData().calendar(i,this,vt(r)))}function Zt(){return new g(this)}function Qt(e,t){var n=y(e)?e:vt(e);return!(!this.isValid()||!n.isValid())&&(t=F(i(t)?"millisecond":t),"millisecond"===t?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function en(e,t){var n=y(e)?e:vt(e);return!(!this.isValid()||!n.isValid())&&(t=F(i(t)?"millisecond":t),"millisecond"===t?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function tn(e,t,n,r){return r=r||"()",("("===r[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===r[1]?this.isBefore(t,n):!this.isAfter(t,n))}function nn(e,t){var n,r=y(e)?e:vt(e);return!(!this.isValid()||!r.isValid())&&(t=F(t||"millisecond"),"millisecond"===t?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function rn(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function on(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function sn(e,t,n){var r,o,i,s;return this.isValid()?(r=xt(e,this),r.isValid()?(o=6e4*(r.utcOffset()-this.utcOffset()),t=F(t),"year"===t||"month"===t||"quarter"===t?(s=an(this,r),"quarter"===t?s/=3:"year"===t&&(s/=12)):(i=this-r,s="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-o)/864e5:"week"===t?(i-o)/6048e5:i),n?s:v(s)):NaN):NaN}function an(e,t){var n,r,o=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(o,"months");return t-i<0?(n=e.clone().add(o-1,"months"),r=(t-i)/(i-n)):(n=e.clone().add(o+1,"months"),r=(t-i)/(n-i)),-(o+r)||0}function un(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ln(){if(!this.isValid())return null;var e=this.clone().utc();return e.year()<0||e.year()>9999?K(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):E(Date.prototype.toISOString)?this.toDate().toISOString():K(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function cn(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",o="-MM-DD[T]HH:mm:ss.SSS",i=t+'[")]';return this.format(n+r+o+i)}function pn(t){t||(t=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var n=K(this,t);return this.localeData().postformat(n)}function hn(e,t){return this.isValid()&&(y(e)&&e.isValid()||vt(e).isValid())?Vt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function dn(e){return this.from(vt(),e)}function fn(e,t){return this.isValid()&&(y(e)&&e.isValid()||vt(e).isValid())?Vt({from:this,
to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function _n(e){return this.to(vt(),e)}function mn(e){var t;return void 0===e?this._locale._abbr:(t=tt(e),null!=t&&(this._locale=t),this)}function gn(){return this._locale}function yn(e){switch(e=F(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function vn(e){return e=F(e),void 0===e||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function bn(){return this._d.valueOf()-6e4*(this._offset||0)}function wn(){return Math.floor(this.valueOf()/1e3)}function Cn(){return new Date(this.valueOf())}function Sn(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function An(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function En(){return this.isValid()?this.toISOString():null}function kn(){return f(this)}function Mn(){return c({},d(this))}function Tn(){return d(this).overflow}function Pn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function On(e,t){G(0,[e,e.length],0,t)}function xn(e){return Dn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function In(e){return Dn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Rn(){return Se(this.year(),1,4)}function Nn(){var e=this.localeData()._week;return Se(this.year(),e.dow,e.doy)}function Dn(e,t,n,r,o){var i;return null==e?Ce(this,r,o).year:(i=Se(e,r,o),t>i&&(t=i),Fn.call(this,e,t,n,r,o))}function Fn(e,t,n,r,o){var i=we(e,t,n,r,o),s=ve(i.year,0,i.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function jn(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function $n(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function Bn(e,t){t[po]=b(1e3*("0."+e))}function Un(){return this._isUTC?"UTC":""}function Ln(){return this._isUTC?"Coordinated Universal Time":""}function zn(e){return vt(1e3*e)}function Hn(){return vt.apply(null,arguments).parseZone()}function Vn(e){return e}function Wn(e,t,n,r){var o=tt(),i=p().set(r,t);return o[n](i,e)}function Gn(e,t,n){if(s(e)&&(t=e,e=void 0),e=e||"",null!=t)return Wn(e,t,n,"month");var r,o=[];for(r=0;r<12;r++)o[r]=Wn(e,r,n,"month");return o}function qn(e,t,n,r){"boolean"==typeof e?(s(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,s(t)&&(n=t,t=void 0),t=t||"");var o=tt(),i=e?o._week.dow:0;if(null!=n)return Wn(t,(n+i)%7,r,"day");var a,u=[];for(a=0;a<7;a++)u[a]=Wn(t,(a+i)%7,r,"day");return u}function Yn(e,t){return Gn(e,t,"months")}function Kn(e,t){return Gn(e,t,"monthsShort")}function Xn(e,t,n){return qn(e,t,n,"weekdays")}function Jn(e,t,n){return qn(e,t,n,"weekdaysShort")}function Zn(e,t,n){return qn(e,t,n,"weekdaysMin")}function Qn(){var e=this._data;return this._milliseconds=ii(this._milliseconds),this._days=ii(this._days),this._months=ii(this._months),e.milliseconds=ii(e.milliseconds),e.seconds=ii(e.seconds),e.minutes=ii(e.minutes),e.hours=ii(e.hours),e.months=ii(e.months),e.years=ii(e.years),this}function er(e,t,n,r){var o=Vt(t,n);return e._milliseconds+=r*o._milliseconds,e._days+=r*o._days,e._months+=r*o._months,e._bubble()}function tr(e,t){return er(this,e,t,1)}function nr(e,t){return er(this,e,t,-1)}function rr(e){return e<0?Math.floor(e):Math.ceil(e)}function or(){var e,t,n,r,o,i=this._milliseconds,s=this._days,a=this._months,u=this._data;return i>=0&&s>=0&&a>=0||i<=0&&s<=0&&a<=0||(i+=864e5*rr(sr(a)+s),s=0,a=0),u.milliseconds=i%1e3,e=v(i/1e3),u.seconds=e%60,t=v(e/60),u.minutes=t%60,n=v(t/60),u.hours=n%24,s+=v(n/24),o=v(ir(s)),a+=o,s-=rr(sr(o)),r=v(a/12),a%=12,u.days=s,u.months=a,u.years=r,this}function ir(e){return 4800*e/146097}function sr(e){return 146097*e/4800}function ar(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if(e=F(e),"month"===e||"year"===e)return t=this._days+r/864e5,n=this._months+ir(t),"month"===e?n:n/12;switch(t=this._days+Math.round(sr(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function ur(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*b(this._months/12):NaN}function lr(e){return function(){return this.as(e)}}function cr(e){return e=F(e),this.isValid()?this[e+"s"]():NaN}function pr(e){return function(){return this.isValid()?this._data[e]:NaN}}function hr(){return v(this.days()/7)}function dr(e,t,n,r,o){return o.relativeTime(t||1,!!n,e,r)}function fr(e,t,n){var r=Vt(e).abs(),o=wi(r.as("s")),i=wi(r.as("m")),s=wi(r.as("h")),a=wi(r.as("d")),u=wi(r.as("M")),l=wi(r.as("y")),c=o<=Ci.ss&&["s",o]||o<Ci.s&&["ss",o]||i<=1&&["m"]||i<Ci.m&&["mm",i]||s<=1&&["h"]||s<Ci.h&&["hh",s]||a<=1&&["d"]||a<Ci.d&&["dd",a]||u<=1&&["M"]||u<Ci.M&&["MM",u]||l<=1&&["y"]||["yy",l];return c[2]=t,c[3]=+e>0,c[4]=n,dr.apply(null,c)}function _r(e){return void 0===e?wi:"function"==typeof e&&(wi=e,!0)}function mr(e,t){return void 0!==Ci[e]&&(void 0===t?Ci[e]:(Ci[e]=t,"s"===e&&(Ci.ss=t-1),!0))}function gr(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=fr(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function yr(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r=Si(this._milliseconds)/1e3,o=Si(this._days),i=Si(this._months);e=v(r/60),t=v(e/60),r%=60,e%=60,n=v(i/12),i%=12;var s=n,a=i,u=o,l=t,c=e,p=r,h=this.asSeconds();return h?(h<0?"-":"")+"P"+(s?s+"Y":"")+(a?a+"M":"")+(u?u+"D":"")+(l||c||p?"T":"")+(l?l+"H":"")+(c?c+"M":"")+(p?p+"S":""):"P0D"}var vr,br;br=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};var wr=br,Cr=e.momentProperties=[],Sr=!1,Ar={};e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;var Er;Er=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)l(e,t)&&n.push(t);return n};var kr,Mr=Er,Tr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Pr={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Or="Invalid date",xr="%d",Ir=/\d{1,2}/,Rr={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Nr={},Dr={},Fr=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,jr=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,$r={},Br={},Ur=/\d/,Lr=/\d\d/,zr=/\d{3}/,Hr=/\d{4}/,Vr=/[+-]?\d{6}/,Wr=/\d\d?/,Gr=/\d\d\d\d?/,qr=/\d\d\d\d\d\d?/,Yr=/\d{1,3}/,Kr=/\d{1,4}/,Xr=/[+-]?\d{1,6}/,Jr=/\d+/,Zr=/[+-]?\d+/,Qr=/Z|[+-]\d\d:?\d\d/gi,eo=/Z|[+-]\d\d(?::?\d\d)?/gi,to=/[+-]?\d+(\.\d{1,3})?/,no=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ro={},oo={},io=0,so=1,ao=2,uo=3,lo=4,co=5,po=6,ho=7,fo=8;kr=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};var _o=kr;G("M",["MM",2],"Mo",function(){return this.month()+1}),G("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),G("MMMM",0,0,function(e){return this.localeData().months(this,e)}),D("month","M"),$("month",8),J("M",Wr),J("MM",Wr,Lr),J("MMM",function(e,t){return t.monthsShortRegex(e)}),J("MMMM",function(e,t){return t.monthsRegex(e)}),te(["M","MM"],function(e,t){t[so]=b(e)-1}),te(["MMM","MMMM"],function(e,t,n,r){var o=n._locale.monthsParse(e,r,n._strict);null!=o?t[so]=o:d(n).invalidMonth=e});var mo=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,go="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),yo="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),vo=no,bo=no;G("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),G(0,["YY",2],0,function(){return this.year()%100}),G(0,["YYYY",4],0,"year"),G(0,["YYYYY",5],0,"year"),G(0,["YYYYYY",6,!0],0,"year"),D("year","y"),$("year",1),J("Y",Zr),J("YY",Wr,Lr),J("YYYY",Kr,Hr),J("YYYYY",Xr,Vr),J("YYYYYY",Xr,Vr),te(["YYYYY","YYYYYY"],io),te("YYYY",function(t,n){n[io]=2===t.length?e.parseTwoDigitYear(t):b(t)}),te("YY",function(t,n){n[io]=e.parseTwoDigitYear(t)}),te("Y",function(e,t){t[io]=parseInt(e,10)}),e.parseTwoDigitYear=function(e){return b(e)+(b(e)>68?1900:2e3)};var wo=U("FullYear",!0);G("w",["ww",2],"wo","week"),G("W",["WW",2],"Wo","isoWeek"),D("week","w"),D("isoWeek","W"),$("week",5),$("isoWeek",5),J("w",Wr),J("ww",Wr,Lr),J("W",Wr),J("WW",Wr,Lr),ne(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=b(e)});var Co={dow:0,doy:6};G("d",0,"do","day"),G("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),G("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),G("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),G("e",0,0,"weekday"),G("E",0,0,"isoWeekday"),D("day","d"),D("weekday","e"),D("isoWeekday","E"),$("day",11),$("weekday",11),$("isoWeekday",11),J("d",Wr),J("e",Wr),J("E",Wr),J("dd",function(e,t){return t.weekdaysMinRegex(e)}),J("ddd",function(e,t){return t.weekdaysShortRegex(e)}),J("dddd",function(e,t){return t.weekdaysRegex(e)}),ne(["dd","ddd","dddd"],function(e,t,n,r){var o=n._locale.weekdaysParse(e,r,n._strict);null!=o?t.d=o:d(n).invalidWeekday=e}),ne(["d","e","E"],function(e,t,n,r){t[r]=b(e)});var So="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ao="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Eo="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ko=no,Mo=no,To=no;G("H",["HH",2],0,"hour"),G("h",["hh",2],0,He),G("k",["kk",2],0,Ve),G("hmm",0,0,function(){return""+He.apply(this)+W(this.minutes(),2)}),G("hmmss",0,0,function(){return""+He.apply(this)+W(this.minutes(),2)+W(this.seconds(),2)}),G("Hmm",0,0,function(){return""+this.hours()+W(this.minutes(),2)}),G("Hmmss",0,0,function(){return""+this.hours()+W(this.minutes(),2)+W(this.seconds(),2)}),We("a",!0),We("A",!1),D("hour","h"),$("hour",13),J("a",Ge),J("A",Ge),J("H",Wr),J("h",Wr),J("k",Wr),J("HH",Wr,Lr),J("hh",Wr,Lr),J("kk",Wr,Lr),J("hmm",Gr),J("hmmss",qr),J("Hmm",Gr),J("Hmmss",qr),te(["H","HH"],uo),te(["k","kk"],function(e,t,n){var r=b(e);t[uo]=24===r?0:r}),te(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),te(["h","hh"],function(e,t,n){t[uo]=b(e),d(n).bigHour=!0}),te("hmm",function(e,t,n){var r=e.length-2;t[uo]=b(e.substr(0,r)),t[lo]=b(e.substr(r)),d(n).bigHour=!0}),te("hmmss",function(e,t,n){var r=e.length-4,o=e.length-2;t[uo]=b(e.substr(0,r)),t[lo]=b(e.substr(r,2)),t[co]=b(e.substr(o)),d(n).bigHour=!0}),te("Hmm",function(e,t,n){var r=e.length-2;t[uo]=b(e.substr(0,r)),t[lo]=b(e.substr(r))}),te("Hmmss",function(e,t,n){var r=e.length-4,o=e.length-2;t[uo]=b(e.substr(0,r)),t[lo]=b(e.substr(r,2)),t[co]=b(e.substr(o))});var Po,Oo=/[ap]\.?m?\.?/i,xo=U("Hours",!0),Io={calendar:Tr,longDateFormat:Pr,invalidDate:Or,ordinal:xr,dayOfMonthOrdinalParse:Ir,relativeTime:Rr,months:go,monthsShort:yo,week:Co,weekdays:So,weekdaysMin:Eo,weekdaysShort:Ao,meridiemParse:Oo},Ro={},No={},Do=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Fo=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,jo=/Z|[+-]\d\d(?::?\d\d)?/,$o=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Bo=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Uo=/^\/?Date\((\-?\d+)/i,Lo=/^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/;e.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),e.ISO_8601=function(){},e.RFC_2822=function(){};var zo=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=vt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:_()}),Ho=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=vt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:_()}),Vo=function(){return Date.now?Date.now():+new Date},Wo=["year","quarter","month","week","day","hour","minute","second","millisecond"];Pt("Z",":"),Pt("ZZ",""),J("Z",eo),J("ZZ",eo),te(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Ot(eo,e)});var Go=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var qo=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Yo=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Vt.fn=kt.prototype,Vt.invalid=Et;var Ko=Yt(1,"add"),Xo=Yt(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Jo=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});G(0,["gg",2],0,function(){return this.weekYear()%100}),G(0,["GG",2],0,function(){return this.isoWeekYear()%100}),On("gggg","weekYear"),On("ggggg","weekYear"),On("GGGG","isoWeekYear"),On("GGGGG","isoWeekYear"),D("weekYear","gg"),D("isoWeekYear","GG"),$("weekYear",1),$("isoWeekYear",1),J("G",Zr),J("g",Zr),J("GG",Wr,Lr),J("gg",Wr,Lr),J("GGGG",Kr,Hr),J("gggg",Kr,Hr),J("GGGGG",Xr,Vr),J("ggggg",Xr,Vr),ne(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=b(e)}),ne(["gg","GG"],function(t,n,r,o){n[o]=e.parseTwoDigitYear(t)}),G("Q",0,"Qo","quarter"),D("quarter","Q"),$("quarter",7),J("Q",Ur),te("Q",function(e,t){t[so]=3*(b(e)-1)}),G("D",["DD",2],"Do","date"),D("date","D"),$("date",9),J("D",Wr),J("DD",Wr,Lr),J("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),te(["D","DD"],ao),te("Do",function(e,t){t[ao]=b(e.match(Wr)[0],10)});var Zo=U("Date",!0);G("DDD",["DDDD",3],"DDDo","dayOfYear"),D("dayOfYear","DDD"),$("dayOfYear",4),J("DDD",Yr),J("DDDD",zr),te(["DDD","DDDD"],function(e,t,n){n._dayOfYear=b(e)}),G("m",["mm",2],0,"minute"),D("minute","m"),$("minute",14),J("m",Wr),J("mm",Wr,Lr),te(["m","mm"],lo);var Qo=U("Minutes",!1);G("s",["ss",2],0,"second"),D("second","s"),$("second",15),J("s",Wr),J("ss",Wr,Lr),te(["s","ss"],co);var ei=U("Seconds",!1);G("S",0,0,function(){return~~(this.millisecond()/100)}),G(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),G(0,["SSS",3],0,"millisecond"),G(0,["SSSS",4],0,function(){return 10*this.millisecond()}),G(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),G(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),G(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),G(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),G(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),D("millisecond","ms"),$("millisecond",16),J("S",Yr,Ur),J("SS",Yr,Lr),J("SSS",Yr,zr);var ti;for(ti="SSSS";ti.length<=9;ti+="S")J(ti,Jr);for(ti="S";ti.length<=9;ti+="S")te(ti,Bn);var ni=U("Milliseconds",!1);G("z",0,0,"zoneAbbr"),G("zz",0,0,"zoneName");var ri=g.prototype;ri.add=Ko,ri.calendar=Jt,ri.clone=Zt,ri.diff=sn,ri.endOf=vn,ri.format=pn,ri.from=hn,ri.fromNow=dn,ri.to=fn,ri.toNow=_n,ri.get=H,ri.invalidAt=Tn,ri.isAfter=Qt,ri.isBefore=en,ri.isBetween=tn,ri.isSame=nn,ri.isSameOrAfter=rn,ri.isSameOrBefore=on,ri.isValid=kn,ri.lang=Jo,ri.locale=mn,ri.localeData=gn,ri.max=Ho,ri.min=zo,ri.parsingFlags=Mn,ri.set=V,ri.startOf=yn,ri.subtract=Xo,ri.toArray=Sn,ri.toObject=An,ri.toDate=Cn,ri.toISOString=ln,ri.inspect=cn,ri.toJSON=En,ri.toString=un,ri.unix=wn,ri.valueOf=bn,ri.creationData=Pn,ri.year=wo,ri.isLeapYear=ge,ri.weekYear=xn,ri.isoWeekYear=In,ri.quarter=ri.quarters=jn,ri.month=ce,ri.daysInMonth=pe,ri.week=ri.weeks=Me,ri.isoWeek=ri.isoWeeks=Te,ri.weeksInYear=Nn,ri.isoWeeksInYear=Rn,ri.date=Zo,ri.day=ri.days=Fe,ri.weekday=je,ri.isoWeekday=$e,ri.dayOfYear=$n,ri.hour=ri.hours=xo,ri.minute=ri.minutes=Qo,ri.second=ri.seconds=ei,ri.millisecond=ri.milliseconds=ni,ri.utcOffset=Rt,ri.utc=Dt,ri.local=Ft,ri.parseZone=jt,ri.hasAlignedHourOffset=$t,ri.isDST=Bt,ri.isLocal=Lt,ri.isUtcOffset=zt,ri.isUtc=Ht,ri.isUTC=Ht,ri.zoneAbbr=Un,ri.zoneName=Ln,ri.dates=S("dates accessor is deprecated. Use date instead.",Zo),ri.months=S("months accessor is deprecated. Use month instead",ce),ri.years=S("years accessor is deprecated. Use year instead",wo),ri.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Nt),ri.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Ut);var oi=T.prototype;oi.calendar=P,oi.longDateFormat=O,oi.invalidDate=x,oi.ordinal=I,oi.preparse=Vn,oi.postformat=Vn,oi.relativeTime=R,oi.pastFuture=N,oi.set=k,oi.months=ie,oi.monthsShort=se,oi.monthsParse=ue,oi.monthsRegex=de,oi.monthsShortRegex=he,oi.week=Ae,oi.firstDayOfYear=ke,oi.firstDayOfWeek=Ee,oi.weekdays=xe,oi.weekdaysMin=Re,oi.weekdaysShort=Ie,oi.weekdaysParse=De,oi.weekdaysRegex=Be,oi.weekdaysShortRegex=Ue,oi.weekdaysMinRegex=Le,oi.isPM=qe,oi.meridiem=Ye,Ze("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===b(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),e.lang=S("moment.lang is deprecated. Use moment.locale instead.",Ze),e.langData=S("moment.langData is deprecated. Use moment.localeData instead.",tt);var ii=Math.abs,si=lr("ms"),ai=lr("s"),ui=lr("m"),li=lr("h"),ci=lr("d"),pi=lr("w"),hi=lr("M"),di=lr("y"),fi=pr("milliseconds"),_i=pr("seconds"),mi=pr("minutes"),gi=pr("hours"),yi=pr("days"),vi=pr("months"),bi=pr("years"),wi=Math.round,Ci={ss:44,s:45,m:45,h:22,d:26,M:11},Si=Math.abs,Ai=kt.prototype;return Ai.isValid=At,Ai.abs=Qn,Ai.add=tr,Ai.subtract=nr,Ai.as=ar,Ai.asMilliseconds=si,Ai.asSeconds=ai,Ai.asMinutes=ui,Ai.asHours=li,Ai.asDays=ci,Ai.asWeeks=pi,Ai.asMonths=hi,Ai.asYears=di,Ai.valueOf=ur,Ai._bubble=or,Ai.get=cr,Ai.milliseconds=fi,Ai.seconds=_i,Ai.minutes=mi,Ai.hours=gi,Ai.days=yi,Ai.weeks=hr,Ai.months=vi,Ai.years=bi,Ai.humanize=gr,Ai.toISOString=yr,Ai.toString=yr,Ai.toJSON=yr,Ai.locale=mn,Ai.localeData=gn,Ai.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",yr),Ai.lang=Jo,G("X",0,0,"unix"),G("x",0,0,"valueOf"),J("x",Zr),J("X",to),te("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),te("x",function(e,t,n){n._d=new Date(b(e))}),e.version="2.18.1",t(vt),e.fn=ri,e.min=wt,e.max=Ct,e.now=Vo,e.utc=p,e.unix=zn,e.months=Yn,e.isDate=a,e.locale=Ze,e.invalid=_,e.duration=Vt,e.isMoment=y,e.weekdays=Xn,e.parseZone=Hn,e.localeData=tt,e.isDuration=Mt,e.monthsShort=Kn,e.weekdaysMin=Zn,e.defineLocale=Qe,e.updateLocale=et,e.locales=nt,e.weekdaysShort=Jn,e.normalizeUnits=F,e.relativeTimeRounding=_r,e.relativeTimeThreshold=mr,e.calendarFormat=Xt,e.prototype=ri,e})}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;!function(e,t){t(e.moment)}(n,function(e){function t(e){return e>96?e-87:e>64?e-29:e-48}function n(e){var n,r=0,o=e.split("."),i=o[0],s=o[1]||"",a=1,u=0,l=1;for(45===e.charCodeAt(0)&&(r=1,l=-1),r;r<i.length;r++)n=t(i.charCodeAt(r)),u=60*u+n;for(r=0;r<s.length;r++)a/=60,n=t(s.charCodeAt(r)),u+=n*a;return u*l}function r(e){for(var t=0;t<e.length;t++)e[t]=n(e[t])}function o(e,t){for(var n=0;n<t;n++)e[n]=Math.round((e[n-1]||0)+6e4*e[n]);e[t-1]=1/0}function i(e,t){var n,r=[];for(n=0;n<t.length;n++)r[n]=e[t[n]];return r}function s(e){var t=e.split("|"),n=t[2].split(" "),s=t[3].split(""),a=t[4].split(" ");return r(n),r(s),r(a),o(a,s.length),{name:t[0],abbrs:i(t[1].split(" "),s),offsets:i(n,s),untils:a,population:0|t[5]}}function a(e){e&&this._set(s(e))}function u(e){var t=e.toTimeString(),n=t.match(/\([a-z ]+\)/i);n&&n[0]?(n=n[0].match(/[A-Z]/g),n=n?n.join(""):void 0):(n=t.match(/[A-Z]{3,5}/g),n=n?n[0]:void 0),"GMT"===n&&(n=void 0),this.at=+e,this.abbr=n,this.offset=e.getTimezoneOffset()}function l(e){this.zone=e,this.offsetScore=0,this.abbrScore=0}function c(e,t){for(var n,r;r=6e4*((t.at-e.at)/12e4|0);)n=new u(new Date(e.at+r)),n.offset===e.offset?e=n:t=n;return e}function p(){var e,t,n,r=(new Date).getFullYear()-2,o=new u(new Date(r,0,1)),i=[o];for(n=1;n<48;n++)t=new u(new Date(r,n,1)),t.offset!==o.offset&&(e=c(o,t),i.push(e),i.push(new u(new Date(e.at+6e4)))),o=t;for(n=0;n<4;n++)i.push(new u(new Date(r+n,0,1))),i.push(new u(new Date(r+n,6,1)));return i}function h(e,t){return e.offsetScore!==t.offsetScore?e.offsetScore-t.offsetScore:e.abbrScore!==t.abbrScore?e.abbrScore-t.abbrScore:t.zone.population-e.zone.population}function d(e,t){var n,o;for(r(t),n=0;n<t.length;n++)o=t[n],N[o]=N[o]||{},N[o][e]=!0}function f(e){var t,n,r,o=e.length,i={},s=[];for(t=0;t<o;t++){r=N[e[t].offset]||{};for(n in r)r.hasOwnProperty(n)&&(i[n]=!0)}for(t in i)i.hasOwnProperty(t)&&s.push(R[t]);return s}function _(){try{var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e){var t=R[g(e)];if(t)return t;E("Moment Timezone found "+e+" from the Intl api, but did not have that data loaded.")}}catch(n){}var r,o,i,s=p(),a=s.length,u=f(s),c=[];for(o=0;o<u.length;o++){for(r=new l(v(u[o]),a),i=0;i<a;i++)r.scoreOffsetAt(s[i]);c.push(r)}return c.sort(h),c.length>0?c[0].zone.name:void 0}function m(e){return P&&!e||(P=_()),P}function g(e){return(e||"").toLowerCase().replace(/\//g,"_")}function y(e){var t,n,r,o;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)r=e[t].split("|"),n=r[0],o=g(n),x[o]=e[t],R[o]=n,r[5]&&d(o,r[2].split(" "))}function v(e,t){e=g(e);var n,r=x[e];return r instanceof a?r:"string"==typeof r?(r=new a(r),x[e]=r,r):I[e]&&t!==v&&(n=v(I[e],v))?(r=x[e]=new a,r._set(n),r.name=R[e],r):null}function b(){var e,t=[];for(e in R)R.hasOwnProperty(e)&&(x[e]||x[I[e]])&&R[e]&&t.push(R[e]);return t.sort()}function w(e){var t,n,r,o;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)n=e[t].split("|"),r=g(n[0]),o=g(n[1]),I[r]=o,R[r]=n[0],I[o]=r,R[o]=n[1]}function C(e){y(e.zones),w(e.links),k.dataVersion=e.version}function S(e){return S.didShowError||(S.didShowError=!0,E("moment.tz.zoneExists('"+e+"') has been deprecated in favor of !moment.tz.zone('"+e+"')")),!!v(e)}function A(e){return!(!e._a||void 0!==e._tzm)}function E(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}function k(t){var n=Array.prototype.slice.call(arguments,0,-1),r=arguments[arguments.length-1],o=v(r),i=e.utc.apply(null,n);return o&&!e.isMoment(t)&&A(i)&&i.add(o.parse(i),"minutes"),i.tz(r),i}function M(e){return function(){return this._z?this._z.abbr(this):e.call(this)}}function T(e){return function(){return this._z=null,e.apply(this,arguments)}}var P,O="0.5.13",x={},I={},R={},N={},D=e.version.split("."),F=+D[0],j=+D[1];(F<2||2===F&&j<6)&&E("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+e.version+". See momentjs.com"),a.prototype={_set:function(e){this.name=e.name,this.abbrs=e.abbrs,this.untils=e.untils,this.offsets=e.offsets,this.population=e.population},_index:function(e){var t,n=+e,r=this.untils;for(t=0;t<r.length;t++)if(n<r[t])return t},parse:function(e){var t,n,r,o,i=+e,s=this.offsets,a=this.untils,u=a.length-1;for(o=0;o<u;o++)if(t=s[o],n=s[o+1],r=s[o?o-1:o],t<n&&k.moveAmbiguousForward?t=n:t>r&&k.moveInvalidForward&&(t=r),i<a[o]-6e4*t)return s[o];return s[u]},abbr:function(e){return this.abbrs[this._index(e)]},offset:function(e){return this.offsets[this._index(e)]}},l.prototype.scoreOffsetAt=function(e){this.offsetScore+=Math.abs(this.zone.offset(e.at)-e.offset),this.zone.abbr(e.at).replace(/[^A-Z]/g,"")!==e.abbr&&this.abbrScore++},k.version=O,k.dataVersion="",k._zones=x,k._links=I,k._names=R,k.add=y,k.link=w,k.load=C,k.zone=v,k.zoneExists=S,k.guess=m,k.names=b,k.Zone=a,k.unpack=s,k.unpackBase60=n,k.needsOffset=A,k.moveInvalidForward=!0,k.moveAmbiguousForward=!1;var $=e.fn;e.tz=k,e.defaultZone=null,e.updateOffset=function(t,n){var r,o=e.defaultZone;void 0===t._z&&(o&&A(t)&&!t._isUTC&&(t._d=e.utc(t._a)._d,t.utc().add(o.parse(t),"minutes")),t._z=o),t._z&&(r=t._z.offset(t),Math.abs(r)<16&&(r/=60),void 0!==t.utcOffset?t.utcOffset(-r,n):t.zone(r,n))},$.tz=function(t){return t?(this._z=v(t),this._z?e.updateOffset(this):E("Moment Timezone has no data for "+t+". See http://momentjs.com/timezone/docs/#/data-loading/."),this):this._z?this._z.name:void 0},$.zoneName=M($.zoneName),$.zoneAbbr=M($.zoneAbbr),$.utc=T($.utc),e.tz.setDefault=function(t){return(F<2||2===F&&j<9)&&E("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+e.version+"."),e.defaultZone=t?v(t):null,e};var B=e.momentProperties;return"[object Array]"===Object.prototype.toString.call(B)?(B.push("_z"),B.push("_a")):B&&(B._z=null),e})}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;(function(){var e=this.moment;e.fn.round=function(e,t,n){n=n||"round";var r,o=this,i={hours:{name:"Hours",maxValue:24},minutes:{name:"Minutes",maxValue:60},seconds:{name:"Seconds",maxValue:60},milliseconds:{name:"Milliseconds",maxValue:1e3}},s={mm:i.milliseconds.name,milliseconds:i.milliseconds.name,Milliseconds:i.milliseconds.name,s:i.seconds.name,seconds:i.seconds.name,Seconds:i.seconds.name,m:i.minutes.name,minutes:i.minutes.name,Minutes:i.minutes.name,H:i.hours.name,h:i.hours.name,hours:i.hours.name,Hours:i.hours.name},a=0,u=!1,l=1;if(t.length>1&&"mm"!==t&&"s"!==t.slice(-1)&&(t+="s"),t=s[t].toLowerCase(),!i[t])throw new Error('The value to round is not valid. Possibles ["hours", "minutes", "seconds", "milliseconds"]');var c="get"+i[t].name,p="set"+i[t].name;for(var h in i)h===t?(a=o._d[c](),r=i[h].maxValue,u=!0):u&&(l*=i[h].maxValue,a+=o._d["get"+i[h].name]()/l,o._d["set"+i[h].name](0));return a=Math[n](a/e)*e,a=Math.min(a,r),o._d[p](a),o},e.fn.ceil=function(e,t){return this.round(e,t,"ceil")},e.fn.floor=function(e,t){return this.round(e,t,"floor")},null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)&&(module.exports=e)}).call(e.Mango)}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;!function(e,t){t(e.moment)}(n,function(e){function t(e){return e>96?e-87:e>64?e-29:e-48}function n(e){var n,r=0,o=e.split("."),i=o[0],s=o[1]||"",a=1,u=0,l=1;for(45===e.charCodeAt(0)&&(r=1,l=-1),r;r<i.length;r++)n=t(i.charCodeAt(r)),u=60*u+n;for(r=0;r<s.length;r++)a/=60,n=t(s.charCodeAt(r)),u+=n*a;return u*l}function r(e){for(var t=0;t<e.length;t++)e[t]=n(e[t])}function o(e,t){for(var n=0;n<t;n++)e[n]=Math.round((e[n-1]||0)+6e4*e[n]);e[t-1]=1/0}function i(e,t){var n,r=[];for(n=0;n<t.length;n++)r[n]=e[t[n]];return r}function s(e){var t=e.split("|"),n=t[2].split(" "),s=t[3].split(""),a=t[4].split(" ");return r(n),r(s),r(a),o(a,s.length),{name:t[0],abbrs:i(t[1].split(" "),s),offsets:i(n,s),untils:a,population:0|t[5]}}function a(e){e&&this._set(s(e))}function u(e){var t=e.toTimeString(),n=t.match(/\([a-z ]+\)/i);n&&n[0]?(n=n[0].match(/[A-Z]/g),n=n?n.join(""):void 0):(n=t.match(/[A-Z]{3,5}/g),n=n?n[0]:void 0),"GMT"===n&&(n=void 0),this.at=+e,this.abbr=n,this.offset=e.getTimezoneOffset()}function l(e){this.zone=e,this.offsetScore=0,this.abbrScore=0}function c(e,t){for(var n,r;r=6e4*((t.at-e.at)/12e4|0);)n=new u(new Date(e.at+r)),n.offset===e.offset?e=n:t=n;return e}function p(){var e,t,n,r=(new Date).getFullYear()-2,o=new u(new Date(r,0,1)),i=[o];for(n=1;n<48;n++)t=new u(new Date(r,n,1)),t.offset!==o.offset&&(e=c(o,t),i.push(e),i.push(new u(new Date(e.at+6e4)))),o=t;for(n=0;n<4;n++)i.push(new u(new Date(r+n,0,1))),i.push(new u(new Date(r+n,6,1)));return i}function h(e,t){return e.offsetScore!==t.offsetScore?e.offsetScore-t.offsetScore:e.abbrScore!==t.abbrScore?e.abbrScore-t.abbrScore:t.zone.population-e.zone.population}function d(e,t){var n,o;for(r(t),n=0;n<t.length;n++)o=t[n],N[o]=N[o]||{},N[o][e]=!0}function f(e){var t,n,r,o=e.length,i={},s=[];for(t=0;t<o;t++){r=N[e[t].offset]||{};for(n in r)r.hasOwnProperty(n)&&(i[n]=!0)}for(t in i)i.hasOwnProperty(t)&&s.push(R[t]);return s}function _(){try{var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e){var t=R[g(e)];if(t)return t;E("Moment Timezone found "+e+" from the Intl api, but did not have that data loaded.")}}catch(n){}var r,o,i,s=p(),a=s.length,u=f(s),c=[];for(o=0;o<u.length;o++){for(r=new l(v(u[o]),a),i=0;i<a;i++)r.scoreOffsetAt(s[i]);c.push(r)}return c.sort(h),c.length>0?c[0].zone.name:void 0}function m(e){return P&&!e||(P=_()),P}function g(e){return(e||"").toLowerCase().replace(/\//g,"_")}function y(e){var t,n,r,o;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)r=e[t].split("|"),n=r[0],o=g(n),x[o]=e[t],R[o]=n,r[5]&&d(o,r[2].split(" "))}function v(e,t){e=g(e);var n,r=x[e];return r instanceof a?r:"string"==typeof r?(r=new a(r),x[e]=r,r):I[e]&&t!==v&&(n=v(I[e],v))?(r=x[e]=new a,r._set(n),r.name=R[e],r):null}function b(){var e,t=[];for(e in R)R.hasOwnProperty(e)&&(x[e]||x[I[e]])&&R[e]&&t.push(R[e]);return t.sort()}function w(e){var t,n,r,o;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)n=e[t].split("|"),r=g(n[0]),o=g(n[1]),I[r]=o,R[r]=n[0],I[o]=r,R[o]=n[1]}function C(e){y(e.zones),w(e.links),k.dataVersion=e.version}function S(e){return S.didShowError||(S.didShowError=!0,E("moment.tz.zoneExists('"+e+"') has been deprecated in favor of !moment.tz.zone('"+e+"')")),!!v(e)}function A(e){return!(!e._a||void 0!==e._tzm)}function E(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}function k(t){var n=Array.prototype.slice.call(arguments,0,-1),r=arguments[arguments.length-1],o=v(r),i=e.utc.apply(null,n);return o&&!e.isMoment(t)&&A(i)&&i.add(o.parse(i),"minutes"),i.tz(r),i}function M(e){return function(){return this._z?this._z.abbr(this):e.call(this)}}function T(e){return function(){return this._z=null,e.apply(this,arguments)}}var P,O="0.5.13",x={},I={},R={},N={},D=e.version.split("."),F=+D[0],j=+D[1];(F<2||2===F&&j<6)&&E("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+e.version+". See momentjs.com"),a.prototype={_set:function(e){this.name=e.name,this.abbrs=e.abbrs,this.untils=e.untils,this.offsets=e.offsets,this.population=e.population},_index:function(e){var t,n=+e,r=this.untils;for(t=0;t<r.length;t++)if(n<r[t])return t},parse:function(e){var t,n,r,o,i=+e,s=this.offsets,a=this.untils,u=a.length-1;for(o=0;o<u;o++)if(t=s[o],
n=s[o+1],r=s[o?o-1:o],t<n&&k.moveAmbiguousForward?t=n:t>r&&k.moveInvalidForward&&(t=r),i<a[o]-6e4*t)return s[o];return s[u]},abbr:function(e){return this.abbrs[this._index(e)]},offset:function(e){return this.offsets[this._index(e)]}},l.prototype.scoreOffsetAt=function(e){this.offsetScore+=Math.abs(this.zone.offset(e.at)-e.offset),this.zone.abbr(e.at).replace(/[^A-Z]/g,"")!==e.abbr&&this.abbrScore++},k.version=O,k.dataVersion="",k._zones=x,k._links=I,k._names=R,k.add=y,k.link=w,k.load=C,k.zone=v,k.zoneExists=S,k.guess=m,k.names=b,k.Zone=a,k.unpack=s,k.unpackBase60=n,k.needsOffset=A,k.moveInvalidForward=!0,k.moveAmbiguousForward=!1;var $=e.fn;e.tz=k,e.defaultZone=null,e.updateOffset=function(t,n){var r,o=e.defaultZone;void 0===t._z&&(o&&A(t)&&!t._isUTC&&(t._d=e.utc(t._a)._d,t.utc().add(o.parse(t),"minutes")),t._z=o),t._z&&(r=t._z.offset(t),Math.abs(r)<16&&(r/=60),void 0!==t.utcOffset?t.utcOffset(-r,n):t.zone(r,n))},$.tz=function(t){return t?(this._z=v(t),this._z?e.updateOffset(this):E("Moment Timezone has no data for "+t+". See http://momentjs.com/timezone/docs/#/data-loading/."),this):this._z?this._z.name:void 0},$.zoneName=M($.zoneName),$.zoneAbbr=M($.zoneAbbr),$.utc=T($.utc),e.tz.setDefault=function(t){return(F<2||2===F&&j<9)&&E("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+e.version+"."),e.defaultZone=t?v(t):null,e};var B=e.momentProperties;return"[object Array]"===Object.prototype.toString.call(B)?(B.push("_z"),B.push("_a")):B&&(B._z=null),C({version:"2017b",zones:["Africa/Abidjan|GMT|0|0||48e5","Africa/Khartoum|EAT|-30|0||51e5","Africa/Algiers|CET|-10|0||26e5","Africa/Lagos|WAT|-10|0||17e6","Africa/Maputo|CAT|-20|0||26e5","Africa/Cairo|EET EEST|-20 -30|01010|1M2m0 gL0 e10 mn0|15e6","Africa/Casablanca|WET WEST|0 -10|0101010101010101010101010101010101010101010|1H3C0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uM0 e00 Dc0 11A0 s00 e00 IM0 WM0 mo0 gM0 LA0 WM0 jA0 e00 Rc0 11A0 e00 e00 U00 11A0 8o0 e00 11A0 11A0 5A0 e00 17c0 1fA0 1a00|32e5","Europe/Paris|CET CEST|-10 -20|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|11e6","Africa/Johannesburg|SAST|-20|0||84e5","Africa/Tripoli|EET CET CEST|-20 -10 -20|0120|1IlA0 TA0 1o00|11e5","Africa/Windhoek|WAST WAT|-20 -10|01010101010101010101010|1GQo0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0|32e4","America/Adak|HST HDT|a0 90|01010101010101010101010|1GIc0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|326","America/Anchorage|AKST AKDT|90 80|01010101010101010101010|1GIb0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|30e4","America/Santo_Domingo|AST|40|0||29e5","America/Araguaina|-03 -02|30 20|010|1IdD0 Lz0|14e4","America/Fortaleza|-03|30|0||34e5","America/Asuncion|-03 -04|30 40|01010101010101010101010|1GTf0 1cN0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0|28e5","America/Panama|EST|50|0||15e5","America/Bahia|-02 -03|20 30|01|1GCq0|27e5","America/Mexico_City|CST CDT|60 50|01010101010101010101010|1GQw0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|20e6","America/Managua|CST|60|0||22e5","America/La_Paz|-04|40|0||19e5","America/Lima|-05|50|0||11e6","America/Denver|MST MDT|70 60|01010101010101010101010|1GI90 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|26e5","America/Campo_Grande|-03 -04|30 40|01010101010101010101010|1GCr0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0|77e4","America/Cancun|CST CDT EST|60 50 50|01010102|1GQw0 1nX0 14p0 1lb0 14p0 1lb0 Dd0|63e4","America/Caracas|-0430 -04|4u 40|01|1QMT0|29e5","America/Chicago|CST CDT|60 50|01010101010101010101010|1GI80 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|92e5","America/Chihuahua|MST MDT|70 60|01010101010101010101010|1GQx0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|81e4","America/Phoenix|MST|70|0||42e5","America/Los_Angeles|PST PDT|80 70|01010101010101010101010|1GIa0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|15e6","America/New_York|EST EDT|50 40|01010101010101010101010|1GI70 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|21e6","America/Rio_Branco|-04 -05|40 50|01|1KLE0|31e4","America/Fort_Nelson|PST PDT MST|80 70 70|01010102|1GIa0 1zb0 Op0 1zb0 Op0 1zb0 Op0|39e2","America/Halifax|AST ADT|40 30|01010101010101010101010|1GI60 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|39e4","America/Godthab|-03 -02|30 20|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|17e3","America/Grand_Turk|EST EDT AST|50 40 40|010101012|1GI70 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|37e2","America/Havana|CST CDT|50 40|01010101010101010101010|1GQt0 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0|21e5","America/Metlakatla|PST AKST AKDT|80 90 80|0121212121212121|1PAa0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|14e2","America/Miquelon|-03 -02|30 20|01010101010101010101010|1GI50 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|61e2","America/Montevideo|-02 -03|20 30|01010101|1GI40 1o10 11z0 1o10 11z0 1o10 11z0|17e5","America/Noronha|-02|20|0||30e2","America/Port-au-Prince|EST EDT|50 40|010101010101010101010|1GI70 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 3iN0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|23e5","Antarctica/Palmer|-03 -04|30 40|010101010|1H3D0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0|40","America/Santiago|-03 -04|30 40|010101010101010101010|1H3D0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Dd0 1Nb0 Ap0|62e5","America/Sao_Paulo|-02 -03|20 30|01010101010101010101010|1GCq0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0|20e6","Atlantic/Azores|-01 +00|10 0|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|25e4","America/St_Johns|NST NDT|3u 2u|01010101010101010101010|1GI5u 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|11e4","Antarctica/Casey|+11 +08|-b0 -80|010|1GAF0 blz0|10","Antarctica/Davis|+05 +07|-50 -70|01|1GAI0|70","Pacific/Port_Moresby|+10|-a0|0||25e4","Pacific/Guadalcanal|+11|-b0|0||11e4","Asia/Tashkent|+05|-50|0||23e5","Pacific/Auckland|NZDT NZST|-d0 -c0|01010101010101010101010|1GQe0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00|14e5","Asia/Baghdad|+03|-30|0||66e5","Antarctica/Troll|+00 +02|0 -20|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|40","Asia/Dhaka|+06|-60|0||16e6","Asia/Amman|EET EEST|-20 -30|010101010101010101010|1GPy0 4bX0 Dd0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00|25e5","Asia/Kamchatka|+12|-c0|0||18e4","Asia/Baku|+04 +05|-40 -50|010101010|1GNA0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00|27e5","Asia/Bangkok|+07|-70|0||15e6","Asia/Barnaul|+07 +06|-70 -60|010|1N7v0 3rd0","Asia/Beirut|EET EEST|-20 -30|01010101010101010101010|1GNy0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0|22e5","Asia/Manila|+08|-80|0||24e6","Asia/Kolkata|IST|-5u|0||15e6","Asia/Chita|+10 +08 +09|-a0 -80 -90|012|1N7s0 3re0|33e4","Asia/Ulaanbaatar|+08 +09|-80 -90|01010|1O8G0 1cJ0 1cP0 1cJ0|12e5","Asia/Shanghai|CST|-80|0||23e6","Asia/Colombo|+0530|-5u|0||22e5","Asia/Damascus|EET EEST|-20 -30|01010101010101010101010|1GPy0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0|26e5","Asia/Dili|+09|-90|0||19e4","Asia/Dubai|+04|-40|0||39e5","Asia/Famagusta|EET EEST +03|-20 -30 -30|01010101012|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 15U0","Asia/Gaza|EET EEST|-20 -30|01010101010101010101010|1GPy0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1220 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0|18e5","Asia/Hong_Kong|HKT|-80|0||73e5","Asia/Hovd|+07 +08|-70 -80|01010|1O8H0 1cJ0 1cP0 1cJ0|81e3","Asia/Irkutsk|+09 +08|-90 -80|01|1N7t0|60e4","Europe/Istanbul|EET EEST +03|-20 -30 -30|01010101012|1GNB0 1qM0 11A0 1o00 1200 1nA0 11A0 1tA0 U00 15w0|13e6","Asia/Jakarta|WIB|-70|0||31e6","Asia/Jayapura|WIT|-90|0||26e4","Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010|1GPA0 1aL0 1eN0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0|81e4","Asia/Kabul|+0430|-4u|0||46e5","Asia/Karachi|PKT|-50|0||24e6","Asia/Kathmandu|+0545|-5J|0||12e5","Asia/Yakutsk|+10 +09|-a0 -90|01|1N7s0|28e4","Asia/Krasnoyarsk|+08 +07|-80 -70|01|1N7u0|10e5","Asia/Magadan|+12 +10 +11|-c0 -a0 -b0|012|1N7q0 3Cq0|95e3","Asia/Makassar|WITA|-80|0||15e5","Europe/Athens|EET EEST|-20 -30|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|35e5","Asia/Novosibirsk|+07 +06|-70 -60|010|1N7v0 4eN0|15e5","Asia/Omsk|+07 +06|-70 -60|01|1N7v0|12e5","Asia/Pyongyang|KST KST|-90 -8u|01|1P4D0|29e5","Asia/Rangoon|+0630|-6u|0||48e5","Asia/Sakhalin|+11 +10|-b0 -a0|010|1N7r0 3rd0|58e4","Asia/Seoul|KST|-90|0||23e6","Asia/Srednekolymsk|+12 +11|-c0 -b0|01|1N7q0|35e2","Asia/Tehran|+0330 +0430|-3u -4u|01010101010101010101010|1GLUu 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0|14e6","Asia/Tokyo|JST|-90|0||38e6","Asia/Tomsk|+07 +06|-70 -60|010|1N7v0 3Qp0|10e5","Asia/Vladivostok|+11 +10|-b0 -a0|01|1N7r0|60e4","Asia/Yekaterinburg|+06 +05|-60 -50|01|1N7w0|14e5","Europe/Lisbon|WET WEST|0 -10|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|27e5","Atlantic/Cape_Verde|-01|10|0||50e4","Australia/Sydney|AEDT AEST|-b0 -a0|01010101010101010101010|1GQg0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0|40e5","Australia/Adelaide|ACDT ACST|-au -9u|01010101010101010101010|1GQgu 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0|11e5","Australia/Brisbane|AEST|-a0|0||20e5","Australia/Darwin|ACST|-9u|0||12e4","Australia/Eucla|+0845|-8J|0||368","Australia/Lord_Howe|+11 +1030|-b0 -au|01010101010101010101010|1GQf0 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu|347","Australia/Perth|AWST|-80|0||18e5","Pacific/Easter|-05 -06|50 60|010101010101010101010|1H3D0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Dd0 1Nb0 Ap0|30e2","Europe/Dublin|GMT IST|0 -10|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|12e5","Pacific/Tahiti|-10|a0|0||18e4","Pacific/Niue|-11|b0|0||12e2","Etc/GMT+12|-12|c0|0|","Pacific/Galapagos|-06|60|0||25e3","Etc/GMT+7|-07|70|0|","Pacific/Pitcairn|-08|80|0||56","Pacific/Gambier|-09|90|0||125","Etc/GMT-1|+01|-10|0|","Pacific/Fakaofo|+13|-d0|0||483","Pacific/Kiritimati|+14|-e0|0||51e2","Etc/GMT-2|+02|-20|0|","Etc/UCT|UCT|0|0|","Etc/UTC|UTC|0|0|","Europe/Astrakhan|+04 +03|-40 -30|010|1N7y0 3rd0","Europe/London|GMT BST|0 -10|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|10e6","Europe/Chisinau|EET EEST|-20 -30|01010101010101010101010|1GNA0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|67e4","Europe/Kaliningrad|+03 EET|-30 -20|01|1N7z0|44e4","Europe/Volgograd|+04 +03|-40 -30|01|1N7y0|10e5","Europe/Moscow|MSK MSK|-40 -30|01|1N7y0|16e6","Europe/Saratov|+04 +03|-40 -30|010|1N7y0 5810","Europe/Simferopol|EET EEST MSK MSK|-20 -30 -40 -30|0101023|1GNB0 1qM0 11A0 1o00 11z0 1nW0|33e4","Pacific/Honolulu|HST|a0|0||37e4","MET|MET MEST|-10 -20|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0","Pacific/Chatham|+1345 +1245|-dJ -cJ|01010101010101010101010|1GQe0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00|600","Pacific/Apia|+14 +13|-e0 -d0|01010101010101010101010|1GQe0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00|37e3","Pacific/Bougainville|+10 +11|-a0 -b0|01|1NwE0|18e4","Pacific/Fiji|+13 +12|-d0 -c0|01010101010101010101010|1Goe0 1Nc0 Ao0 1Q00 xz0 1SN0 uM0 1SM0 uM0 1VA0 s00 1VA0 uM0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1VA0 s00 1VA0|88e4","Pacific/Guam|ChST|-a0|0||17e4","Pacific/Marquesas|-0930|9u|0||86e2","Pacific/Pago_Pago|SST|b0|0||37e2","Pacific/Norfolk|+1130 +11|-bu -b0|01|1PoCu|25e4","Pacific/Tongatapu|+13 +14|-d0 -e0|01010101010101|1S4d0 s00 1VA0 uM0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1VA0 s00 1VA0|75e3"],links:["Africa/Abidjan|Africa/Accra","Africa/Abidjan|Africa/Bamako","Africa/Abidjan|Africa/Banjul","Africa/Abidjan|Africa/Bissau","Africa/Abidjan|Africa/Conakry","Africa/Abidjan|Africa/Dakar","Africa/Abidjan|Africa/Freetown","Africa/Abidjan|Africa/Lome","Africa/Abidjan|Africa/Monrovia","Africa/Abidjan|Africa/Nouakchott","Africa/Abidjan|Africa/Ouagadougou","Africa/Abidjan|Africa/Sao_Tome","Africa/Abidjan|Africa/Timbuktu","Africa/Abidjan|America/Danmarkshavn","Africa/Abidjan|Atlantic/Reykjavik","Africa/Abidjan|Atlantic/St_Helena","Africa/Abidjan|Etc/GMT","Africa/Abidjan|Etc/GMT+0","Africa/Abidjan|Etc/GMT-0","Africa/Abidjan|Etc/GMT0","Africa/Abidjan|Etc/Greenwich","Africa/Abidjan|GMT","Africa/Abidjan|GMT+0","Africa/Abidjan|GMT-0","Africa/Abidjan|GMT0","Africa/Abidjan|Greenwich","Africa/Abidjan|Iceland","Africa/Algiers|Africa/Tunis","Africa/Cairo|Egypt","Africa/Casablanca|Africa/El_Aaiun","Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","Africa/Khartoum|Africa/Addis_Ababa","Africa/Khartoum|Africa/Asmara","Africa/Khartoum|Africa/Asmera","Africa/Khartoum|Africa/Dar_es_Salaam","Africa/Khartoum|Africa/Djibouti","Africa/Khartoum|Africa/Juba","Africa/Khartoum|Africa/Kampala","Africa/Khartoum|Africa/Mogadishu","Africa/Khartoum|Africa/Nairobi","Africa/Khartoum|Indian/Antananarivo","Africa/Khartoum|Indian/Comoro","Africa/Khartoum|Indian/Mayotte","Africa/Lagos|Africa/Bangui","Africa/Lagos|Africa/Brazzaville","Africa/Lagos|Africa/Douala","Africa/Lagos|Africa/Kinshasa","Africa/Lagos|Africa/Libreville","Africa/Lagos|Africa/Luanda","Africa/Lagos|Africa/Malabo","Africa/Lagos|Africa/Ndjamena","Africa/Lagos|Africa/Niamey","Africa/Lagos|Africa/Porto-Novo","Africa/Maputo|Africa/Blantyre","Africa/Maputo|Africa/Bujumbura","Africa/Maputo|Africa/Gaborone","Africa/Maputo|Africa/Harare","Africa/Maputo|Africa/Kigali","Africa/Maputo|Africa/Lubumbashi","Africa/Maputo|Africa/Lusaka","Africa/Tripoli|Libya","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|America/Juneau","America/Anchorage|America/Nome","America/Anchorage|America/Sitka","America/Anchorage|America/Yakutat","America/Anchorage|US/Alaska","America/Campo_Grande|America/Cuiaba","America/Chicago|America/Indiana/Knox","America/Chicago|America/Indiana/Tell_City","America/Chicago|America/Knox_IN","America/Chicago|America/Matamoros","America/Chicago|America/Menominee","America/Chicago|America/North_Dakota/Beulah","America/Chicago|America/North_Dakota/Center","America/Chicago|America/North_Dakota/New_Salem","America/Chicago|America/Rainy_River","America/Chicago|America/Rankin_Inlet","America/Chicago|America/Resolute","America/Chicago|America/Winnipeg","America/Chicago|CST6CDT","America/Chicago|Canada/Central","America/Chicago|US/Central","America/Chicago|US/Indiana-Starke","America/Chihuahua|America/Mazatlan","America/Chihuahua|Mexico/BajaSur","America/Denver|America/Boise","America/Denver|America/Cambridge_Bay","America/Denver|America/Edmonton","America/Denver|America/Inuvik","America/Denver|America/Ojinaga","America/Denver|America/Shiprock","America/Denver|America/Yellowknife","America/Denver|Canada/Mountain","America/Denver|MST7MDT","America/Denver|Navajo","America/Denver|US/Mountain","America/Fortaleza|America/Argentina/Buenos_Aires","America/Fortaleza|America/Argentina/Catamarca","America/Fortaleza|America/Argentina/ComodRivadavia","America/Fortaleza|America/Argentina/Cordoba","America/Fortaleza|America/Argentina/Jujuy","America/Fortaleza|America/Argentina/La_Rioja","America/Fortaleza|America/Argentina/Mendoza","America/Fortaleza|America/Argentina/Rio_Gallegos","America/Fortaleza|America/Argentina/Salta","America/Fortaleza|America/Argentina/San_Juan","America/Fortaleza|America/Argentina/San_Luis","America/Fortaleza|America/Argentina/Tucuman","America/Fortaleza|America/Argentina/Ushuaia","America/Fortaleza|America/Belem","America/Fortaleza|America/Buenos_Aires","America/Fortaleza|America/Catamarca","America/Fortaleza|America/Cayenne","America/Fortaleza|America/Cordoba","America/Fortaleza|America/Jujuy","America/Fortaleza|America/Maceio","America/Fortaleza|America/Mendoza","America/Fortaleza|America/Paramaribo","America/Fortaleza|America/Recife","America/Fortaleza|America/Rosario","America/Fortaleza|America/Santarem","America/Fortaleza|Antarctica/Rothera","America/Fortaleza|Atlantic/Stanley","America/Fortaleza|Etc/GMT+3","America/Halifax|America/Glace_Bay","America/Halifax|America/Goose_Bay","America/Halifax|America/Moncton","America/Halifax|America/Thule","America/Halifax|Atlantic/Bermuda","America/Halifax|Canada/Atlantic","America/Havana|Cuba","America/La_Paz|America/Boa_Vista","America/La_Paz|America/Guyana","America/La_Paz|America/Manaus","America/La_Paz|America/Porto_Velho","America/La_Paz|Brazil/West","America/La_Paz|Etc/GMT+4","America/Lima|America/Bogota","America/Lima|America/Guayaquil","America/Lima|Etc/GMT+5","America/Los_Angeles|America/Dawson","America/Los_Angeles|America/Ensenada","America/Los_Angeles|America/Santa_Isabel","America/Los_Angeles|America/Tijuana","America/Los_Angeles|America/Vancouver","America/Los_Angeles|America/Whitehorse","America/Los_Angeles|Canada/Pacific","America/Los_Angeles|Canada/Yukon","America/Los_Angeles|Mexico/BajaNorte","America/Los_Angeles|PST8PDT","America/Los_Angeles|US/Pacific","America/Los_Angeles|US/Pacific-New","America/Managua|America/Belize","America/Managua|America/Costa_Rica","America/Managua|America/El_Salvador","America/Managua|America/Guatemala","America/Managua|America/Regina","America/Managua|America/Swift_Current","America/Managua|America/Tegucigalpa","America/Managua|Canada/East-Saskatchewan","America/Managua|Canada/Saskatchewan","America/Mexico_City|America/Bahia_Banderas","America/Mexico_City|America/Merida","America/Mexico_City|America/Monterrey","America/Mexico_City|Mexico/General","America/New_York|America/Detroit","America/New_York|America/Fort_Wayne","America/New_York|America/Indiana/Indianapolis","America/New_York|America/Indiana/Marengo","America/New_York|America/Indiana/Petersburg","America/New_York|America/Indiana/Vevay","America/New_York|America/Indiana/Vincennes","America/New_York|America/Indiana/Winamac","America/New_York|America/Indianapolis","America/New_York|America/Iqaluit","America/New_York|America/Kentucky/Louisville","America/New_York|America/Kentucky/Monticello","America/New_York|America/Louisville","America/New_York|America/Montreal","America/New_York|America/Nassau","America/New_York|America/Nipigon","America/New_York|America/Pangnirtung","America/New_York|America/Thunder_Bay","America/New_York|America/Toronto","America/New_York|Canada/Eastern","America/New_York|EST5EDT","America/New_York|US/East-Indiana","America/New_York|US/Eastern","America/New_York|US/Michigan","America/Noronha|Atlantic/South_Georgia","America/Noronha|Brazil/DeNoronha","America/Noronha|Etc/GMT+2","America/Panama|America/Atikokan","America/Panama|America/Cayman","America/Panama|America/Coral_Harbour","America/Panama|America/Jamaica","America/Panama|EST","America/Panama|Jamaica","America/Phoenix|America/Creston","America/Phoenix|America/Dawson_Creek","America/Phoenix|America/Hermosillo","America/Phoenix|MST","America/Phoenix|US/Arizona","America/Rio_Branco|America/Eirunepe","America/Rio_Branco|America/Porto_Acre","America/Rio_Branco|Brazil/Acre","America/Santiago|Chile/Continental","America/Santo_Domingo|America/Anguilla","America/Santo_Domingo|America/Antigua","America/Santo_Domingo|America/Aruba","America/Santo_Domingo|America/Barbados","America/Santo_Domingo|America/Blanc-Sablon","America/Santo_Domingo|America/Curacao","America/Santo_Domingo|America/Dominica","America/Santo_Domingo|America/Grenada","America/Santo_Domingo|America/Guadeloupe","America/Santo_Domingo|America/Kralendijk","America/Santo_Domingo|America/Lower_Princes","America/Santo_Domingo|America/Marigot","America/Santo_Domingo|America/Martinique","America/Santo_Domingo|America/Montserrat","America/Santo_Domingo|America/Port_of_Spain","America/Santo_Domingo|America/Puerto_Rico","America/Santo_Domingo|America/St_Barthelemy","America/Santo_Domingo|America/St_Kitts","America/Santo_Domingo|America/St_Lucia","America/Santo_Domingo|America/St_Thomas","America/Santo_Domingo|America/St_Vincent","America/Santo_Domingo|America/Tortola","America/Santo_Domingo|America/Virgin","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","Antarctica/Palmer|America/Punta_Arenas","Asia/Baghdad|Antarctica/Syowa","Asia/Baghdad|Asia/Aden","Asia/Baghdad|Asia/Bahrain","Asia/Baghdad|Asia/Kuwait","Asia/Baghdad|Asia/Qatar","Asia/Baghdad|Asia/Riyadh","Asia/Baghdad|Etc/GMT-3","Asia/Baghdad|Europe/Minsk","Asia/Bangkok|Asia/Ho_Chi_Minh","Asia/Bangkok|Asia/Novokuznetsk","Asia/Bangkok|Asia/Phnom_Penh","Asia/Bangkok|Asia/Saigon","Asia/Bangkok|Asia/Vientiane","Asia/Bangkok|Etc/GMT-7","Asia/Bangkok|Indian/Christmas","Asia/Dhaka|Antarctica/Vostok","Asia/Dhaka|Asia/Almaty","Asia/Dhaka|Asia/Bishkek","Asia/Dhaka|Asia/Dacca","Asia/Dhaka|Asia/Kashgar","Asia/Dhaka|Asia/Qyzylorda","Asia/Dhaka|Asia/Thimbu","Asia/Dhaka|Asia/Thimphu","Asia/Dhaka|Asia/Urumqi","Asia/Dhaka|Etc/GMT-6","Asia/Dhaka|Indian/Chagos","Asia/Dili|Etc/GMT-9","Asia/Dili|Pacific/Palau","Asia/Dubai|Asia/Muscat","Asia/Dubai|Asia/Tbilisi","Asia/Dubai|Asia/Yerevan","Asia/Dubai|Etc/GMT-4","Asia/Dubai|Europe/Samara","Asia/Dubai|Indian/Mahe","Asia/Dubai|Indian/Mauritius","Asia/Dubai|Indian/Reunion","Asia/Gaza|Asia/Hebron","Asia/Hong_Kong|Hongkong","Asia/Jakarta|Asia/Pontianak","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kamchatka|Asia/Anadyr","Asia/Kamchatka|Etc/GMT-12","Asia/Kamchatka|Kwajalein","Asia/Kamchatka|Pacific/Funafuti","Asia/Kamchatka|Pacific/Kwajalein","Asia/Kamchatka|Pacific/Majuro","Asia/Kamchatka|Pacific/Nauru","Asia/Kamchatka|Pacific/Tarawa","Asia/Kamchatka|Pacific/Wake","Asia/Kamchatka|Pacific/Wallis","Asia/Kathmandu|Asia/Katmandu","Asia/Kolkata|Asia/Calcutta","Asia/Makassar|Asia/Ujung_Pandang","Asia/Manila|Asia/Brunei","Asia/Manila|Asia/Kuala_Lumpur","Asia/Manila|Asia/Kuching","Asia/Manila|Asia/Singapore","Asia/Manila|Etc/GMT-8","Asia/Manila|Singapore","Asia/Rangoon|Asia/Yangon","Asia/Rangoon|Indian/Cocos","Asia/Seoul|ROK","Asia/Shanghai|Asia/Chongqing","Asia/Shanghai|Asia/Chungking","Asia/Shanghai|Asia/Harbin","Asia/Shanghai|Asia/Macao","Asia/Shanghai|Asia/Macau","Asia/Shanghai|Asia/Taipei","Asia/Shanghai|PRC","Asia/Shanghai|ROC","Asia/Tashkent|Antarctica/Mawson","Asia/Tashkent|Asia/Aqtau","Asia/Tashkent|Asia/Aqtobe","Asia/Tashkent|Asia/Ashgabat","Asia/Tashkent|Asia/Ashkhabad","Asia/Tashkent|Asia/Atyrau","Asia/Tashkent|Asia/Dushanbe","Asia/Tashkent|Asia/Oral","Asia/Tashkent|Asia/Samarkand","Asia/Tashkent|Etc/GMT-5","Asia/Tashkent|Indian/Kerguelen","Asia/Tashkent|Indian/Maldives","Asia/Tehran|Iran","Asia/Tokyo|Japan","Asia/Ulaanbaatar|Asia/Choibalsan","Asia/Ulaanbaatar|Asia/Ulan_Bator","Asia/Vladivostok|Asia/Ust-Nera","Asia/Yakutsk|Asia/Khandyga","Atlantic/Azores|America/Scoresbysund","Atlantic/Cape_Verde|Etc/GMT+1","Australia/Adelaide|Australia/Broken_Hill","Australia/Adelaide|Australia/South","Australia/Adelaide|Australia/Yancowinna","Australia/Brisbane|Australia/Lindeman","Australia/Brisbane|Australia/Queensland","Australia/Darwin|Australia/North","Australia/Lord_Howe|Australia/LHI","Australia/Perth|Australia/West","Australia/Sydney|Australia/ACT","Australia/Sydney|Australia/Canberra","Australia/Sydney|Australia/Currie","Australia/Sydney|Australia/Hobart","Australia/Sydney|Australia/Melbourne","Australia/Sydney|Australia/NSW","Australia/Sydney|Australia/Tasmania","Australia/Sydney|Australia/Victoria","Etc/UCT|UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Astrakhan|Europe/Ulyanovsk","Europe/Athens|Asia/Nicosia","Europe/Athens|EET","Europe/Athens|Europe/Bucharest","Europe/Athens|Europe/Helsinki","Europe/Athens|Europe/Kiev","Europe/Athens|Europe/Mariehamn","Europe/Athens|Europe/Nicosia","Europe/Athens|Europe/Riga","Europe/Athens|Europe/Sofia","Europe/Athens|Europe/Tallinn","Europe/Athens|Europe/Uzhgorod","Europe/Athens|Europe/Vilnius","Europe/Athens|Europe/Zaporozhye","Europe/Chisinau|Europe/Tiraspol","Europe/Dublin|Eire","Europe/Istanbul|Asia/Istanbul","Europe/Istanbul|Turkey","Europe/Lisbon|Atlantic/Canary","Europe/Lisbon|Atlantic/Faeroe","Europe/Lisbon|Atlantic/Faroe","Europe/Lisbon|Atlantic/Madeira","Europe/Lisbon|Portugal","Europe/Lisbon|WET","Europe/London|Europe/Belfast","Europe/London|Europe/Guernsey","Europe/London|Europe/Isle_of_Man","Europe/London|Europe/Jersey","Europe/London|GB","Europe/London|GB-Eire","Europe/Moscow|W-SU","Europe/Paris|Africa/Ceuta","Europe/Paris|Arctic/Longyearbyen","Europe/Paris|Atlantic/Jan_Mayen","Europe/Paris|CET","Europe/Paris|Europe/Amsterdam","Europe/Paris|Europe/Andorra","Europe/Paris|Europe/Belgrade","Europe/Paris|Europe/Berlin","Europe/Paris|Europe/Bratislava","Europe/Paris|Europe/Brussels","Europe/Paris|Europe/Budapest","Europe/Paris|Europe/Busingen","Europe/Paris|Europe/Copenhagen","Europe/Paris|Europe/Gibraltar","Europe/Paris|Europe/Ljubljana","Europe/Paris|Europe/Luxembourg","Europe/Paris|Europe/Madrid","Europe/Paris|Europe/Malta","Europe/Paris|Europe/Monaco","Europe/Paris|Europe/Oslo","Europe/Paris|Europe/Podgorica","Europe/Paris|Europe/Prague","Europe/Paris|Europe/Rome","Europe/Paris|Europe/San_Marino","Europe/Paris|Europe/Sarajevo","Europe/Paris|Europe/Skopje","Europe/Paris|Europe/Stockholm","Europe/Paris|Europe/Tirane","Europe/Paris|Europe/Vaduz","Europe/Paris|Europe/Vatican","Europe/Paris|Europe/Vienna","Europe/Paris|Europe/Warsaw","Europe/Paris|Europe/Zagreb","Europe/Paris|Europe/Zurich","Europe/Paris|Poland","Europe/Volgograd|Europe/Kirov","Pacific/Auckland|Antarctica/McMurdo","Pacific/Auckland|Antarctica/South_Pole","Pacific/Auckland|NZ","Pacific/Chatham|NZ-CHAT","Pacific/Easter|Chile/EasterIsland","Pacific/Fakaofo|Etc/GMT-13","Pacific/Fakaofo|Pacific/Enderbury","Pacific/Galapagos|Etc/GMT+6","Pacific/Gambier|Etc/GMT+9","Pacific/Guadalcanal|Antarctica/Macquarie","Pacific/Guadalcanal|Etc/GMT-11","Pacific/Guadalcanal|Pacific/Efate","Pacific/Guadalcanal|Pacific/Kosrae","Pacific/Guadalcanal|Pacific/Noumea","Pacific/Guadalcanal|Pacific/Pohnpei","Pacific/Guadalcanal|Pacific/Ponape","Pacific/Guam|Pacific/Saipan","Pacific/Honolulu|HST","Pacific/Honolulu|Pacific/Johnston","Pacific/Honolulu|US/Hawaii","Pacific/Kiritimati|Etc/GMT-14","Pacific/Niue|Etc/GMT+11","Pacific/Pago_Pago|Pacific/Midway","Pacific/Pago_Pago|Pacific/Samoa","Pacific/Pago_Pago|US/Samoa","Pacific/Pitcairn|Etc/GMT+8","Pacific/Port_Moresby|Antarctica/DumontDUrville","Pacific/Port_Moresby|Etc/GMT-10","Pacific/Port_Moresby|Pacific/Chuuk","Pacific/Port_Moresby|Pacific/Truk","Pacific/Port_Moresby|Pacific/Yap","Pacific/Tahiti|Etc/GMT+10","Pacific/Tahiti|Pacific/Rarotonga"]}),e})}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;!function(e,t,r){if(!e.PushStream){var o={},i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=function(e){return(e<10?"0":"")+e};o.dateToUTCString=function(e){var t=a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds());return i[e.getUTCDay()]+", "+a(e.getUTCDate())+" "+s[e.getUTCMonth()]+" "+e.getUTCFullYear()+" "+t+" GMT"};var u=function(){for(var e=arguments[0]||{},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)n.hasOwnProperty&&!n.hasOwnProperty(r)||(e[r]=n[r])}return e},l=/^[\],:{}\s]*$/,c=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,h=/(?:^|:|,)(?:\s*\[)+/g,d=function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")};o.parseJSON=function(t){if(!t||!b(t))return null;if(t=d(t),e.JSON&&e.JSON.parse)try{return e.JSON.parse(t)}catch(n){throw"Invalid JSON: "+t}if(l.test(t.replace(c,"@").replace(p,"]").replace(h,"")))return new Function("return "+t)();throw"Invalid JSON: "+t};var f=function(e){var t={};return t[e.tagArgument]="",t[e.timeArgument]="",t[e.eventIdArgument]="",e.messagesControlByArgument&&(t[e.tagArgument]=Number(e._etag),e._lastModified?t[e.timeArgument]=e._lastModified:e._lastEventId&&(t[e.eventIdArgument]=e._lastEventId)),t},_=function(){return(new Date).getTime()},m=function(){return{_:_()}},g=function(e){var t=e;if("object"==typeof e){t="";for(var n in e)e.hasOwnProperty&&!e.hasOwnProperty(n)||(t+="&"+n+"="+A(e[n]));t=t.substring(1)}return t||""},y=function(e,t){return e+(e.indexOf("?")<0?"?":"&")+g(t)},v=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},b=function(e){return"[object String]"===Object.prototype.toString.call(e)},w=function(e){return"[object Date]"===Object.prototype.toString.call(e)},C={logger:null,debug:function(){"debug"===L.LOG_LEVEL&&C._log.apply(C._log,arguments)},info:function(){"info"!==L.LOG_LEVEL&&"debug"!==L.LOG_LEVEL||C._log.apply(C._log,arguments)},error:function(){C._log.apply(C._log,arguments)},_initLogger:function(){var t=e.console;t&&t.log&&(t.log.apply?C.logger=t.log:"object"==typeof t.log&&Function.prototype.bind?C.logger=Function.prototype.bind.call(t.log,t):"object"==typeof t.log&&Function.prototype.call&&(C.logger=function(){Function.prototype.call.call(t.log,t,Array.prototype.slice.call(arguments))}))},_log:function(){if(C.logger||C._initLogger(),C.logger)try{C.logger.apply(e.console,arguments)}catch(n){C._initLogger(),C.logger&&C.logger.apply(e.console,arguments)}var r=t.getElementById(L.LOG_OUTPUT_ELEMENT_ID);if(r){for(var o="",i=0;i<arguments.length;i++)o+=arguments[i]+" ";r.innerHTML+=o+"\n";var s=r.innerHTML.split("\n");s.length>100&&(r.innerHTML=s.slice(-100).join("\n"))}}},S={_getXHRObject:function(t){var n=!1;if(t){try{n=new e.XDomainRequest}catch(r){}if(n)return n}try{n=new e.XMLHttpRequest}catch(o){try{n=new e.ActiveXObject("Msxml2.XMLHTTP")}catch(i){try{n=new e.ActiveXObject("Microsoft.XMLHTTP")}catch(s){n=!1}}}return n},_send:function(t,n){t=t||{},t.timeout=t.timeout||3e4;var r=S._getXHRObject(t.crossDomain);if(r&&t.url){S.clear(t),t.xhr=r,e.XDomainRequest&&r instanceof e.XDomainRequest?(r.onload=function(){t.afterReceive&&t.afterReceive(r),t.success&&t.success(r.responseText)},r.onerror=r.ontimeout=function(){t.afterReceive&&t.afterReceive(r),t.error&&t.error(r.status)}):r.onreadystatechange=function(){4===r.readyState&&(S.clear(t),t.afterReceive&&t.afterReceive(r),200===r.status?t.success&&t.success(r.responseText):t.error&&t.error(r.status))},t.beforeOpen&&t.beforeOpen(r);var o={},i=null,s="GET";n?(i=g(t.data),s="POST"):o=t.data||{},r.open(s,y(t.url,u({},o,m())),!0),t.beforeSend&&t.beforeSend(r);var a=function(){S.clear(t);try{r.abort();
}catch(e){}t.error(304)};return n?r.setRequestHeader&&(r.setRequestHeader("Accept","application/json"),r.setRequestHeader("Content-type","application/x-www-form-urlencoded")):t.timeoutId=e.setTimeout(a,t.timeout+2e3),r.send(i),r}},_clear_xhr:function(e){e&&(e.onreadystatechange=null)},_clear_script:function(e){e&&(e.onerror=e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e))},_clear_timeout:function(e){e.timeoutId=I(e.timeoutId)},_clear_jsonp:function(t){var n=t.data.callback;n&&(e[n]=function(){e[n]=null})},clear:function(e){S._clear_timeout(e),S._clear_jsonp(e),S._clear_script(t.getElementById(e.scriptId)),S._clear_xhr(e.xhr)},jsonp:function(n){n.timeout=n.timeout||3e4,S.clear(n);var r=t.head||t.getElementsByTagName("head")[0],o=t.createElement("script"),i=_(),s=function(){S.clear(n);var e=_();n.error(e-i>n.timeout/2?304:403)},a=function(){S.clear(n),n.load()},l=function(){n.afterSuccess=!0,n.success.apply(null,arguments)};return o.onerror=s,o.onload=o.onreadystatechange=function(e){o.readyState&&!/loaded|complete/.test(o.readyState)||(n.afterSuccess?a():s())},n.beforeOpen&&n.beforeOpen({}),n.beforeSend&&n.beforeSend({}),n.timeoutId=e.setTimeout(s,n.timeout+2e3),n.scriptId=n.scriptId||_(),n.afterSuccess=null,n.data.callback=n.scriptId+"_onmessage_"+_(),e[n.data.callback]=l,o.setAttribute("src",y(n.url,u({},n.data,m()))),o.setAttribute("async","async"),o.setAttribute("id",n.scriptId),r.insertBefore(o,r.firstChild),n},load:function(e){return S._send(e,!1)},post:function(e){return S._send(e,!0)}},A=function(t){return t?e.encodeURIComponent(t):""},E=function(t){return t?e.decodeURIComponent(t):""};o.parseMessage=function(e,t){var n=e;b(e)&&(n=o.parseJSON(e));var r={id:n[t.jsonIdKey],channel:n[t.jsonChannelKey],text:b(n[t.jsonTextKey])?E(n[t.jsonTextKey]):n[t.jsonTextKey],tag:n[t.jsonTagKey],time:n[t.jsonTimeKey],eventid:n[t.jsonEventIdKey]||""};return r};var k=function(e){return e.backtrack?".b"+Number(e.backtrack):""},M=function(e,t){var n="";for(var r in e)e.hasOwnProperty&&!e.hasOwnProperty(r)||(n+="/"+r+(t?k(e[r]):""));return n},T=function(e,t,n,r){var o=e.wrapper.type===F.TYPE,i=e.useSSL,s=O(i,e.port),a=o?i?"wss://":"ws://":i?"https://":"http://";a+=e.host,a+=s?":"+s:"",a+=t;var l=M(e.channels,r);if(e.channelsByArgument){var c={};c[e.channelsArgument]=l.substring(1),n=u({},n,c)}else a+=l;return y(a,n)},P=function(e){var t=O(e.useSSL,e.port),n=e.useSSL?"https://":"http://";return n+=e.host,n+=t?":"+t:"",n+=e.urlPrefixPublisher,n+="?id="+M(e.channels,!1)};o.extract_xss_domain=function(e){if(e.match(/^(\d{1,3}\.){3}\d{1,3}$/))return e;var t=e.split("."),n=Math.max(t.length-1,e.match(/(\w{4,}\.\w{2}|\.\w{3,})$/)?2:3);return t.slice(-1*n).join(".")};var O=function(e,t){return t=Number(t||(e?443:80)),!e&&80===t||e&&443===t?"":t};o.isCrossDomainUrl=function(n){if(!n)return!1;var r=t.createElement("a");r.href=n;var o=O("https:"===e.location.protocol,e.location.port),i=O("https:"===r.protocol,r.port);return e.location.protocol!==r.protocol||e.location.hostname!==r.hostname||o!==i};var x=function(e,t){return function(){return e.apply(t,arguments)}},I=function(t){return t&&e.clearTimeout(t),null},R=function(e){C.info("["+this.type+"] message received",arguments);var t=o.parseMessage(e.data,this.pushstream);t.tag&&(this.pushstream._etag=t.tag),t.time&&(this.pushstream._lastModified=t.time),t.eventid&&(this.pushstream._lastEventId=t.eventid),this.pushstream._onmessage(t.text,t.id,t.channel,t.eventid,!0,t.time)},N=function(){this.pushstream._onopen(),C.info("["+this.type+"] connection opened")},D=function(t){C.info("["+this.type+"] error (disconnected by server):",t),this.pushstream.readyState===L.OPEN&&this.type===j.TYPE&&"error"===t.type&&this.connection.readyState===e.EventSource.CONNECTING||(this._closeCurrentConnection(),this.pushstream._onerror({type:t&&("load"===t.type||"close"===t.type&&1006===t.code)||this.pushstream.readyState===L.CONNECTING?"load":"timeout"}))},F=function(t){if(!e.WebSocket&&!e.MozWebSocket)throw"WebSocket not supported";this.type=F.TYPE,this.pushstream=t,this.connection=null};F.TYPE="WebSocket",F.prototype={connect:function(){this._closeCurrentConnection();var t=u({},this.pushstream.extraParams(),m(),f(this.pushstream)),n=T(this.pushstream,this.pushstream.urlPrefixWebsocket,t,!this.pushstream._useControlArguments());this.connection=e.WebSocket?new e.WebSocket(n):new e.MozWebSocket(n),this.connection.onerror=x(D,this),this.connection.onclose=x(D,this),this.connection.onopen=x(N,this),this.connection.onmessage=x(R,this),C.info("[WebSocket] connecting to:",n)},disconnect:function(){this.connection&&(C.debug("[WebSocket] closing connection to:",this.connection.url),this.connection.onclose=null,this._closeCurrentConnection(),this.pushstream._onclose())},_closeCurrentConnection:function(){if(this.connection){try{this.connection.close()}catch(e){}this.connection=null}},sendMessage:function(e){this.connection&&this.connection.send(e)}};var j=function(t){if(!e.EventSource)throw"EventSource not supported";this.type=j.TYPE,this.pushstream=t,this.connection=null};j.TYPE="EventSource",j.prototype={connect:function(){this._closeCurrentConnection();var t=u({},this.pushstream.extraParams(),m(),f(this.pushstream)),n=T(this.pushstream,this.pushstream.urlPrefixEventsource,t,!this.pushstream._useControlArguments());this.connection=new e.EventSource(n),this.connection.onerror=x(D,this),this.connection.onopen=x(N,this),this.connection.onmessage=x(R,this),C.info("[EventSource] connecting to:",n)},disconnect:function(){this.connection&&(C.debug("[EventSource] closing connection to:",this.connection.url),this.connection.onclose=null,this._closeCurrentConnection(),this.pushstream._onclose())},_closeCurrentConnection:function(){if(this.connection){try{this.connection.close()}catch(e){}this.connection=null}}};var $=function(e){this.type=$.TYPE,this.pushstream=e,this.connection=null,this.url=null,this.frameloadtimer=null,this.pingtimer=null,this.iframeId="PushStreamManager_"+e.id};$.TYPE="Stream",$.prototype={connect:function(){this._closeCurrentConnection();var e=o.extract_xss_domain(this.pushstream.host);try{t.domain=e}catch(n){C.error("[Stream] (warning) problem setting document.domain = "+e+" (OBS: IE8 does not support set IP numbers as domain)")}var r=u({},this.pushstream.extraParams(),m(),{streamid:this.pushstream.id},f(this.pushstream));this.url=T(this.pushstream,this.pushstream.urlPrefixStream,r,!this.pushstream._useControlArguments()),C.debug("[Stream] connecting to:",this.url),this.loadFrame(this.url)},disconnect:function(){this.connection&&(C.debug("[Stream] closing connection to:",this.url),this._closeCurrentConnection(),this.pushstream._onclose())},_clear_iframe:function(){var e=t.getElementById(this.iframeId);e&&(e.onload=null,e.src="about:blank",e.parentNode&&e.parentNode.removeChild(e))},_closeCurrentConnection:function(){this._clear_iframe(),this.connection&&(this.pingtimer=I(this.pingtimer),this.frameloadtimer=I(this.frameloadtimer),this.connection=null,this.transferDoc=null,"function"==typeof e.CollectGarbage&&e.CollectGarbage())},loadFrame:function(n){this._clear_iframe();var r=null;if("ActiveXObject"in e){var o=new e.ActiveXObject("htmlfile");o.open(),o.write("<html><script>document.domain='"+t.domain+"';</script>"),o.write("<body><iframe id='"+this.iframeId+"' src='"+n+"'></iframe></body></html>"),o.parentWindow.PushStream=L,o.close(),r=o.getElementById(this.iframeId),this.transferDoc=o}else r=t.createElement("IFRAME"),r.style.width="1px",r.style.height="1px",r.style.border="none",r.style.position="absolute",r.style.top="-10px",r.style.marginTop="-10px",r.style.zIndex="-20",r.PushStream=L,t.body.appendChild(r),r.setAttribute("src",n),r.setAttribute("id",this.iframeId);r.onload=x(D,this),this.connection=r,this.frameloadtimer=e.setTimeout(x(D,this),this.pushstream.timeout)},register:function(e){this.frameloadtimer=I(this.frameloadtimer),e.p=x(this.process,this),this.connection.onload=x(this._onframeloaded,this),this.pushstream._onopen(),this.setPingTimer(),C.info("[Stream] frame registered")},process:function(e,t,n,r,o,i){this.pingtimer=I(this.pingtimer),C.info("[Stream] message received",arguments),e!==-1&&(i&&(this.pushstream._etag=i),o&&(this.pushstream._lastModified=o),r&&(this.pushstream._lastEventId=r)),this.pushstream._onmessage(E(n),e,t,r||"",!0,o),this.setPingTimer()},_onframeloaded:function(){C.info("[Stream] frame loaded (disconnected by server)"),this.pushstream._onerror({type:"timeout"}),this.connection.onload=null,this.disconnect()},setPingTimer:function(){this.pingtimer&&I(this.pingtimer),this.pingtimer=e.setTimeout(x(D,this),this.pushstream.pingtimeout)}};var B=function(e){this.type=B.TYPE,this.pushstream=e,this.connection=null,this.opentimer=null,this.messagesQueue=[],this._linkedInternalListen=x(this._internalListen,this),this.xhrSettings={timeout:this.pushstream.timeout,data:{},url:null,success:x(this.onmessage,this),error:x(this.onerror,this),load:x(this.onload,this),beforeSend:x(this.beforeSend,this),afterReceive:x(this.afterReceive,this)}};B.TYPE="LongPolling",B.prototype={connect:function(){this.messagesQueue=[],this._closeCurrentConnection(),this.urlWithBacktrack=T(this.pushstream,this.pushstream.urlPrefixLongpolling,{},!0),this.urlWithoutBacktrack=T(this.pushstream,this.pushstream.urlPrefixLongpolling,{},!1),this.xhrSettings.url=this.urlWithBacktrack,this.useJSONP=this.pushstream._crossDomain||this.pushstream.useJSONP,this.xhrSettings.scriptId="PushStreamManager_"+this.pushstream.id,this.useJSONP&&(this.pushstream.messagesControlByArgument=!0),this._listen(),this.opentimer=e.setTimeout(x(N,this),150),C.info("[LongPolling] connecting to:",this.xhrSettings.url)},_listen:function(){this._internalListenTimeout&&I(this._internalListenTimeout),this._internalListenTimeout=e.setTimeout(this._linkedInternalListen,100)},_internalListen:function(){this.pushstream._keepConnected&&(this.xhrSettings.url=this.pushstream._useControlArguments()?this.urlWithoutBacktrack:this.urlWithBacktrack,this.xhrSettings.data=u({},this.pushstream.extraParams(),this.xhrSettings.data,f(this.pushstream)),this.useJSONP?this.connection=S.jsonp(this.xhrSettings):this.connection||(this.connection=S.load(this.xhrSettings)))},disconnect:function(){this.connection&&(C.debug("[LongPolling] closing connection to:",this.xhrSettings.url),this._closeCurrentConnection(),this.pushstream._onclose())},_closeCurrentConnection:function(){if(this.opentimer=I(this.opentimer),this.connection){try{this.connection.abort()}catch(e){try{S.clear(this.connection)}catch(t){}}this.connection=null,this.xhrSettings.url=null}},beforeSend:function(e){this.pushstream.messagesControlByArgument||(e.setRequestHeader("If-None-Match",this.pushstream._etag),e.setRequestHeader("If-Modified-Since",this.pushstream._lastModified))},afterReceive:function(e){this.pushstream.messagesControlByArgument||(this.pushstream._etag=e.getResponseHeader("Etag"),this.pushstream._lastModified=e.getResponseHeader("Last-Modified")),this.connection=null},onerror:function(e){this._closeCurrentConnection(),this.pushstream._keepConnected&&(304===e?this._listen():(C.info("[LongPolling] error (disconnected by server):",e),this.pushstream._onerror({type:403===e||this.pushstream.readyState===L.CONNECTING?"load":"timeout"})))},onload:function(){this._listen()},onmessage:function(e){this._internalListenTimeout&&I(this._internalListenTimeout),C.info("[LongPolling] message received",e);for(var t=null,n=v(e)?e:e.replace(/\}\{/g,"}\r\n{").split("\r\n"),r=0;r<n.length;r++)n[r]&&(t=o.parseMessage(n[r],this.pushstream),this.messagesQueue.push(t),this.pushstream.messagesControlByArgument&&t.time&&(this.pushstream._etag=t.tag,this.pushstream._lastModified=t.time));for(this._listen();this.messagesQueue.length>0;){var i=this.messagesQueue.shift();this.pushstream._onmessage(i.text,i.id,i.channel,i.eventid,0===this.messagesQueue.length,i.time)}}};var U=[],L=function(t){t=t||{},this.id=U.push(this)-1,this.useSSL=t.useSSL||!1,this.host=t.host||e.location.hostname,this.port=Number(t.port||(this.useSSL?443:80)),this.timeout=t.timeout||3e4,this.pingtimeout=t.pingtimeout||3e4,this.reconnectOnTimeoutInterval=t.reconnectOnTimeoutInterval||3e3,this.reconnectOnChannelUnavailableInterval=t.reconnectOnChannelUnavailableInterval||6e4,this.autoReconnect=t.autoReconnect!==!1,this.lastEventId=t.lastEventId||null,this.messagesPublishedAfter=t.messagesPublishedAfter,this.messagesControlByArgument=t.messagesControlByArgument||!1,this.tagArgument=t.tagArgument||"tag",this.timeArgument=t.timeArgument||"time",this.eventIdArgument=t.eventIdArgument||"eventid",this.useJSONP=t.useJSONP||!1,this._reconnecttimer=null,this._etag=0,this._lastModified=null,this._lastEventId=null,this.urlPrefixPublisher=t.urlPrefixPublisher||"/pub",this.urlPrefixStream=t.urlPrefixStream||"/sub",this.urlPrefixEventsource=t.urlPrefixEventsource||"/ev",this.urlPrefixLongpolling=t.urlPrefixLongpolling||"/lp",this.urlPrefixWebsocket=t.urlPrefixWebsocket||"/ws",this.jsonIdKey=t.jsonIdKey||"id",this.jsonChannelKey=t.jsonChannelKey||"channel",this.jsonTextKey=t.jsonTextKey||"text",this.jsonTagKey=t.jsonTagKey||"tag",this.jsonTimeKey=t.jsonTimeKey||"time",this.jsonEventIdKey=t.jsonEventIdKey||"eventid",this.modes=(t.modes||"eventsource|websocket|stream|longpolling").split("|"),this.wrappers=[],this.wrapper=null,this.onchanneldeleted=t.onchanneldeleted||null,this.onmessage=t.onmessage||null,this.onerror=t.onerror||null,this.onstatuschange=t.onstatuschange||null,this.extraParams=t.extraParams||function(){return{}},this.channels={},this.channelsCount=0,this.channelsByArgument=t.channelsByArgument||!1,this.channelsArgument=t.channelsArgument||"channels",this._crossDomain=o.isCrossDomainUrl(P(this));for(var n=0;n<this.modes.length;n++)try{var r=null;switch(this.modes[n]){case"websocket":r=new F(this);break;case"eventsource":r=new j(this);break;case"longpolling":r=new B(this);break;case"stream":r=new $(this)}this.wrappers[this.wrappers.length]=r}catch(i){C.info(i)}this.readyState=0};L.LOG_LEVEL="error",L.LOG_OUTPUT_ELEMENT_ID="Log4jsLogOutput",L.CLOSED=0,L.CONNECTING=1,L.OPEN=2,L.prototype={addChannel:function(e,t){if(A(e)!==e)throw"Invalid channel name! Channel has to be a set of [a-zA-Z0-9]";if(C.debug("entering addChannel"),"undefined"!=typeof this.channels[e])throw"Cannot add channel "+e+": already subscribed";t=t||{},C.info("adding channel",e,t),this.channels[e]=t,this.channelsCount++,this.readyState!==L.CLOSED&&this.connect(),C.debug("leaving addChannel")},removeChannel:function(e){this.channels[e]&&(C.info("removing channel",e),delete this.channels[e],this.channelsCount--)},removeAllChannels:function(){C.info("removing all channels"),this.channels={},this.channelsCount=0},_setState:function(e){this.readyState!==e&&(C.info("status changed",e),this.readyState=e,this.onstatuschange&&this.onstatuschange(this.readyState))},connect:function(){if(C.debug("entering connect"),!this.host)throw"PushStream host not specified";if(isNaN(this.port))throw"PushStream port not specified";if(!this.channelsCount)throw"No channels specified";if(0===this.wrappers.length)throw"No available support for this browser";this._keepConnected=!0,this._lastUsedMode=0,this._connect(),C.debug("leaving connect")},disconnect:function(){C.debug("entering disconnect"),this._keepConnected=!1,this._disconnect(),this._setState(L.CLOSED),C.info("disconnected"),C.debug("leaving disconnect")},_useControlArguments:function(){return this.messagesControlByArgument&&(null!==this._lastModified||null!==this._lastEventId)},_connect:function(){if(null===this._lastEventId&&(this._lastEventId=this.lastEventId),null===this._lastModified){var e=this.messagesPublishedAfter;if(!w(e)){var t=Number(this.messagesPublishedAfter);t>0?(e=new Date,e.setTime(e.getTime()-1e3*t)):t<0&&(e=new Date(0))}w(e)&&(this._lastModified=o.dateToUTCString(e))}this._disconnect(),this._setState(L.CONNECTING),this.wrapper=this.wrappers[this._lastUsedMode++%this.wrappers.length];try{this.wrapper.connect()}catch(n){this.wrapper&&this.wrapper.disconnect()}},_disconnect:function(){this._reconnecttimer=I(this._reconnecttimer),this.wrapper&&this.wrapper.disconnect()},_onopen:function(){this._reconnecttimer=I(this._reconnecttimer),this._setState(L.OPEN),this._lastUsedMode>0&&this._lastUsedMode--},_onclose:function(){this._reconnecttimer=I(this._reconnecttimer),this._setState(L.CLOSED),this._reconnect(this.reconnectOnTimeoutInterval)},_onmessage:function(e,t,n,r,o,i){C.debug("message",e,t,n,r,o,i),t===-2?this.onchanneldeleted&&this.onchanneldeleted(n):t>0&&this.onmessage&&this.onmessage(e,t,n,r,o,i)},_onerror:function(e){this._setState(L.CLOSED),this._reconnect("timeout"===e.type?this.reconnectOnTimeoutInterval:this.reconnectOnChannelUnavailableInterval),this.onerror&&this.onerror(e)},_reconnect:function(t){this.autoReconnect&&this._keepConnected&&!this._reconnecttimer&&this.readyState!==L.CONNECTING&&(C.info("trying to reconnect in",t),this._reconnecttimer=e.setTimeout(x(this._connect,this),t))},sendMessage:function(e,t,n){e=A(e),this.wrapper.type===F.TYPE?(this.wrapper.sendMessage(e),t&&t()):S.post({url:P(this),data:e,success:t,error:n,crossDomain:this._crossDomain})}},L.sendMessage=function(e,t,n,r){S.post({url:e,data:A(t),success:n,error:r})},L.register=function(e){var t=e.window.location.href.match(/streamid=([0-9]*)&?/);t[1]&&U[t[1]]&&U[t[1]].wrapper.register(e)},L.unload=function(){for(var e=0;e<U.length;e++)try{U[e].disconnect()}catch(t){}},n.PushStream=L,n.PushStreamManager=U,e.attachEvent&&e.attachEvent("onunload",L.unload),e.addEventListener&&e.addEventListener.call(e,"unload",L.unload,!1)}}(e,t)}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;!function(e,t){t(e.moment)}(e.Mango,function(e){function t(e,t){var n=e.split("_");return t%10===1&&t%100!==11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,r){var o={mm:n?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"};return"m"===r?n?"минута":"минуту":e+" "+t(o[r],+e)}var r=[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i],o=e.defineLocale("ru",{months:{format:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),standalone:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_")},monthsShort:{format:"янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),standalone:"янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_")},weekdays:{standalone:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),format:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_"),isFormat:/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?\] ?dddd/},weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:r,longMonthsParse:r,shortMonthsParse:r,monthsRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsShortRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsStrictRegex:/^(январ[яь]|феврал[яь]|марта?|апрел[яь]|ма[яй]|июн[яь]|июл[яь]|августа?|сентябр[яь]|октябр[яь]|ноябр[яь]|декабр[яь])/i,monthsShortStrictRegex:/^(янв\.|февр?\.|мар[т.]|апр\.|ма[яй]|июн[ья.]|июл[ья.]|авг\.|сент?\.|окт\.|нояб?\.|дек\.)/i,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"},calendar:{sameDay:"[Сегодня]",nextDay:"[Завтра в] LT",lastDay:"[Вчера в] LT",nextWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT";switch(this.day()){case 0:return"[В следующее] dddd [в] LT";case 1:case 2:case 4:return"[В следующий] dddd [в] LT";case 3:case 5:case 6:return"[В следующую] dddd [в] LT"}},lastWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT";switch(this.day()){case 0:return"[В прошлое] dddd [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:n,mm:n,h:"час",hh:n,d:"день",dd:n,M:"месяц",MM:n,y:"год",yy:n},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(e){return/^(дня|вечера)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночи":e<12?"утра":e<17?"дня":"вечера"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-й";case"D":return e+"-го";case"w":case"W":return e+"-я";default:return e}},week:{dow:1,doy:7}});return o})}(window,document,window.Mango=window.Mango||{}),function(window,document,Mango){"use strict";var $=Mango.$,_=Mango._,Promise=Mango.Promise;!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Uppy=e()}(function(){function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,function(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}function remove(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}function randomBlock(){return _$pad_16((_$getRandomValue_15()*discreteValues<<0).toString(base),blockSize)}function safeCounter(){return c=c<discreteValues?c:0,++c-1}function cuid(){return"c"+(new Date).getTime().toString(base)+_$pad_16(safeCounter().toString(base),blockSize)+_$fingerprintBrowser_14()+(randomBlock()+randomBlock())}function WildcardMatcher(e,t){this.text=e=e||"",this.hasWild=~e.indexOf("*"),this.separator=t,this.parts=e.split(t)}function __pad_166(e){return 2!==e.length?0+e:e}function createEventTracker(e){var t=[];return{on:function(n,r){return t.push([n,r]),e.on(n,r)},remove:function(){t.forEach(function(t){var n=t[0],r=t[1];e.off(n,r)})}}}function assertServerError(e){if(e&&e.error){var t=new Error(e.message);throw ___extends_89(t,e.error),t}return e}function buildResponseError(e,t){return t||(t=new Error("Upload error")),"string"==typeof t&&(t=new Error(t)),t instanceof Error||(t=___extends_184(new Error("Upload error"),{data:t})),t.request=e,t}function isXml(e){var t=e.headers?e.headers["content-type"]:e.getResponseHeader("Content-Type");return"string"==typeof t&&"application/xml"===t.toLowerCase()}function getXmlValue(e,t){var n=e.indexOf("<"+t+">"),r=e.indexOf("</"+t+">",n);return-1!==n&&-1!==r?e.slice(n+t.length+2,r):""}function __assertServerError_90(e){if(e&&e.error){var t=new Error(e.message);throw ___extends_90(t,e.error),t}return e}function processEntry(e,t){var n=[];if(e.isFile)e.file(function(n){n.fullPath=e.fullPath,t(null,n)},function(e){t(e)});else if(e.isDirectory){var r=e.createReader();!function o(){r.readEntries(function(e){e.length>0?(n=n.concat(toArray(e)),o()):_$runParallel_56(n.map(function(e){return function(t){processEntry(e,t)}}),t)})}()}}function toArray(e){return Array.prototype.slice.call(e||[],0)}function FileItemProgressWrapper(e){if(!e.hideRetryButton||!e.error)return e.isUploaded||e.bundled||e.hidePauseResumeCancelButtons&&!e.error?__h_103("div",{"class":"uppy-DashboardItem-progressIndicator"},__h_103(_$FileItemProgress_104,{progress:e.file.progress.percentage,fileID:e.file.id,hidePauseResumeCancelButtons:e.hidePauseResumeCancelButtons,bundled:e.bundled})):__h_103("button",{"class":"uppy-DashboardItem-progressIndicator",type:"button","aria-label":e.progressIndicatorTitle,title:e.progressIndicatorTitle,onclick:e.onPauseResumeCancelRetry},e.error?e.hideRetryButton?null:iconRetry():__h_103(_$FileItemProgress_104,{progress:e.file.progress.percentage,fileID:e.file.id,hidePauseResumeCancelButtons:e.hidePauseResumeCancelButtons}))}function UploadStatus(e){switch(function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e)return uploadStates.STATE_ERROR;if(t)return uploadStates.STATE_COMPLETE;if(n)return uploadStates.STATE_PAUSED;for(var o=uploadStates.STATE_WAITING,i=Object.keys(r),s=0;s<i.length;s++){var a=r[i[s]].progress;if(a.uploadStarted&&!a.uploadComplete)return uploadStates.STATE_UPLOADING;a.preprocess&&o!==uploadStates.STATE_UPLOADING&&(o=uploadStates.STATE_PREPROCESSING),a.postprocess&&o!==uploadStates.STATE_UPLOADING&&o!==uploadStates.STATE_PREPROCESSING&&(o=uploadStates.STATE_POSTPROCESSING)}return o}(e.isAllErrored,e.isAllComplete,e.isAllPaused,e.files)){case"uploading":return e.i18n("uploadingXFiles",{smart_count:e.inProgressNotPausedFiles.length});case"preprocessing":case"postprocessing":return e.i18n("processingXFiles",{smart_count:e.processingFiles.length});case"paused":return e.i18n("uploadPaused");case"waiting":return e.i18n("xFilesSelected",{smart_count:e.newFiles.length});case"complete":return e.i18n("uploadComplete")}}function createPromise(){var e={};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ___classCallCheck_136(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function getFormData(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{trim:!1};if(!e)throw new Error("A form is required by getFormData, was given form="+e);for(var n={},r=void 0,o=[],i={},s=0,a=e.elements.length;s<a;s++){var u=e.elements[s];IGNORED_ELEMENT_TYPES[u.type]||u.disabled||(r=u.name||u.id)&&!i[r]&&(o.push(r),i[r]=!0)}for(var l=0,c=o.length;l<c;l++){var p=getFieldData(e,r=o[l],t);null!=p&&(n[r]=p)}return n}function getFieldData(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{trim:!1};if(!e)throw new Error("A form is required by getFieldData, was given form="+e);if(!t&&"[object String]"!==toString.call(t))throw new Error("A field name is required by getFieldData, was given fieldName="+t);var r=e.elements[t];if(!r||r.disabled)return null;if(!NODE_LIST_CLASSES[toString.call(r)])return getFormElementValue(r,n.trim);for(var o=[],i=!0,s=0,a=r.length;s<a;s++)if(!r[s].disabled){i&&"radio"!==r[s].type&&(i=!1);var u=getFormElementValue(r[s],n.trim);null!=u&&(o=o.concat(u))}return i&&1===o.length?o[0]:o.length>0?o:null}function getFormElementValue(e,t){var n=null,r=e.type;if("select-one"===r)return e.options.length&&(n=e.options[e.selectedIndex].value),n;if("select-multiple"===r){n=[];for(var o=0,i=e.options.length;o<i;o++)e.options[o].selected&&n.push(e.options[o].value);return 0===n.length&&(n=null),n}return"file"===r&&"files"in e?(e.multiple?0===(n=slice.call(e.files)).length&&(n=null):n=e.files[0],n):(CHECKED_INPUT_TYPES[r]?e.checked&&(n=e.value):n=t?e.value.replace(TRIM_RE,""):e.value,n)}function connect(e){var t=indexedDB.open(e,DB_VERSION);return new Promise(function(e,n){t.onupgradeneeded=function(t){var n=t.target.result,r=t.currentTarget.transaction;if(t.oldVersion<2&&n.createObjectStore(STORE_NAME,{keyPath:"id"}).createIndex("store","store",{unique:!1}),t.oldVersion<3){var o=r.objectStore(STORE_NAME);o.createIndex("expires","expires",{unique:!1}),o.openCursor().onsuccess=function(e){var t=e.target.result;if(t){var n=t.value;n.expires=Date.now()+DEFAULT_EXPIRY,t.update(n)}}}r.oncomplete=function(){e(n)}},t.onsuccess=function(t){e(t.target.result)},t.onerror=n})}function waitForRequest(e){return new Promise(function(t,n){e.onsuccess=function(e){t(e.target.result)},e.onerror=n})}function maybeParse(e){try{return JSON.parse(e)}catch(e){return null}}function Emitter(e){if(e)return function(e){for(var t in Emitter.prototype)e[t]=Emitter.prototype[t];return e}(e)}function Backoff(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}function __noop_1(){}function mapArrayBufferViews(e){return e.map(function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var n=new Uint8Array(e.byteLength);n.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer}return t}return e})}function BlobBuilderConstructor(e,t){t=t||{};var n=new BlobBuilder;return mapArrayBufferViews(e).forEach(function(e){n.append(e)}),t.type?n.getBlob(t.type):n.getBlob()}function BlobConstructor(e,t){return new Blob(mapArrayBufferViews(e),t||{})}function ucs2decode(e){for(var t,n,r=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function checkScalarValue(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function createByte(e,t){return stringFromCharCode(e>>t&63|128)}function encodeCodePoint(e,t){if(0==(4294967168&e))return stringFromCharCode(e);var n="";return 0==(4294965248&e)?n=stringFromCharCode(e>>6&31|192):0==(4294901760&e)?(checkScalarValue(e,t)||(e=65533),n=stringFromCharCode(e>>12&15|224),n+=createByte(e,6)):0==(4292870144&e)&&(n=stringFromCharCode(e>>18&7|240),n+=createByte(e,12),n+=createByte(e,6)),n+stringFromCharCode(63&e|128)}function readContinuationByte(){if(byteIndex>=byteCount)throw Error("Invalid byte index");var e=255&byteArray[byteIndex];if(byteIndex++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function decodeSymbol(e){var t,n;if(byteIndex>byteCount)throw Error("Invalid byte index");if(byteIndex==byteCount)return!1;if(t=255&byteArray[byteIndex],byteIndex++,0==(128&t))return t;if(192==(224&t)){if((n=(31&t)<<6|readContinuationByte())>=128)return n;throw Error("Invalid continuation byte")}if(224==(240&t)){if((n=(15&t)<<12|readContinuationByte()<<6|readContinuationByte())>=2048)return checkScalarValue(n,e)?n:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(n=(7&t)<<18|readContinuationByte()<<12|readContinuationByte()<<6|readContinuationByte())>=65536&&n<=1114111)return n;throw Error("Invalid UTF-8 detected")}function getLens(e){
var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function encodeChunk(e,t,n){for(var r,o,i=[],s=t;s<n;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(lookup[(o=r)>>18&63]+lookup[o>>12&63]+lookup[o>>6&63]+lookup[63&o]);return i.join("")}function createBuffer(e){if(e>K_MAX_LENGTH)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=Buffer.prototype,t}function Buffer(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(e)}return from(e,t,n)}function from(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!Buffer.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|byteLength(e,t),r=createBuffer(n),o=r.write(e,t);return o!==n&&(r=r.slice(0,o)),r}(e,t);if(ArrayBuffer.isView(e))return fromArrayLike(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(isInstance(e,ArrayBuffer)||e&&isInstance(e.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return(r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n)).__proto__=Buffer.prototype,r}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return Buffer.from(r,t,n);var o=function(e){if(Buffer.isBuffer(e)){var t=0|checked(e.length),n=createBuffer(t);return 0===n.length?n:(e.copy(n,0,0,t),n)}return void 0!==e.length?"number"!=typeof e.length||numberIsNaN(e.length)?createBuffer(0):fromArrayLike(e):"Buffer"===e.type&&Array.isArray(e.data)?fromArrayLike(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return Buffer.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function allocUnsafe(e){return assertSize(e),createBuffer(e<0?0:0|checked(e))}function fromArrayLike(e){for(var t=e.length<0?0:0|checked(e.length),n=createBuffer(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function checked(e){if(e>=K_MAX_LENGTH)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+K_MAX_LENGTH.toString(16)+" bytes");return 0|e}function byteLength(e,t){if(Buffer.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||isInstance(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return base64ToBytes(e).length;default:if(o)return r?-1:utf8ToBytes(e).length;t=(""+t).toLowerCase(),o=!0}}function swap(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function bidirectionalIndexOf(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),numberIsNaN(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=Buffer.from(t,r)),Buffer.isBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,n,r,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):arrayIndexOf(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,n,r,o){function i(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var s,a=1,u=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,u/=2,l/=2,n/=2}if(o){var c=-1;for(s=n;s<u;s++)if(i(e,s)===i(t,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===l)return c*a}else-1!==c&&(s-=s-c),c=-1}else for(n+l>u&&(n=u-l),s=n;s>=0;s--){for(var p=!0,h=0;h<l;h++)if(i(e,s+h)!==i(t,h)){p=!1;break}if(p)return s}return-1}function hexWrite(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;r>i/2&&(r=i/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(numberIsNaN(a))return s;e[n+s]=a}return s}function utf8Write(e,t,n,r){return blitBuffer(utf8ToBytes(t,e.length-n),e,n,r)}function asciiWrite(e,t,n,r){return blitBuffer(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function latin1Write(e,t,n,r){return asciiWrite(e,t,n,r)}function base64Write(e,t,n,r){return blitBuffer(base64ToBytes(t),e,n,r)}function ucs2Write(e,t,n,r){return blitBuffer(function(e,t){for(var n,r,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function base64Slice(e,t,n){return 0===t&&n===e.length?_$base64Js_5.fromByteArray(e):_$base64Js_5.fromByteArray(e.slice(t,n))}function utf8Slice(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,s,a,u,l=e[o],c=null,p=l>239?4:l>223?3:l>191?2:1;if(o+p<=n)switch(p){case 1:l<128&&(c=l);break;case 2:128==(192&(i=e[o+1]))&&(u=(31&l)<<6|63&i)>127&&(c=u);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&(u=(15&l)<<12|(63&i)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(u=(15&l)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,p=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),o+=p}return function(e){var t=e.length;if(t<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=MAX_ARGUMENTS_LENGTH));return n}(r)}function asciiSlice(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function latin1Slice(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function hexSlice(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=toHex(e[i]);return o}function utf16leSlice(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function checkOffset(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,n,r,o,i){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function checkIEEE754(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function writeFloat(e,t,n,r,o){return t=+t,n>>>=0,o||checkIEEE754(e,0,n,4),_$ieee754_40.write(e,t,n,r,23,4),n+4}function writeDouble(e,t,n,r,o){return t=+t,n>>>=0,o||checkIEEE754(e,0,n,8),_$ieee754_40.write(e,t,n,r,52,8),n+8}function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function base64ToBytes(e){return _$base64Js_5.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(INVALID_BASE64_RE,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function blitBuffer(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function isInstance(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function numberIsNaN(e){return e!=e}function map(e,t,n){for(var r=new Array(e.length),o=_$after_1(e.length,n),i=function(e,n,o){t(n,function(t,n){r[e]=n,o(t,r)})},s=0;s<e.length;s++)i(s,e[s],o)}function Transport(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}function plural(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}function createDebug(e){function t(){if(t.enabled){var e=t,r=+new Date,o=r-(n||r);e.diff=o,e.prev=n,e.curr=r,n=r;for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];i[0]=_$debug_29.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var a=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(t,n){if("%%"===t)return t;a++;var r=_$debug_29.formatters[n];if("function"==typeof r){var o=i[a];t=r.call(e,o),i.splice(a,1),a--}return t}),_$debug_29.formatArgs.call(e,i),(t.log||_$debug_29.log||console.log.bind(console)).apply(e,i)}}var n;return t.namespace=e,t.enabled=_$debug_29.enabled(e),t.useColors=_$debug_29.useColors(),t.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return _$debug_29.colors[Math.abs(n)%_$debug_29.colors.length]}(e),t.destroy=destroy,"function"==typeof _$debug_29.init&&_$debug_29.init(t),_$debug_29.instances.push(t),t}function destroy(){var e=_$debug_29.instances.indexOf(this);return-1!==e&&(_$debug_29.instances.splice(e,1),!0)}function encode(e){var t="";do t=alphabet[e%length]+t,e=Math.floor(e/length);while(e>0);return t}function yeast(){var e=encode(+new Date);return e!==prev?(seed=0,prev=e):e+"."+encode(seed++)}function Polling(e){var t=e&&e.forceBase64;hasXHR2&&!t||(this.supportsBinary=!1),_$transport_20.call(this,e)}function __plural_62(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}function __createDebug_64(e){function t(){if(t.enabled){var e=t,r=+new Date,o=r-(n||r);e.diff=o,e.prev=n,e.curr=r,n=r;for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];i[0]=_$debug_64.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var a=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(t,n){if("%%"===t)return t;a++;var r=_$debug_64.formatters[n];if("function"==typeof r){var o=i[a];t=r.call(e,o),i.splice(a,1),a--}return t}),_$debug_64.formatArgs.call(e,i),(t.log||_$debug_64.log||console.log.bind(console)).apply(e,i)}}var n;return t.namespace=e,t.enabled=_$debug_64.enabled(e),t.useColors=_$debug_64.useColors(),t.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return _$debug_64.colors[Math.abs(n)%_$debug_64.colors.length]}(e),t.destroy=__destroy_64,"function"==typeof _$debug_64.init&&_$debug_64.init(t),_$debug_64.instances.push(t),t}function __destroy_64(){var e=_$debug_64.instances.indexOf(this);return-1!==e&&(_$debug_64.instances.splice(e,1),!0)}function __plural_68(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}function __createDebug_70(e){function t(){if(t.enabled){var e=t,r=+new Date,o=r-(n||r);e.diff=o,e.prev=n,e.curr=r,n=r;for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];i[0]=_$debug_70.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var a=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(t,n){if("%%"===t)return t;a++;var r=_$debug_70.formatters[n];if("function"==typeof r){var o=i[a];t=r.call(e,o),i.splice(a,1),a--}return t}),_$debug_70.formatArgs.call(e,i),(t.log||_$debug_70.log||console.log.bind(console)).apply(e,i)}}var n;return t.namespace=e,t.enabled=_$debug_70.enabled(e),t.useColors=_$debug_70.useColors(),t.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return _$debug_70.colors[Math.abs(n)%_$debug_70.colors.length]}(e),t.destroy=__destroy_70,"function"==typeof _$debug_70.init&&_$debug_70.init(t),_$debug_70.instances.push(t),t}function __destroy_70(){var e=_$debug_70.instances.indexOf(this);return-1!==e&&(_$debug_70.instances.splice(e,1),!0)}function Encoder(){}function encodeAsString(e){var t=""+e.type;if(_$socketIoParser_66.BINARY_EVENT!==e.type&&_$socketIoParser_66.BINARY_ACK!==e.type||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data){var n=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===n)return ERROR_PACKET;t+=n}return __debug_66("encoded %j as %s",e,t),t}function Decoder(){this.reconstructor=null}function BinaryReconstructor(e){this.reconPack=e,this.buffers=[]}function error(e){return{type:_$socketIoParser_66.ERROR,data:"parser error: "+e}}function __Socket_60(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}function Manager(e,t){if(!(this instanceof Manager))return new Manager(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new _$backo2_3({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||_$socketIoParser_66;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}function __lookup_57(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r=_$url_61(e),o=r.source,i=r.id,s=r.path,a=cache[i]&&s in cache[i].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||a?(__debug_57("ignoring socket cache for %s",o),n=_$manager_58(o,t)):(cache[i]||(__debug_57("new io instance for %s",o),cache[i]=_$manager_58(o,t)),n=cache[i]),r.query&&!t.query&&(t.query=r.query),n.socket(r.path,t)}function isStatus(e,t){return statusOrder.indexOf(e)>=statusOrder.indexOf(t)}function validateParams(e){if(!e)throw new Error("Transloadit: The `params` option is required.");if("string"==typeof e)try{e=JSON.parse(e)}catch(e){throw e.message="Transloadit: The `params` option is a malformed JSON string: "+e.message,e}if(!e.auth||!e.auth.key)throw new Error("Transloadit: The `params.auth.key` option is required. You can find your Transloadit API key at https://transloadit.com/account/api-settings.")}function decode(e){return decodeURIComponent(e.replace(/\+/g," "))}function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function ___classCallCheck_76(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function __len_76(e){return void 0===e?0:void 0!==e.size?e.size:e.length}function ___interopRequireDefault_82(e){return e&&e.__esModule?e:{"default":e}}function inStatusCategory(e,t){return e>=t&&e<t+100}function __createEventTracker_150(e){var t=[];return{on:function(n,r){return t.push([n,r]),e.on(n,r)},remove:function(){t.forEach(function(t){var n=t[0],r=t[1];e.off(n,r)})}}}function defaultGetAssemblyOptions(e,t){return{params:t.params,signature:t.signature,fields:t.fields}}function isModeAvailable(e,t){return-1!==e.indexOf(t)}var define,module,exports,_$browser_51={},cachedSetTimeout,cachedClearTimeout,process=_$browser_51={};!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};var _$es6Promise_34={exports:{}};(function(e,t){!function(e,t){"object"==typeof _$es6Promise_34.exports?_$es6Promise_34.exports=t():"function"==typeof define&&define.amd?define(t):e.ES6Promise=t()}(this,function(){function n(e){return"function"==typeof e}function r(){var e=setTimeout;return function(){return e(o,1)}}function o(){for(var e=0;e<S;e+=2)(0,I[e])(I[e+1]),I[e]=void 0,I[e+1]=void 0;S=0}function i(e,t){var n=this,r=new this.constructor(a);void 0===r[N]&&g(r);var o=n._state;if(o){var i=arguments[o-1];k(function(){return m(o,r,i,n._result)})}else f(n,r,e,t);return r}function s(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(a);return c(t,e),t}function a(){}function u(e){try{return e.then}catch(e){return $.error=e,$}}function l(e,t,r){t.constructor===e.constructor&&r===i&&t.constructor.resolve===s?function(e,t){t._state===F?h(e,t._result):t._state===j?d(e,t._result):f(t,void 0,function(t){return c(e,t)},function(t){return d(e,t)})}(e,t):r===$?(d(e,$.error),$.error=null):void 0===r?h(e,t):n(r)?function(e,t,n){k(function(e){var r=!1,o=function(e,n,o,i){try{e.call(n,function(e){r||(r=!0,t!==e?c(s,e):h(s,e))},function(e){r||(r=!0,d(s,e))})}catch(s){return s}}(n,t,0,0,e._label);!r&&o&&(r=!0,d(e,o))},e)}(e,t,r):h(e,t)}function c(e,t){var n,r;e===t?d(e,new TypeError("You cannot resolve a promise with itself")):(r=typeof(n=t),null===n||"object"!==r&&"function"!==r?h(e,t):l(e,t,u(t)))}function p(e){e._onerror&&e._onerror(e._result),_(e)}function h(e,t){e._state===D&&(e._result=t,e._state=F,0!==e._subscribers.length&&k(_,e))}function d(e,t){e._state===D&&(e._state=j,e._result=t,k(p,e))}function f(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+F]=n,o[i+j]=r,0===i&&e._state&&k(_,e)}function _(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,s=0;s<t.length;s+=3)r=t[s],o=t[s+n],r?m(n,r,o,i):o(i);e._subscribers.length=0}}function m(e,t,r,o){var i=n(r),s=void 0,a=void 0,u=void 0,l=void 0;if(i){if((s=function(e,t){try{return e(t)}catch(e){return $.error=e,$}}(r,o))===$?(l=!0,a=s.error,s.error=null):u=!0,t===s)return void d(t,new TypeError("A promises callback cannot return that same promise."))}else s=o,u=!0;t._state!==D||(i&&u?c(t,s):l?d(t,a):e===F?h(t,s):e===j&&d(t,s))}function g(e){e[N]=B++,e._state=void 0,e._result=void 0,e._subscribers=[]}var y,v,b,w,C=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},S=0,A=void 0,E=void 0,k=function(e,t){I[S]=e,I[S+1]=t,2===(S+=2)&&(E?E(o):R())},M="undefined"!=typeof window?window:void 0,T=M||{},P=T.MutationObserver||T.WebKitMutationObserver,O="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),x="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,I=new Array(1e3),R=void 0;O?R=function(){return e.nextTick(o)}:P?(v=0,b=new P(o),w=document.createTextNode(""),b.observe(w,{characterData:!0}),R=function(){w.data=v=++v%2}):x?((y=new MessageChannel).port1.onmessage=o,R=function(){return y.port2.postMessage(0)}):R=void 0===M&&"function"==typeof require?function(){try{var e=Function("return this")().require("vertx");return void 0!==(A=e.runOnLoop||e.runOnContext)?function(){A(o)}:r()}catch(e){return r()}}():r();var N=Math.random().toString(36).substring(2),D=void 0,F=1,j=2,$={error:null},B=0,U=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(a),this.promise[N]||g(this.promise),C(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?h(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&h(this.promise,this._result))):d(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===D&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===s){var o=u(e);if(o===i&&e._state!==D)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===L){var c=new n(a);l(c,e,o),this._willSettleAt(c,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===D&&(this._remaining--,e===j?d(r,n):this._result[t]=n),0===this._remaining&&h(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;f(e,void 0,function(e){return n._settledAt(F,t,e)},function(e){return n._settledAt(j,t,e)})},e}(),L=function(){function e(t){this[N]=B++,this._result=this._state=void 0,this._subscribers=[],a!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){try{t(function(t){c(e,t)},function(t){d(e,t)})}catch(t){d(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype["catch"]=function(e){return this.then(null,e)},e.prototype["finally"]=function(e){var t=this.constructor;return n(e)?this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})}):this.then(e,e)},e}();return L.prototype.then=i,L.all=function(e){return new U(this,e).promise},L.race=function(e){var t=this;return new t(C(e)?function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})},L.resolve=s,L.reject=function(e){var t=new this(a);return d(t,e),t},L._setScheduler=function(e){E=e},L._setAsap=function(e){k=e},L._asap=k,L.polyfill=function(){var e=void 0;if(void 0!==t)e=t;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(e){}if("[object Promise]"===r&&!n.cast)return}e.Promise=L},L.Promise=L,L})}).call(this,_$browser_51,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),_$es6Promise_34=_$es6Promise_34.exports;var _$auto_33=_$es6Promise_34.polyfill(),_$fetchUmd_85={exports:{}},__global_85,factory;__global_85=this,factory=function(e){function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return f.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function s(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function a(e){var t=new FileReader,n=s(t);return t.readAsArrayBuffer(e),n}function u(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:f.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:f.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:f.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():f.arrayBuffer&&f.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=u(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||m(e))?this._bodyArrayBuffer=u(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var e,t,n,r=i(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=s(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(e,t){var n,r,i=(t=t||{}).body;if(e instanceof c){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),g.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}}),t}function h(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new o(t.headers),this.url=t.url||"",this._initBody(e)}function d(t,n){return new Promise(function(r,i){function s(){u.abort()}var a=new c(t,n);if(a.signal&&a.signal.aborted)return i(new e.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;u.onload=function(){var e,t,n={status:u.status,statusText:u.statusText,headers:(e=u.getAllResponseHeaders()||"",t=new o,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}}),t)};n.url="responseURL"in u?u.responseURL:n.headers.get("X-Request-URL");var i="response"in u?u.response:u.responseText;r(new h(i,n))},u.onerror=function(){i(new TypeError("Network request failed"))},u.ontimeout=function(){i(new TypeError("Network request failed"))},u.onabort=function(){i(new e.DOMException("Aborted","AbortError"))},u.open(a.method,a.url,!0),"include"===a.credentials?u.withCredentials=!0:"omit"===a.credentials&&(u.withCredentials=!1),"responseType"in u&&f.blob&&(u.responseType="blob"),a.headers.forEach(function(e,t){u.setRequestHeader(t,e)}),a.signal&&(a.signal.addEventListener("abort",s),u.onreadystatechange=function(){4===u.readyState&&a.signal.removeEventListener("abort",s)}),u.send(void 0===a._bodyInit?null:a._bodyInit)})}var f={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(f.arrayBuffer)var _=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=ArrayBuffer.isView||function(e){return e&&_.indexOf(Object.prototype.toString.call(e))>-1};o.prototype.append=function(e,r){e=t(e),r=n(r);var o=this.map[e];this.map[e]=o?o+", "+r:r},o.prototype["delete"]=function(e){delete this.map[t(e)]},o.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,r){this.map[t(e)]=n(r)},o.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},f.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];c.prototype.clone=function(){return new c(this,{body:this._bodyInit})},l.call(c.prototype),l.call(h.prototype),h.prototype.clone=function(){return new h(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},h.error=function(){var e=new h(null,{status:0,statusText:""});return e.type="error",e};var y=[301,302,303,307,308];h.redirect=function(e,t){if(-1===y.indexOf(t))throw new RangeError("Invalid status code");return new h(null,{
status:t,headers:{location:e}})},e.DOMException=self.DOMException;try{new e.DOMException}catch(f){e.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}d.polyfill=!0,self.fetch||(self.fetch=d,self.Headers=o,self.Request=c,self.Response=h),e.Headers=o,e.Request=c,e.Response=h,e.fetch=d,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof _$fetchUmd_85.exports?factory(_$fetchUmd_85.exports):"function"==typeof define&&define.amd?define(["exports"],factory):factory(__global_85.WHATWGFetch={}),_$fetchUmd_85=_$fetchUmd_85.exports;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},defaultOptions={limit:1,onStart:function(){},onProgress:function(){},onPartComplete:function(){},onSuccess:function(){},onError:function(e){throw e}},MultipartUploader=function(){function e(t,n){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.options=_extends({},defaultOptions,n),this.file=t,this.key=this.options.key||null,this.uploadId=this.options.uploadId||null,this.parts=this.options.parts||[],this.isPaused=!1,this.chunks=null,this.chunkState=null,this.uploading=[],this._initChunks()}return e.prototype._initChunks=function(){for(var e=[],t=Math.max(Math.ceil(this.file.size/1e4),5242880),n=0;n<this.file.size;n+=t){var r=Math.min(this.file.size,n+t);e.push(this.file.slice(n,r))}this.chunks=e,this.chunkState=e.map(function(){return{uploaded:0,busy:!1,done:!1}})},e.prototype._createUpload=function(){var e=this;return Promise.resolve().then(function(){return e.options.createMultipartUpload()}).then(function(e){if("object"!==(void 0===e?"undefined":_typeof(e))||!e||"string"!=typeof e.uploadId||"string"!=typeof e.key)throw new TypeError("AwsS3/Multipart: Got incorrect result from 'createMultipartUpload()', expected an object '{ uploadId, key }'.");return e}).then(function(t){e.key=t.key,e.uploadId=t.uploadId,e.options.onStart(t)}).then(function(){e._uploadParts()})["catch"](function(t){e._onError(t)})},e.prototype._resumeUpload=function(){var e=this;return Promise.resolve().then(function(){return e.options.listParts({uploadId:e.uploadId,key:e.key})}).then(function(t){t.forEach(function(t){var n=t.PartNumber-1;e.chunkState[n]={uploaded:t.Size,etag:t.ETag,done:!0},e.parts.some(function(e){return e.PartNumber===t.PartNumber})||e.parts.push({PartNumber:t.PartNumber,ETag:t.ETag})}),e._uploadParts()})["catch"](function(t){e._onError(t)})},e.prototype._uploadParts=function(){var e=this;if(!this.isPaused){var t=this.options.limit-this.uploading.length;if(0!==t)if(this.chunkState.every(function(e){return e.done}))this._completeUpload();else{for(var n=[],r=0;r<this.chunkState.length;r++){var o=this.chunkState[r];if(!o.done&&!o.busy&&(n.push(r),n.length>=t))break}n.forEach(function(t){e._uploadPart(t)})}}},e.prototype._uploadPart=function(e){var t=this,n=this.chunks[e];return this.chunkState[e].busy=!0,Promise.resolve().then(function(){return t.options.prepareUploadPart({key:t.key,uploadId:t.uploadId,body:n,number:e+1})}).then(function(e){if("object"!==(void 0===e?"undefined":_typeof(e))||!e||"string"!=typeof e.url)throw new TypeError("AwsS3/Multipart: Got incorrect result from 'prepareUploadPart()', expected an object '{ url }'.");return e}).then(function(n){var r=n.url;t._uploadPartBytes(e,r)},function(e){t._onError(e)})},e.prototype._onPartProgress=function(e,t,n){this.chunkState[e].uploaded=t;var r=this.chunkState.reduce(function(e,t){return e+t.uploaded},0);this.options.onProgress(r,this.file.size)},e.prototype._onPartComplete=function(e,t){this.chunkState[e].etag=t,this.chunkState[e].done=!0;var n={PartNumber:e+1,ETag:t};this.parts.push(n),this.options.onPartComplete(n),this._uploadParts()},e.prototype._uploadPartBytes=function(e,t){var n=this,r=this.chunks[e],o=new XMLHttpRequest;o.open("PUT",t,!0),o.responseType="text",this.uploading.push(o),o.upload.addEventListener("progress",function(t){t.lengthComputable&&n._onPartProgress(e,t.loaded,t.total)}),o.addEventListener("abort",function(t){remove(n.uploading,t.target),n.chunkState[e].busy=!1}),o.addEventListener("load",function(t){if(remove(n.uploading,t.target),n.chunkState[e].busy=!1,t.target.status<200||t.target.status>=300)n._onError(new Error("Non 2xx"));else{n._onPartProgress(e,r.size,r.size);var o=t.target.getResponseHeader("ETag");null!==o?n._onPartComplete(e,o):n._onError(new Error("AwsS3/Multipart: Could not read the ETag header. This likely means CORS is not configured correctly on the S3 Bucket. Seee https://uppy.io/docs/aws-s3-multipart#S3-Bucket-Configuration for instructions."))}}),o.addEventListener("error",function(t){remove(n.uploading,t.target),n.chunkState[e].busy=!1;var r=new Error("Unknown error");r.source=t.target,n._onError(r)}),o.send(r)},e.prototype._completeUpload=function(){var e=this;return this.parts.sort(function(e,t){return e.PartNumber-t.PartNumber}),Promise.resolve().then(function(){return e.options.completeMultipartUpload({key:e.key,uploadId:e.uploadId,parts:e.parts})}).then(function(t){e.options.onSuccess(t)},function(t){e._onError(t)})},e.prototype._abortUpload=function(){this.uploading.slice().forEach(function(e){e.abort()}),this.options.abortMultipartUpload({key:this.key,uploadId:this.uploadId}),this.uploading=[]},e.prototype._onError=function(e){this.options.onError(e)},e.prototype.start=function(){this.isPaused=!1,this.uploadId?this._resumeUpload():this._createUpload()},e.prototype.pause=function(){this.uploading.slice().forEach(function(e){e.abort()}),this.isPaused=!0},e.prototype.abort=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).really?void this._abortUpload():this.pause()},e}(),_$MultipartUploader_88=MultipartUploader,___extends_92=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_$RequestClient_92=function(){function e(t,n){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.uppy=t,this.opts=n,this.onReceiveResponse=this.onReceiveResponse.bind(this)}return e.prototype.onReceiveResponse=function(e){var t,n=this.uppy.getState().companion||{},r=this.opts.serverUrl,o=e.headers;return o.has("i-am")&&o.get("i-am")!==n[r]&&this.uppy.setState({companion:___extends_92({},n,(t={},t[r]=o.get("i-am"),t))}),e},e.prototype._getUrl=function(e){return/^(https?:|)\/\//.test(e)?e:this.hostname+"/"+e},e.prototype.get=function(e){var t=this;return fetch(this._getUrl(e),{method:"get",headers:this.headers,credentials:"same-origin"}).then(this.onReceiveResponse).then(function(e){return e.json()})["catch"](function(n){throw new Error("Could not get "+t._getUrl(e)+". "+n)})},e.prototype.post=function(e,t){var n=this;return fetch(this._getUrl(e),{method:"post",headers:this.headers,credentials:"same-origin",body:JSON.stringify(t)}).then(this.onReceiveResponse).then(function(t){if(t.status<200||t.status>300)throw new Error("Could not post "+n._getUrl(e)+". "+t.statusText);return t.json()})["catch"](function(t){throw new Error("Could not post "+n._getUrl(e)+". "+t)})},e.prototype["delete"]=function(e,t){var n=this;return fetch(this.hostname+"/"+e,{method:"delete",headers:this.headers,credentials:"same-origin",body:t?JSON.stringify(t):null}).then(this.onReceiveResponse).then(function(e){return e.json()})["catch"](function(t){throw new Error("Could not delete "+n._getUrl(e)+". "+t)})},_createClass(e,[{key:"hostname",get:function(){var e=this.uppy.getState().companion,t=this.opts.serverUrl;return(e&&e[t]?e[t]:t).replace(/\/$/,"")}},{key:"defaultHeaders",get:function(){return{Accept:"application/json","Content-Type":"application/json"}}},{key:"headers",get:function(){return ___extends_92({},this.defaultHeaders,this.opts.serverHeaders||{})}}]),e}(),___extends_91=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},___createClass_91=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),__dummy_91$0=0,_getName=function(e){return e.split("-").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(" ")},_$Provider_91=function(e){function t(n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return o.provider=r.provider,o.id=o.provider,o.authProvider=r.authProvider||o.provider,o.name=o.opts.name||_getName(o.id),o.tokenKey="companion-"+o.id+"-auth-token",o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.setAuthToken=function(e){localStorage.setItem(this.tokenKey,e)},t.prototype.checkAuth=function(){return this.get(this.id+"/authorized").then(function(e){return e.authenticated})},t.prototype.authUrl=function(){return this.hostname+"/"+this.id+"/connect"},t.prototype.fileUrl=function(e){return this.hostname+"/"+this.id+"/get/"+e},t.prototype.list=function(e){return this.get(this.id+"/list/"+(e||""))},t.prototype.logout=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.href;return this.get(this.id+"/logout?redirect="+t).then(function(t){return localStorage.removeItem(e.tokenKey),t})},t.initPlugin=function(e,t,n){if(e.type="acquirer",e.files=[],n&&(e.opts=___extends_91({},n,t)),t.serverPattern){var r=t.serverPattern;if(!("string"==typeof r||Array.isArray(r)||r instanceof RegExp))throw new TypeError(e.id+': the option "serverPattern" must be one of string, Array, RegExp');e.opts.serverPattern=r}else/^(?!https?:\/\/).*$/.test(t.serverUrl)?e.opts.serverPattern=location.protocol+"//"+t.serverUrl.replace(/^\/\//,""):e.opts.serverPattern=t.serverUrl},___createClass_91(t,[{key:"defaultHeaders",get:function(){return ___extends_91({},e.prototype.defaultHeaders,{"uppy-auth-token":localStorage.getItem(this.tokenKey)})}}]),t}(_$RequestClient_92),_$namespaceEmitter_45=function(){var e={},t=e._fns={};return e.emit=function(e,n,r,o,i,s,a){var u=function(e){for(var n=t[e]?t[e]:[],r=e.indexOf(":"),o=-1===r?[e]:[e.substring(0,r),e.substring(r+1)],i=Object.keys(t),s=0,a=i.length;s<a;s++){var u=i[s];if("*"===u&&(n=n.concat(t[u])),2===o.length&&o[0]===u){n=n.concat(t[u]);break}}return n}(e);u.length&&function(e,t,n){for(var r=0,o=t.length;r<o&&t[r];r++)t[r].event=e,t[r].apply(t[r],n)}(e,u,[n,r,o,i,s,a])},e.on=function(e,n){t[e]||(t[e]=[]),t[e].push(n)},e.once=function(t,n){this.on(t,function r(){n.apply(this,arguments),e.off(t,r)})},e.off=function(e,t){var n=[];if(e&&t)for(var r=this._fns[e],o=0,i=r?r.length:0;o<i;o++)r[o]!==t&&n.push(r[o]);n.length?this._fns[e]=n:delete this._fns[e]},e},_$Socket_93=function(){function e(t){var n=this;!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.queued=[],this.isOpen=!1,this.socket=new WebSocket(t.target),this.emitter=_$namespaceEmitter_45(),this.socket.onopen=function(e){for(n.isOpen=!0;n.queued.length>0&&n.isOpen;){var t=n.queued[0];n.send(t.action,t.payload),n.queued=n.queued.slice(1)}},this.socket.onclose=function(e){n.isOpen=!1},this._handleMessage=this._handleMessage.bind(this),this.socket.onmessage=this._handleMessage,this.close=this.close.bind(this),this.emit=this.emit.bind(this),this.on=this.on.bind(this),this.once=this.once.bind(this),this.send=this.send.bind(this)}return e.prototype.close=function(){return this.socket.close()},e.prototype.send=function(e,t){this.isOpen?this.socket.send(JSON.stringify({action:e,payload:t})):this.queued.push({action:e,payload:t})},e.prototype.on=function(e,t){this.emitter.on(e,t)},e.prototype.emit=function(e,t){this.emitter.emit(e,t)},e.prototype.once=function(e,t){this.emitter.once(e,t)},e.prototype._handleMessage=function(e){try{var t=JSON.parse(e.data);this.emit(t.action,t.payload)}catch(e){console.log(e)}},e}(),__dummy_94$0=0,__dummy_94$1=0,__dummy_94$2=0,_$lib_94={RequestClient:_$RequestClient_92,Provider:_$Provider_91,Socket:_$Socket_93},_$pad_16=function(e,t){var n="000000000"+e;return n.substr(n.length-t)},__dummy_14$0=0,env="object"==typeof window?window:self,globalCount=Object.keys(env).length,clientId=_$pad_16(((navigator.mimeTypes?navigator.mimeTypes.length:0)+navigator.userAgent.length).toString(36)+globalCount.toString(36),4),_$fingerprintBrowser_14=function(){return clientId},getRandomValue,crypto=window.crypto||window.msCrypto;if(crypto){var lim=Math.pow(2,32)-1;getRandomValue=function(){return Math.abs(crypto.getRandomValues(new Uint32Array(1))[0]/lim)}}else getRandomValue=Math.random;var _$getRandomValue_15=getRandomValue,_$cuid_13={},__dummy_13$0=0,__dummy_13$1=0,__dummy_13$2=0,c=0,blockSize=4,base=36,discreteValues=Math.pow(base,blockSize);cuid.slug=function(){var e=(new Date).getTime().toString(36),t=safeCounter().toString(36).slice(-4),n=_$fingerprintBrowser_14().slice(0,1)+_$fingerprintBrowser_14().slice(-1),r=randomBlock().slice(-2);return e.slice(-2)+t+n+r},cuid.isCuid=function(e){return"string"==typeof e&&!!e.startsWith("c")},cuid.isSlug=function(e){if("string"!=typeof e)return!1;var t=e.length;return t>=7&&t<=10},cuid.fingerprint=_$fingerprintBrowser_14,_$cuid_13=cuid;var _$wildcard_86={};WildcardMatcher.prototype.match=function(e){var t,n,r=!0,o=this.parts,i=o.length;if("string"==typeof e||e instanceof String)if(this.hasWild||this.text==e){for(n=(e||"").split(this.separator),t=0;r&&t<i;t++)"*"!==o[t]&&(r=t<n.length&&o[t]===n[t]);r=r&&n}else r=!1;else if("function"==typeof e.splice)for(r=[],t=e.length;t--;)this.match(e[t])&&(r[r.length]=e[t]);else if("object"==typeof e)for(var s in r={},e)this.match(s)&&(r[s]=e[s]);return r},_$wildcard_86=function(e,t,n){var r=new WildcardMatcher(e,n||/[\/\.]/);return void 0!==t?r.match(t):r};var __dummy_44$0=0,reMimePartSplit=/[\/\+\.]/,_$mimeMatch_44=function(e,t){function n(t){var n=_$wildcard_86(t,e,reMimePartSplit);return n&&n.length>=2}return t?n(t.split(";")[0]):n},_$prettierBytes_50=function(e){if("number"!=typeof e||isNaN(e))throw new TypeError("Expected a number, got "+typeof e);var t=e<0,n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(t&&(e=-e),e<1)return(t?"-":"")+e+" B";var r=Math.min(Math.floor(Math.log(e)/Math.log(1e3)),n.length-1);e=Number(e/Math.pow(1e3,r));var o=n[r];return e>=10||e%1==0?(t?"-":"")+e.toFixed(0)+" "+o:(t?"-":"")+e.toFixed(1)+" "+o},_$preact_49={exports:{}};!function(){function e(e,t){var n,r,o,i,s=S;for(i=arguments.length;i-- >2;)C.push(arguments[i]);for(t&&null!=t.children&&(C.length||C.push(t.children),delete t.children);C.length;)if((r=C.pop())&&void 0!==r.pop)for(i=r.length;i--;)C.push(r[i]);else"boolean"==typeof r&&(r=null),(o="function"!=typeof e)&&(null==r?r="":"number"==typeof r?r=String(r):"string"!=typeof r&&(o=!1)),o&&n?s[s.length-1]+=r:s===S?s=[r]:s.push(r),n=o;var a=new b;return a.nodeName=e,a.children=s,a.attributes=null==t?void 0:t,a.key=null==t?void 0:t.key,void 0!==w.vnode&&w.vnode(a),a}function t(e,t){for(var n in t)e[n]=t[n];return e}function n(e,t){null!=e&&("function"==typeof e?e(t):e.current=t)}function r(e){!e.__d&&(e.__d=!0)&&1==k.push(e)&&(w.debounceRendering||A)(o)}function o(){for(var e;e=k.pop();)e.__d&&g(e)}function i(e,t){return e.__n===t||e.nodeName.toLowerCase()===t.toLowerCase()}function s(e){var n=t({},e.attributes);n.children=e.children;var r=e.nodeName.defaultProps;if(void 0!==r)for(var o in r)void 0===n[o]&&(n[o]=r[o]);return n}function a(e){var t=e.parentNode;t&&t.removeChild(e)}function u(e,t,r,o,i){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n(r,null),n(o,e);else if("class"!==t||i)if("style"===t){if(o&&"string"!=typeof o&&"string"!=typeof r||(e.style.cssText=o||""),o&&"object"==typeof o){if("string"!=typeof r)for(var s in r)s in o||(e.style[s]="");for(var s in o)e.style[s]="number"==typeof o[s]&&!1===E.test(s)?o[s]+"px":o[s]}}else if("dangerouslySetInnerHTML"===t)o&&(e.innerHTML=o.__html||"");else if("o"==t[0]&&"n"==t[1]){var a=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),o?r||e.addEventListener(t,l,a):e.removeEventListener(t,l,a),(e.__l||(e.__l={}))[t]=o}else if("list"!==t&&"type"!==t&&!i&&t in e){try{e[t]=null==o?"":o}catch(e){}null!=o&&!1!==o||"spellcheck"==t||e.removeAttribute(t)}else{var u=i&&t!==(t=t.replace(/^xlink:?/,""));null==o||!1===o?u?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof o&&(u?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),o):e.setAttribute(t,o))}else e.className=o||""}function l(e){return this.__l[e.type](w.event&&w.event(e)||e)}function c(){for(var e;e=M.shift();)w.afterMount&&w.afterMount(e),e.componentDidMount&&e.componentDidMount()}function p(e,t,n,r,o,l){T++||(P=null!=o&&void 0!==o.ownerSVGElement,O=null!=e&&!("__preactattr_"in e));var p=function d(e,t,n,r,o){var l=e,c=P;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||o)?e.nodeValue!=t&&(e.nodeValue=t):(l=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(l,e),h(e,!0))),l.__preactattr_=!0,l;var p,_,g=t.nodeName;if("function"==typeof g)return function(e,t,n,r){for(var o=e&&e._component,i=o,a=e,u=o&&e._componentConstructor===t.nodeName,l=u,c=s(t);o&&!l&&(o=o.__u);)l=o.constructor===t.nodeName;return o&&l&&(!r||o._component)?(m(o,c,3,n,r),e=o.base):(i&&!u&&(y(i),e=a=null),o=f(t.nodeName,c,n),e&&!o.__b&&(o.__b=e,a=null),m(o,c,1,n,r),e=o.base,a&&e!==a&&(a._component=null,h(a,!1))),e}(e,t,n,r);if(P="svg"===g||"foreignObject"!==g&&P,g=String(g),(!e||!i(e,g))&&(p=g,(_=P?document.createElementNS("http://www.w3.org/2000/svg",p):document.createElement(p)).__n=p,l=_,e)){for(;e.firstChild;)l.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(l,e),h(e,!0)}var v=l.firstChild,b=l.__preactattr_,w=t.children;if(null==b){b=l.__preactattr_={};for(var C=l.attributes,S=C.length;S--;)b[C[S].name]=C[S].value}return!O&&w&&1===w.length&&"string"==typeof w[0]&&null!=v&&void 0!==v.splitText&&null==v.nextSibling?v.nodeValue!=w[0]&&(v.nodeValue=w[0]):(w&&w.length||null!=v)&&function(e,t,n,r,o){var s,u,l,c,p,f,_,m,g=e.childNodes,y=[],v={},b=0,w=0,C=g.length,S=0,A=t?t.length:0;if(0!==C)for(var E=0;E<C;E++){var k=g[E],M=k.__preactattr_,T=A&&M?k._component?k._component.__k:M.key:null;null!=T?(b++,v[T]=k):(M||(void 0!==k.splitText?!o||k.nodeValue.trim():o))&&(y[S++]=k)}if(0!==A)for(var E=0;E<A;E++){c=t[E],p=null;var T=c.key;if(null!=T)b&&void 0!==v[T]&&(p=v[T],v[T]=void 0,b--);else if(w<S)for(s=w;s<S;s++)if(void 0!==y[s]&&(f=u=y[s],m=o,"string"==typeof(_=c)||"number"==typeof _?void 0!==f.splitText:"string"==typeof _.nodeName?!f._componentConstructor&&i(f,_.nodeName):m||f._componentConstructor===_.nodeName)){p=u,y[s]=void 0,s===S-1&&S--,s===w&&w++;break}p=d(p,c,n,r),l=g[E],p&&p!==e&&p!==l&&(null==l?e.appendChild(p):p===l.nextSibling?a(l):e.insertBefore(p,l))}if(b)for(var E in v)void 0!==v[E]&&h(v[E],!1);for(;w<=S;)void 0!==(p=y[S--])&&h(p,!1)}(l,w,n,r,O||null!=b.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||u(e,r,n[r],n[r]=void 0,P);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||u(e,r,n[r],n[r]=t[r],P)}(l,t.attributes,b),P=c,l}(e,t,n,r,l);return o&&p.parentNode!==o&&o.appendChild(p),--T||(O=!1,l||c()),p}function h(e,t){var r=e._component;r?y(r):(null!=e.__preactattr_&&n(e.__preactattr_.ref,null),!1!==t&&null!=e.__preactattr_||a(e),d(e))}function d(e){for(e=e.lastChild;e;){var t=e.previousSibling;h(e,!0),e=t}}function f(e,t,n){var r,o=x.length;for(e.prototype&&e.prototype.render?(r=new e(t,n),v.call(r,t,n)):((r=new v(t,n)).constructor=e,r.render=_);o--;)if(x[o].constructor===e)return r.__b=x[o].__b,x.splice(o,1),r;return r}function _(e,t,n){return this.constructor(e,n)}function m(e,t,o,i,s){e.__x||(e.__x=!0,e.__r=t.ref,e.__k=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||s?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,i)),i&&i!==e.context&&(e.__c||(e.__c=e.context),e.context=i),e.__p||(e.__p=e.props),e.props=t,e.__x=!1,0!==o&&(1!==o&&!1===w.syncComponentUpdates&&e.base?r(e):g(e,1,s)),n(e.__r,e))}function g(e,n,r,o){if(!e.__x){var i,a,u,l=e.props,d=e.state,_=e.context,v=e.__p||l,b=e.__s||d,C=e.__c||_,S=e.base,A=e.__b,E=S||A,k=e._component,P=!1,O=C;if(e.constructor.getDerivedStateFromProps&&(d=t(t({},d),e.constructor.getDerivedStateFromProps(l,d)),e.state=d),S&&(e.props=v,e.state=b,e.context=C,2!==n&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(l,d,_)?P=!0:e.componentWillUpdate&&e.componentWillUpdate(l,d,_),e.props=l,e.state=d,e.context=_),e.__p=e.__s=e.__c=e.__b=null,e.__d=!1,!P){i=e.render(l,d,_),e.getChildContext&&(_=t(t({},_),e.getChildContext())),S&&e.getSnapshotBeforeUpdate&&(O=e.getSnapshotBeforeUpdate(v,b));var x,I,R=i&&i.nodeName;if("function"==typeof R){var N=s(i);(a=k)&&a.constructor===R&&N.key==a.__k?m(a,N,1,_,!1):(x=a,e._component=a=f(R,N,_),a.__b=a.__b||A,a.__u=e,m(a,N,0,_,!1),g(a,1,r,!0)),I=a.base}else u=E,(x=k)&&(u=e._component=null),(E||1===n)&&(u&&(u._component=null),I=p(u,i,_,r||!S,E&&E.parentNode,!0));if(E&&I!==E&&a!==k){var D=E.parentNode;D&&I!==D&&(D.replaceChild(I,E),x||(E._component=null,h(E,!1)))}if(x&&y(x),e.base=I,I&&!o){for(var F=e,j=e;j=j.__u;)(F=j).base=I;I._component=F,I._componentConstructor=F.constructor}}for(!S||r?M.push(e):P||(e.componentDidUpdate&&e.componentDidUpdate(v,b,O),w.afterUpdate&&w.afterUpdate(e));e.__h.length;)e.__h.pop().call(e);T||o||c()}}function y(e){w.beforeUnmount&&w.beforeUnmount(e);var t=e.base;e.__x=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var r=e._component;r?y(r):t&&(null!=t.__preactattr_&&n(t.__preactattr_.ref,null),e.__b=t,a(t),x.push(e),d(t)),n(e.__r,null)}function v(e,t){this.__d=!0,this.context=t,this.props=e,this.state=this.state||{},this.__h=[]}var b=function(){},w={},C=[],S=[],A="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,E=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,k=[],M=[],T=0,P=!1,O=!1,x=[];t(v.prototype,{setState:function(e,n){this.__s||(this.__s=this.state),this.state=t(t({},this.state),"function"==typeof e?e(this.state,this.props):e),n&&this.__h.push(n),r(this)},forceUpdate:function(e){e&&this.__h.push(e),g(this,2)},render:function(){}});var I={h:e,createElement:e,cloneElement:function(n,r){return e(n.nodeName,t(t({},n.attributes),r),arguments.length>2?[].slice.call(arguments,2):n.children)},createRef:function(){return{}},Component:v,render:function(e,t,n){return p(n,e,{},!1,t,!1)},rerender:o,options:w};_$preact_49.exports=I}(),_$preact_49=_$preact_49.exports;var ___typeof_167="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_$isDOMElement_167=function(e){return e&&"object"===(void 0===e?"undefined":___typeof_167(e))&&e.nodeType===Node.ELEMENT_NODE},___typeof_158="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},__dummy_158$0=0,_$findDOMElement_158=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return"string"==typeof e?t.querySelector(e):"object"===(void 0===e?"undefined":___typeof_158(e))&&_$isDOMElement_167(e)?e:void 0},___typeof_95="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},___extends_95=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__dummy_95$0=0,__dummy_95$1=0,_$Plugin_95=function(){function e(t,n){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.uppy=t,this.opts=n||{},this.update=this.update.bind(this),this.mount=this.mount.bind(this),this.install=this.install.bind(this),this.uninstall=this.uninstall.bind(this)}return e.prototype.getPluginState=function(){return this.uppy.getState().plugins[this.id]||{}},e.prototype.setPluginState=function(e){var t,n=this.uppy.getState().plugins;this.uppy.setState({plugins:___extends_95({},n,(t={},t[this.id]=___extends_95({},n[this.id],e),t))})},e.prototype.update=function(e){void 0!==this.el&&this._updateUI&&this._updateUI(e)},e.prototype.onMount=function(){},e.prototype.mount=function(t,n){var r,o,i,s=this,a=n.id,u=_$findDOMElement_158(t);if(u)return this.isTargetDOMEl=!0,this.rerender=function(e){s.uppy.getPlugin(s.id)&&(s.el=_$preact_49.render(s.render(e),u,s.el))},this._updateUI=(r=this.rerender,o=null,i=null,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i=t,o||(o=Promise.resolve().then(function(){return o=null,r.apply(void 0,i)})),o}),this.uppy.log("Installing "+a+" to a DOM element"),this.opts.replaceTargetContent&&(u.innerHTML=""),this.el=_$preact_49.render(this.render(this.uppy.getState()),u),this.onMount(),this.el;var l=void 0;if("object"===(void 0===t?"undefined":___typeof_95(t))&&t instanceof e)l=t;else if("function"==typeof t){var c=t;this.uppy.iteratePlugins(function(e){if(e instanceof c)return l=e,!1})}if(l)return this.uppy.log("Installing "+a+" to "+l.id),this.parent=l,this.el=l.addTarget(n),this.onMount(),this.el;throw this.uppy.log("Not installing "+a),new Error("Invalid target option given to "+a+". Please make sure that the element \n      exists on the page, or that the plugin you are targeting has been installed. Check that the <script> tag initializing Uppy \n      comes at the bottom of the page, before the closing </body> tag (see https://github.com/transloadit/uppy/issues/1042).")},e.prototype.render=function(e){throw new Error("Extend the render method to add your plugin to a DOM element")},e.prototype.addTarget=function(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")},e.prototype.unmount=function(){this.isTargetDOMEl&&this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},e.prototype.install=function(){},e.prototype.uninstall=function(){this.unmount()},e}(),_$supportsUploadProgress_97=function(e){if(null==e&&(e="undefined"!=typeof navigator?navigator.userAgent:null),!e)return!0;var t=/Edge\/(\d+\.\d+)/.exec(e);if(!t)return!0;var n=t[1].split("."),r=n[0],o=n[1];return r=parseInt(r,10),o=parseInt(o,10),r<15||15===r&&o<15063||r>18||18===r&&o>=18218},___extends_141=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DefaultStore=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.state={},this.callbacks=[]}return e.prototype.getState=function(){return this.state},e.prototype.setState=function(e){var t=___extends_141({},this.state),n=___extends_141({},this.state,e);this.state=n,this._publish(t,n,e)},e.prototype.subscribe=function(e){var t=this;return this.callbacks.push(e),function(){t.callbacks.splice(t.callbacks.indexOf(e),1)}},e.prototype._publish=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.callbacks.forEach(function(e){e.apply(void 0,t)})},e}(),_$lib_141=function(){return new DefaultStore},___extends_153=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_$Translator_153=function(){function e(t){var n=this;!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.locale={strings:{},pluralize:function(e){return 1===e?0:1}},Array.isArray(t)?t.forEach(function(e){return n._apply(e)}):this._apply(t)}return e.prototype._apply=function(e){if(e&&e.strings){var t=this.locale;this.locale=___extends_153({},t,{strings:___extends_153({},t.strings,e.strings)}),this.locale.pluralize=e.pluralize||t.pluralize}},e.prototype.interpolate=function(e,t){function n(e,t,n){var r=[];return e.forEach(function(e){o.call(e,t).forEach(function(e,t,o){""!==e&&r.push(e),t<o.length-1&&r.push(n)})}),r}var r=String.prototype,o=r.split,i=r.replace,s=/\$/g,a=[e];for(var u in t)if("_"!==u&&t.hasOwnProperty(u)){var l=t[u];"string"==typeof l&&(l=i.call(t[u],s,"$$$$")),a=n(a,new RegExp("%\\{"+u+"\\}","g"),l)}return a},e.prototype.translate=function(e,t){return this.translateArray(e,t).join("")},e.prototype.translateArray=function(e,t){if(t&&void 0!==t.smart_count){var n=this.locale.pluralize(t.smart_count);return this.interpolate(this.locale.strings[e][n],t)}return this.interpolate(this.locale.strings[e],t)},e}(),_$generateFileID_159=function(e){return["uppy",e.name?e.name.toLowerCase().replace(/[^A-Z0-9]/gi,""):"",e.type,e.data.size,e.data.lastModified].filter(function(e){return e}).join("-")},_$getFileNameAndExtension_161=function(e){var t=/(?:\.([^.]+))?$/.exec(e)[1];return{name:e.replace("."+t,""),extension:t}},_$mimeTypes_172={md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",gif:"image/gif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel"},__dummy_162$0=0,__dummy_162$1=0,_$getFileType_162=function(e){var t=e.name?_$getFileNameAndExtension_161(e.name).extension:null;return t=t?t.toLowerCase():null,e.isRemote?e.type?e.type:_$mimeTypes_172[t]:e.type?e.type:t&&_$mimeTypes_172[t]?_$mimeTypes_172[t]:"application/octet-stream";
},_$getTimeStamp_166=function(){var e=new Date;return __pad_166(e.getHours().toString())+":"+__pad_166(e.getMinutes().toString())+":"+__pad_166(e.getSeconds().toString())},_$lib_96={},___typeof_96="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},___extends_96=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},___createClass_96=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),__dummy_96$0=0,__dummy_96$1=0,__dummy_96$2=0,__dummy_96$3=0,__dummy_96$4=0,__dummy_96$5=0,__dummy_96$6=0,__dummy_96$7=0,__dummy_96$8=0,__dummy_96$9=0,__dummy_96$10=0,__dummy_96$11=0,Uppy=function(){function e(t){var n=this;!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r={strings:{youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},exceedsSize:"This file exceeds maximum allowed size of",youCanOnlyUploadFileTypes:"You can only upload:",companionError:"Connection with Companion failed",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",selectXFiles:{0:"Select %{smart_count} file",1:"Select %{smart_count} files"},cancel:"Cancel",logOut:"Log out",filter:"Filter",resetFilter:"Reset filter"}},o={id:"uppy",autoProceed:!1,allowMultipleUploads:!0,debug:!1,restrictions:{maxFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null},meta:{},onBeforeFileAdded:function(e,t){return e},onBeforeUpload:function(e){return e},locale:r,store:_$lib_141()};this.opts=___extends_96({},o,t),this.opts.restrictions=___extends_96({},o.restrictions,this.opts.restrictions),this.translator=new _$Translator_153([r,this.opts.locale]),this.locale=this.translator.locale,this.i18n=this.translator.translate.bind(this.translator),this.plugins={},this.getState=this.getState.bind(this),this.getPlugin=this.getPlugin.bind(this),this.setFileMeta=this.setFileMeta.bind(this),this.setFileState=this.setFileState.bind(this),this.log=this.log.bind(this),this.info=this.info.bind(this),this.hideInfo=this.hideInfo.bind(this),this.addFile=this.addFile.bind(this),this.removeFile=this.removeFile.bind(this),this.pauseResume=this.pauseResume.bind(this),this._calculateProgress=this._calculateProgress.bind(this),this.updateOnlineStatus=this.updateOnlineStatus.bind(this),this.resetProgress=this.resetProgress.bind(this),this.pauseAll=this.pauseAll.bind(this),this.resumeAll=this.resumeAll.bind(this),this.retryAll=this.retryAll.bind(this),this.cancelAll=this.cancelAll.bind(this),this.retryUpload=this.retryUpload.bind(this),this.upload=this.upload.bind(this),this.emitter=_$namespaceEmitter_45(),this.on=this.on.bind(this),this.off=this.off.bind(this),this.once=this.emitter.once.bind(this.emitter),this.emit=this.emitter.emit.bind(this.emitter),this.preProcessors=[],this.uploaders=[],this.postProcessors=[],this.store=this.opts.store,this.setState({plugins:{},files:{},currentUploads:{},allowNewUpload:!0,capabilities:{uploadProgress:_$supportsUploadProgress_97(),resumableUploads:!1},totalProgress:0,meta:___extends_96({},this.opts.meta),info:{isHidden:!0,type:"info",message:""}}),this._storeUnsubscribe=this.store.subscribe(function(e,t,r){n.emit("state-update",e,t,r),n.updateAll(t)}),this.opts.debug&&"undefined"!=typeof window&&(window.uppyLog="",window[this.opts.id]=this),this._addListeners()}return e.prototype.on=function(e,t){return this.emitter.on(e,t),this},e.prototype.off=function(e,t){return this.emitter.off(e,t),this},e.prototype.updateAll=function(e){this.iteratePlugins(function(t){t.update(e)})},e.prototype.setState=function(e){this.store.setState(e)},e.prototype.getState=function(){return this.store.getState()},e.prototype.setFileState=function(e,t){var n;if(!this.getState().files[e])throw new Error("Can’t set state for "+e+" (the file could have been removed)");this.setState({files:___extends_96({},this.getState().files,(n={},n[e]=___extends_96({},this.getState().files[e],t),n))})},e.prototype.resetProgress=function(){var e={percentage:0,bytesUploaded:0,uploadComplete:!1,uploadStarted:!1},t=___extends_96({},this.getState().files),n={};Object.keys(t).forEach(function(r){var o=___extends_96({},t[r]);o.progress=___extends_96({},o.progress,e),n[r]=o}),this.setState({files:n,totalProgress:0}),this.emit("reset-progress")},e.prototype.addPreProcessor=function(e){this.preProcessors.push(e)},e.prototype.removePreProcessor=function(e){var t=this.preProcessors.indexOf(e);-1!==t&&this.preProcessors.splice(t,1)},e.prototype.addPostProcessor=function(e){this.postProcessors.push(e)},e.prototype.removePostProcessor=function(e){var t=this.postProcessors.indexOf(e);-1!==t&&this.postProcessors.splice(t,1)},e.prototype.addUploader=function(e){this.uploaders.push(e)},e.prototype.removeUploader=function(e){var t=this.uploaders.indexOf(e);-1!==t&&this.uploaders.splice(t,1)},e.prototype.setMeta=function(e){var t=___extends_96({},this.getState().meta,e),n=___extends_96({},this.getState().files);Object.keys(n).forEach(function(t){n[t]=___extends_96({},n[t],{meta:___extends_96({},n[t].meta,e)})}),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:n})},e.prototype.setFileMeta=function(e,t){var n=___extends_96({},this.getState().files);if(n[e]){var r=___extends_96({},n[e].meta,t);n[e]=___extends_96({},n[e],{meta:r}),this.setState({files:n})}else this.log("Was trying to set metadata for a file that’s not with us anymore: ",e)},e.prototype.getFile=function(e){return this.getState().files[e]},e.prototype.getFiles=function(){var e=this.getState().files;return Object.keys(e).map(function(t){return e[t]})},e.prototype._checkMinNumberOfFiles=function(e){var t=this.opts.restrictions.minNumberOfFiles;if(Object.keys(e).length<t)throw new Error(""+this.i18n("youHaveToAtLeastSelectX",{smart_count:t}))},e.prototype._checkRestrictions=function(e){var t=this.opts.restrictions,n=t.maxFileSize,r=t.maxNumberOfFiles,o=t.allowedFileTypes;if(r&&Object.keys(this.getState().files).length+1>r)throw new Error(""+this.i18n("youCanOnlyUploadX",{smart_count:r}));if(o&&!(o.filter(function(t){return t.indexOf("/")>-1?!!e.type&&_$mimeMatch_44(e.type,t):"."===t[0]&&e.extension===t.substr(1)?e.extension:void 0}).length>0)){var i=o.join(", ");throw new Error(this.i18n("youCanOnlyUploadFileTypes")+" "+i)}if(n&&e.data.size>n)throw new Error(this.i18n("exceedsSize")+" "+_$prettierBytes_50(n))},e.prototype.addFile=function(e){var t,n=this,r=this.getState(),o=r.files,i=function(e){var t="object"===(void 0===e?"undefined":___typeof_96(e))?e:new Error(e);throw n.log(t.message),n.info(t.message,"error",5e3),t};!1===r.allowNewUpload&&i(new Error("Cannot add new files: already uploading."));var s=this.opts.onBeforeFileAdded(e,o);if(!1!==s){if("object"===(void 0===s?"undefined":___typeof_96(s))&&s){if(s.then)throw new TypeError("onBeforeFileAdded() returned a Promise, but this is no longer supported. It must be synchronous.");e=s}var a,u=_$getFileType_162(e);a=e.name?e.name:"image"===u.split("/")[0]?u.split("/")[0]+"."+u.split("/")[1]:"noname";var l=_$getFileNameAndExtension_161(a).extension,c=e.isRemote||!1,p=_$generateFileID_159(e),h=e.meta||{};h.name=a,h.type=u;var d={source:e.source||"",id:p,name:a,extension:l||"",meta:___extends_96({},this.getState().meta,h),type:u,data:e.data,progress:{percentage:0,bytesUploaded:0,bytesTotal:e.data.size||0,uploadComplete:!1,uploadStarted:!1},size:e.data.size||0,isRemote:c,remote:e.remote||"",preview:e.preview};try{this._checkRestrictions(d)}catch(e){i(e)}this.setState({files:___extends_96({},o,(t={},t[p]=d,t))}),this.emit("file-added",d),this.log("Added file: "+a+", "+p+", mime type: "+u),this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(function(){n.scheduledAutoProceed=null,n.upload()["catch"](function(e){console.error(e.stack||e.message||e)})},4))}else this.log("Not adding file because onBeforeFileAdded returned false")},e.prototype.removeFile=function(e){var t=this,n=this.getState(),r=n.files,o=n.currentUploads,i=___extends_96({},r),s=i[e];delete i[e];var a=___extends_96({},o),u=[];Object.keys(a).forEach(function(t){var n=o[t].fileIDs.filter(function(t){return t!==e});0!==n.length?a[t]=___extends_96({},o[t],{fileIDs:n}):u.push(t)}),this.setState({currentUploads:a,files:i}),u.forEach(function(e){t._removeUpload(e)}),this._calculateTotalProgress(),this.emit("file-removed",s),this.log("File removed: "+s.id)},e.prototype.pauseResume=function(e){if(this.getState().capabilities.resumableUploads&&!this.getFile(e).uploadComplete){var t=!this.getFile(e).isPaused;return this.setFileState(e,{isPaused:t}),this.emit("upload-pause",e,t),t}},e.prototype.pauseAll=function(){var e=___extends_96({},this.getState().files);Object.keys(e).filter(function(t){return!e[t].progress.uploadComplete&&e[t].progress.uploadStarted}).forEach(function(t){var n=___extends_96({},e[t],{isPaused:!0});e[t]=n}),this.setState({files:e}),this.emit("pause-all")},e.prototype.resumeAll=function(){var e=___extends_96({},this.getState().files);Object.keys(e).filter(function(t){return!e[t].progress.uploadComplete&&e[t].progress.uploadStarted}).forEach(function(t){var n=___extends_96({},e[t],{isPaused:!1,error:null});e[t]=n}),this.setState({files:e}),this.emit("resume-all")},e.prototype.retryAll=function(){var e=___extends_96({},this.getState().files),t=Object.keys(e).filter(function(t){return e[t].error});t.forEach(function(t){var n=___extends_96({},e[t],{isPaused:!1,error:null});e[t]=n}),this.setState({files:e,error:null}),this.emit("retry-all",t);var n=this._createUpload(t);return this._runUpload(n)},e.prototype.cancelAll=function(){var e=this;this.emit("cancel-all"),Object.keys(this.getState().files).forEach(function(t){e.removeFile(t)}),this.setState({allowNewUpload:!0,totalProgress:0,error:null})},e.prototype.retryUpload=function(e){var t=___extends_96({},this.getState().files),n=___extends_96({},t[e],{error:null,isPaused:!1});t[e]=n,this.setState({files:t}),this.emit("upload-retry",e);var r=this._createUpload([e]);return this._runUpload(r)},e.prototype.reset=function(){this.cancelAll()},e.prototype._calculateProgress=function(e,t){this.getFile(e.id)?(this.setFileState(e.id,{progress:___extends_96({},this.getFile(e.id).progress,{bytesUploaded:t.bytesUploaded,bytesTotal:t.bytesTotal,percentage:Math.floor((t.bytesUploaded/t.bytesTotal*100).toFixed(2))})}),this._calculateTotalProgress()):this.log("Not setting progress for a file that has been removed: "+e.id)},e.prototype._calculateTotalProgress=function(){var e=this.getFiles().filter(function(e){return e.progress.uploadStarted});if(0===e.length)return this.emit("progress",0),void this.setState({totalProgress:0});var t=e.filter(function(e){return null!=e.progress.bytesTotal}),n=e.filter(function(e){return null==e.progress.bytesTotal});if(0!==t.length){var r=t.reduce(function(e,t){return e+t.progress.bytesTotal},0),o=r/t.length;r+=o*n.length;var i=0;t.forEach(function(e){i+=e.progress.bytesUploaded}),n.forEach(function(e){i+=o*(e.progress.percentage||0)});var s=0===r?0:Math.round(i/r*100);this.setState({totalProgress:s}),this.emit("progress",s)}else{var a=e.length,u=n.reduce(function(e,t){return e+t.progress.percentage},0),l=Math.round(u/a*100);this.setState({totalProgress:l})}},e.prototype._addListeners=function(){var e=this;this.on("error",function(t){e.setState({error:t.message})}),this.on("upload-error",function(t,n,r){e.setFileState(t.id,{error:n.message,response:r}),e.setState({error:n.message});var o=e.i18n("failedToUpload",{file:t.name});"object"===(void 0===n?"undefined":___typeof_96(n))&&n.message&&(o={message:o,details:n.message}),e.info(o,"error",5e3)}),this.on("upload",function(){e.setState({error:null})}),this.on("upload-started",function(t,n){e.getFile(t.id)?e.setFileState(t.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0,bytesTotal:t.size}}):e.log("Not setting progress for a file that has been removed: "+t.id)}),this.on("upload-progress",this._calculateProgress),this.on("upload-success",function(t,n){var r=e.getFile(t.id).progress;e.setFileState(t.id,{progress:___extends_96({},r,{uploadComplete:!0,percentage:100,bytesUploaded:r.bytesTotal}),response:n,uploadURL:n.uploadURL,isPaused:!1}),e._calculateTotalProgress()}),this.on("preprocess-progress",function(t,n){e.getFile(t.id)?e.setFileState(t.id,{progress:___extends_96({},e.getFile(t.id).progress,{preprocess:n})}):e.log("Not setting progress for a file that has been removed: "+t.id)}),this.on("preprocess-complete",function(t){if(e.getFile(t.id)){var n=___extends_96({},e.getState().files);n[t.id]=___extends_96({},n[t.id],{progress:___extends_96({},n[t.id].progress)}),delete n[t.id].progress.preprocess,e.setState({files:n})}else e.log("Not setting progress for a file that has been removed: "+t.id)}),this.on("postprocess-progress",function(t,n){e.getFile(t.id)?e.setFileState(t.id,{progress:___extends_96({},e.getState().files[t.id].progress,{postprocess:n})}):e.log("Not setting progress for a file that has been removed: "+t.id)}),this.on("postprocess-complete",function(t){if(e.getFile(t.id)){var n=___extends_96({},e.getState().files);n[t.id]=___extends_96({},n[t.id],{progress:___extends_96({},n[t.id].progress)}),delete n[t.id].progress.postprocess,e.setState({files:n})}else e.log("Not setting progress for a file that has been removed: "+t.id)}),this.on("restored",function(){e._calculateTotalProgress()}),"undefined"!=typeof window&&window.addEventListener&&(window.addEventListener("online",function(){return e.updateOnlineStatus()}),window.addEventListener("offline",function(){return e.updateOnlineStatus()}),setTimeout(function(){return e.updateOnlineStatus()},3e3))},e.prototype.updateOnlineStatus=function(){void 0===window.navigator.onLine||window.navigator.onLine?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)},e.prototype.getID=function(){return this.opts.id},e.prototype.use=function(e,t){if("function"!=typeof e){var n="Expected a plugin class, but got "+(null===e?"null":void 0===e?"undefined":___typeof_96(e))+". Please verify that the plugin was imported and spelled correctly.";throw new TypeError(n)}var r=new e(this,t),o=r.id;if(this.plugins[r.type]=this.plugins[r.type]||[],!o)throw new Error("Your plugin must have an id");if(!r.type)throw new Error("Your plugin must have a type");var i=this.getPlugin(o);if(i){var s="Already found a plugin named '"+i.id+"'. Tried to use: '"+o+"'.\nUppy plugins must have unique 'id' options. See https://uppy.io/docs/plugins/#id.";throw new Error(s)}return this.plugins[r.type].push(r),r.install(),this},e.prototype.getPlugin=function(e){var t=null;return this.iteratePlugins(function(n){if(n.id===e)return t=n,!1}),t},e.prototype.iteratePlugins=function(e){var t=this;Object.keys(this.plugins).forEach(function(n){t.plugins[n].forEach(e)})},e.prototype.removePlugin=function(e){this.log("Removing plugin "+e.id),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();var t=this.plugins[e.type].slice(),n=t.indexOf(e);-1!==n&&(t.splice(n,1),this.plugins[e.type]=t);var r=this.getState();delete r.plugins[e.id],this.setState(r)},e.prototype.close=function(){var e=this;this.log("Closing Uppy instance "+this.opts.id+": removing all files and uninstalling plugins"),this.reset(),this._storeUnsubscribe(),this.iteratePlugins(function(t){e.removePlugin(t)})},e.prototype.info=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,r="object"===(void 0===e?"undefined":___typeof_96(e));this.setState({info:{isHidden:!1,type:t,message:r?e.message:e,details:r?e.details:null}}),this.emit("info-visible"),clearTimeout(this.infoTimeoutID),this.infoTimeoutID=0!==n?setTimeout(this.hideInfo,n):void 0},e.prototype.hideInfo=function(){var e=___extends_96({},this.getState().info,{isHidden:!0});this.setState({info:e}),this.emit("info-hidden")},e.prototype.log=function(e,t){if(this.opts.debug){var n="[Uppy] ["+_$getTimeStamp_166()+"] "+e;window.uppyLog=window.uppyLog+"\nDEBUG LOG: "+e,"error"!==t?"warning"!==t?e===""+e?console.log(n):(n="[Uppy] ["+_$getTimeStamp_166()+"]",console.log(n),console.dir(e)):console.warn(n):console.error(n)}},e.prototype.run=function(){return this.log("Calling run() is no longer necessary.","warning"),this},e.prototype.restore=function(e){return this.log('Core: attempting to restore upload "'+e+'"'),this.getState().currentUploads[e]?this._runUpload(e):(this._removeUpload(e),Promise.reject(new Error("Nonexistent upload")))},e.prototype._createUpload=function(e){var t,n=this.getState(),r=n.allowNewUpload,o=n.currentUploads;if(!r)throw new Error("Cannot create a new upload: already uploading.");var i=_$cuid_13();return this.emit("upload",{id:i,fileIDs:e}),this.setState({allowNewUpload:!1!==this.opts.allowMultipleUploads,currentUploads:___extends_96({},o,(t={},t[i]={fileIDs:e,step:0,result:{}},t))}),i},e.prototype._getUpload=function(e){return this.getState().currentUploads[e]},e.prototype.addResultData=function(e,t){var n;if(this._getUpload(e)){var r=this.getState().currentUploads,o=___extends_96({},r[e],{result:___extends_96({},r[e].result,t)});this.setState({currentUploads:___extends_96({},r,(n={},n[e]=o,n))})}else this.log("Not setting result for an upload that has been removed: "+e)},e.prototype._removeUpload=function(e){var t=___extends_96({},this.getState().currentUploads);delete t[e],this.setState({currentUploads:t})},e.prototype._runUpload=function(e){var t=this,n=this.getState().currentUploads[e].step,r=[].concat(this.preProcessors,this.uploaders,this.postProcessors),o=Promise.resolve();return r.forEach(function(r,i){i<n||(o=o.then(function(){var n,o=t.getState().currentUploads,s=___extends_96({},o[e],{step:i});return t.setState({currentUploads:___extends_96({},o,(n={},n[e]=s,n))}),r(s.fileIDs,e)}).then(function(e){return null}))}),o["catch"](function(n){t.emit("error",n,e),t._removeUpload(e)}),o.then(function(){var n=t.getState().currentUploads[e];if(n){var r=n.fileIDs.map(function(e){return t.getFile(e)}),o=r.filter(function(e){return!e.error}),i=r.filter(function(e){return e.error});t.addResultData(e,{successful:o,failed:i,uploadID:e})}else t.log("Not setting result for an upload that has been removed: "+e)}).then(function(){var n=t.getState().currentUploads;if(n[e]){var r=n[e].result;return t.emit("complete",r),t._removeUpload(e),r}t.log("Not setting result for an upload that has been canceled: "+e)})},e.prototype.upload=function(){var e=this;this.plugins.uploader||this.log("No uploader type plugins are used","warning");var t=this.getState().files,n=this.opts.onBeforeUpload(t);if(!1===n)return Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false"));if(n&&"object"===(void 0===n?"undefined":___typeof_96(n))){if(n.then)throw new TypeError("onBeforeUpload() returned a Promise, but this is no longer supported. It must be synchronous.");t=n}return Promise.resolve().then(function(){return e._checkMinNumberOfFiles(t)}).then(function(){var n=e.getState().currentUploads,r=Object.keys(n).reduce(function(e,t){return e.concat(n[t].fileIDs)},[]),o=[];Object.keys(t).forEach(function(t){var n=e.getFile(t);n.progress.uploadStarted||-1!==r.indexOf(t)||o.push(n.id)});var i=e._createUpload(o);return e._runUpload(i)})["catch"](function(t){var n="object"===(void 0===t?"undefined":___typeof_96(t))?t.message:t,r="object"===(void 0===t?"undefined":___typeof_96(t))?t.details:null;return e.log(n+" "+r),e.info({message:n,details:r},"error",4e3),Promise.reject("object"===(void 0===t?"undefined":___typeof_96(t))?t:new Error(t))})},___createClass_96(e,[{key:"state",get:function(){return this.getState()}}]),e}();_$lib_96=function(e){return new Uppy(e)},_$lib_96.Uppy=Uppy,_$lib_96.Plugin=_$Plugin_95;var _$lodashThrottle_43={};(function(e){function t(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function n(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&f.call(e)==i}(e))return o;if(t(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=t(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var r=u.test(e);return r||l.test(e)?c(e.slice(2),r?2:8):a.test(e)?o:+e}var r="Expected a function",o=NaN,i="[object Symbol]",s=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,p="object"==typeof e&&e&&e.Object===Object&&e,h="object"==typeof self&&self&&self.Object===Object&&self,d=p||h||Function("return this")(),f=Object.prototype.toString,_=Math.max,m=Math.min,g=function(){return d.Date.now()};_$lodashThrottle_43=function(e,o,i){var s=!0,a=!0;if("function"!=typeof e)throw new TypeError(r);return t(i)&&(s="leading"in i?!!i.leading:s,a="trailing"in i?!!i.trailing:a),function(e,o,i){function s(t){var n=p,r=h;return p=h=void 0,b=t,f=e.apply(r,n)}function a(e){var t=e-v;return void 0===v||t>=o||t<0||C&&e-b>=d}function u(){var e=g();return a(e)?l(e):void(y=setTimeout(u,function(e){var t=o-(e-v);return C?m(t,d-(e-b)):t}(e)))}function l(e){return y=void 0,S&&p?s(e):(p=h=void 0,f)}function c(){var e=g(),t=a(e);if(p=arguments,h=this,v=e,t){if(void 0===y)return function(e){return b=e,y=setTimeout(u,o),w?s(e):f}(v);if(C)return y=setTimeout(u,o),s(v)}return void 0===y&&(y=setTimeout(u,o)),f}var p,h,d,f,y,v,b=0,w=!1,C=!1,S=!0;if("function"!=typeof e)throw new TypeError(r);return o=n(o)||0,t(i)&&(w=!!i.leading,d=(C="maxWait"in i)?_(n(i.maxWait)||0,o):d,S="trailing"in i?!!i.trailing:S),c.cancel=function(){void 0!==y&&clearTimeout(y),b=0,p=v=h=y=void 0},c.flush=function(){return void 0===y?f:l(g())},c}(e,o,{leading:s,maxWait:o,trailing:a})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var _$emitSocketProgress_156=_$lodashThrottle_43(function(e,t,n){var r=t.progress,o=t.bytesUploaded,i=t.bytesTotal;r&&(e.uppy.log("Upload progress: "+r),e.uppy.emit("upload-progress",n,{uploader:e,bytesUploaded:o,bytesTotal:i}))},300,{leading:!0,trailing:!0}),_$getSocketHost_164=function(e){var t=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?(?:www\.)?([^\n]+)/.exec(e)[1];return("https:"===location.protocol?"wss":"ws")+"://"+t},_$limitPromises_171=function(e){function t(){n--;var e=r.shift();e&&e()}var n=0,r=[];return function(o){return function(){for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];var u=function(){n++;var e=o.apply(void 0,s);return e.then(t,t),e};return n>=e?new Promise(function(e,t){r.push(function(){u().then(e,t)})}):u()}}},___extends_89=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__Plugin_89=_$lib_96.Plugin,__dummy_89$0=0,__Socket_89=_$lib_94.Socket,__RequestClient_89=_$lib_94.RequestClient,__dummy_89$1=0,__dummy_89$2=0,__dummy_89$3=0,__dummy_89$4=0,_$lib_89=function(e){function t(n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));o.type="uploader",o.id="AwsS3Multipart",o.title="AWS S3 Multipart",o.client=new __RequestClient_89(n,r);var i={timeout:3e4,limit:0,createMultipartUpload:o.createMultipartUpload.bind(o),listParts:o.listParts.bind(o),prepareUploadPart:o.prepareUploadPart.bind(o),abortMultipartUpload:o.abortMultipartUpload.bind(o),completeMultipartUpload:o.completeMultipartUpload.bind(o)};return o.opts=___extends_89({},i,r),o.upload=o.upload.bind(o),"number"==typeof o.opts.limit&&0!==o.opts.limit?o.limitRequests=_$limitPromises_171(o.opts.limit):o.limitRequests=function(e){return e},o.uploaders=Object.create(null),o.uploaderEvents=Object.create(null),o.uploaderSockets=Object.create(null),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.resetUploaderReferences=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.uploaders[e]&&(this.uploaders[e].abort({really:t.abort||!1}),this.uploaders[e]=null),this.uploaderEvents[e]&&(this.uploaderEvents[e].remove(),this.uploaderEvents[e]=null),this.uploaderSockets[e]&&(this.uploaderSockets[e].close(),this.uploaderSockets[e]=null)},t.prototype.assertHost=function(){if(!this.opts.serverUrl)throw new Error("Expected a `serverUrl` option containing a Companion address.")},t.prototype.createMultipartUpload=function(e){return this.assertHost(),this.client.post("s3/multipart",{filename:e.name,type:e.type}).then(assertServerError)},t.prototype.listParts=function(e,t){var n=t.key,r=t.uploadId;this.assertHost();var o=encodeURIComponent(n);return this.client.get("s3/multipart/"+r+"?key="+o).then(assertServerError)},t.prototype.prepareUploadPart=function(e,t){var n=t.key,r=t.uploadId,o=t.number;this.assertHost();var i=encodeURIComponent(n);return this.client.get("s3/multipart/"+r+"/"+o+"?key="+i).then(assertServerError)},t.prototype.completeMultipartUpload=function(e,t){var n=t.key,r=t.uploadId,o=t.parts;this.assertHost();var i=encodeURIComponent(n),s=encodeURIComponent(r);return this.client.post("s3/multipart/"+s+"/complete?key="+i,{parts:o}).then(assertServerError)},t.prototype.abortMultipartUpload=function(e,t){var n=t.key,r=t.uploadId;this.assertHost();var o=encodeURIComponent(n),i=encodeURIComponent(r);return this.client["delete"]("s3/multipart/"+i+"?key="+o).then(assertServerError)},t.prototype.uploadFile=function(e){var t=this;return new Promise(function(n,r){var o=new _$MultipartUploader_88(e.data,___extends_89({createMultipartUpload:t.limitRequests(t.opts.createMultipartUpload.bind(t,e)),listParts:t.limitRequests(t.opts.listParts.bind(t,e)),prepareUploadPart:t.opts.prepareUploadPart.bind(t,e),completeMultipartUpload:t.limitRequests(t.opts.completeMultipartUpload.bind(t,e)),abortMultipartUpload:t.limitRequests(t.opts.abortMultipartUpload.bind(t,e)),limit:t.opts.limit||5,onStart:function(n){var r=t.uppy.getFile(e.id);t.uppy.setFileState(e.id,{s3Multipart:___extends_89({},r.s3Multipart,{key:n.key,uploadId:n.uploadId,parts:[]})})},onProgress:function(n,r){t.uppy.emit("upload-progress",e,{uploader:t,bytesUploaded:n,bytesTotal:r})},onError:function(n){t.uppy.log(n),t.uppy.emit("upload-error",e,n),n.message="Failed because: "+n.message,t.resetUploaderReferences(e.id),r(n)},onSuccess:function(r){var i={uploadURL:r.location};t.uppy.emit("upload-success",e,i),r.location&&t.uppy.log("Download "+o.file.name+" from "+r.location),t.resetUploaderReferences(e.id),n(o)},onPartComplete:function(n){var r=t.uppy.getFile(e.id);r&&(t.uppy.setFileState(e.id,{s3Multipart:___extends_89({},r.s3Multipart,{parts:[].concat(r.s3Multipart.parts,[n])})}),t.uppy.emit("s3-multipart:part-uploaded",r,n))}},e.s3Multipart));t.uploaders[e.id]=o,t.uploaderEvents[e.id]=createEventTracker(t.uppy),t.onFileRemove(e.id,function(r){t.resetUploaderReferences(e.id,{abort:!0}),n("upload "+r.id+" was removed")}),t.onFilePause(e.id,function(e){e?o.pause():o.start()}),t.onPauseAll(e.id,function(){o.pause()}),t.onResumeAll(e.id,function(){o.start()}),e.isPaused||o.start(),e.isRestored||t.uppy.emit("upload-started",e,o)})},t.prototype.uploadRemote=function(e){var t=this;return this.resetUploaderReferences(e.id),new Promise(function(n,r){return e.serverToken?t.connectToServerSocket(e).then(function(){return n()})["catch"](r):(t.uppy.emit("upload-started",e),void fetch(e.remote.url,{method:"post",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(___extends_89({},e.remote.body,{protocol:"s3-multipart",size:e.data.size,metadata:e.meta}))}).then(function(n){return n.status<200||n.status>300?r(n.statusText):n.json().then(function(n){return t.uppy.setFileState(e.id,{serverToken:n.token}),t.uppy.getFile(e.id)})}).then(function(e){return t.connectToServerSocket(e)}).then(function(){n()})["catch"](function(e){r(new Error(e))}))})},t.prototype.connectToServerSocket=function(e){var t=this;return new Promise(function(n,r){var o=e.serverToken,i=_$getSocketHost_164(e.remote.serverUrl),s=new __Socket_89({target:i+"/api/"+o});t.uploaderSockets[s]=s,t.uploaderEvents[e.id]=createEventTracker(t.uppy),t.onFileRemove(e.id,function(r){t.resetUploaderReferences(e.id,{abort:!0}),n("upload "+e.id+" was removed")}),t.onFilePause(e.id,function(e){s.send(e?"pause":"resume",{})}),t.onPauseAll(e.id,function(){return s.send("pause",{})}),t.onResumeAll(e.id,function(){e.error&&s.send("pause",{}),s.send("resume",{})}),t.onRetry(e.id,function(){s.send("pause",{}),s.send("resume",{})}),t.onRetryAll(e.id,function(){s.send("pause",{}),s.send("resume",{})}),e.isPaused&&s.send("pause",{}),s.on("progress",function(n){return _$emitSocketProgress_156(t,n,e)}),s.on("error",function(n){t.uppy.emit("upload-error",e,new Error(n.error)),r(new Error(n.error))}),s.on("success",function(r){var o={uploadURL:r.url};t.uppy.emit("upload-success",e,o),n()})})},t.prototype.upload=function(e){var t=this;if(0===e.length)return Promise.resolve();var n=e.map(function(e){var n=t.uppy.getFile(e);return n.isRemote?t.uploadRemote(n):t.uploadFile(n)});return Promise.all(n)},t.prototype.onFileRemove=function(e,t){this.uploaderEvents[e].on("file-removed",function(n){e===n.id&&t(n.id)})},t.prototype.onFilePause=function(e,t){this.uploaderEvents[e].on("upload-pause",function(n,r){e===n&&t(r)})},t.prototype.onRetry=function(e,t){this.uploaderEvents[e].on("upload-retry",function(n){e===n&&t()})},t.prototype.onRetryAll=function(e,t){var n=this;this.uploaderEvents[e].on("retry-all",function(r){n.uppy.getFile(e)&&t()})},t.prototype.onPauseAll=function(e,t){var n=this;this.uploaderEvents[e].on("pause-all",function(){n.uppy.getFile(e)&&t()})},t.prototype.onResumeAll=function(e,t){var n=this;this.uploaderEvents[e].on("resume-all",function(){n.uppy.getFile(e)&&t()})},t.prototype.install=function(){var e=this,t=this.uppy.getState().capabilities;this.uppy.setState({capabilities:___extends_89({},t,{resumableUploads:!0})}),this.uppy.addUploader(this.upload),this.uppy.on("cancel-all",function(){e.uppy.getFiles().forEach(function(t){e.resetUploaderReferences(t.id,{abort:!0})})})},t.prototype.uninstall=function(){this.uppy.setState({capabilities:___extends_89({},this.uppy.getState().capabilities,{resumableUploads:!1})}),this.uppy.removeUploader(this.upload)},t}(__Plugin_89),_$resolveUrl_55={},root,__factory_55;root=this,__factory_55=function(){return function(){var e=arguments.length;if(0===e)throw new Error("resolveUrl requires at least one argument; got none.");var t=document.createElement("base");if(t.href=arguments[0],1===e)return t.href;var n=document.getElementsByTagName("head")[0];n.insertBefore(t,n.firstChild);for(var r,o=document.createElement("a"),i=1;i<e;i++)o.href=arguments[i],r=o.href,t.href=r;return n.removeChild(t),r}},"function"==typeof define&&define.amd?define(__factory_55):"object"==typeof _$resolveUrl_55?_$resolveUrl_55=__factory_55():root.resolveUrl=__factory_55();
var _$settle_175=function(e){function t(e){r.push(e)}function n(e){o.push(e)}var r=[],o=[];return Promise.all(e.map(function(e){return e.then(t,n)})).then(function(){return{successful:r,failed:o}})},___extends_184=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__Plugin_184=_$lib_96.Plugin,__dummy_184$0=0,__dummy_184$1=0,__dummy_184$2=0,__Provider_184=_$lib_94.Provider,__Socket_184=_$lib_94.Socket,__dummy_184$3=0,__dummy_184$4=0,__dummy_184$5=0,__dummy_184$6=0,_$lib_184=function(e){function t(n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));o.type="uploader",o.id="XHRUpload",o.title="XHRUpload";var i={strings:{timedOut:"Upload stalled for %{seconds} seconds, aborting."}},s={formData:!0,fieldName:"files[]",method:"post",metaFields:null,responseUrlFieldName:"url",bundle:!1,headers:{},locale:i,timeout:3e4,limit:0,withCredentials:!1,responseType:"",getResponseData:function(e,t){var n={};try{n=JSON.parse(e)}catch(e){console.log(e)}return n},getResponseError:function(e,t){return new Error("Upload error")}};if(o.opts=___extends_184({},s,r),o.translator=new _$Translator_153([i,o.uppy.locale,o.opts.locale]),o.i18n=o.translator.translate.bind(o.translator),o.i18nArray=o.translator.translateArray.bind(o.translator),o.handleUpload=o.handleUpload.bind(o),"number"==typeof o.opts.limit&&0!==o.opts.limit?o.limitUploads=_$limitPromises_171(o.opts.limit):o.limitUploads=function(e){return e},o.opts.bundle&&!o.opts.formData)throw new Error("`opts.formData` must be true when `opts.bundle` is enabled.");return o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getOptions=function(e){var t=this.uppy.getState().xhrUpload,n=___extends_184({},this.opts,t||{},e.xhrUpload||{});return n.headers={},___extends_184(n.headers,this.opts.headers),t&&___extends_184(n.headers,t.headers),e.xhrUpload&&___extends_184(n.headers,e.xhrUpload.headers),n},t.prototype.createProgressTimeout=function(e,t){function n(){r.log("[XHRUpload] timed out");var n=new Error(o.i18n("timedOut",{seconds:Math.ceil(e/1e3)}));t(n)}var r=this.uppy,o=this,i=!1,s=null;return{progress:function(){i||e>0&&(s&&clearTimeout(s),s=setTimeout(n,e))},done:function(){r.log("[XHRUpload] timer done"),s&&(clearTimeout(s),s=null),i=!0}}},t.prototype.createFormDataUpload=function(e,t){var n=new FormData;return(Array.isArray(t.metaFields)?t.metaFields:Object.keys(e.meta)).forEach(function(t){n.append(t,e.meta[t])}),e.name?n.append(t.fieldName,e.data,e.name):n.append(t.fieldName,e.data),n},t.prototype.createBareUpload=function(e,t){return e.data},t.prototype.upload=function(e,t,n){var r=this,o=this.getOptions(e);return this.uppy.log("uploading "+t+" of "+n),new Promise(function(t,n){var i=o.formData?r.createFormDataUpload(e,o):r.createBareUpload(e,o),s=r.createProgressTimeout(o.timeout,function(t){a.abort(),r.uppy.emit("upload-error",e,t),n(t)}),a=new XMLHttpRequest,u=_$cuid_13();a.upload.addEventListener("loadstart",function(e){r.uppy.log("[XHRUpload] "+u+" started")}),a.upload.addEventListener("progress",function(t){r.uppy.log("[XHRUpload] "+u+" progress: "+t.loaded+" / "+t.total),s.progress(),t.lengthComputable&&r.uppy.emit("upload-progress",e,{uploader:r,bytesUploaded:t.loaded,bytesTotal:t.total})}),a.addEventListener("load",function(i){if(r.uppy.log("[XHRUpload] "+u+" finished"),s.done(),i.target.status>=200&&i.target.status<300){var l=o.getResponseData(a.responseText,a),c=l[o.responseUrlFieldName],p={status:i.target.status,body:l,uploadURL:c};return r.uppy.emit("upload-success",e,p),c&&r.uppy.log("Download "+e.name+" from "+e.uploadURL),t(e)}var h=o.getResponseData(a.responseText,a),d=buildResponseError(a,o.getResponseError(a.responseText,a)),f={status:i.target.status,body:h};return r.uppy.emit("upload-error",e,d,f),n(d)}),a.addEventListener("error",function(t){r.uppy.log("[XHRUpload] "+u+" errored"),s.done();var i=buildResponseError(a,o.getResponseError(a.responseText,a));return r.uppy.emit("upload-error",e,i),n(i)}),a.open(o.method.toUpperCase(),o.endpoint,!0),a.withCredentials=o.withCredentials,""!==o.responseType&&(a.responseType=o.responseType),Object.keys(o.headers).forEach(function(e){a.setRequestHeader(e,o.headers[e])}),a.send(i),r.uppy.on("file-removed",function(t){t.id===e.id&&(s.done(),a.abort())}),r.uppy.on("cancel-all",function(){s.done(),a.abort()})})},t.prototype.uploadRemote=function(e,t,n){var r=this,o=this.getOptions(e);return new Promise(function(t,n){var i={};(Array.isArray(o.metaFields)?o.metaFields:Object.keys(e.meta)).forEach(function(t){i[t]=e.meta[t]}),new __Provider_184(r.uppy,e.remote.providerOptions).post(e.remote.url,___extends_184({},e.remote.body,{endpoint:o.endpoint,size:e.data.size,fieldname:o.fieldName,metadata:i,headers:o.headers})).then(function(i){var s=i.token,a=_$getSocketHost_164(e.remote.serverUrl),u=new __Socket_184({target:a+"/api/"+s});u.on("progress",function(t){return _$emitSocketProgress_156(r,t,e)}),u.on("success",function(n){var i=o.getResponseData(n.response.responseText,n.response),s=i[o.responseUrlFieldName],a={status:n.response.status,body:i,uploadURL:s};return r.uppy.emit("upload-success",e,a),u.close(),t()}),u.on("error",function(t){var i=t.response,s=i?o.getResponseError(i.responseText,i):___extends_184(new Error(t.error.message),{cause:t.error});r.uppy.emit("upload-error",e,s),n(s)})})})},t.prototype.uploadBundle=function(e){var t=this;return new Promise(function(n,r){var o=t.opts.endpoint,i=t.opts.method,s=new FormData;e.forEach(function(e,n){var r=t.getOptions(e);s.append(r.fieldName,e.data)});var a=new XMLHttpRequest,u=t.createProgressTimeout(t.opts.timeout,function(e){a.abort(),l(e),r(e)}),l=function(n){e.forEach(function(e){t.uppy.emit("upload-error",e,n)})};a.upload.addEventListener("loadstart",function(e){t.uppy.log("[XHRUpload] started uploading bundle"),u.progress()}),a.upload.addEventListener("progress",function(n){u.progress(),n.lengthComputable&&e.forEach(function(e){t.uppy.emit("upload-progress",e,{uploader:t,bytesUploaded:n.loaded/n.total*e.size,bytesTotal:e.size})})}),a.addEventListener("load",function(o){if(u.done(),o.target.status>=200&&o.target.status<300){var i=t.opts.getResponseData(a.responseText,a),s={status:o.target.status,body:i};return e.forEach(function(e){t.uppy.emit("upload-success",e,s)}),n()}var c=t.opts.getResponseError(a.responseText,a)||new Error("Upload error");return c.request=a,l(c),r(c)}),a.addEventListener("error",function(e){u.done();var n=t.opts.getResponseError(a.responseText,a)||new Error("Upload error");return l(n),r(n)}),t.uppy.on("cancel-all",function(){u.done(),a.abort()}),a.open(i.toUpperCase(),o,!0),a.withCredentials=t.opts.withCredentials,""!==t.opts.responseType&&(a.responseType=t.opts.responseType),Object.keys(t.opts.headers).forEach(function(e){a.setRequestHeader(e,t.opts.headers[e])}),a.send(s),e.forEach(function(e){t.uppy.emit("upload-started",e)})})},t.prototype.uploadFiles=function(e){var t=this,n=e.map(function(n,r){var o=parseInt(r,10)+1,i=e.length;return n.error?function(){return Promise.reject(new Error(n.error))}:n.isRemote?(t.uppy.emit("upload-started",n),t.uploadRemote.bind(t,n,o,i)):(t.uppy.emit("upload-started",n),t.upload.bind(t,n,o,i))}).map(function(e){return t.limitUploads(e)()});return _$settle_175(n)},t.prototype.handleUpload=function(e){var t=this;if(0===e.length)return this.uppy.log("[XHRUpload] No files to upload!"),Promise.resolve();this.uppy.log("[XHRUpload] Uploading...");var n=e.map(function(e){return t.uppy.getFile(e)});return this.opts.bundle?this.uploadBundle(n):this.uploadFiles(n).then(function(){return null})},t.prototype.install=function(){this.opts.bundle&&this.uppy.setState({capabilities:___extends_184({},this.uppy.getState().capabilities,{bundled:!0})}),this.uppy.addUploader(this.handleUpload)},t.prototype.uninstall=function(){this.opts.bundle&&this.uppy.setState({capabilities:___extends_184({},this.uppy.getState().capabilities,{bundled:!0})}),this.uppy.removeUploader(this.handleUpload)},t}(__Plugin_184),___typeof_90="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},___extends_90=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__dummy_90$0=0,__Plugin_90=_$lib_96.Plugin,__dummy_90$1=0,__dummy_90$2=0,__RequestClient_90=_$lib_94.RequestClient,__dummy_90$3=0,_$lib_90=function(e){function t(n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));o.type="uploader",o.id="AwsS3",o.title="AWS S3";var i={strings:{preparingUpload:"Preparing upload..."}},s={timeout:3e4,limit:0,getUploadParameters:o.getUploadParameters.bind(o),locale:i};return o.opts=___extends_90({},s,r),o.translator=new _$Translator_153([i,o.uppy.locale,o.opts.locale]),o.i18n=o.translator.translate.bind(o.translator),o.i18nArray=o.translator.translateArray.bind(o.translator),o.client=new __RequestClient_90(n,r),o.prepareUpload=o.prepareUpload.bind(o),"number"==typeof o.opts.limit&&0!==o.opts.limit?o.limitRequests=_$limitPromises_171(o.opts.limit):o.limitRequests=function(e){return e},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getUploadParameters=function(e){if(!this.opts.serverUrl)throw new Error("Expected a `serverUrl` option containing a Companion address.");var t=encodeURIComponent(e.meta.name),n=encodeURIComponent(e.meta.type);return this.client.get("s3/params?filename="+t+"&type="+n).then(__assertServerError_90)},t.prototype.validateParameters=function(e,t){if("object"!==(void 0===t?"undefined":___typeof_90(t))||!t||"string"!=typeof t.url||"object"!==___typeof_90(t.fields)&&null!=t.fields||null!=t.method&&!/^(put|post)$/i.test(t.method)){var n=new TypeError("AwsS3: got incorrect result from 'getUploadParameters()' for file '"+e.name+"', expected an object '{ url, method, fields, headers }'.\nSee https://uppy.io/docs/aws-s3/#getUploadParameters-file for more on the expected format.");throw console.error(n),n}return t},t.prototype.prepareUpload=function(e){var t=this;e.forEach(function(e){var n=t.uppy.getFile(e);t.uppy.emit("preprocess-progress",n,{mode:"determinate",message:t.i18n("preparingUpload"),value:0})});var n=this.limitRequests(this.opts.getUploadParameters);return Promise.all(e.map(function(e){var r=t.uppy.getFile(e);return Promise.resolve().then(function(){return n(r)}).then(function(e){return t.validateParameters(r,e)}).then(function(e){return t.uppy.emit("preprocess-progress",r,{mode:"determinate",message:t.i18n("preparingUpload"),value:1}),e})["catch"](function(e){t.uppy.emit("upload-error",r,e)})})).then(function(n){var r={};e.forEach(function(e,o){var i=t.uppy.getFile(e);if(!i.error){var s=n[o],a=s.method,u=void 0===a?"post":a,l=s.url,c=s.fields,p=s.headers,h={method:u,formData:"post"===u.toLowerCase(),endpoint:l,metaFields:Object.keys(c)};p&&(h.headers=p);var d=___extends_90({},i,{meta:___extends_90({},i.meta,c),xhrUpload:h});r[e]=d}}),t.uppy.setState({files:___extends_90({},t.uppy.getState().files,r)}),e.forEach(function(e){var n=t.uppy.getFile(e);t.uppy.emit("preprocess-complete",n)})})},t.prototype.install=function(){var e=this.uppy.log;this.uppy.addPreProcessor(this.prepareUpload);var t=!1;this.uppy.use(_$lib_184,{fieldName:"file",responseUrlFieldName:"location",timeout:this.opts.timeout,limit:this.opts.limit,responseType:"text",getResponseData:function(n,r){return isXml(r)?{location:_$resolveUrl_55(r.responseURL,getXmlValue(n,"Location")),bucket:getXmlValue(n,"Bucket"),key:getXmlValue(n,"Key"),etag:getXmlValue(n,"ETag")}:"POST"===this.method.toUpperCase()?(t||(e("[AwsS3] No response data found, make sure to set the success_action_status AWS SDK option to 201. See https://uppy.io/docs/aws-s3/#POST-Uploads","warning"),t=!0),{location:null}):r.responseURL?{location:r.responseURL.replace(/\?.*$/,"")}:{location:null}},getResponseError:function(e,t){if(isXml(t)){var n=getXmlValue(e,"Message");return new Error(n)}}})},t.prototype.uninstall=function(){var e=this.uppy.getPlugin("XHRUpload");this.uppy.removePlugin(e),this.uppy.removePreProcessor(this.prepareUpload)},t}(__Plugin_90),_$flatten_36=function(e,t){return(t="number"==typeof t?t:1/0)?function n(e,r){return e.reduce(function(e,o){return Array.isArray(o)&&r<t?e.concat(n(o,r+1)):e.concat(o)},[])}(e,1):Array.isArray(e)?e.map(function(e){return e}):e},_$runParallel_56={};(function(e){_$runParallel_56=function(t,n){function r(t){function r(){n&&n(t,i),n=null}u?e.nextTick(r):r()}function o(e,t,n){i[e]=n,(0==--s||t)&&r(t)}var i,s,a,u=!0;Array.isArray(t)?(i=[],s=t.length):(a=Object.keys(t),i={},s=a.length),s?a?a.forEach(function(e){t[e](function(t,n){o(e,t,n)})}):t.forEach(function(e,t){e(function(e,n){o(t,e,n)})}):r(null),u=!1}}).call(this,_$browser_51);var _$dragDrop_17=function(e,t){function n(e){return t.onDragEnter&&t.onDragEnter(e),e.stopPropagation(),e.preventDefault(),!1}function r(n){if(n.stopPropagation(),n.preventDefault(),n.dataTransfer.items){var r=toArray(n.dataTransfer.items),o=r.filter(function(e){return"file"===e.kind}),i=r.filter(function(e){return"string"===e.kind});if(0===o.length&&!t.onDropText)return;if(0===i.length&&!t.onDrop)return;if(0===o.length&&0===i.length)return}return e.classList.add("drag"),clearTimeout(u),t.onDragOver&&t.onDragOver(n),n.dataTransfer.dropEffect="copy",!1}function o(e){return e.stopPropagation(),e.preventDefault(),t.onDragLeave&&t.onDragLeave(e),clearTimeout(u),u=setTimeout(s,50),!1}function i(e){e.stopPropagation(),e.preventDefault(),t.onDragLeave&&t.onDragLeave(e),clearTimeout(u),s();var n={x:e.clientX,y:e.clientY},r=e.dataTransfer.getData("text");if(r&&t.onDropText&&t.onDropText(r,n),e.dataTransfer.items){var o=toArray(e.dataTransfer.items).filter(function(e){return"file"===e.kind});if(0===o.length)return;_$runParallel_56(o.map(function(e){return function(t){!function(e,t){var n=[];if(e.isFile)e.file(function(n){n.fullPath=e.fullPath,t(null,n)},function(e){t(e)});else if(e.isDirectory){var r=e.createReader();!function o(){r.readEntries(function(e){e.length>0?(n=n.concat(toArray(e)),o()):_$runParallel_56(n.map(function(e){return function(t){processEntry(e,t)}}),t)})}()}}(e.webkitGetAsEntry(),t)}}),function(e,r){if(e)throw e;t.onDrop&&t.onDrop(_$flatten_36(r),n)})}else{var i=toArray(e.dataTransfer.files);if(0===i.length)return;i.forEach(function(e){e.fullPath="/"+e.name}),t.onDrop&&t.onDrop(i,n)}return!1}function s(){e.classList.remove("drag")}if("string"==typeof e){var a=e;if(!(e=window.document.querySelector(e)))throw new Error('"'+a+'" does not match any HTML elements')}if(!e)throw new Error('"'+e+'" is not a valid HTML element');var u;return"function"==typeof t&&(t={onDrop:t}),e.addEventListener("dragenter",n,!1),e.addEventListener("dragover",r,!1),e.addEventListener("dragleave",o,!1),e.addEventListener("drop",i,!1),function(){s(),e.removeEventListener("dragenter",n,!1),e.removeEventListener("dragover",r,!1),e.removeEventListener("dragleave",o,!1),e.removeEventListener("drop",i,!1)}},__dummy_17$0=0,__dummy_17$1=0,_$ResizeObserver_54={exports:{}};(function(e){!function(e,t){"object"==typeof _$ResizeObserver_54.exports?_$ResizeObserver_54.exports=t():"function"==typeof define&&define.amd?define(t):e.ResizeObserver=t()}(this,function(){function t(e){return parseFloat(e)||0}function n(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return n.reduce(function(n,r){return n+t(e["border-"+r+"-width"])},0)}function r(e){return s?g(e)?function(e){var t=e.getBBox();return o(0,0,t.width,t.height)}(e):function(e){var r=e.clientWidth,i=e.clientHeight;if(!r&&!i)return m;var s=_(e).getComputedStyle(e),a=function(e){for(var n={},r=0,o=["top","right","bottom","left"];r<o.length;r++){var i=o[r],s=e["padding-"+i];n[i]=t(s)}return n}(s),u=a.left+a.right,l=a.top+a.bottom,c=t(s.width),p=t(s.height);if("border-box"===s.boxSizing&&(Math.round(c+u)!==r&&(c-=n(s,"left","right")+u),Math.round(p+l)!==i&&(p-=n(s,"top","bottom")+l)),!function(e){return e===_(e).document.documentElement}(e)){var h=Math.round(c+u)-r,d=Math.round(p+l)-i;1!==Math.abs(h)&&(c-=h),1!==Math.abs(d)&&(p-=d)}return o(a.left,a.top,c,p)}(e):m}function o(e,t,n,r){return{x:e,y:t,width:n,height:r}}var i=function(){function e(e,t){var n=-1;return e.some(function(e,r){return e[0]===t&&(n=r,!0)}),n}return"undefined"!=typeof Map?Map:function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype["delete"]=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];e.call(t,o[1],o[0])}},t}()}(),s="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,a=void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),u="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(a):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},l=2,c=20,p=["top","right","bottom","left","width","height","size","weight"],h="undefined"!=typeof MutationObserver,d=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){function n(){i&&(i=!1,e()),s&&o()}function r(){u(n)}function o(){var e=Date.now();if(i){if(e-a<l)return;s=!0}else i=!0,s=!1,setTimeout(r,t);a=e}var i=!1,s=!1,a=0;return o}(this.refresh.bind(this),c)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},e.prototype.connect_=function(){s&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),h?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){s&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;p.some(function(e){return!!~n.indexOf(e)})&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),f=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},_=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||a},m=o(0,0,0,0),g="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof _(e).SVGGraphicsElement}:function(e){return e instanceof _(e).SVGElement&&"function"==typeof e.getBBox},y=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=o(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=r(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),v=function(e,t){var n,r,o,i,s,a,u,l=(r=(n=t).x,o=n.y,i=n.width,s=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,u=Object.create(a.prototype),f(u,{x:r,y:o,width:i,height:s,top:o,right:r+i,bottom:s+o,left:r}),u);f(this,{target:e,contentRect:l})},b=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new i,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof _(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new y(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof _(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t["delete"](e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new v(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),w="undefined"!=typeof WeakMap?new WeakMap:new i,C=function S(e){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=d.getInstance(),n=new b(e,t,this);w.set(this,n)};return["observe","unobserve","disconnect"].forEach(function(e){C.prototype[e]=function(){var t;return(t=w.get(this))[e].apply(t,arguments)}}),void 0!==a.ResizeObserver?a.ResizeObserver:C})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),_$ResizeObserver_54=_$ResizeObserver_54.exports;var _$classnames_9={exports:{}};!function(){function e(){for(var n=[],r=0;r<arguments.length;r++){var o=arguments[r];if(o){var i=typeof o;if("string"===i||"number"===i)n.push(o);else if(Array.isArray(o)&&o.length){var s=e.apply(null,o);s&&n.push(s)}else if("object"===i)for(var a in o)t.call(o,a)&&o[a]&&n.push(a)}}return n.join(" ")}var t={}.hasOwnProperty;_$classnames_9.exports?(e["default"]=e,_$classnames_9.exports=e):"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],function(){return e}):window.classNames=e}(),_$classnames_9=_$classnames_9.exports;var _$preactCssTransitionGroup_48={exports:{}},__global_48,__factory_48;__global_48=this,__factory_48=function(e){function t(e){return e.attributes&&e.attributes.key}function n(e){return e.base}function r(e){return e&&e.filter(function(e){return null!==e})}function o(e,t){for(var n=e.length;n--;)if(t(e[n]))return!0;return!1}function i(e,n){return o(e,function(e){return t(e)===n})}function s(e,n){return i(e,t(n))}function a(e,n,r){return o(e,function(e){return t(e)===n&&e.props[r]})}function u(e,n,r){return a(e,t(n),r)}function l(e,t){var n;e.classList?(n=e.classList).add.apply(n,t.split(" ")):e.className+=" "+t}function c(e,t){if(t=t.trim(),e.classList){var n;(n=e.classList).remove.apply(n,t.split(" "))}else{var r=e.className.trim(),o=d(r);for(t=p+t+p;o.indexOf(t)>=0;)o=o.replace(t,p);e.className=o.trim()}}var p=" ",h=/[\n\t\r]+/g,d=function(e){return(p+e+p).replace(h,p)},f={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},_=[];"undefined"!=typeof window&&function(){var e=document.createElement("div").style;for(var t in"AnimationEvent"in window||delete f.animationend.animation,"TransitionEvent"in window||delete f.transitionend.transition,f){var n=f[t];for(var r in n)if(r in e){_.push(n[r]);break}}}();var m=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},g=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},y=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},v=function(e){function t(){var r,o;m(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=o=y(this,e.call.apply(e,[this].concat(s))),o.flushClassNameQueue=function(){n(o)&&l(n(o),o.classNameQueue.join(" ")),o.classNameQueue.length=0,o.timeout=null},y(o,r)}return g(t,e),t.prototype.transition=function(e,t,r){var o=this,i=n(this),s=this.props.name[e]||this.props.name+"-"+e,a=this.props.name[e+"Active"]||s+"-active",u=null;this.endListener&&this.endListener(),this.endListener=function(e){e&&e.target!==i||(clearTimeout(u),c(i,s),c(i,a),function(e,t){_.length&&_.forEach(function(n){e.removeEventListener(n,t,!1)})}(i,o.endListener),o.endListener=null,t&&t())},r?(u=setTimeout(this.endListener,r),this.transitionTimeouts.push(u)):function(e,t){return _.length?void _.forEach(function(n){e.addEventListener(n,t,!1)}):window.setTimeout(t,0)}(i,this.endListener),l(i,s),this.queueClass(a)},t.prototype.queueClass=function(e){this.classNameQueue.push(e),this.timeout||(this.timeout=setTimeout(this.flushClassNameQueue,17))},t.prototype.stop=function(){this.timeout&&(clearTimeout(this.timeout),this.classNameQueue.length=0,this.timeout=null),this.endListener&&this.endListener()},t.prototype.componentWillMount=function(){this.classNameQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(e){clearTimeout(e)})},t.prototype.componentWillEnter=function(e){this.props.enter?this.transition("enter",e,this.props.enterTimeout):e()},t.prototype.componentWillLeave=function(e){this.props.leave?this.transition("leave",e,this.props.leaveTimeout):e()},t.prototype.render=function(){return(e=this.props.children)&&e[0];var e},t}(e.Component),b=function(n){function o(r){m(this,o);var i=y(this,n.call(this));return i.renderChild=function(n){var r=i.props,o=r.transitionName,s=r.transitionEnter,a=r.transitionLeave,u=r.transitionEnterTimeout,l=r.transitionLeaveTimeout,c=t(n);return e.h(v,{key:c,ref:function(e){(i.refs[c]=e)||(n=null)},name:o,enter:s,leave:a,enterTimeout:u,leaveTimeout:l},n)},i.refs={},i.state={children:(r.children||[]).slice()},i}return g(o,n),o.prototype.shouldComponentUpdate=function(e,t){return t.children!==this.state.children},o.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},o.prototype.componentWillReceiveProps=function(n){var o,a,l,c,p=this,h=n.children,d=n.exclusive,f=n.showProp,_=r(h||[]).slice(),m=r(d?this.props.children:this.state.children),g=(o=_,a=[],l={},c=[],m.forEach(function(e){var n=t(e);i(o,n)?c.length&&(l[n]=c,c=[]):c.push(e)}),o.forEach(function(e){var n=t(e);l.hasOwnProperty(n)&&(a=a.concat(l[n])),a.push(e)}),a.concat(c));f&&(g=g.map(function(t){var n;return!t.props[f]&&u(m,t,f)&&(t=e.cloneElement(t,((n={})[f]=!0,n))),t})),d&&g.forEach(function(e){return p.stop(t(e))}),this.setState({children:g}),this.forceUpdate(),_.forEach(function(e){var t=e.key,n=m&&s(m,e);if(f){if(n){var r=u(m,e,f),o=e.props[f];r||!o||p.currentlyTransitioningKeys[t]||p.keysToEnter.push(t)}}else n||p.currentlyTransitioningKeys[t]||p.keysToEnter.push(t)}),m.forEach(function(e){var t=e.key,n=_&&s(_,e);if(f){if(n){var r=u(_,e,f),o=e.props[f];r||!o||p.currentlyTransitioningKeys[t]||p.keysToLeave.push(t)}}else n||p.currentlyTransitioningKeys[t]||p.keysToLeave.push(t)})},o.prototype.performEnter=function(e){var t=this;this.currentlyTransitioningKeys[e]=!0;var n=this.refs[e];n.componentWillEnter?n.componentWillEnter(function(){return t._handleDoneEntering(e)}):this._handleDoneEntering(e)},o.prototype._handleDoneEntering=function(e){delete this.currentlyTransitioningKeys[e];var t=r(this.props.children),n=this.props.showProp;!t||!n&&!i(t,e)||n&&!a(t,e,n)?this.performLeave(e):this.setState({children:t})},o.prototype.stop=function(e){delete this.currentlyTransitioningKeys[e];var t=this.refs[e];t&&t.stop()},o.prototype.performLeave=function(e){var t=this;this.currentlyTransitioningKeys[e]=!0;var n=this.refs[e];n&&n.componentWillLeave?n.componentWillLeave(function(){return t._handleDoneLeaving(e)}):this._handleDoneLeaving(e)},o.prototype._handleDoneLeaving=function(e){delete this.currentlyTransitioningKeys[e];var t=this.props.showProp,n=r(this.props.children);t&&n&&a(n,e,t)?this.performEnter(e):!t&&n&&i(n,e)?this.performEnter(e):this.setState({children:n})},o.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter,n=this.keysToLeave;this.keysToEnter=[],t.forEach(function(t){return e.performEnter(t)}),this.keysToLeave=[],n.forEach(function(t){return e.performLeave(t)})},o.prototype.render=function(t,n){var o=t.component,i=(t.transitionName,t.transitionEnter,t.transitionLeave,t.transitionEnterTimeout,t.transitionLeaveTimeout,t.children,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["component","transitionName","transitionEnter","transitionLeave","transitionEnterTimeout","transitionLeaveTimeout","children"])),s=n.children;return e.h(o,i,r(s).map(this.renderChild))},o}(e.Component);return b.defaultProps={component:"span",transitionEnter:!0,transitionLeave:!0
},b},"object"==typeof _$preactCssTransitionGroup_48.exports?_$preactCssTransitionGroup_48.exports=__factory_48(_$preact_49):"function"==typeof define&&define.amd?define(["preact"],__factory_48):__global_48.PreactCSSTransitionGroup=__factory_48(__global_48.preact),_$preactCssTransitionGroup_48=_$preactCssTransitionGroup_48.exports;var __dummy_98$0=0,h=_$preact_49.h,ActionBrowseTagline=function(e){function t(n){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.handleClick=r.handleClick.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.handleClick=function(e){this.input.click()},t.prototype.render=function(){var e=this,t=h("button",{type:"button","class":"uppy-Dashboard-browse",onclick:this.handleClick},this.props.i18n("browse"));return h("div",{"class":"uppy-Dashboard-dropFilesTitle"},0===this.props.acquirers.length?this.props.i18nArray("dropPaste",{browse:t}):this.props.i18nArray("dropPasteImport",{browse:t}),h("input",{"class":"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabindex:-1,type:"file",name:"files[]",multiple:1!==this.props.maxNumberOfFiles,onchange:this.props.handleInputChange,accept:this.props.allowedFileTypes,value:"",ref:function(t){e.input=t}}))},t}(_$preact_49.Component),_$ActionBrowseTagline_98=ActionBrowseTagline,__h_109=_$preact_49.h,_$icons_109={defaultTabIcon:function(){return __h_109("svg",{"aria-hidden":"true",width:"30",height:"30",viewBox:"0 0 30 30"},__h_109("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"}))},iconCopy:function(){return __h_109("svg",{"aria-hidden":"true","class":"UppyIcon",width:"51",height:"51",viewBox:"0 0 51 51"},__h_109("path",{d:"M17.21 45.765a5.394 5.394 0 0 1-7.62 0l-4.12-4.122a5.393 5.393 0 0 1 0-7.618l6.774-6.775-2.404-2.404-6.775 6.776c-3.424 3.427-3.424 9 0 12.426l4.12 4.123a8.766 8.766 0 0 0 6.216 2.57c2.25 0 4.5-.858 6.214-2.57l13.55-13.552a8.72 8.72 0 0 0 2.575-6.213 8.73 8.73 0 0 0-2.575-6.213l-4.123-4.12-2.404 2.404 4.123 4.12a5.352 5.352 0 0 1 1.58 3.81c0 1.438-.562 2.79-1.58 3.808l-13.55 13.55z"}),__h_109("path",{d:"M44.256 2.858A8.728 8.728 0 0 0 38.043.283h-.002a8.73 8.73 0 0 0-6.212 2.574l-13.55 13.55a8.725 8.725 0 0 0-2.575 6.214 8.73 8.73 0 0 0 2.574 6.216l4.12 4.12 2.405-2.403-4.12-4.12a5.357 5.357 0 0 1-1.58-3.812c0-1.437.562-2.79 1.58-3.808l13.55-13.55a5.348 5.348 0 0 1 3.81-1.58c1.44 0 2.792.562 3.81 1.58l4.12 4.12c2.1 2.1 2.1 5.518 0 7.617L39.2 23.775l2.404 2.404 6.775-6.777c3.426-3.427 3.426-9 0-12.426l-4.12-4.12z"}))},iconRetry:function(){return __h_109("svg",{"aria-hidden":"true","class":"UppyIcon retry",width:"28",height:"31",viewBox:"0 0 16 19",xmlns:"http://www.w3.org/2000/svg"},__h_109("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),__h_109("path",{d:"M7.9 3H10v2H7.9z"}),__h_109("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),__h_109("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"}))},localIcon:function(){return __h_109("svg",{"aria-hidden":"true",fill:"#607d8b",width:"27",height:"25",viewBox:"0 0 27 25"},__h_109("path",{d:"M5.586 9.288a.313.313 0 0 0 .282.176h4.84v3.922c0 1.514 1.25 2.24 2.792 2.24 1.54 0 2.79-.726 2.79-2.24V9.464h4.84c.122 0 .23-.068.284-.176a.304.304 0 0 0-.046-.324L13.735.106a.316.316 0 0 0-.472 0l-7.63 8.857a.302.302 0 0 0-.047.325z"}),__h_109("path",{d:"M24.3 5.093c-.218-.76-.54-1.187-1.208-1.187h-4.856l1.018 1.18h3.948l2.043 11.038h-7.193v2.728H9.114v-2.725h-7.36l2.66-11.04h3.33l1.018-1.18H3.907c-.668 0-1.06.46-1.21 1.186L0 16.456v7.062C0 24.338.676 25 1.51 25h23.98c.833 0 1.51-.663 1.51-1.482v-7.062L24.3 5.093z"}))},iconAudio:function(){return __h_109("svg",{"aria-hidden":"true","class":"UppyIcon",width:"55",height:"55",viewBox:"0 0 55 55"},__h_109("path",{d:"M52.66.25c-.216-.19-.5-.276-.79-.242l-31 4.01a1 1 0 0 0-.87.992V40.622C18.174 38.428 15.273 37 12 37c-5.514 0-10 4.037-10 9s4.486 9 10 9 10-4.037 10-9c0-.232-.02-.46-.04-.687.014-.065.04-.124.04-.192V16.12l29-3.753v18.257C49.174 28.428 46.273 27 43 27c-5.514 0-10 4.037-10 9s4.486 9 10 9c5.464 0 9.913-3.966 9.993-8.867 0-.013.007-.024.007-.037V1a.998.998 0 0 0-.34-.75zM12 53c-4.41 0-8-3.14-8-7s3.59-7 8-7 8 3.14 8 7-3.59 7-8 7zm31-10c-4.41 0-8-3.14-8-7s3.59-7 8-7 8 3.14 8 7-3.59 7-8 7zM22 14.1V5.89l29-3.753v8.21l-29 3.754z"}))},iconVideo:function(){return __h_109("svg",{"aria-hidden":"true","class":"UppyIcon",viewBox:"0 0 58 58"},__h_109("path",{d:"M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z"}),__h_109("path",{d:"M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z"}))},iconPDF:function(){return __h_109("svg",{"aria-hidden":"true","class":"UppyIcon",viewBox:"0 0 342 335"},__h_109("path",{d:"M329.337 227.84c-2.1 1.3-8.1 2.1-11.9 2.1-12.4 0-27.6-5.7-49.1-14.9 8.3-.6 15.8-.9 22.6-.9 12.4 0 16 0 28.2 3.1 12.1 3 12.2 9.3 10.2 10.6zm-215.1 1.9c4.8-8.4 9.7-17.3 14.7-26.8 12.2-23.1 20-41.3 25.7-56.2 11.5 20.9 25.8 38.6 42.5 52.8 2.1 1.8 4.3 3.5 6.7 5.3-34.1 6.8-63.6 15-89.6 24.9zm39.8-218.9c6.8 0 10.7 17.06 11 33.16.3 16-3.4 27.2-8.1 35.6-3.9-12.4-5.7-31.8-5.7-44.5 0 0-.3-24.26 2.8-24.26zm-133.4 307.2c3.9-10.5 19.1-31.3 41.6-49.8 1.4-1.1 4.9-4.4 8.1-7.4-23.5 37.6-39.3 52.5-49.7 57.2zm315.2-112.3c-6.8-6.7-22-10.2-45-10.5-15.6-.2-34.3 1.2-54.1 3.9-8.8-5.1-17.9-10.6-25.1-17.3-19.2-18-35.2-42.9-45.2-70.3.6-2.6 1.2-4.8 1.7-7.1 0 0 10.8-61.5 7.9-82.3-.4-2.9-.6-3.7-1.4-5.9l-.9-2.5c-2.9-6.76-8.7-13.96-17.8-13.57l-5.3-.17h-.1c-10.1 0-18.4 5.17-20.5 12.84-6.6 24.3.2 60.5 12.5 107.4l-3.2 7.7c-8.8 21.4-19.8 43-29.5 62l-1.3 2.5c-10.2 20-19.5 37-27.9 51.4l-8.7 4.6c-.6.4-15.5 8.2-19 10.3-29.6 17.7-49.28 37.8-52.54 53.8-1.04 5-.26 11.5 5.01 14.6l8.4 4.2c3.63 1.8 7.53 2.7 11.43 2.7 21.1 0 45.6-26.2 79.3-85.1 39-12.7 83.4-23.3 122.3-29.1 29.6 16.7 66 28.3 89 28.3 4.1 0 7.6-.4 10.5-1.2 4.4-1.1 8.1-3.6 10.4-7.1 4.4-6.7 5.4-15.9 4.1-25.4-.3-2.8-2.6-6.3-5-8.7z"}))},iconText:function(){return __h_109("svg",{"aria-hidden":"true","class":"UppyIcon",width:"62",height:"62",viewBox:"0 0 62 62",xmlns:"http://www.w3.org/2000/svg"},__h_109("path",{d:"M4.309 4.309h24.912v53.382h-6.525v3.559h16.608v-3.559h-6.525V4.309h24.912v10.676h3.559V.75H.75v14.235h3.559z","fill-rule":"nonzero",fill:"#000"}))}},__dummy_99$0=0,localIcon=_$icons_109.localIcon,__dummy_99$1=0,__h_99=_$preact_49.h,Component=_$preact_49.Component,poweredByUppy=function(e){return __h_99("a",{tabindex:"-1",href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank","class":"uppy-Dashboard-poweredBy"},"Powered by ",__h_99("svg",{"aria-hidden":"true","class":"UppyIcon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11",xmlns:"http://www.w3.org/2000/svg"},__h_99("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z","fill-rule":"evenodd"})),__h_99("span",{"class":"uppy-Dashboard-poweredByUppy"},"Uppy"))},AddFiles=function(e){function t(n){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.handleClick=r.handleClick.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.handleClick=function(e){this.input.click()},t.prototype.render=function(){var e=this,t=0!==this.props.acquirers.length;return __h_99("div",{"class":"uppy-DashboarAddFiles"},t?__h_99("div",{"class":"uppy-DashboardTabs"},__h_99(_$ActionBrowseTagline_98,{acquirers:this.props.acquirers,handleInputChange:this.props.handleInputChange,i18n:this.props.i18n,i18nArray:this.props.i18nArray,allowedFileTypes:this.props.allowedFileTypes,maxNumberOfFiles:this.props.maxNumberOfFiles}),__h_99("div",{"class":"uppy-DashboardTabs-list",role:"tablist"},__h_99("div",{"class":"uppy-DashboardTab",role:"presentation"},__h_99("button",{type:"button","class":"uppy-DashboardTab-btn",role:"tab",tabindex:0,onclick:this.handleClick},localIcon(),__h_99("div",{"class":"uppy-DashboardTab-name"},this.props.i18n("myDevice"))),__h_99("input",{"class":"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabindex:-1,type:"file",name:"files[]",multiple:1!==this.props.maxNumberOfFiles,accept:this.props.allowedFileTypes,onchange:this.props.handleInputChange,value:"",ref:function(t){e.input=t}})),this.props.acquirers.map(function(t){return __h_99("div",{"class":"uppy-DashboardTab",role:"presentation"},__h_99("button",{"class":"uppy-DashboardTab-btn",type:"button",role:"tab",tabindex:0,"aria-controls":"uppy-DashboardContent-panel--"+t.id,"aria-selected":e.props.activePanel.id===t.id,onclick:function(){return e.props.showPanel(t.id)}},t.icon(),__h_99("div",{"class":"uppy-DashboardTab-name"},t.name)))}))):__h_99("div",{"class":"uppy-DashboardTabs"},__h_99(_$ActionBrowseTagline_98,{acquirers:this.props.acquirers,handleInputChange:this.props.handleInputChange,i18n:this.props.i18n,i18nArray:this.props.i18nArray,allowedFileTypes:this.props.allowedFileTypes,maxNumberOfFiles:this.props.maxNumberOfFiles})),__h_99("div",{"class":"uppy-DashboarAddFiles-info"},this.props.note&&__h_99("div",{"class":"uppy-Dashboard-note"},this.props.note),this.props.proudlyDisplayPoweredByUppy&&poweredByUppy(this.props)))},t}(Component),_$AddFiles_99=AddFiles,__h_100=_$preact_49.h,__dummy_100$0=0,_$AddFilesPanel_100=function(e){return __h_100("div",{"class":"uppy-Dashboard-AddFilesPanel","aria-hidden":e.showAddFilesPanel},__h_100("div",{"class":"uppy-DashboardContent-bar"},__h_100("div",{"class":"uppy-DashboardContent-title",role:"heading","aria-level":"h1"},e.i18n("addingMoreFiles")),__h_100("button",{"class":"uppy-DashboardContent-back",type:"button",onclick:function(t){return e.toggleAddFilesPanel(!1)}},e.i18n("back"))),__h_100(_$AddFiles_99,e))},__dummy_112$0=0,iconText=_$icons_109.iconText,iconAudio=_$icons_109.iconAudio,iconVideo=_$icons_109.iconVideo,iconPDF=_$icons_109.iconPDF,_$getFileTypeIcon_112=function(e){var t={color:"#cbcbcb",icon:""};if(!e)return t;var n=e.split("/")[0],r=e.split("/")[1];return"text"===n?{color:"#cbcbcb",icon:iconText()}:"audio"===n?{color:"#1abc9c",icon:iconAudio()}:"video"===n?{color:"#2980b9",icon:iconVideo()}:"application"===n&&"pdf"===r?{color:"#e74c3c",icon:iconPDF()}:"image"===n?{color:"#f2f2f2",icon:""}:t},__dummy_106$0=0,__h_106=_$preact_49.h,_$FilePreview_106=function(e){var t=e.file;if(t.preview)return __h_106("img",{"class":"uppy-DashboardItem-previewImg",alt:t.name,src:t.preview});var n=_$getFileTypeIcon_112(t.type),r=n.color,o=n.icon;return __h_106("div",{"class":"uppy-DashboardItem-previewIconWrap"},__h_106("span",{"class":"uppy-DashboardItem-previewIcon",style:{color:r}},o),__h_106("svg",{"class":"uppy-DashboardItem-previewIconBg",width:"72",height:"93",viewBox:"0 0 72 93"},__h_106("g",null,__h_106("path",{d:"M24.08 5h38.922A2.997 2.997 0 0 1 66 8.003v74.994A2.997 2.997 0 0 1 63.004 86H8.996A2.998 2.998 0 0 1 6 83.01V22.234L24.08 5z",fill:"#FFF"}),__h_106("path",{d:"M24 5L6 22.248h15.007A2.995 2.995 0 0 0 24 19.244V5z",fill:"#E4E4E4"}))))},_$ignoreEvent_113=function(e){var t=e.target.tagName;"INPUT"!==t&&"TEXTAREA"!==t?(e.preventDefault(),e.stopPropagation()):e.stopPropagation()},__dummy_102$0=0,__dummy_102$1=0,__dummy_102$2=0,__dummy_102$3=0,__h_102=_$preact_49.h,FileCard=function(e){function t(n){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.meta={},r.tempStoreMetaOrSubmit=r.tempStoreMetaOrSubmit.bind(r),r.renderMetaFields=r.renderMetaFields.bind(r),r.handleSave=r.handleSave.bind(r),r.handleCancel=r.handleCancel.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){var e=this;setTimeout(function(){e.firstInput&&e.firstInput.focus({preventScroll:!0})},150)},t.prototype.tempStoreMetaOrSubmit=function(e){var t=this.props.files[this.props.fileCardFor];if(13===e.keyCode)return e.stopPropagation(),e.preventDefault(),void this.props.saveFileCard(this.meta,t.id);var n=e.target.value,r=e.target.dataset.name;this.meta[r]=n},t.prototype.renderMetaFields=function(e){var t=this;return(this.props.metaFields||[]).map(function(n,r){return __h_102("fieldset",{"class":"uppy-DashboardFileCard-fieldset"},__h_102("label",{"class":"uppy-DashboardFileCard-label"},n.name),__h_102("input",{"class":"uppy-c-textInput uppy-DashboardFileCard-input",type:"text","data-name":n.id,value:e.meta[n.id],placeholder:n.placeholder,onkeyup:t.tempStoreMetaOrSubmit,onkeydown:t.tempStoreMetaOrSubmit,onkeypress:t.tempStoreMetaOrSubmit,ref:function(e){0===r&&(t.firstInput=e)}}))})},t.prototype.handleSave=function(e){var t=this.props.fileCardFor;this.props.saveFileCard(this.meta,t)},t.prototype.handleCancel=function(e){this.meta={},this.props.toggleFileCard()},t.prototype.render=function(){var e=this.props.files[this.props.fileCardFor];return __h_102("div",{"class":"uppy-DashboardFileCard",onDragOver:_$ignoreEvent_113,onDragLeave:_$ignoreEvent_113,onDrop:_$ignoreEvent_113,onPaste:_$ignoreEvent_113},__h_102("div",{"class":"uppy-DashboardContent-bar"},__h_102("div",{"class":"uppy-DashboardContent-title",role:"heading","aria-level":"h1"},this.props.i18nArray("editing",{file:__h_102("span",{"class":"uppy-DashboardContent-titleFile"},e.meta?e.meta.name:e.name)})),__h_102("button",{"class":"uppy-DashboardContent-back",type:"button",title:this.props.i18n("finishEditingFile"),onclick:this.handleSave},this.props.i18n("done"))),__h_102("div",{"class":"uppy-DashboardFileCard-inner"},__h_102("div",{"class":"uppy-DashboardFileCard-preview",style:{backgroundColor:_$getFileTypeIcon_112(e.type).color}},__h_102(_$FilePreview_106,{file:e})),__h_102("div",{"class":"uppy-DashboardFileCard-info"},this.renderMetaFields(e)),__h_102("div",{"class":"uppy-Dashboard-actions"},__h_102("button",{"class":"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-actionsBtn",type:"button",onclick:this.handleSave},this.props.i18n("saveChanges")),__h_102("button",{"class":"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-actionsBtn",type:"button",onclick:this.handleCancel},this.props.i18n("cancel")))))},t}(_$preact_49.Component),_$FileCard_102=FileCard,__h_104=_$preact_49.h,circleLength=2*Math.PI*15,_$FileItemProgress_104=function(e){return __h_104("svg",{width:"70",height:"70",viewBox:"0 0 36 36","class":"UppyIcon UppyIcon-progressCircle"},__h_104("g",{"class":"progress-group"},__h_104("circle",{"class":"bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),__h_104("circle",{"class":"progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)","stroke-width":"2",fill:"none","stroke-dasharray":circleLength,"stroke-dashoffset":circleLength-circleLength/100*e.progress})),e.hidePauseResumeCancelButtons||e.bundled?null:__h_104("g",null,__h_104("polygon",{"class":"play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}),__h_104("g",{"class":"pause",transform:"translate(14.5, 13)"},__h_104("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),__h_104("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})),__h_104("polygon",{"class":"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"})),__h_104("polygon",{"class":"check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"}))},_$copyToClipboard_111=function(e,t){return t=t||"Copy the URL below",new Promise(function(e){var n=document.createElement("textarea");n.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),n.value=o,document.body.appendChild(n),n.select();var r=function(){document.body.removeChild(n),window.prompt(t,o),e()};try{return document.execCommand("copy")?(document.body.removeChild(n),e()):r()}catch(o){return document.body.removeChild(n),r()}})},_$truncateString_114=function(e,t){return e.length>t?e.substr(0,t/2)+"..."+e.substr(e.length-t/4,e.length):e},___extends_103=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__dummy_103$0=0,__dummy_103$1=0,__dummy_103$2=0,__dummy_103$3=0,__dummy_103$4=0,__dummy_103$5=0,__dummy_103$6=0,__dummy_103$7=0,iconCopy=_$icons_109.iconCopy,iconRetry=_$icons_109.iconRetry,__dummy_103$8=0,__h_103=_$preact_49.h,_$FileItem_103=function(e){var t=e.file,n=e.acquirers,r=t.progress.preprocess||t.progress.postprocess,o=t.progress.uploadComplete&&!r&&!t.error,i=t.progress.uploadStarted||r,s=t.progress.uploadStarted&&!t.progress.uploadComplete||r,a=t.isPaused||!1,u=t.error||!1,l=_$getFileNameAndExtension_161(t.meta.name).name,c=e.isWide?_$truncateString_114(l,30):l,p=_$classnames_9("uppy-DashboardItem",{"is-inprogress":s},{"is-processing":r},{"is-complete":o},{"is-paused":a},{"is-error":u},{"is-resumable":e.resumableUploads},{"is-bundled":e.bundledUpload});return __h_103("li",{"class":p,id:"uppy_"+t.id,title:t.meta.name},__h_103("div",{"class":"uppy-DashboardItem-preview"},__h_103("div",{"class":"uppy-DashboardItem-previewInnerWrap",style:{backgroundColor:_$getFileTypeIcon_112(t.type).color}},e.showLinkToFileUploadResult&&t.uploadURL?__h_103("a",{"class":"uppy-DashboardItem-previewLink",href:t.uploadURL,rel:"noreferrer noopener",target:"_blank"}):null,__h_103(_$FilePreview_106,{file:t})),__h_103("div",{"class":"uppy-DashboardItem-progress"},__h_103(FileItemProgressWrapper,___extends_103({progressIndicatorTitle:function(e){return o?e.i18n("uploadComplete"):u?e.i18n("retryUpload"):e.resumableUploads?t.isPaused?e.i18n("resumeUpload"):e.i18n("pauseUpload"):e.i18n("cancelUpload")}(e),onPauseResumeCancelRetry:function(n){o||(!u||e.hideRetryButton?e.hidePauseResumeCancelButtons||(e.resumableUploads?e.pauseUpload(t.id):e.cancelUpload(t.id)):e.retryUpload(t.id))},file:t,error:u},e)))),__h_103("div",{"class":"uppy-DashboardItem-info"},__h_103("div",{"class":"uppy-DashboardItem-name",title:l},e.showLinkToFileUploadResult&&t.uploadURL?__h_103("a",{href:t.uploadURL,rel:"noreferrer noopener",target:"_blank"},t.extension?c+"."+t.extension:c):t.extension?c+"."+t.extension:c),__h_103("div",{"class":"uppy-DashboardItem-status"},t.data.size?__h_103("div",{"class":"uppy-DashboardItem-statusSize"},_$prettierBytes_50(t.data.size)):null,t.source&&t.source!==e.id&&__h_103("div",{"class":"uppy-DashboardItem-sourceIcon"},n.map(function(n){if(n.id===t.source)return __h_103("span",{title:e.i18n("fileSource",{name:n.name})},n.icon())})),!i&&e.metaFields&&e.metaFields.length?__h_103("button",{"class":"uppy-DashboardItem-edit",type:"button","aria-label":e.i18n("editFile"),title:e.i18n("editFile"),onclick:function(n){return e.toggleFileCard(t.id)}},e.i18n("edit")):null,e.showLinkToFileUploadResult&&t.uploadURL?__h_103("button",{"class":"uppy-DashboardItem-copyLink",type:"button","aria-label":e.i18n("copyLink"),title:e.i18n("copyLink"),onclick:function(){_$copyToClipboard_111(t.uploadURL,e.i18n("copyLinkToClipboardFallback")).then(function(){e.log("Link copied to clipboard."),e.info(e.i18n("copyLinkToClipboardSuccess"),"info",3e3)})["catch"](e.log)}},iconCopy()):"")),__h_103("div",{"class":"uppy-DashboardItem-action"},!o&&__h_103("button",{"class":"uppy-DashboardItem-remove",type:"button","aria-label":e.i18n("removeFile"),title:e.i18n("removeFile"),onclick:function(){return e.removeFile(t.id)}},__h_103("svg",{"aria-hidden":"true","class":"UppyIcon",width:"60",height:"60",viewBox:"0 0 60 60",xmlns:"http://www.w3.org/2000/svg"},__h_103("path",{stroke:"#FFF","stroke-width":"1","fill-rule":"nonzero","vector-effect":"non-scaling-stroke",d:"M30 1C14 1 1 14 1 30s13 29 29 29 29-13 29-29S46 1 30 1z"}),__h_103("path",{fill:"#FFF","vector-effect":"non-scaling-stroke",d:"M42 39.667L39.667 42 30 32.333 20.333 42 18 39.667 27.667 30 18 20.333 20.333 18 30 27.667 39.667 18 42 20.333 32.333 30z"})))))},___extends_105=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__dummy_105$0=0,__dummy_105$1=0,__h_105=_$preact_49.h,_$FileList_105=function(e){var t=0===e.totalFileCount,n=_$classnames_9("uppy-Dashboard-files",{"uppy-Dashboard-files--noFiles":t});return __h_105("ul",{"class":n},Object.keys(e.files).map(function(t){return __h_105(_$FileItem_103,___extends_105({},e,{acquirers:e.acquirers,file:e.files[t]}))}))},__h_107=_$preact_49.h,__dummy_107$0=0,_$PanelContent_107=function(e){return __h_107("div",{"class":"uppy-DashboardContent-panel",role:"tabpanel",id:e.activePanel&&"uppy-DashboardContent-panel--"+e.activePanel.id,onDragOver:_$ignoreEvent_113,onDragLeave:_$ignoreEvent_113,onDrop:_$ignoreEvent_113,onPaste:_$ignoreEvent_113},__h_107("div",{"class":"uppy-DashboardContent-bar"},__h_107("div",{"class":"uppy-DashboardContent-title",role:"heading","aria-level":"h1"},e.i18n("importFrom",{name:e.activePanel.name})),__h_107("button",{"class":"uppy-DashboardContent-back",type:"button",onclick:e.hideAllPanels},e.i18n("done"))),__h_107("div",{"class":"uppy-DashboardContent-panelBody"},e.getPlugin(e.activePanel.id).render(e.state)))},__h_108=_$preact_49.h,uploadStates={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"},_$PanelTopBar_108=function(e){var t=e.allowNewUpload;return t&&e.maxNumberOfFiles&&(t=e.totalFileCount<e.maxNumberOfFiles),__h_108("div",{"class":"uppy-DashboardContent-bar"},__h_108("div",null,e.isAllComplete?null:__h_108("button",{"class":"uppy-DashboardContent-back",type:"button",onclick:e.cancelAll},e.i18n("cancel"))),__h_108("div",{"class":"uppy-DashboardContent-title",role:"heading","aria-level":"h1"},__h_108(UploadStatus,e)),t&&__h_108("button",{"class":"uppy-DashboardContent-addMore",type:"button","aria-label":e.i18n("addMoreFiles"),title:e.i18n("addMoreFiles"),onclick:function(){return e.toggleAddFilesPanel(!0)}},__h_108("svg",{"class":"UppyIcon",width:"15",height:"15",viewBox:"0 0 13 13",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},__h_108("path",{d:"M7,6 L13,6 L13,7 L7,7 L7,13 L6,13 L6,7 L0,7 L0,6 L6,6 L6,0 L7,0 L7,6 Z"}))))},_$isTouchDevice_170=function(){return"ontouchstart"in window||navigator.maxTouchPoints},___extends_101=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__dummy_101$0=0,__dummy_101$1=0,__dummy_101$2=0,__dummy_101$3=0,__dummy_101$4=0,__dummy_101$5=0,__dummy_101$6=0,__dummy_101$7=0,__h_101=_$preact_49.h,__dummy_101$8=0,_$Dashboard_101=function(e){var t=0===e.totalFileCount,n=_$classnames_9({"uppy-Root":e.isTargetDOMEl},"uppy-Dashboard",{"Uppy--isTouchDevice":_$isTouchDevice_170()},{"uppy-Dashboard--animateOpenClose":e.animateOpenClose},{"uppy-Dashboard--isClosing":e.isClosing},{"uppy-Dashboard--modal":!e.inline},{"uppy-size--md":e.containerWidth>576},{"uppy-size--lg":e.containerWidth>700},{"uppy-Dashboard--isAddFilesPanelVisible":e.showAddFilesPanel});return __h_101("div",{"class":n,"aria-hidden":e.inline?"false":e.modal.isHidden,"aria-label":e.inline?e.i18n("dashboardTitle"):e.i18n("dashboardWindowTitle"),onpaste:e.handlePaste},__h_101("div",{"class":"uppy-Dashboard-overlay",tabindex:-1,onclick:e.handleClickOutside}),__h_101("div",{"class":"uppy-Dashboard-inner","aria-modal":!e.inline&&"true",role:!e.inline&&"dialog",style:{width:e.inline&&e.width?e.width:"",height:e.inline&&e.height?e.height:""}},__h_101("button",{"class":"uppy-Dashboard-close",type:"button","aria-label":e.i18n("closeModal"),title:e.i18n("closeModal"),onclick:e.closeModal},__h_101("span",{"aria-hidden":"true"},"×")),__h_101("div",{"class":"uppy-Dashboard-innerWrap"},!t&&e.showSelectedFiles&&__h_101(_$PanelTopBar_108,e),e.showSelectedFiles?__h_101(t?_$AddFiles_99:_$FileList_105,e):__h_101(_$AddFiles_99,e),__h_101(_$preactCssTransitionGroup_48,{transitionName:"uppy-transition-slideDownUp",transitionEnterTimeout:250,transitionLeaveTimeout:250},e.showAddFilesPanel?__h_101(_$AddFilesPanel_100,___extends_101({key:"AddFilesPanel"},e)):null),__h_101(_$preactCssTransitionGroup_48,{transitionName:"uppy-transition-slideDownUp",transitionEnterTimeout:250,transitionLeaveTimeout:250},e.fileCardFor?__h_101(_$FileCard_102,___extends_101({key:"FileCard"},e)):null),__h_101(_$preactCssTransitionGroup_48,{transitionName:"uppy-transition-slideDownUp",transitionEnterTimeout:250,transitionLeaveTimeout:250},e.activePanel?__h_101(_$PanelContent_107,___extends_101({key:"PanelContent"},e)):null),__h_101("div",{"class":"uppy-Dashboard-progressindicators"},e.progressindicators.map(function(t){return e.getPlugin(t.id).render(e.state)})))))},___extends_125=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__Plugin_125=_$lib_96.Plugin,__h_125=_$preact_49.h,_$lib_125=function(e){function t(n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return o.type="progressindicator",o.id=o.opts.id||"Informer",o.title="Informer",o.opts=___extends_125({},{typeColors:{info:{text:"#fff",bg:"#000"},warning:{text:"#fff",bg:"#F6A623"},error:{text:"#fff",bg:"#D32F2F"},success:{text:"#fff",bg:"#1BB240"}}},r),o.render=o.render.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(e){var t=e.info,n=t.isHidden,r=t.message,o=t.details;return __h_125("div",{"class":"uppy uppy-Informer","aria-hidden":n},__h_125("p",{role:"alert"},r," ",o&&__h_125("span",{"aria-label":o,"data-microtip-position":"top","data-microtip-size":"large",role:"tooltip"},"?")))},t.prototype.install=function(){var e=this.opts.target;e&&this.mount(e,this)},t}(__Plugin_125),_$StatusBarStates_139={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"},_$secondsToTime_174=function(e){return{hours:Math.floor(e/3600)%24,minutes:Math.floor(e/60)%60,seconds:Math.floor(e%60)}},_$prettyETA_173=function(e){var t=_$secondsToTime_174(e),n=t.hours?t.hours+"h ":"",r=t.hours?("0"+t.minutes).substr(-2):t.minutes;return n+(r?r+"m ":"")+(r?("0"+t.seconds).substr(-2):t.seconds)+"s"},___extends_138=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__dummy_138$0=0,__dummy_138$1=0,__dummy_138$2=0,__dummy_138$3=0,__dummy_138$4=0,__h_138=_$preact_49.h,_$StatusBar_138=function(e){var t=e=e||{},n=t.newFiles,r=t.allowNewUpload,o=t.isUploadInProgress,i=t.isAllPaused,s=t.resumableUploads,a=t.error,u=t.hideUploadButton,l=t.hidePauseResumeButton,c=t.hideCancelButton,p=t.hideRetryButton,h=e.uploadState,d=e.totalProgress,f=void 0,_=void 0;if(h===_$StatusBarStates_139.STATE_PREPROCESSING||h===_$StatusBarStates_139.STATE_POSTPROCESSING){var m=function(e){var t=[];Object.keys(e).forEach(function(n){var r=e[n].progress;r.preprocess&&t.push(r.preprocess),r.postprocess&&t.push(r.postprocess)});var n=t[0];return{mode:n.mode,message:n.message,value:t.filter(function(e){return"determinate"===e.mode}).reduce(function(e,t,n,r){return e+t.value/r.length},0)}}(e.files);"determinate"===(f=m.mode)&&(d=100*m.value),_=ProgressBarProcessing(m)}else h===_$StatusBarStates_139.STATE_COMPLETE?_=ProgressBarComplete(e):h===_$StatusBarStates_139.STATE_UPLOADING?(e.supportsUploadProgress||(f="indeterminate",d=null),_=ProgressBarUploading(e)):h===_$StatusBarStates_139.STATE_ERROR&&(d=void 0,_=ProgressBarError(e));var g="number"==typeof d?d:100,y=h===_$StatusBarStates_139.STATE_WAITING&&e.hideUploadButton||h===_$StatusBarStates_139.STATE_WAITING&&!e.newFiles>0||h===_$StatusBarStates_139.STATE_COMPLETE&&e.hideAfterFinish,v=!a&&n&&!o&&!i&&r&&!u,b=!c&&h!==_$StatusBarStates_139.STATE_WAITING&&h!==_$StatusBarStates_139.STATE_COMPLETE,w=s&&!l&&h!==_$StatusBarStates_139.STATE_WAITING&&h!==_$StatusBarStates_139.STATE_PREPROCESSING&&h!==_$StatusBarStates_139.STATE_POSTPROCESSING&&h!==_$StatusBarStates_139.STATE_COMPLETE,C=a&&!p,S="uppy-StatusBar-progress\n                           "+(f?"is-"+f:""),A=_$classnames_9({"uppy-Root":e.isTargetDOMEl},"uppy-StatusBar","is-"+h);return __h_138("div",{"class":A,"aria-hidden":y},__h_138("div",{"class":S,style:{width:g+"%"},role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":d}),_,__h_138("div",{"class":"uppy-StatusBar-actions"},v?__h_138(UploadBtn,___extends_138({},e,{uploadState:h})):null,C?__h_138(RetryBtn,e):null,w?__h_138(PauseResumeButton,e):null,b?__h_138(CancelBtn,e):null))},UploadBtn=function(e){var t=_$classnames_9("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":e.uploadState===_$StatusBarStates_139.STATE_WAITING});return __h_138("button",{type:"button","class":t,"aria-label":e.i18n("uploadXFiles",{smart_count:e.newFiles}),onclick:e.startUpload},e.newFiles&&e.isUploadStarted?e.i18n("uploadXNewFiles",{smart_count:e.newFiles}):e.i18n("uploadXFiles",{smart_count:e.newFiles}))},RetryBtn=function(e){return __h_138("button",{type:"button","class":"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":e.i18n("retryUpload"),onclick:e.retryAll},e.i18n("retry"))},CancelBtn=function(e){return __h_138("button",{type:"button","class":"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:e.i18n("cancel"),"aria-label":e.i18n("cancel"),onclick:e.cancelAll},__h_138("svg",{"aria-hidden":"true","class":"UppyIcon",width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},__h_138("path",{d:"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16zm1.414-8l2.122-2.121-1.415-1.415L8 6.586 5.879 4.464 4.464 5.88 6.586 8l-2.122 2.121 1.415 1.415L8 9.414l2.121 2.122 1.415-1.415L9.414 8z",
fill:"#949494","fill-rule":"evenodd"})))},PauseResumeButton=function(e){var t=e.isAllPaused,n=(0,e.i18n)(t?"resume":"pause");return __h_138("button",{title:n,"aria-label":n,"class":"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onclick:function(){return function(e){if(!e.isAllComplete)return e.resumableUploads?e.isAllPaused?e.resumeAll():e.pauseAll():e.cancelAll()}(e)}},__h_138("svg",{"aria-hidden":"true","class":"UppyIcon",width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},__h_138("path",t?{d:"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16zM6 5v6l5-3-5-3z",fill:"#949494","fill-rule":"evenodd"}:{d:"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16zM5 5v6h2V5H5zm4 0v6h2V5H9z",fill:"#949494","fill-rule":"evenodd"})))},LoadingSpinner=function(e){return __h_138("svg",{"class":"uppy-StatusBar-spinner",width:"14",height:"14",xmlns:"http://www.w3.org/2000/svg"},__h_138("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0","fill-rule":"evenodd"}))},ProgressBarProcessing=function(e){var t=Math.round(100*e.value);return __h_138("div",{"class":"uppy-StatusBar-content"},__h_138(LoadingSpinner,e),"determinate"===e.mode?t+"% · ":"",e.message)},UnknownProgressDetails=function(e){return __h_138("div",{"class":"uppy-StatusBar-statusSecondary"},e.i18n("filesUploadedOfTotal",{complete:e.complete,smart_count:e.numUploads}))},UploadNewlyAddedFiles=function(e){var t=_$classnames_9("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn");return __h_138("div",{"class":"uppy-StatusBar-statusSecondary"},__h_138("div",{"class":"uppy-StatusBar-statusSecondaryHint"},e.i18n("xMoreFilesAdded",{smart_count:e.newFiles})),__h_138("button",{type:"button","class":t,"aria-label":e.i18n("uploadXFiles",{smart_count:e.newFiles}),onclick:e.startUpload},e.i18n("upload")))},ThrottledProgressDetails=_$lodashThrottle_43(function(e){return __h_138("div",{"class":"uppy-StatusBar-statusSecondary"},e.numUploads>1&&e.i18n("filesUploadedOfTotal",{complete:e.complete,smart_count:e.numUploads})+" · ",e.i18n("dataUploadedOfTotal",{complete:_$prettierBytes_50(e.totalUploadedSize),total:_$prettierBytes_50(e.totalSize)})+" · ",e.i18n("xTimeLeft",{time:_$prettyETA_173(e.totalETA)}))},500,{leading:!0,trailing:!0}),ProgressBarUploading=function(e){if(!e.isUploadStarted||e.isAllComplete)return null;var t=e.isAllPaused?e.i18n("paused"):e.i18n("uploading"),n=e.newFiles&&e.isUploadStarted;return __h_138("div",{"class":"uppy-StatusBar-content","aria-label":t,title:t},e.isAllPaused?null:__h_138(LoadingSpinner,e),__h_138("div",{"class":"uppy-StatusBar-status"},__h_138("div",{"class":"uppy-StatusBar-statusPrimary"},e.supportsUploadProgress?t+": "+e.totalProgress+"%":t),e.isAllPaused||n||!e.showProgressDetails?null:e.supportsUploadProgress?__h_138(ThrottledProgressDetails,e):__h_138(UnknownProgressDetails,e),n?__h_138(UploadNewlyAddedFiles,e):null))},ProgressBarComplete=function(e){e.totalProgress;var t=e.i18n;return __h_138("div",{"class":"uppy-StatusBar-content",role:"status",title:t("complete")},__h_138("svg",{"aria-hidden":"true","class":"uppy-StatusBar-statusIndicator UppyIcon",width:"18",height:"17",viewBox:"0 0 23 17"},__h_138("path",{d:"M8.944 17L0 7.865l2.555-2.61 6.39 6.525L20.41 0 23 2.645z"})),t("complete"))},ProgressBarError=function(e){var t=e.error,n=(e.retryAll,e.hideRetryButton,e.i18n);return __h_138("div",{"class":"uppy-StatusBar-content",role:"alert"},__h_138("span",{"class":"uppy-StatusBar-contentPadding"},n("uploadFailed"),"."),__h_138("span",{"class":"uppy-StatusBar-details","aria-label":t,"data-microtip-position":"top","data-microtip-size":"large",role:"tooltip"},"?"))},_$getBytesRemaining_160=function(e){return e.bytesTotal-e.bytesUploaded},_$getSpeed_165=function(e){if(!e.bytesUploaded)return 0;var t=new Date-e.uploadStarted;return e.bytesUploaded/(t/1e3)},___extends_140=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__Plugin_140=_$lib_96.Plugin,__dummy_140$0=0,__dummy_140$1=0,__dummy_140$2=0,__dummy_140$3=0,__dummy_140$4=0,_$lib_140=function(e){function t(n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));o.id=o.opts.id||"StatusBar",o.title="StatusBar",o.type="progressindicator";var i={strings:{uploading:"Uploading",upload:"Upload",complete:"Complete",uploadFailed:"Upload failed",pleasePressRetry:"Please press Retry to upload again",paused:"Paused",error:"Error",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",pressToRetry:"Press to retry",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"}}},s={target:"body",hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,locale:i,hideAfterFinish:!0};return o.opts=___extends_140({},s,r),o.translator=new _$Translator_153([i,o.uppy.locale,o.opts.locale]),o.i18n=o.translator.translate.bind(o.translator),o.startUpload=o.startUpload.bind(o),o.render=o.render.bind(o),o.install=o.install.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getTotalSpeed=function(e){var t=0;return e.forEach(function(e){t+=_$getSpeed_165(e.progress)}),t},t.prototype.getTotalETA=function(e){var t=this.getTotalSpeed(e);if(0===t)return 0;var n=e.reduce(function(e,t){return e+_$getBytesRemaining_160(t.progress)},0);return Math.round(n/t*10)/10},t.prototype.startUpload=function(){var e=this;return this.uppy.upload()["catch"](function(t){e.uppy.log(t.stack||t.message||t)})},t.prototype.getUploadingState=function(e,t,n){if(e)return _$StatusBarStates_139.STATE_ERROR;if(t)return _$StatusBarStates_139.STATE_COMPLETE;for(var r=_$StatusBarStates_139.STATE_WAITING,o=Object.keys(n),i=0;i<o.length;i++){var s=n[o[i]].progress;if(s.uploadStarted&&!s.uploadComplete)return _$StatusBarStates_139.STATE_UPLOADING;s.preprocess&&r!==_$StatusBarStates_139.STATE_UPLOADING&&(r=_$StatusBarStates_139.STATE_PREPROCESSING),s.postprocess&&r!==_$StatusBarStates_139.STATE_UPLOADING&&r!==_$StatusBarStates_139.STATE_PREPROCESSING&&(r=_$StatusBarStates_139.STATE_POSTPROCESSING)}return r},t.prototype.render=function(e){var t=e.capabilities,n=e.files,r=e.allowNewUpload,o=e.totalProgress,i=e.error,s=Object.keys(n).filter(function(e){return!n[e].progress.uploadStarted&&!n[e].progress.preprocess&&!n[e].progress.postprocess}),a=Object.keys(n).filter(function(e){return n[e].progress.uploadStarted}),u=a.filter(function(e){return n[e].isPaused}),l=Object.keys(n).filter(function(e){return n[e].progress.uploadComplete}),c=Object.keys(n).filter(function(e){return n[e].error}),p=Object.keys(n).filter(function(e){return!n[e].progress.uploadComplete&&n[e].progress.uploadStarted}),h=p.filter(function(e){return!n[e].isPaused}),d=Object.keys(n).filter(function(e){return n[e].progress.uploadStarted||n[e].progress.preprocess||n[e].progress.postprocess}),f=Object.keys(n).filter(function(e){return n[e].progress.preprocess||n[e].progress.postprocess}),_=h.map(function(e){return n[e]}),m=this.getTotalETA(_),g=0,y=0;_.forEach(function(e){g+=e.progress.bytesTotal||0,y+=e.progress.bytesUploaded||0});var v=a.length>0,b=100===o&&l.length===Object.keys(n).length&&0===f.length,w=v&&c.length===a.length,C=0!==p.length&&u.length===p.length,S=p.length>0,A=t.resumableUploads||!1,E=!1!==t.uploadProgress;return _$StatusBar_138({error:i,uploadState:this.getUploadingState(w,b,e.files||{}),allowNewUpload:r,totalProgress:o,totalSize:g,totalUploadedSize:y,isAllComplete:b,isAllPaused:C,isAllErrored:w,isUploadStarted:v,isUploadInProgress:S,complete:l.length,newFiles:s.length,numUploads:d.length,totalETA:m,files:n,i18n:this.i18n,pauseAll:this.uppy.pauseAll,resumeAll:this.uppy.resumeAll,retryAll:this.uppy.retryAll,cancelAll:this.uppy.cancelAll,startUpload:this.startUpload,resumableUploads:A,supportsUploadProgress:E,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish,isTargetDOMEl:this.isTargetDOMEl})},t.prototype.install=function(){var e=this.opts.target;e&&this.mount(e,this)},t.prototype.uninstall=function(){this.unmount()},t}(__Plugin_140),_$dataURItoBlob_155=function(e,t,n){var r=e.split(",")[1],o=t.mimeType||e.split(",")[0].split(":")[1].split(";")[0];null==o&&(o="plain/text");for(var i=atob(r),s=[],a=0;a<i.length;a++)s.push(i.charCodeAt(a));return n?new File([new Uint8Array(s)],t.name||"",{type:o}):new Blob([new Uint8Array(s)],{type:o})},_$isObjectURL_168=function(e){return 0===e.indexOf("blob:")},_$isPreviewSupported_169=function(e){if(!e)return!1;var t=e.split("/")[1];return!!/^(jpe?g|gif|png|svg|svg\+xml|bmp)$/.test(t)},___extends_143=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__Plugin_143=_$lib_96.Plugin,__dummy_143$0=0,__dummy_143$1=0,__dummy_143$2=0,_$lib_143=function(e){function t(n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return o.type="thumbnail",o.id=o.opts.id||"ThumbnailGenerator",o.title="Thumbnail Generator",o.queue=[],o.queueProcessing=!1,o.defaultThumbnailDimension=200,o.opts=___extends_143({},{thumbnailWidth:null,thumbnailHeight:null},r),o.onFileAdded=o.onFileAdded.bind(o),o.onFileRemoved=o.onFileRemoved.bind(o),o.onRestored=o.onRestored.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createThumbnail=function(e,t,n){var r=this,o=URL.createObjectURL(e.data);return new Promise(function(e,t){var n=new Image;n.src=o,n.addEventListener("load",function(){URL.revokeObjectURL(o),e(n)}),n.addEventListener("error",function(e){URL.revokeObjectURL(o),t(e.error||new Error("Could not create thumbnail"))})}).then(function(e){var o=r.getProportionalDimensions(e,t,n),i=r.resizeImage(e,o.width,o.height);return r.canvasToBlob(i,"image/png")}).then(function(e){return URL.createObjectURL(e)})},t.prototype.getProportionalDimensions=function(e,t,n){var r=e.width/e.height;return null!=t?{width:t,height:Math.round(t/r)}:null!=n?{width:Math.round(n*r),height:n}:{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/r)}},t.prototype.protect=function(e){var t=e.width/e.height,n=Math.floor(Math.sqrt(5e6*t)),r=Math.floor(5e6/Math.sqrt(5e6*t));if(n>4096&&(n=4096,r=Math.round(n/t)),r>4096&&(r=4096,n=Math.round(t*r)),e.width>n){var o=document.createElement("canvas");o.width=n,o.height=r,o.getContext("2d").drawImage(e,0,0,n,r),e=o}return e},t.prototype.resizeImage=function(e,t,n){e=this.protect(e);var r=Math.ceil(Math.log(e.width/t)*Math.LOG2E);r<1&&(r=1);for(var o=t*Math.pow(2,r-1),i=n*Math.pow(2,r-1);r--;){var s=document.createElement("canvas");s.width=o,s.height=i,s.getContext("2d").drawImage(e,0,0,o,i),e=s,o=Math.round(o/2),i=Math.round(i/2)}return e},t.prototype.canvasToBlob=function(e,t,n){return e.toBlob?new Promise(function(r){e.toBlob(r,t,n)}):Promise.resolve().then(function(){return _$dataURItoBlob_155(e.toDataURL(t,n),{})})},t.prototype.setPreviewURL=function(e,t){this.uppy.setFileState(e,{preview:t})},t.prototype.addToQueue=function(e){this.queue.push(e),!1===this.queueProcessing&&this.processQueue()},t.prototype.processQueue=function(){var e=this;if(this.queueProcessing=!0,this.queue.length>0){var t=this.queue.shift();return this.requestThumbnail(t)["catch"](function(e){}).then(function(){return e.processQueue()})}this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated")},t.prototype.requestThumbnail=function(e){var t=this;return _$isPreviewSupported_169(e.type)&&!e.isRemote?this.createThumbnail(e,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(function(n){t.setPreviewURL(e.id,n),t.uppy.log("[ThumbnailGenerator] Generated thumbnail for "+e.id),t.uppy.emit("thumbnail:generated",t.uppy.getFile(e.id),n)})["catch"](function(n){t.uppy.log("[ThumbnailGenerator] Failed thumbnail for "+e.id),t.uppy.log(n,"warning"),t.uppy.emit("thumbnail:error",t.uppy.getFile(e.id),n)}):Promise.resolve()},t.prototype.onFileAdded=function(e){e.preview||this.addToQueue(e)},t.prototype.onFileRemoved=function(e){var t=this.queue.indexOf(e);-1!==t&&this.queue.splice(t,1),e.preview&&_$isObjectURL_168(e.preview)&&URL.revokeObjectURL(e.preview)},t.prototype.onRestored=function(){var e=this,t=this.uppy.getState().files;Object.keys(t).forEach(function(t){var n=e.uppy.getFile(t);n.isRestored&&(n.preview&&!_$isObjectURL_168(n.preview)||e.addToQueue(n))})},t.prototype.install=function(){this.uppy.on("file-added",this.onFileAdded),this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("restored",this.onRestored)},t.prototype.uninstall=function(){this.uppy.off("file-added",this.onFileAdded),this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("restored",this.onRestored)},t}(__Plugin_143),___typeof_157="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},__dummy_157$0=0,_$findAllDOMElements_157=function(e){if("string"==typeof e){var t=[].slice.call(document.querySelectorAll(e));return t.length>0?t:null}if("object"===(void 0===e?"undefined":___typeof_157(e))&&_$isDOMElement_167(e))return[e]},_$toArray_176=function(e){return Array.prototype.slice.call(e||[],0)},___extends_110=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__Plugin_110=_$lib_96.Plugin,__dummy_110$0=0,__dummy_110$1=0,__dummy_110$2=0,__dummy_110$3=0,__dummy_110$4=0,__dummy_110$5=0,__dummy_110$6=0,__dummy_110$7=0,__dummy_110$8=0,ResizeObserver=_$ResizeObserver_54["default"]||_$ResizeObserver_54,defaultTabIcon=_$icons_109.defaultTabIcon,FOCUSABLE_ELEMENTS=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'],_$lib_110=function(e){function t(n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));o.id=o.opts.id||"Dashboard",o.title="Dashboard",o.type="orchestrator",o.modalName="uppy-Dashboard-"+_$cuid_13();var i={target:"body",metaFields:[],trigger:"#uppy-select-files",inline:!1,width:750,height:550,thumbnailWidth:280,defaultTabIcon:defaultTabIcon,showLinkToFileUploadResult:!0,showProgressDetails:!1,hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeCancelButtons:!1,hideProgressAfterFinish:!1,note:null,closeModalOnClickOutside:!1,closeAfterFinish:!1,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,disablePageScrollWhenModalOpen:!0,animateOpenClose:!0,proudlyDisplayPoweredByUppy:!0,onRequestCloseModal:function(){return o.closeModal()},showSelectedFiles:!0,browserBackButtonClose:!1};return o.opts=___extends_110({},i,r),o.translator=new _$Translator_153([{strings:{selectToUpload:"Select files to upload",closeModal:"Close Modal",upload:"Upload",importFrom:"Import from %{name}",addingMoreFiles:"Adding more files",addMoreFiles:"Add more files",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",fileSource:"File source: %{name}",done:"Done",back:"Back",name:"Name",removeFile:"Remove file",editFile:"Edit file",editing:"Editing %{file}",edit:"Edit",finishEditingFile:"Finish editing file",saveChanges:"Save changes",cancel:"Cancel",localDisk:"Local Disk",myDevice:"My Device",dropPasteImport:"Drop files here, paste, %{browse} or import from",dropPaste:"Drop files here, paste or %{browse}",browse:"browse",fileProgress:"File progress: upload speed and ETA",numberOfSelectedFiles:"Number of selected files",uploadAllNewFiles:"Upload all new files",emptyFolderAdded:"No files were added from empty folder",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"}}},o.uppy.locale,o.opts.locale]),o.i18n=o.translator.translate.bind(o.translator),o.i18nArray=o.translator.translateArray.bind(o.translator),o.openModal=o.openModal.bind(o),o.closeModal=o.closeModal.bind(o),o.requestCloseModal=o.requestCloseModal.bind(o),o.isModalOpen=o.isModalOpen.bind(o),o.addTarget=o.addTarget.bind(o),o.removeTarget=o.removeTarget.bind(o),o.hideAllPanels=o.hideAllPanels.bind(o),o.showPanel=o.showPanel.bind(o),o.getFocusableNodes=o.getFocusableNodes.bind(o),o.setFocusToFirstNode=o.setFocusToFirstNode.bind(o),o.handlePopState=o.handlePopState.bind(o),o.maintainFocus=o.maintainFocus.bind(o),o.initEvents=o.initEvents.bind(o),o.handleKeyDown=o.handleKeyDown.bind(o),o.handleFileAdded=o.handleFileAdded.bind(o),o.handleComplete=o.handleComplete.bind(o),o.handleClickOutside=o.handleClickOutside.bind(o),o.toggleFileCard=o.toggleFileCard.bind(o),o.toggleAddFilesPanel=o.toggleAddFilesPanel.bind(o),o.handleDrop=o.handleDrop.bind(o),o.handlePaste=o.handlePaste.bind(o),o.handleInputChange=o.handleInputChange.bind(o),o.render=o.render.bind(o),o.install=o.install.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.removeTarget=function(e){var t=this.getPluginState().targets.filter(function(t){return t.id!==e.id});this.setPluginState({targets:t})},t.prototype.addTarget=function(e){var t=e.id||e.constructor.name,n=e.title||t,r=e.type;if("acquirer"===r||"progressindicator"===r||"presenter"===r){var o={id:t,name:n,type:r},i=this.getPluginState().targets.slice();return i.push(o),this.setPluginState({targets:i}),this.el}this.uppy.log("Dashboard: Modal can only be used by plugins of types: acquirer, progressindicator, presenter")},t.prototype.hideAllPanels=function(){this.setPluginState({activePanel:!1,showAddFilesPanel:!1})},t.prototype.showPanel=function(e){var t=this.getPluginState().targets.filter(function(t){return"acquirer"===t.type&&t.id===e})[0];this.setPluginState({activePanel:t})},t.prototype.requestCloseModal=function(){return this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():void this.closeModal()},t.prototype.getFocusableNodes=function(){var e=this.el.querySelectorAll(FOCUSABLE_ELEMENTS);return Object.keys(e).map(function(t){return e[t]})},t.prototype.setFocusToFirstNode=function(){var e=this.getFocusableNodes();e.length&&e[0].focus()},t.prototype.updateBrowserHistory=function(){var e;history.state&&history.state[this.modalName]||history.pushState(___extends_110({},history.state,((e={})[this.modalName]=!0,e)),""),window.addEventListener("popstate",this.handlePopState,!1)},t.prototype.handlePopState=function(e){!this.isModalOpen()||e.state&&e.state[this.modalName]||this.closeModal({manualClose:!1}),!this.isModalOpen()&&e.state&&e.state[this.modalName]&&history.go(-1)},t.prototype.setFocusToBrowse=function(){var e=this.el.querySelector(".uppy-Dashboard-browse");e&&e.focus()},t.prototype.maintainFocus=function(e){var t=this.getFocusableNodes(),n=t.indexOf(document.activeElement);e.shiftKey&&0===n&&(t[t.length-1].focus(),e.preventDefault()),e.shiftKey||n!==t.length-1||(t[0].focus(),e.preventDefault())},t.prototype.openModal=function(){var e=this,t=createPromise(),n=t.promise,r=t.resolve;return this.savedScrollPosition=window.scrollY,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing?this.el.addEventListener("animationend",function o(){e.setPluginState({isHidden:!1}),e.el.removeEventListener("animationend",o,!1),r()},!1):(this.setPluginState({isHidden:!1}),r()),this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDown),this.setFocusToBrowse(),n},t.prototype.closeModal=function(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).manualClose,n=void 0===t||t,r=this.getPluginState(),o=r.isHidden,i=r.isClosing;if(!o&&!i){var s=createPromise(),a=s.promise,u=s.resolve;return this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.opts.animateOpenClose?(this.setPluginState({isClosing:!0}),this.el.addEventListener("animationend",function l(){e.setPluginState({isHidden:!0,isClosing:!1}),e.el.removeEventListener("animationend",l,!1),u()},!1)):(this.setPluginState({isHidden:!0}),u()),document.removeEventListener("keydown",this.handleKeyDown),this.savedActiveElement.focus(),n&&this.opts.browserBackButtonClose&&history.state&&history.state[this.modalName]&&history.go(-1),a}},t.prototype.isModalOpen=function(){return!this.getPluginState().isHidden||!1},t.prototype.handleKeyDown=function(e){27===e.keyCode&&this.requestCloseModal(e),9===e.keyCode&&this.maintainFocus(e)},t.prototype.handleClickOutside=function(){this.opts.closeModalOnClickOutside&&this.requestCloseModal()},t.prototype.handlePaste=function(e){var t=this;_$toArray_176(e.clipboardData.items).forEach(function(e){if("file"===e.kind){var n=e.getAsFile();if(!n)return t.uppy.log("[Dashboard] File pasted, but the file blob is empty"),void t.uppy.info("Error pasting file","error");t.uppy.log("[Dashboard] File pasted");try{t.uppy.addFile({source:t.id,name:e.name,type:e.type,data:n})}catch(e){}}})},t.prototype.handleInputChange=function(e){var t=this;e.preventDefault(),_$toArray_176(e.target.files).forEach(function(e){try{t.uppy.addFile({source:t.id,name:e.name,type:e.type,data:e})}catch(e){}})},t.prototype.initEvents=function(){var e=this,t=_$findAllDOMElements_157(this.opts.trigger);!this.opts.inline&&t&&t.forEach(function(t){return t.addEventListener("click",e.openModal)}),this.opts.inline||t||this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options unless you are planning to call openModal() method yourself","error"),this.removeDragDropListener=_$dragDrop_17(this.el,function(t){e.handleDrop(t)}),this.ro=new ResizeObserver(function(t,n){var r=t,o=Array.isArray(r),i=0;for(r=o?r:r[Symbol.iterator]();;){var s;if(o){if(i>=r.length)break;s=r[i++]}else{if((i=r.next()).done)break;s=i.value}var a=s.contentRect,u=a.width,l=a.height;e.uppy.log("[Dashboard] resized: "+u+" / "+l),e.setPluginState({containerWidth:u,containerHeight:l})}}),this.ro.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.handleFileAdded),this.uppy.on("complete",this.handleComplete)},t.prototype.handleFileAdded=function(){this.hideAllPanels()},t.prototype.handleComplete=function(e){var t=e.failed;e.uploadID,this.opts.closeAfterFinish&&0===t.length&&this.requestCloseModal()},t.prototype.removeEvents=function(){var e=this,t=_$findAllDOMElements_157(this.opts.trigger);!this.opts.inline&&t&&t.forEach(function(t){return t.removeEventListener("click",e.openModal)}),this.ro.unobserve(this.el.querySelector(".uppy-Dashboard-inner")),this.removeDragDropListener(),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.handleFileAdded),this.uppy.off("complete",this.handleComplete)},t.prototype.toggleFileCard=function(e){this.setPluginState({fileCardFor:e||!1})},t.prototype.toggleAddFilesPanel=function(e){this.setPluginState({showAddFilesPanel:e})},t.prototype.handleDrop=function(e){var t=this;this.uppy.log("[Dashboard] Files were dropped"),e.forEach(function(e){try{t.uppy.addFile({source:t.id,name:e.name,type:e.type,data:e})}catch(e){}})},t.prototype.render=function(e){var t=this,n=this.getPluginState(),r=e.files,o=e.capabilities,i=e.allowNewUpload,s=Object.keys(r).filter(function(e){return!r[e].progress.uploadStarted}),a=Object.keys(r).filter(function(e){return r[e].progress.uploadStarted}),u=Object.keys(r).filter(function(e){return r[e].isPaused}),l=Object.keys(r).filter(function(e){return r[e].progress.uploadComplete}),c=Object.keys(r).filter(function(e){return r[e].error}),p=Object.keys(r).filter(function(e){return!r[e].progress.uploadComplete&&r[e].progress.uploadStarted}),h=p.filter(function(e){return!r[e].isPaused}),d=Object.keys(r).filter(function(e){return r[e].progress.preprocess||r[e].progress.postprocess}),f=a.length>0,_=100===e.totalProgress&&l.length===Object.keys(r).length&&0===d.length,m=f&&c.length===a.length,g=0!==p.length&&u.length===p.length,y=function(e){var n=t.uppy.getPlugin(e.id);return ___extends_110({},e,{icon:n.icon||t.opts.defaultTabIcon,render:n.render})},v=n.targets.filter(function(e){return"acquirer"===e.type&&function(e){var n=t.uppy.getPlugin(e.id);return"function"!=typeof n.isSupported||n.isSupported()}(e)}).map(y),b=n.targets.filter(function(e){return"progressindicator"===e.type}).map(y);return _$Dashboard_101({state:e,modal:n,files:r,newFiles:s,uploadStartedFiles:a,completeFiles:l,erroredFiles:c,inProgressFiles:p,inProgressNotPausedFiles:h,processingFiles:d,isUploadStarted:f,isAllComplete:_,isAllErrored:m,isAllPaused:g,totalFileCount:Object.keys(r).length,totalProgress:e.totalProgress,allowNewUpload:i,acquirers:v,activePanel:n.activePanel,animateOpenClose:this.opts.animateOpenClose,isClosing:n.isClosing,getPlugin:this.uppy.getPlugin,progressindicators:b,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,log:this.uppy.log,i18n:this.i18n,i18nArray:this.i18nArray,addFile:this.uppy.addFile,removeFile:this.uppy.removeFile,info:this.uppy.info,note:this.opts.note,metaFields:n.metaFields,resumableUploads:o.resumableUploads||!1,bundled:o.bundled||!1,startUpload:function(e){t.uppy.upload()["catch"](function(e){t.uppy.log(e.stack||e.message||e)})},pauseUpload:this.uppy.pauseResume,retryUpload:this.uppy.retryUpload,cancelUpload:function(e){t.uppy.removeFile(e)},cancelAll:this.uppy.cancelAll,fileCardFor:n.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:n.showAddFilesPanel,saveFileCard:function(e,n){t.uppy.setFileMeta(n,e),t.toggleFileCard()},width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,currentWidth:n.containerWidth,isWide:n.containerWidth>400,containerWidth:n.containerWidth,isTargetDOMEl:this.isTargetDOMEl,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,showSelectedFiles:this.opts.showSelectedFiles})},t.prototype.discoverProviderPlugins=function(){var e=this;this.uppy.iteratePlugins(function(t){t&&!t.target&&t.opts&&t.opts.target===e.constructor&&e.addTarget(t)})},t.prototype.install=function(){var e=this;this.setPluginState({isHidden:!0,showFileCard:!1,showAddFilesPanel:!1,activePanel:!1,metaFields:this.opts.metaFields,targets:[]});var t=this.opts,n=t.inline,r=t.closeAfterFinish;if(n&&r)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");this.uppy.opts.allowMultipleUploads&&r&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploads` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");var o=this.opts.target;o&&this.mount(o,this),(this.opts.plugins||[]).forEach(function(t){var n=e.uppy.getPlugin(t);n&&n.mount(e,n)}),this.opts.disableStatusBar||this.uppy.use(_$lib_140,{id:this.id+":StatusBar",target:this,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,showProgressDetails:this.opts.showProgressDetails,hideAfterFinish:this.opts.hideProgressAfterFinish,locale:this.opts.locale}),this.opts.disableInformer||this.uppy.use(_$lib_125,{id:this.id+":Informer",target:this}),this.opts.disableThumbnailGenerator||this.uppy.use(_$lib_143,{id:this.id+":ThumbnailGenerator",thumbnailWidth:this.opts.thumbnailWidth}),this.discoverProviderPlugins(),this.initEvents()},t.prototype.uninstall=function(){var e=this;if(!this.opts.disableInformer){var t=this.uppy.getPlugin(this.id+":Informer");t&&this.uppy.removePlugin(t)}if(!this.opts.disableStatusBar){
var n=this.uppy.getPlugin(this.id+":StatusBar");n&&this.uppy.removePlugin(n)}if(!this.opts.disableThumbnailGenerator){var r=this.uppy.getPlugin(this.id+":ThumbnailGenerator");r&&this.uppy.removePlugin(r)}(this.opts.plugins||[]).forEach(function(t){var n=e.uppy.getPlugin(t);n&&n.unmount()}),this.unmount(),this.removeEvents()},t}(__Plugin_110),___extends_115=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__Plugin_115=_$lib_96.Plugin,__dummy_115$0=0,__dummy_115$1=0,__dummy_115$2=0,__h_115=_$preact_49.h,_$lib_115=function(e){function t(n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));o.type="acquirer",o.id=o.opts.id||"DragDrop",o.title="Drag & Drop";var i={strings:{dropHereOr:"Drop files here or %{browse}",browse:"browse"}},s={target:null,inputName:"files[]",width:"100%",height:"100%",note:null,locale:i};return o.opts=___extends_115({},s,r),o.isDragDropSupported=o.checkDragDropSupport(),o.translator=new _$Translator_153([i,o.uppy.locale,o.opts.locale]),o.i18n=o.translator.translate.bind(o.translator),o.i18nArray=o.translator.translateArray.bind(o.translator),o.handleDrop=o.handleDrop.bind(o),o.handleInputChange=o.handleInputChange.bind(o),o.checkDragDropSupport=o.checkDragDropSupport.bind(o),o.render=o.render.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.checkDragDropSupport=function(){var e=document.createElement("div");return"draggable"in e&&"ondragstart"in e&&"ondrop"in e&&"FormData"in window&&"FileReader"in window},t.prototype.handleDrop=function(e){var t=this;this.uppy.log("[DragDrop] Files dropped"),e.forEach(function(e){try{t.uppy.addFile({source:t.id,name:e.name,type:e.type,data:e})}catch(e){}})},t.prototype.handleInputChange=function(e){var t=this;this.uppy.log("[DragDrop] Files selected through input"),_$toArray_176(e.target.files).forEach(function(e){try{t.uppy.addFile({source:t.id,name:e.name,type:e.type,data:e})}catch(e){}})},t.prototype.render=function(e){var t=this,n="uppy-Root uppy-DragDrop-container "+(this.isDragDropSupported?"uppy-DragDrop--is-dragdrop-supported":""),r={width:this.opts.width,height:this.opts.height},o=this.uppy.opts.restrictions;return __h_115("div",{"class":n,style:r},__h_115("div",{"class":"uppy-DragDrop-inner"},__h_115("svg",{"aria-hidden":"true","class":"UppyIcon uppy-DragDrop-arrow",width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},__h_115("path",{d:"M11 10V0H5v10H2l6 6 6-6h-3zm0 0","fill-rule":"evenodd"})),__h_115("label",{"class":"uppy-DragDrop-label"},__h_115("input",{style:{width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1},"class":"uppy-DragDrop-input",type:"file",name:this.opts.inputName,multiple:1!==o.maxNumberOfFiles,accept:o.allowedFileTypes,ref:function(e){t.input=e},onchange:this.handleInputChange,value:""}),this.i18nArray("dropHereOr",{browse:__h_115("span",{"class":"uppy-DragDrop-dragText"},this.i18n("browse"))})),__h_115("span",{"class":"uppy-DragDrop-note"},this.opts.note)))},t.prototype.install=function(){var e=this,t=this.opts.target;t&&this.mount(t,this),this.removeDragDropListener=_$dragDrop_17(this.el,function(t){e.handleDrop(t),e.uppy.log(t)})},t.prototype.uninstall=function(){this.unmount(),this.removeDragDropListener()},t}(__Plugin_115),__h_135=_$preact_49.h,_$Loader_135=function(e){return __h_135("div",{"class":"uppy-Provider-loading"},__h_135("span",null,"Loading..."))},__dummy_128$0=0,__dummy_128$1=0,__h_128=_$preact_49.h,__Component_128=_$preact_49.Component,AuthBlock=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(t,e),t.prototype.componentDidMount=function(){var e=this;setTimeout(function(){e.connectButton&&e.connectButton.focus({preventScroll:!0})},150)},t.prototype.render=function(){var e=this;return __h_128("div",{"class":"uppy-Provider-auth"},__h_128("div",{"class":"uppy-Provider-authIcon"},this.props.pluginIcon()),__h_128("h1",{"class":"uppy-Provider-authTitle"},"Please authenticate with ",__h_128("span",{"class":"uppy-Provider-authTitleName"},this.props.pluginName),__h_128("br",null)," to select files"),__h_128("button",{type:"button","class":"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn",onclick:this.props.handleAuth,ref:function(t){e.connectButton=t}},"Connect to ",this.props.pluginName),this.props.demo&&__h_128("button",{"class":"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn",onclick:this.props.handleDemoAuth},"Proceed with Demo Account"))},t}(__Component_128),AuthView=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(t,e),t.prototype.componentDidMount=function(){this.props.checkAuth()},t.prototype.render=function(){return this.props.checkAuthInProgress?__h_128(_$Loader_135,null):__h_128(AuthBlock,this.props)},t}(__Component_128),_$AuthView_128=AuthView,__h_129=_$preact_49.h,_$Breadcrumbs_129=function(e){return __h_129("div",{"class":"uppy-Provider-breadcrumbs"},__h_129("div",{"class":"uppy-Provider-breadcrumbsIcon"},e.breadcrumbsIcon),e.directories.map(function(t,n){return function(e){return __h_129("span",null,__h_129("button",{type:"button","class":"uppy-u-reset",onclick:e.getFolder},e.title),e.isLast?"":" / ")}({getFolder:function(){return e.getFolder(t.id)},title:0===n?e.title:t.title,isLast:n+1===e.directories.length})}))},__dummy_131$0=0,__h_131=_$preact_49.h,__Component_131=_$preact_49.Component,_$Filter_131=function(e){function t(n){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.handleKeyPress=r.handleKeyPress.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.handleKeyPress=function(e){return 13===e.keyCode?(e.stopPropagation(),void e.preventDefault()):void this.props.filterQuery(e)},t.prototype.render=function(){var e=this;return __h_131("div",{"class":"uppy-ProviderBrowser-search"},__h_131("svg",{"aria-hidden":"true","class":"UppyIcon uppy-ProviderBrowser-searchIcon",viewBox:"0 0 100 100"},__h_131("path",{d:"M87.533 80.03L62.942 55.439c3.324-4.587 5.312-10.207 5.312-16.295 0-.312-.043-.611-.092-.908.05-.301.093-.605.093-.922 0-15.36-12.497-27.857-27.857-27.857-.273 0-.536.043-.799.08-.265-.037-.526-.08-.799-.08-15.361 0-27.858 12.497-27.858 27.857 0 .312.042.611.092.909a5.466 5.466 0 0 0-.093.921c0 15.36 12.496 27.858 27.857 27.858.273 0 .535-.043.8-.081.263.038.524.081.798.081 5.208 0 10.071-1.464 14.245-3.963L79.582 87.98a5.603 5.603 0 0 0 3.976 1.647 5.621 5.621 0 0 0 3.975-9.597zM39.598 55.838c-.265-.038-.526-.081-.8-.081-9.16 0-16.612-7.452-16.612-16.612 0-.312-.042-.611-.092-.908.051-.301.093-.605.093-.922 0-9.16 7.453-16.612 16.613-16.612.272 0 .534-.042.799-.079.263.037.525.079.799.079 9.16 0 16.612 7.452 16.612 16.612 0 .312.043.611.092.909-.05.301-.094.604-.094.921 0 9.16-7.452 16.612-16.612 16.612-.274 0-.536.043-.798.081z"})),__h_131("input",{"class":"uppy-u-reset uppy-ProviderBrowser-searchInput",type:"text",placeholder:this.props.i18n("filter"),"aria-label":this.props.i18n("filter"),onkeyup:this.handleKeyPress,onkeydown:this.handleKeyPress,onkeypress:this.handleKeyPress,value:this.props.filterInput,ref:function(t){e.input=t}}),this.props.filterInput&&__h_131("button",{"class":"uppy-u-reset uppy-ProviderBrowser-searchClose",type:"button","aria-label":this.props.i18n("resetFilter"),title:this.props.i18n("resetFilter"),onclick:this.props.filterQuery},__h_131("svg",{"aria-hidden":"true","class":"UppyIcon",viewBox:"0 0 19 19"},__h_131("path",{d:"M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z"}))))},t}(__Component_131),__h_132=_$preact_49.h,_$FooterActions_132=function(e){return __h_132("div",{"class":"uppy-ProviderBrowser-footer"},__h_132("button",{"class":"uppy-u-reset uppy-c-btn uppy-c-btn-primary",onclick:e.done},e.i18n("selectXFiles",{smart_count:e.selected})),__h_132("button",{"class":"uppy-u-reset uppy-c-btn uppy-c-btn-link",onclick:e.cancel},e.i18n("cancel")))},__h_133=_$preact_49.h,_$Item_133=function(e){var t=function(e){13===e.keyCode&&(e.stopPropagation(),e.preventDefault())},n=e.getItemIcon();return __h_133("li",{"class":"uppy-ProviderBrowserItem"+(e.isChecked?" uppy-ProviderBrowserItem--selected":"")+("video"===n?" uppy-ProviderBrowserItem--noPreview":"")},__h_133("div",{"class":"uppy-ProviderBrowserItem-checkbox"},__h_133("input",{type:"checkbox",role:"option",tabindex:0,"aria-label":"Select "+e.title,id:e.id,checked:e.isChecked,disabled:e.isDisabled,onchange:e.handleClick,onkeyup:t,onkeydown:t,onkeypress:t}),__h_133("label",{"for":e.id,onclick:e.handleClick})),__h_133("button",{type:"button","class":"uppy-ProviderBrowserItem-inner","aria-label":"Select "+e.title,tabindex:0,onclick:function(t){return t.preventDefault(),"folder"===e.type?e.handleFolderClick(t):void e.handleClick(t)}},function(e){if(null!==e)switch(e){case"file":return __h_133("svg",{"aria-hidden":"true","class":"UppyIcon",width:11,height:14.5,viewBox:"0 0 44 58"},__h_133("path",{d:"M27.437.517a1 1 0 0 0-.094.03H4.25C2.037.548.217 2.368.217 4.58v48.405c0 2.212 1.82 4.03 4.03 4.03H39.03c2.21 0 4.03-1.818 4.03-4.03V15.61a1 1 0 0 0-.03-.28 1 1 0 0 0 0-.093 1 1 0 0 0-.03-.032 1 1 0 0 0 0-.03 1 1 0 0 0-.032-.063 1 1 0 0 0-.03-.063 1 1 0 0 0-.032 0 1 1 0 0 0-.03-.063 1 1 0 0 0-.032-.03 1 1 0 0 0-.03-.063 1 1 0 0 0-.063-.062l-14.593-14a1 1 0 0 0-.062-.062A1 1 0 0 0 28 .708a1 1 0 0 0-.374-.157 1 1 0 0 0-.156 0 1 1 0 0 0-.03-.03l-.003-.003zM4.25 2.547h22.218v9.97c0 2.21 1.82 4.03 4.03 4.03h10.564v36.438a2.02 2.02 0 0 1-2.032 2.032H4.25c-1.13 0-2.032-.9-2.032-2.032V4.58c0-1.13.902-2.032 2.03-2.032zm24.218 1.345l10.375 9.937.75.718H30.5c-1.13 0-2.032-.9-2.032-2.03V3.89z"}));case"folder":return __h_133("svg",{"aria-hidden":"true","class":"UppyIcon",style:{width:16,marginRight:3},viewBox:"0 0 276.157 276.157"},__h_133("path",{d:"M273.08 101.378c-3.3-4.65-8.86-7.32-15.254-7.32h-24.34V67.59c0-10.2-8.3-18.5-18.5-18.5h-85.322c-3.63 0-9.295-2.875-11.436-5.805l-6.386-8.735c-4.982-6.814-15.104-11.954-23.546-11.954H58.73c-9.292 0-18.638 6.608-21.737 15.372l-2.033 5.752c-.958 2.71-4.72 5.37-7.596 5.37H18.5C8.3 49.09 0 57.39 0 67.59v167.07c0 .886.16 1.73.443 2.52.152 3.306 1.18 6.424 3.053 9.064 3.3 4.652 8.86 7.32 15.255 7.32h188.487c11.395 0 23.27-8.425 27.035-19.18l40.677-116.188c2.11-6.035 1.43-12.164-1.87-16.816zM18.5 64.088h8.864c9.295 0 18.64-6.607 21.738-15.37l2.032-5.75c.96-2.712 4.722-5.373 7.597-5.373h29.565c3.63 0 9.295 2.876 11.437 5.806l6.386 8.735c4.982 6.815 15.104 11.954 23.546 11.954h85.322c1.898 0 3.5 1.602 3.5 3.5v26.47H69.34c-11.395 0-23.27 8.423-27.035 19.178L15 191.23V67.59c0-1.898 1.603-3.5 3.5-3.5zm242.29 49.15l-40.676 116.188c-1.674 4.78-7.812 9.135-12.877 9.135H18.75c-1.447 0-2.576-.372-3.02-.997-.442-.625-.422-1.814.057-3.18l40.677-116.19c1.674-4.78 7.812-9.134 12.877-9.134h188.487c1.448 0 2.577.372 3.02.997.443.625.423 1.814-.056 3.18z"}));case"video":return __h_133("svg",{"aria-hidden":"true",viewBox:"0 0 58 58"},__h_133("path",{d:"M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z"}),__h_133("path",{d:"M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z"}));default:return __h_133("img",{src:e})}}(e.getItemIcon()),e.showTitles&&e.title))},__dummy_134$0=0,__h_134=_$preact_49.h,_$ItemList_134=function(e){return e.folders.length||e.files.length?__h_134("div",{"class":"uppy-ProviderBrowser-body"},__h_134("ul",{"class":"uppy-ProviderBrowser-list",onscroll:e.handleScroll,role:"listbox","aria-label":"List of files from "+e.title},e.folders.map(function(t){var n=!1,r=e.isChecked(t);return r&&(n=r.loading),_$Item_133({title:t.name,id:t.id,type:"folder",getItemIcon:function(){return t.icon},isDisabled:n,isChecked:r,handleFolderClick:function(){return e.handleFolderClick(t)},handleClick:function(n){return e.toggleCheckbox(n,t)},columns:e.columns,showTitles:e.showTitles})}),e.files.map(function(t){return _$Item_133({title:t.name,id:t.id,type:"file",getItemIcon:function(){return t.icon},isDisabled:!1,isChecked:e.isChecked(t),handleClick:function(n){return e.toggleCheckbox(n,t)},columns:e.columns,showTitles:e.showTitles})}))):__h_134("div",{"class":"uppy-Provider-empty"},e.i18n("noFilesFound"))},___extends_130=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__dummy_130$0=0,__dummy_130$1=0,__dummy_130$2=0,__dummy_130$3=0,__dummy_130$4=0,__h_130=_$preact_49.h,_$Browser_130=function(e){var t=e.folders,n=e.files;""!==e.filterInput&&(t=e.filterItems(e.folders),n=e.filterItems(e.files));var r=e.currentSelection.length;return __h_130("div",{"class":_$classnames_9("uppy-ProviderBrowser","uppy-ProviderBrowser-viewType--"+e.viewType)},__h_130("div",{"class":"uppy-ProviderBrowser-header"},__h_130("div",{"class":_$classnames_9("uppy-ProviderBrowser-headerBar",!e.showBreadcrumbs&&"uppy-ProviderBrowser-headerBar--simple")},e.showBreadcrumbs&&_$Breadcrumbs_129({getFolder:e.getFolder,directories:e.directories,breadcrumbsIcon:e.pluginIcon&&e.pluginIcon(),title:e.title}),__h_130("span",{"class":"uppy-ProviderBrowser-user"},e.username),__h_130("button",{type:"button",onclick:e.logout,"class":"uppy-ProviderBrowser-userLogout"},e.i18n("logOut")))),e.showFilter&&__h_130(_$Filter_131,e),__h_130(_$ItemList_134,{columns:[{name:"Name",key:"title"}],folders:t,files:n,activeRow:e.isActiveRow,sortByTitle:e.sortByTitle,sortByDate:e.sortByDate,isChecked:e.isChecked,handleFolderClick:e.getNextFolder,toggleCheckbox:e.toggleCheckbox,handleScroll:e.handleScroll,title:e.title,showTitles:e.showTitles,i18n:e.i18n}),r>0&&__h_130(_$FooterActions_132,___extends_130({selected:r},e)))},___extends_136=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__dummy_136$0=0,__h_136=_$preact_49.h,__Component_136=_$preact_49.Component,__dummy_136$1=0,__dummy_136$2=0,__dummy_136$3=0,__dummy_136$4=0,__dummy_136$5=0,__dummy_136$6=0,CloseWrapper=function(e){function t(){return ___classCallCheck_136(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillUnmount=function(){this.props.onUnmount()},t.prototype.render=function(){return this.props.children[0]},t}(__Component_136),_$lib_136=function(){function e(t,n){___classCallCheck_136(this,e),this.plugin=t,this.provider=n.provider,this.opts=___extends_136({},{viewType:"list",showTitles:!0,showFilter:!0,showBreadcrumbs:!0},n),this.addFile=this.addFile.bind(this),this.filterItems=this.filterItems.bind(this),this.filterQuery=this.filterQuery.bind(this),this.toggleSearch=this.toggleSearch.bind(this),this.getFolder=this.getFolder.bind(this),this.getNextFolder=this.getNextFolder.bind(this),this.logout=this.logout.bind(this),this.checkAuth=this.checkAuth.bind(this),this.handleAuth=this.handleAuth.bind(this),this.handleDemoAuth=this.handleDemoAuth.bind(this),this.sortByTitle=this.sortByTitle.bind(this),this.sortByDate=this.sortByDate.bind(this),this.isActiveRow=this.isActiveRow.bind(this),this.isChecked=this.isChecked.bind(this),this.toggleCheckbox=this.toggleCheckbox.bind(this),this.handleError=this.handleError.bind(this),this.handleScroll=this.handleScroll.bind(this),this.donePicking=this.donePicking.bind(this),this.cancelPicking=this.cancelPicking.bind(this),this.clearSelection=this.clearSelection.bind(this),this.render=this.render.bind(this),this.clearSelection()}return e.prototype.tearDown=function(){},e.prototype._updateFilesAndFolders=function(e,t,n){this.nextPagePath=e.nextPagePath,e.items.forEach(function(e){e.isFolder?n.push(e):t.push(e)}),this.plugin.setPluginState({folders:n,files:t})},e.prototype.checkAuth=function(){var e=this;this.plugin.setPluginState({checkAuthInProgress:!0}),this.provider.checkAuth().then(function(t){e.plugin.setPluginState({checkAuthInProgress:!1}),e.plugin.onAuth(t)})["catch"](function(t){e.plugin.setPluginState({checkAuthInProgress:!1}),e.handleError(t)})},e.prototype.getFolder=function(e,t){var n=this;return this._loaderWrapper(this.provider.list(e),function(r){var o,i=n.plugin.getPluginState(),s=function(t,n){for(var r=0;r<t.length;r++)if(o=t[r],e===o.id)return r;var o;return-1}(i.directories);o=-1!==s?i.directories.slice(0,s+1):i.directories.concat([{id:e,title:t}]),n.username=n.username?n.username:r.username,n._updateFilesAndFolders(r,[],[]),n.plugin.setPluginState({directories:o})},this.handleError)},e.prototype.getNextFolder=function(e){this.getFolder(e.requestPath,e.name),this.lastCheckbox=void 0},e.prototype.addFile=function(e){var t={id:this.providerFileToId(e),source:this.plugin.id,data:e,name:e.name||e.id,type:e.mimeType,isRemote:!0,body:{fileId:e.id},remote:{serverUrl:this.plugin.opts.serverUrl,url:""+this.provider.fileUrl(e.requestPath),body:{fileId:e.id},providerOptions:this.provider.opts}},n=_$getFileType_162(t);n&&_$isPreviewSupported_169(n)&&(t.preview=e.thumbnail),this.plugin.uppy.log("Adding remote file");try{this.plugin.uppy.addFile(t)}catch(e){}},e.prototype.removeFile=function(e){var t=this.plugin.getPluginState().currentSelection;this.plugin.setPluginState({currentSelection:t.filter(function(t){return t.id!==e})})},e.prototype.logout=function(){var e=this;this.provider.logout(location.href).then(function(t){t.ok&&e.plugin.setPluginState({authenticated:!1,files:[],folders:[],directories:[]})})["catch"](this.handleError)},e.prototype.filterQuery=function(e){var t=this.plugin.getPluginState();this.plugin.setPluginState(___extends_136({},t,{filterInput:e?e.target.value:""}))},e.prototype.toggleSearch=function(e){var t=this.plugin.getPluginState();this.plugin.setPluginState({isSearchVisible:!t.isSearchVisible,filterInput:""})},e.prototype.filterItems=function(e){var t=this.plugin.getPluginState();return""===t.filterInput?e:e.filter(function(e){return-1!==e.name.toLowerCase().indexOf(t.filterInput.toLowerCase())})},e.prototype.sortByTitle=function(){var e=___extends_136({},this.plugin.getPluginState()),t=e.files,n=e.folders,r=e.sorting,o=t.sort(function(e,t){return"titleDescending"===r?t.name.localeCompare(e.name):e.name.localeCompare(t.name)}),i=n.sort(function(e,t){return"titleDescending"===r?t.name.localeCompare(e.name):e.name.localeCompare(t.name)});this.plugin.setPluginState(___extends_136({},e,{files:o,folders:i,sorting:"titleDescending"===r?"titleAscending":"titleDescending"}))},e.prototype.sortByDate=function(){var e=___extends_136({},this.plugin.getPluginState()),t=e.files,n=e.folders,r=e.sorting,o=t.sort(function(e,t){var n=new Date(e.modifiedDate),o=new Date(t.modifiedDate);return"dateDescending"===r?n>o?-1:n<o?1:0:n>o?1:n<o?-1:0}),i=n.sort(function(e,t){var n=new Date(e.modifiedDate),o=new Date(t.modifiedDate);return"dateDescending"===r?n>o?-1:n<o?1:0:n>o?1:n<o?-1:0});this.plugin.setPluginState(___extends_136({},e,{files:o,folders:i,sorting:"dateDescending"===r?"dateAscending":"dateDescending"}))},e.prototype.sortBySize=function(){var e=___extends_136({},this.plugin.getPluginState()),t=e.files,n=e.sorting;if(t.length&&this.plugin.getItemData(t[0]).size){var r=t.sort(function(e,t){var r=e.size,o=t.size;return"sizeDescending"===n?r>o?-1:r<o?1:0:r>o?1:r<o?-1:0});this.plugin.setPluginState(___extends_136({},e,{files:r,sorting:"sizeDescending"===n?"sizeAscending":"sizeDescending"}))}},e.prototype.isActiveRow=function(e){return this.plugin.getPluginState().activeRow===this.plugin.getItemId(e)},e.prototype.isChecked=function(e){return this.plugin.getPluginState().currentSelection.some(function(t){return t===e})},e.prototype.addFolder=function(e){var t=this,n=this.providerFileToId(e),r=this.plugin.getPluginState(),o=r.selectedFolders||{};if(!(n in o&&o[n].loading))return o[n]={loading:!0,files:[]},this.plugin.setPluginState({selectedFolders:o}),this.provider.list(e.requestPath).then(function(i){var s=[];i.items.forEach(function(e){e.isFolder||(t.addFile(e),s.push(t.providerFileToId(e)))}),(r=t.plugin.getPluginState()).selectedFolders[n]={loading:!1,files:s},t.plugin.setPluginState({selectedFolders:o});var a,u=t.plugin.uppy.getPlugin("Dashboard");a=s.length?u.i18n("folderAdded",{smart_count:s.length,folder:e.name}):u.i18n("emptyFolderAdded"),t.plugin.uppy.info(a)})["catch"](function(e){delete(r=t.plugin.getPluginState()).selectedFolders[n],t.plugin.setPluginState({selectedFolders:r.selectedFolders}),t.handleError(e)})},e.prototype.toggleCheckbox=function(e,t){e.stopPropagation(),e.preventDefault();var n=this.plugin.getPluginState(),r=n.folders,o=n.files,i=this.filterItems(r.concat(o));if(this.lastCheckbox&&e.shiftKey){var s,a=i.indexOf(this.lastCheckbox),u=i.indexOf(t);return s=a<u?i.slice(a,u+1):i.slice(u,a+1),void this.plugin.setPluginState({currentSelection:s})}this.lastCheckbox=t;var l=this.plugin.getPluginState().currentSelection;this.isChecked(t)?this.plugin.setPluginState({currentSelection:l.filter(function(e){return e!==t})}):this.plugin.setPluginState({currentSelection:l.concat([t])})},e.prototype.providerFileToId=function(e){return _$generateFileID_159({data:e,name:e.name||e.id,type:e.mimeType})},e.prototype.handleDemoAuth=function(){var e=this.plugin.getPluginState();this.plugin.setPluginState({},e,{authenticated:!0})},e.prototype.handleAuth=function(){var e=this,t=btoa(JSON.stringify({origin:location.origin})),n=this.provider.authUrl()+"?state="+t,r=window.open(n,"_blank");window.addEventListener("message",function o(t){e._isOriginAllowed(t.origin,e.plugin.opts.serverPattern)&&t.source===r?(r.close(),window.removeEventListener("message",o),e.provider.setAuthToken(t.data.token),e._loaderWrapper(e.provider.checkAuth(),e.plugin.onAuth,e.handleError)):e.plugin.uppy.log("rejecting event from "+t.origin+" vs allowed pattern "+e.plugin.opts.serverPattern)})},e.prototype._isOriginAllowed=function(e,t){var n=function(e){return"string"==typeof e?new RegExp("^"+e+"$"):e instanceof RegExp?e:void 0};return(Array.isArray(t)?t.map(n):[n(t)]).filter(function(e){return null!==e}).some(function(t){return t.test(e)})},e.prototype.handleError=function(e){var t=this.plugin.uppy,n=t.i18n("companionError");t.log(e.toString()),t.info({message:n,details:e.toString()},"error",5e3)},e.prototype.handleScroll=function(e){var t=this,n=e.target.scrollHeight-(e.target.scrollTop+e.target.offsetHeight),r=this.nextPagePath||null;n<50&&r&&!this._isHandlingScroll&&(this.provider.list(r).then(function(e){var n=t.plugin.getPluginState(),r=n.files,o=n.folders;t._updateFilesAndFolders(e,r,o)})["catch"](this.handleError).then(function(){t._isHandlingScroll=!1}),this._isHandlingScroll=!0)},e.prototype.donePicking=function(){var e=this,t=this.plugin.getPluginState().currentSelection.map(function(t){return t.isFolder?e.addFolder(t):e.addFile(t)});this._loaderWrapper(Promise.all(t),function(){e.clearSelection()},function(){})},e.prototype.cancelPicking=function(){this.clearSelection();var e=this.plugin.uppy.getPlugin("Dashboard");e&&e.hideAllPanels()},e.prototype.clearSelection=function(){this.plugin.setPluginState({currentSelection:[]})},e.prototype._loaderWrapper=function(e,t,n){var r=this;e.then(function(e){r.plugin.setPluginState({loading:!1}),t(e)})["catch"](function(e){r.plugin.setPluginState({loading:!1}),n(e)}),this.plugin.setPluginState({loading:!0})},e.prototype.render=function(e){var t=this.plugin.getPluginState(),n=t.authenticated,r=t.checkAuthInProgress;if(t.loading)return __h_136(CloseWrapper,{onUnmount:this.clearSelection},__h_136(_$Loader_135,null));if(!n)return __h_136(CloseWrapper,{onUnmount:this.clearSelection},__h_136(_$AuthView_128,{pluginName:this.plugin.title,pluginIcon:this.plugin.icon,demo:this.plugin.opts.demo,checkAuth:this.checkAuth,handleAuth:this.handleAuth,handleDemoAuth:this.handleDemoAuth,checkAuthInProgress:r}));var o=___extends_136({},this.plugin.getPluginState(),{username:this.username,getNextFolder:this.getNextFolder,getFolder:this.getFolder,filterItems:this.filterItems,filterQuery:this.filterQuery,toggleSearch:this.toggleSearch,sortByTitle:this.sortByTitle,sortByDate:this.sortByDate,logout:this.logout,demo:this.plugin.opts.demo,isActiveRow:this.isActiveRow,isChecked:this.isChecked,toggleCheckbox:this.toggleCheckbox,handleScroll:this.handleScroll,done:this.donePicking,cancel:this.cancelPicking,title:this.plugin.title,viewType:this.opts.viewType,showTitles:this.opts.showTitles,showFilter:this.opts.showFilter,showBreadcrumbs:this.opts.showBreadcrumbs,pluginIcon:this.plugin.icon,i18n:this.plugin.uppy.i18n});return __h_136(CloseWrapper,{onUnmount:this.clearSelection},__h_136(_$Browser_130,o))},e}(),__Plugin_116=_$lib_96.Plugin,__Provider_116=_$lib_94.Provider,__dummy_116$0=0,__h_116=_$preact_49.h,_$lib_116=function(e){function t(n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return o.id=o.opts.id||"Dropbox",__Provider_116.initPlugin(o,r),o.title=o.opts.title||"Dropbox",o.icon=function(){return __h_116("svg",{"aria-hidden":"true",fill:"#0060ff",width:"128",height:"118",viewBox:"0 0 128 118"},__h_116("path",{d:"M38.145.777L1.108 24.96l25.608 20.507 37.344-23.06z"}),__h_116("path",{d:"M1.108 65.975l37.037 24.183L64.06 68.525l-37.343-23.06zM64.06 68.525l25.917 21.633 37.036-24.183-25.61-20.51z"}),__h_116("path",{d:"M127.014 24.96L89.977.776 64.06 22.407l37.345 23.06zM64.136 73.18l-25.99 21.567-11.122-7.262v8.142l37.112 22.256 37.114-22.256v-8.142l-11.12 7.262z"}))},o.provider=new __Provider_116(n,{serverUrl:o.opts.serverUrl,serverHeaders:o.opts.serverHeaders,provider:"dropbox"}),o.onAuth=o.onAuth.bind(o),o.render=o.render.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.install=function(){this.view=new _$lib_136(this,{provider:this.provider}),this.setPluginState({authenticated:!1,files:[],folders:[],directories:[],activeRow:-1,filterInput:"",isSearchVisible:!1});var e=this.opts.target;e&&this.mount(e,this)},t.prototype.uninstall=function(){this.view.tearDown(),this.unmount()},t.prototype.onAuth=function(e){this.setPluginState({authenticated:e}),e&&this.view.getFolder()},t.prototype.render=function(e){return this.view.render(e)},t}(__Plugin_116),___extends_117=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__Plugin_117=_$lib_96.Plugin,__dummy_117$0=0,__dummy_117$1=0,__h_117=_$preact_49.h,_$lib_117=function(e){function t(n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));o.id=o.opts.id||"FileInput",o.title="File Input",o.type="acquirer";var i={strings:{chooseFiles:"Choose files"}},s={target:null,pretty:!0,inputName:"files[]",locale:i};return o.opts=___extends_117({},s,r),o.translator=new _$Translator_153([i,o.uppy.locale,o.opts.locale]),o.i18n=o.translator.translate.bind(o.translator),o.i18nArray=o.translator.translateArray.bind(o.translator),o.render=o.render.bind(o),o.handleInputChange=o.handleInputChange.bind(o),o.handleClick=o.handleClick.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.handleInputChange=function(e){var t=this;this.uppy.log("[FileInput] Something selected through input..."),_$toArray_176(e.target.files).forEach(function(e){try{t.uppy.addFile({source:t.id,name:e.name,type:e.type,data:e})}catch(e){}})},t.prototype.handleClick=function(e){this.input.click()},t.prototype.render=function(e){var t=this,n=this.uppy.opts.restrictions,r=n.allowedFileTypes?n.allowedFileTypes.join(","):null;return __h_117("div",{"class":"uppy-Root uppy-FileInput-container"},__h_117("input",{"class":"uppy-FileInput-input",style:this.opts.pretty&&{width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1},type:"file",name:this.opts.inputName,onchange:this.handleInputChange,multiple:1!==n.maxNumberOfFiles,accept:r,ref:function(e){t.input=e},value:""}),this.opts.pretty&&__h_117("button",{"class":"uppy-FileInput-btn",type:"button",onclick:this.handleClick},this.i18n("chooseFiles")))},t.prototype.install=function(){var e=this.opts.target;e&&this.mount(e,this)},t.prototype.uninstall=function(){this.unmount()},t}(__Plugin_117),_$lib_37={__esModule:!0};_$lib_37["default"]=getFormData,_$lib_37.getFieldData=getFieldData;var NODE_LIST_CLASSES={"[object HTMLCollection]":!0,"[object NodeList]":!0,"[object RadioNodeList]":!0},IGNORED_ELEMENT_TYPES={button:!0,fieldset:!0,reset:!0,submit:!0},CHECKED_INPUT_TYPES={checkbox:!0,radio:!0},TRIM_RE=/^\s+|\s+$/g,slice=Array.prototype.slice,toString=Object.prototype.toString;getFormData.getFieldData=getFieldData;var ___extends_118=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__Plugin_118=_$lib_96.Plugin,__dummy_118$0=0,__dummy_118$1=0,__getFormData_118=_$lib_37["default"]||_$lib_37,_$lib_118=function(e){
function t(n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return o.type="acquirer",o.id="Form",o.title="Form",o.opts=___extends_118({},{target:null,resultName:"uppyResult",getMetaFromForm:!0,addResultToForm:!0,submitOnSuccess:!1,triggerUploadOnSubmit:!1},r),o.handleFormSubmit=o.handleFormSubmit.bind(o),o.handleUploadStart=o.handleUploadStart.bind(o),o.handleSuccess=o.handleSuccess.bind(o),o.addResultToForm=o.addResultToForm.bind(o),o.getMetaFromForm=o.getMetaFromForm.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.handleUploadStart=function(){this.opts.getMetaFromForm&&this.getMetaFromForm()},t.prototype.handleSuccess=function(e){this.opts.addResultToForm&&this.addResultToForm(e),this.opts.submitOnSuccess&&this.form.submit()},t.prototype.handleFormSubmit=function(e){var t=this;if(this.opts.triggerUploadOnSubmit){e.preventDefault();var n=_$toArray_176(e.target.elements),r=[];n.forEach(function(e){("BUTTON"===e.tagName||"INPUT"===e.tagName&&"submit"===e.type)&&!e.disabled&&(e.disabled=!0,r.push(e))}),this.uppy.upload().then(function(){r.forEach(function(e){e.disabled=!1})},function(e){return r.forEach(function(e){e.disabled=!1}),Promise.reject(e)})["catch"](function(e){t.uppy.log(e.stack||e.message||e)})}},t.prototype.addResultToForm=function(e){this.uppy.log("[Form] Adding result to the original form:"),this.uppy.log(e);var t=this.form.querySelector('[name="'+this.opts.resultName+'"]');t?t.value=JSON.stringify(e):((t=document.createElement("input")).name=this.opts.resultName,t.type="hidden",t.value=JSON.stringify(e),this.form.appendChild(t))},t.prototype.getMetaFromForm=function(){var e=__getFormData_118(this.form);this.uppy.setMeta(e)},t.prototype.install=function(){this.form=_$findDOMElement_158(this.opts.target),this.form&&"FORM"!==!this.form.nodeName?(this.form.addEventListener("submit",this.handleFormSubmit),this.uppy.on("upload",this.handleUploadStart),this.uppy.on("complete",this.handleSuccess)):console.error("Form plugin requires a <form> target element passed in options to operate, none was found","error")},t.prototype.uninstall=function(){this.form.removeEventListener("submit",this.handleFormSubmit),this.uppy.off("upload",this.handleUploadStart),this.uppy.off("complete",this.handleSuccess)},t}(__Plugin_118),_$IndexedDBStore_119={},___extends_119=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__dummy_119$0=0,indexedDB="undefined"!=typeof window&&(window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB),isSupported=!!indexedDB,DB_NAME="uppy-blobs",STORE_NAME="files",DEFAULT_EXPIRY=864e5,DB_VERSION=3,cleanedUp=!1,IndexedDBStore=function(){function e(t){var n=this;!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.opts=___extends_119({dbName:DB_NAME,storeName:"default",expires:DEFAULT_EXPIRY,maxFileSize:10485760,maxTotalSize:314572800},t),this.name=this.opts.storeName;var r=function(){return connect(n.opts.dbName)};cleanedUp?this.ready=r():(cleanedUp=!0,this.ready=e.cleanup().then(r,r))}return e.prototype.key=function(e){return this.name+"!"+e},e.prototype.list=function(){var e=this;return this.ready.then(function(t){return waitForRequest(t.transaction([STORE_NAME],"readonly").objectStore(STORE_NAME).index("store").getAll(IDBKeyRange.only(e.name)))}).then(function(e){var t={};return e.forEach(function(e){t[e.fileID]=e.data}),t})},e.prototype.get=function(e){var t=this;return this.ready.then(function(n){return waitForRequest(n.transaction([STORE_NAME],"readonly").objectStore(STORE_NAME).get(t.key(e)))}).then(function(e){return{id:e.data.fileID,data:e.data.data}})},e.prototype.getSize=function(){var e=this;return this.ready.then(function(t){var n=t.transaction([STORE_NAME],"readonly").objectStore(STORE_NAME).index("store").openCursor(IDBKeyRange.only(e.name));return new Promise(function(e,t){var r=0;n.onsuccess=function(t){var n=t.target.result;n?(r+=n.value.data.size,n["continue"]()):e(r)},n.onerror=function(){t(new Error("Could not retrieve stored blobs size"))}})})},e.prototype.put=function(e){var t=this;return e.data.size>this.opts.maxFileSize?Promise.reject(new Error("File is too big to store.")):this.getSize().then(function(e){return e>t.opts.maxTotalSize?Promise.reject(new Error("No space left")):t.ready}).then(function(n){return waitForRequest(n.transaction([STORE_NAME],"readwrite").objectStore(STORE_NAME).add({id:t.key(e.id),fileID:e.id,store:t.name,expires:Date.now()+t.opts.expires,data:e.data}))})},e.prototype["delete"]=function(e){var t=this;return this.ready.then(function(n){return waitForRequest(n.transaction([STORE_NAME],"readwrite").objectStore(STORE_NAME)["delete"](t.key(e)))})},e.cleanup=function(){return connect(DB_NAME).then(function(e){var t=e.transaction([STORE_NAME],"readwrite").objectStore(STORE_NAME).index("expires").openCursor(IDBKeyRange.upperBound(Date.now()));return new Promise(function(n,r){t.onsuccess=function(t){var r=t.target.result;if(r){var o=r.value;console.log("[IndexedDBStore] Deleting record",o.fileID,"of size",_$prettierBytes_50(o.data.size),"- expired on",new Date(o.expires)),r["delete"](),r["continue"]()}else n(e)},t.onerror=r})}).then(function(e){e.close()})},e}();IndexedDBStore.isSupported=isSupported,_$IndexedDBStore_119=IndexedDBStore;var ___extends_120=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__cleanedUp_120=!1,_$MetaDataStore_120=function(){function e(t){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.opts=___extends_120({expires:864e5},t),this.name="uppyState:"+t.storeName,__cleanedUp_120||(__cleanedUp_120=!0,e.cleanup())}return e.prototype.load=function(){var e=localStorage.getItem(this.name);if(!e)return null;var t=maybeParse(e);return t?t.metadata?t.metadata:(this.save(t),t):null},e.prototype.save=function(e){var t=Date.now()+this.opts.expires,n=JSON.stringify({metadata:e,expires:t});localStorage.setItem(this.name,n)},e.cleanup=function(){var e=function(){for(var e=[],t=0;t<localStorage.length;t++){var n=localStorage.key(t);/^uppyState:/.test(n)&&e.push(n.slice("uppyState:".length))}return e}(),t=Date.now();e.forEach(function(e){var n=localStorage.getItem("uppyState:"+e);if(!n)return null;var r=maybeParse(n);return r?void(r.expires&&r.expires<t&&localStorage.removeItem("uppyState:"+e)):null})},e}(),_$ServiceWorkerStore_121={},__isSupported_121="undefined"!=typeof navigator&&"serviceWorker"in navigator,ServiceWorkerStore=function(){function e(t){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.ready=new Promise(function(e,t){__isSupported_121?navigator.serviceWorker.controller?e():navigator.serviceWorker.addEventListener("controllerchange",function(){e()}):t(new Error("Unsupported"))}),this.name=t.storeName}return e.prototype.list=function(){var e=this,t={},n=new Promise(function(e,n){t.resolve=e,t.reject=n});console.log("Loading stored blobs from Service Worker");var r=function o(n){if(n.data.store===e.name)switch(n.data.type){case"uppy/ALL_FILES":t.resolve(n.data.files),navigator.serviceWorker.removeEventListener("message",o)}};return this.ready.then(function(){navigator.serviceWorker.addEventListener("message",r),navigator.serviceWorker.controller.postMessage({type:"uppy/GET_FILES",store:e.name})}),n},e.prototype.put=function(e){var t=this;return this.ready.then(function(){navigator.serviceWorker.controller.postMessage({type:"uppy/ADD_FILE",store:t.name,file:e})})},e.prototype["delete"]=function(e){var t=this;return this.ready.then(function(){navigator.serviceWorker.controller.postMessage({type:"uppy/REMOVE_FILE",store:t.name,fileID:e})})},e}();ServiceWorkerStore.isSupported=__isSupported_121,_$ServiceWorkerStore_121=ServiceWorkerStore;var ___extends_122=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__Plugin_122=_$lib_96.Plugin,__dummy_122$0=0,__dummy_122$1=0,__dummy_122$2=0,_$lib_122=function(e){function t(n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return o.type="debugger",o.id="GoldenRetriever",o.title="Golden Retriever",o.opts=___extends_122({},{expires:864e5,serviceWorker:!1},r),o.MetaDataStore=new _$MetaDataStore_120({expires:o.opts.expires,storeName:n.getID()}),o.ServiceWorkerStore=null,o.opts.serviceWorker&&(o.ServiceWorkerStore=new _$ServiceWorkerStore_121({storeName:n.getID()})),o.IndexedDBStore=new _$IndexedDBStore_119(___extends_122({expires:o.opts.expires},r.indexedDB||{},{storeName:n.getID()})),o.saveFilesStateToLocalStorage=o.saveFilesStateToLocalStorage.bind(o),o.loadFilesStateFromLocalStorage=o.loadFilesStateFromLocalStorage.bind(o),o.loadFileBlobsFromServiceWorker=o.loadFileBlobsFromServiceWorker.bind(o),o.loadFileBlobsFromIndexedDB=o.loadFileBlobsFromIndexedDB.bind(o),o.onBlobsLoaded=o.onBlobsLoaded.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.loadFilesStateFromLocalStorage=function(){var e=this.MetaDataStore.load();e&&(this.uppy.log("[GoldenRetriever] Recovered some state from Local Storage"),this.uppy.setState({currentUploads:e.currentUploads||{},files:e.files||{}}),this.savedPluginData=e.pluginData)},t.prototype.getWaitingFiles=function(){var e={};return this.uppy.getFiles().forEach(function(t){t.progress&&t.progress.uploadStarted||(e[t.id]=t)}),e},t.prototype.getUploadingFiles=function(){var e=this,t={},n=this.uppy.getState().currentUploads;return n&&Object.keys(n).forEach(function(r){n[r].fileIDs.forEach(function(n){t[n]=e.uppy.getFile(n)})}),t},t.prototype.saveFilesStateToLocalStorage=function(){var e=___extends_122(this.getWaitingFiles(),this.getUploadingFiles()),t={};this.uppy.emit("restore:get-data",function(e){___extends_122(t,e)});var n=this.uppy.getState().currentUploads;this.MetaDataStore.save({currentUploads:n,files:e,pluginData:t})},t.prototype.loadFileBlobsFromServiceWorker=function(){var e=this;this.ServiceWorkerStore.list().then(function(t){var n=Object.keys(t).length;return n===e.uppy.getFiles().length?(e.uppy.log("[GoldenRetriever] Successfully recovered "+n+" blobs from Service Worker!"),e.uppy.info("Successfully recovered "+n+" files","success",3e3),e.onBlobsLoaded(t)):(e.uppy.log("[GoldenRetriever] No blobs found in Service Worker, trying IndexedDB now..."),e.loadFileBlobsFromIndexedDB())})["catch"](function(t){e.uppy.log("[GoldenRetriever] Failed to recover blobs from Service Worker","warning"),e.uppy.log(t)})},t.prototype.loadFileBlobsFromIndexedDB=function(){var e=this;this.IndexedDBStore.list().then(function(t){var n=Object.keys(t).length;return n>0?(e.uppy.log("[GoldenRetriever] Successfully recovered "+n+" blobs from IndexedDB!"),e.uppy.info("Successfully recovered "+n+" files","success",3e3),e.onBlobsLoaded(t)):void e.uppy.log("[GoldenRetriever] No blobs found in IndexedDB")})["catch"](function(t){e.uppy.log("[GoldenRetriever] Failed to recover blobs from IndexedDB","warning"),e.uppy.log(t)})},t.prototype.onBlobsLoaded=function(e){var t=this,n=[],r=___extends_122({},this.uppy.getState().files);Object.keys(e).forEach(function(o){var i=t.uppy.getFile(o);if(i){var s=e[o],a=___extends_122({},i,{data:s,isRestored:!0});r[o]=a}else n.push(o)}),this.uppy.setState({files:r}),this.uppy.emit("restored",this.savedPluginData),n.length&&this.deleteBlobs(n).then(function(){t.uppy.log("[GoldenRetriever] Cleaned up "+n.length+" old files")})["catch"](function(e){t.uppy.log("[GoldenRetriever] Could not clean up "+n.length+" old files","warning"),t.uppy.log(e)})},t.prototype.deleteBlobs=function(e){var t=this,n=[];return e.forEach(function(e){t.ServiceWorkerStore&&n.push(t.ServiceWorkerStore["delete"](e)),t.IndexedDBStore&&n.push(t.IndexedDBStore["delete"](e))}),Promise.all(n)},t.prototype.install=function(){var e=this;this.loadFilesStateFromLocalStorage(),this.uppy.getFiles().length>0?this.ServiceWorkerStore?(this.uppy.log("[GoldenRetriever] Attempting to load files from Service Worker..."),this.loadFileBlobsFromServiceWorker()):(this.uppy.log("[GoldenRetriever] Attempting to load files from Indexed DB..."),this.loadFileBlobsFromIndexedDB()):(this.uppy.log("[GoldenRetriever] No files need to be loaded, only restoring processing state..."),this.onBlobsLoaded([])),this.uppy.on("file-added",function(t){t.isRemote||(e.ServiceWorkerStore&&e.ServiceWorkerStore.put(t)["catch"](function(t){e.uppy.log("[GoldenRetriever] Could not store file","warning"),e.uppy.log(t)}),e.IndexedDBStore.put(t)["catch"](function(t){e.uppy.log("[GoldenRetriever] Could not store file","warning"),e.uppy.log(t)}))}),this.uppy.on("file-removed",function(t){e.ServiceWorkerStore&&e.ServiceWorkerStore["delete"](t.id)["catch"](function(t){e.uppy.log("[GoldenRetriever] Failed to remove file","warning"),e.uppy.log(t)}),e.IndexedDBStore["delete"](t.id)["catch"](function(t){e.uppy.log("[GoldenRetriever] Failed to remove file","warning"),e.uppy.log(t)})}),this.uppy.on("complete",function(t){var n=t.successful,r=n.map(function(e){return e.id});e.deleteBlobs(r).then(function(){e.uppy.log("[GoldenRetriever] Removed "+n.length+" files that finished uploading")})["catch"](function(t){e.uppy.log("[GoldenRetriever] Could not remove "+n.length+" files that finished uploading","warning"),e.uppy.log(t)})}),this.uppy.on("state-update",this.saveFilesStateToLocalStorage),this.uppy.on("restored",function(){var t=e.uppy.getState().currentUploads;t&&Object.keys(t).forEach(function(n){e.uppy.restore(n,t[n])})})},t}(__Plugin_122),_$DriveProviderViews_123=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.toggleCheckbox=function(t,n){t.stopPropagation(),t.preventDefault(),n.custom.isTeamDrive||e.prototype.toggleCheckbox.call(this,t,n)},t}(_$lib_136),__Plugin_124=_$lib_96.Plugin,__Provider_124=_$lib_94.Provider,__dummy_124$0=0,__h_124=_$preact_49.h,_$lib_124=function(e){function t(n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return o.id=o.opts.id||"GoogleDrive",o.title=o.opts.title||"Google Drive",__Provider_124.initPlugin(o,r),o.title=o.opts.title||"Google Drive",o.icon=function(){return __h_124("svg",{"aria-hidden":"true",width:"18px",height:"16px",viewBox:"0 0 18 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},__h_124("g",{"fill-rule":"evenodd"},__h_124("polygon",{fill:"#3089FC",points:"6.32475 10.2 18 10.2 14.999625 15.3 3.324375 15.3"}),__h_124("polygon",{fill:"#00A85D",points:"3.000375 15.3 0 10.2 5.83875 0.275974026 8.838 5.37597403 5.999625 10.2"}),__h_124("polygon",{fill:"#FFD024",points:"11.838375 9.92402597 5.999625 0 12.000375 0 17.839125 9.92402597"})))},o.provider=new __Provider_124(n,{serverUrl:o.opts.serverUrl,serverHeaders:o.opts.serverHeaders,provider:"drive",authProvider:"google"}),o.onAuth=o.onAuth.bind(o),o.render=o.render.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.install=function(){this.view=new _$DriveProviderViews_123(this,{provider:this.provider}),this.setPluginState({authenticated:!1,files:[],folders:[],directories:[],activeRow:-1,filterInput:"",isSearchVisible:!1,hasTeamDrives:!1,teamDrives:[],teamDriveId:""});var e=this.opts.target;e&&this.mount(e,this)},t.prototype.uninstall=function(){this.view.tearDown(),this.unmount()},t.prototype.onAuth=function(e){this.setPluginState({authenticated:e}),e&&this.view.getFolder("root","/")},t.prototype.render=function(e){return this.view.render(e)},t}(__Plugin_124),__Plugin_126=_$lib_96.Plugin,__Provider_126=_$lib_94.Provider,__dummy_126$0=0,__h_126=_$preact_49.h,_$lib_126=function(e){function t(n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return o.id=o.opts.id||"Instagram",__Provider_126.initPlugin(o,r),o.title=o.opts.title||"Instagram",o.icon=function(){return __h_126("svg",{"aria-hidden":"true",fill:"#DE3573",width:"28",height:"28",viewBox:"0 0 512 512"},__h_126("path",{d:"M256,49.471c67.266,0,75.233.257,101.8,1.469,24.562,1.121,37.9,5.224,46.778,8.674a78.052,78.052,0,0,1,28.966,18.845,78.052,78.052,0,0,1,18.845,28.966c3.45,8.877,7.554,22.216,8.674,46.778,1.212,26.565,1.469,34.532,1.469,101.8s-0.257,75.233-1.469,101.8c-1.121,24.562-5.225,37.9-8.674,46.778a83.427,83.427,0,0,1-47.811,47.811c-8.877,3.45-22.216,7.554-46.778,8.674-26.56,1.212-34.527,1.469-101.8,1.469s-75.237-.257-101.8-1.469c-24.562-1.121-37.9-5.225-46.778-8.674a78.051,78.051,0,0,1-28.966-18.845,78.053,78.053,0,0,1-18.845-28.966c-3.45-8.877-7.554-22.216-8.674-46.778-1.212-26.564-1.469-34.532-1.469-101.8s0.257-75.233,1.469-101.8c1.121-24.562,5.224-37.9,8.674-46.778A78.052,78.052,0,0,1,78.458,78.458a78.053,78.053,0,0,1,28.966-18.845c8.877-3.45,22.216-7.554,46.778-8.674,26.565-1.212,34.532-1.469,101.8-1.469m0-45.391c-68.418,0-77,.29-103.866,1.516-26.815,1.224-45.127,5.482-61.151,11.71a123.488,123.488,0,0,0-44.62,29.057A123.488,123.488,0,0,0,17.3,90.982C11.077,107.007,6.819,125.319,5.6,152.134,4.369,179,4.079,187.582,4.079,256S4.369,333,5.6,359.866c1.224,26.815,5.482,45.127,11.71,61.151a123.489,123.489,0,0,0,29.057,44.62,123.486,123.486,0,0,0,44.62,29.057c16.025,6.228,34.337,10.486,61.151,11.71,26.87,1.226,35.449,1.516,103.866,1.516s77-.29,103.866-1.516c26.815-1.224,45.127-5.482,61.151-11.71a128.817,128.817,0,0,0,73.677-73.677c6.228-16.025,10.486-34.337,11.71-61.151,1.226-26.87,1.516-35.449,1.516-103.866s-0.29-77-1.516-103.866c-1.224-26.815-5.482-45.127-11.71-61.151a123.486,123.486,0,0,0-29.057-44.62A123.487,123.487,0,0,0,421.018,17.3C404.993,11.077,386.681,6.819,359.866,5.6,333,4.369,324.418,4.079,256,4.079h0Z"}),__h_126("path",{d:"M256,126.635A129.365,129.365,0,1,0,385.365,256,129.365,129.365,0,0,0,256,126.635Zm0,213.338A83.973,83.973,0,1,1,339.974,256,83.974,83.974,0,0,1,256,339.973Z"}),__h_126("circle",{cx:"390.476",cy:"121.524",r:"30.23"}))},o.provider=new __Provider_126(n,{serverUrl:o.opts.serverUrl,serverHeaders:o.opts.serverHeaders,provider:"instagram",authProvider:"instagram"}),o.onAuth=o.onAuth.bind(o),o.render=o.render.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.install=function(){this.view=new _$lib_136(this,{provider:this.provider,viewType:"grid",showTitles:!1,showFilter:!1,showBreadcrumbs:!1}),this.setPluginState({authenticated:!1,files:[],folders:[],directories:[],activeRow:-1,filterInput:"",isSearchVisible:!1});var e=this.opts.target;e&&this.mount(e,this)},t.prototype.uninstall=function(){this.view.tearDown(),this.unmount()},t.prototype.onAuth=function(e){this.setPluginState({authenticated:e}),e&&this.view.getFolder("recent")},t.prototype.render=function(e){return this.view.render(e)},t}(__Plugin_126),___extends_127=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__Plugin_127=_$lib_96.Plugin,__h_127=_$preact_49.h,_$lib_127=function(e){function t(n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return o.id=o.opts.id||"ProgressBar",o.title="Progress Bar",o.type="progressindicator",o.opts=___extends_127({},{target:"body",replaceTargetContent:!1,fixed:!1,hideAfterFinish:!0},r),o.render=o.render.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(e){var t=e.totalProgress||0,n=100===t&&this.opts.hideAfterFinish;return __h_127("div",{"class":"uppy uppy-ProgressBar",style:{position:this.opts.fixed?"fixed":"initial"},"aria-hidden":n},__h_127("div",{"class":"uppy-ProgressBar-inner",style:{width:t+"%"}}),__h_127("div",{"class":"uppy-ProgressBar-percentage"},t))},t.prototype.install=function(){var e=this.opts.target;e&&this.mount(e,this)},t.prototype.uninstall=function(){this.unmount()},t}(__Plugin_127),___extends_137=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__Plugin_137=_$lib_96.Plugin,_$lib_137=function(e){function t(n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return o.type="debugger",o.id="ReduxDevTools",o.title="Redux DevTools",o.opts=___extends_137({},{},r),o.handleStateChange=o.handleStateChange.bind(o),o.initDevTools=o.initDevTools.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.handleStateChange=function(e,t,n){this.devTools.send("UPPY_STATE_UPDATE",t)},t.prototype.initDevTools=function(){var e=this;this.devTools=window.devToolsExtension.connect(),this.devToolsUnsubscribe=this.devTools.subscribe(function(t){if("DISPATCH"===t.type)switch(console.log(t.payload.type),t.payload.type){case"RESET":return void e.uppy.reset();case"IMPORT_STATE":var n=t.payload.nextLiftedState.computedStates;return e.uppy.store.state=___extends_137({},e.uppy.getState(),n[n.length-1].state),void e.uppy.updateAll(e.uppy.getState());case"JUMP_TO_STATE":case"JUMP_TO_ACTION":e.uppy.store.state=___extends_137({},e.uppy.getState(),JSON.parse(t.state)),e.uppy.updateAll(e.uppy.getState())}})},t.prototype.install=function(){this.withDevTools="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__,this.withDevTools&&(this.initDevTools(),this.uppy.on("state-update",this.handleStateChange))},t.prototype.uninstall=function(){this.withDevTools&&(this.devToolsUnsubscribe(),this.uppy.off("state-update",this.handleStateUpdate))},t}(__Plugin_137),_$lib_142={},___extends_142=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__dummy_142$0=0,STATE_UPDATE="uppy/STATE_UPDATE",defaultSelector=function(e){return function(t){return t.uppy[e]}},ReduxStore=function(){function e(t){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this._store=t.store,this._id=t.id||_$cuid_13(),this._selector=t.selector||defaultSelector(this._id),this.setState({})}return e.prototype.setState=function(e){this._store.dispatch({type:STATE_UPDATE,id:this._id,payload:e})},e.prototype.getState=function(){return this._selector(this._store.getState())},e.prototype.subscribe=function(e){var t=this,n=this.getState();return this._store.subscribe(function(){var r=t.getState();if(n!==r){var o=function(e,t){var n=Object.keys(t),r={};return n.forEach(function(n){e[n]!==t[n]&&(r[n]=t[n])}),r}(n,r);e(n,r,o),n=r}})},e}();_$lib_142=function(e){return new ReduxStore(e)},_$lib_142.STATE_UPDATE=STATE_UPDATE,_$lib_142.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(t.type===STATE_UPDATE){var n,r=___extends_142({},e[t.id],t.payload);return ___extends_142({},e,((n={})[t.id]=r,n))}return e},_$lib_142.middleware=function(){return function(){return function(e){return function(t){e(t)}}}};var _$componentEmitter_11={exports:{}};_$componentEmitter_11.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Emitter.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return this},Emitter.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t);return this},Emitter.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Emitter.prototype.hasListeners=function(e){return!!this.listeners(e).length},_$componentEmitter_11=_$componentEmitter_11.exports;var _$backo2_3={};_$backo2_3=Backoff,Backoff.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},Backoff.prototype.reset=function(){this.attempts=0},Backoff.prototype.setMin=function(e){this.ms=e},Backoff.prototype.setMax=function(e){this.max=e},Backoff.prototype.setJitter=function(e){this.jitter=e};var __slice_10=[].slice,_$componentBind_10=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=__slice_10.call(arguments,2);return function(){return t.apply(e,n.concat(__slice_10.call(arguments)))}},_$after_1=function(e,t,n){function r(e,i){if(r.count<=0)throw new Error("after called too many times");--r.count,e?(o=!0,t(e),t=n):0!==r.count||o||t(null,i)}var o=!1;return n=n||__noop_1,r.count=e,0===e?t():r},_$arraybufferSlice_2=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var o=new Uint8Array(e),i=new Uint8Array(n-t),s=t,a=0;s<n;s++,a++)i[a]=o[s];return i.buffer},_$base64Arraybuffer_4={};!function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=new Uint8Array(256),n=0;n<e.length;n++)t[e.charCodeAt(n)]=n;_$base64Arraybuffer_4.encode=function(t){var n,r=new Uint8Array(t),o=r.length,i="";for(n=0;n<o;n+=3)i+=e[r[n]>>2],i+=e[(3&r[n])<<4|r[n+1]>>4],i+=e[(15&r[n+1])<<2|r[n+2]>>6],i+=e[63&r[n+2]];return o%3==2?i=i.substring(0,i.length-1)+"=":o%3==1&&(i=i.substring(0,i.length-2)+"=="),i},_$base64Arraybuffer_4.decode=function(e){var n,r,o,i,s,a=.75*e.length,u=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var c=new ArrayBuffer(a),p=new Uint8Array(c);for(n=0;n<u;n+=4)r=t[e.charCodeAt(n)],o=t[e.charCodeAt(n+1)],i=t[e.charCodeAt(n+2)],s=t[e.charCodeAt(n+3)],p[l++]=r<<2|o>>4,p[l++]=(15&o)<<4|i>>2,p[l++]=(3&i)<<6|63&s;return c}}();var _$blob_6={},BlobBuilder=void 0!==BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,blobSupported=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),blobSupportsArrayBufferView=blobSupported&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),blobBuilderSupported=BlobBuilder&&BlobBuilder.prototype.append&&BlobBuilder.prototype.getBlob;"undefined"!=typeof Blob&&(BlobBuilderConstructor.prototype=Blob.prototype,BlobConstructor.prototype=Blob.prototype),_$blob_6=blobSupported?blobSupportsArrayBufferView?Blob:BlobConstructor:blobBuilderSupported?BlobBuilderConstructor:void 0;for(var _$keys_31=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t},byteArray,byteCount,byteIndex,stringFromCharCode=String.fromCharCode,_$utf8_32={encode:function(e,t){for(var n=!1!==(t=t||{}).strict,r=ucs2decode(e),o=r.length,i=-1,s="";++i<o;)s+=encodeCodePoint(r[i],n);return s},decode:function(e,t){var n=!1!==(t=t||{}).strict;byteArray=ucs2decode(e),byteCount=byteArray.length,byteIndex=0;for(var r,o=[];!1!==(r=decodeSymbol(n));)o.push(r);return function(e){for(var t,n=e.length,r=-1,o="";++r<n;)(t=e[r])>65535&&(o+=stringFromCharCode((t-=65536)>>>10&1023|55296),t=56320|1023&t),o+=stringFromCharCode(t);return o}(o)}},_$base64Js_5={toByteArray:function(e){for(var t,n=getLens(e),r=n[0],o=n[1],i=new Arr(function(e,t,n){return 3*(t+n)/4-n}(0,r,o)),s=0,a=o>0?r-4:r,u=0;u<a;u+=4)t=revLookup[e.charCodeAt(u)]<<18|revLookup[e.charCodeAt(u+1)]<<12|revLookup[e.charCodeAt(u+2)]<<6|revLookup[e.charCodeAt(u+3)],i[s++]=t>>16&255,i[s++]=t>>8&255,i[s++]=255&t;return 2===o&&(t=revLookup[e.charCodeAt(u)]<<2|revLookup[e.charCodeAt(u+1)]>>4,i[s++]=255&t),1===o&&(t=revLookup[e.charCodeAt(u)]<<10|revLookup[e.charCodeAt(u+1)]<<4|revLookup[e.charCodeAt(u+2)]>>2,i[s++]=t>>8&255,i[s++]=255&t),i},fromByteArray:function(e){for(var t,n=e.length,r=n%3,o=[],i=0,s=n-r;i<s;i+=16383)o.push(encodeChunk(e,i,i+16383>s?s:i+16383));return 1===r?(t=e[n-1],o.push(lookup[t>>2]+lookup[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],
o.push(lookup[t>>10]+lookup[t>>4&63]+lookup[t<<2&63]+"=")),o.join("")}},lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;var _$ieee754_40={read:function(e,t,n,r,o){var i,s,a=8*o-r-1,u=(1<<a)-1,l=u>>1,c=-7,p=n?o-1:0,h=n?-1:1,d=e[t+p];for(p+=h,i=d&(1<<-c)-1,d>>=-c,c+=a;c>0;i=256*i+e[t+p],p+=h,c-=8);for(s=i&(1<<-c)-1,i>>=-c,c+=r;c>0;s=256*s+e[t+p],p+=h,c-=8);if(0===i)i=1-l;else{if(i===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),i-=l}return(d?-1:1)*s*Math.pow(2,i-r)},write:function(e,t,n,r,o,i){var s,a,u,l=8*i-o-1,c=(1<<l)-1,p=c>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,f=r?1:-1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+p>=1?h/u:h*Math.pow(2,1-p))*u>=2&&(s++,u/=2),s+p>=c?(a=0,s=c):s+p>=1?(a=(t*u-1)*Math.pow(2,o),s+=p):(a=t*Math.pow(2,p-1)*Math.pow(2,o),s=0));o>=8;e[n+d]=255&a,d+=f,a/=256,o-=8);for(s=s<<o|a,l+=o;l>0;e[n+d]=255&s,d+=f,s/=256,l-=8);e[n+d-f]|=128*_}},_$buffer_8={},__dummy_8$0=0,__dummy_8$1=0;_$buffer_8.Buffer=Buffer,_$buffer_8.INSPECT_MAX_BYTES=50;var K_MAX_LENGTH=2147483647;Buffer.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),Buffer.poolSize=8192,Buffer.from=function(e,t,n){return from(e,t,n)},Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,Buffer.alloc=function(e,t,n){return function(e,t,n){return assertSize(e),e<=0?createBuffer(e):void 0!==t?"string"==typeof n?createBuffer(e).fill(t,n):createBuffer(e).fill(t):createBuffer(e)}(e,t,n)},Buffer.allocUnsafe=function(e){return allocUnsafe(e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(e)},Buffer.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==Buffer.prototype},Buffer.compare=function(e,t){if(isInstance(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),isInstance(t,Uint8Array)&&(t=Buffer.from(t,t.offset,t.byteLength)),!Buffer.isBuffer(e)||!Buffer.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=Buffer.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(isInstance(i,Uint8Array)&&(i=Buffer.from(i)),!Buffer.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,n);case"utf8":case"utf-8":return utf8Slice(this,t,n);case"ascii":return asciiSlice(this,t,n);case"latin1":case"binary":return latin1Slice(this,t,n);case"base64":return base64Slice(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function(e){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function(){var e="",t=_$buffer_8.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},Buffer.prototype.compare=function(e,t,n,r,o){if(isInstance(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),!Buffer.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(i,s),u=this.slice(r,o),l=e.slice(t,n),c=0;c<a;++c)if(u[c]!==l[c]){i=u[c],s=l[c];break}return i<s?-1:s<i?1:0},Buffer.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},Buffer.prototype.indexOf=function(e,t,n){return bidirectionalIndexOf(this,e,t,n,!0)},Buffer.prototype.lastIndexOf=function(e,t,n){return bidirectionalIndexOf(this,e,t,n,!1)},Buffer.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return hexWrite(this,e,t,n);case"utf8":case"utf-8":return utf8Write(this,e,t,n);case"ascii":return asciiWrite(this,e,t,n);case"latin1":case"binary":return latin1Write(this,e,t,n);case"base64":return base64Write(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;Buffer.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=Buffer.prototype,r},Buffer.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||checkOffset(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},Buffer.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||checkOffset(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},Buffer.prototype.readUInt8=function(e,t){return e>>>=0,t||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUInt16LE=function(e,t){return e>>>=0,t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUInt16BE=function(e,t){return e>>>=0,t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUInt32LE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUInt32BE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||checkOffset(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},Buffer.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||checkOffset(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},Buffer.prototype.readInt8=function(e,t){return e>>>=0,t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function(e,t){e>>>=0,t||checkOffset(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt16BE=function(e,t){e>>>=0,t||checkOffset(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt32LE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),_$ieee754_40.read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),_$ieee754_40.read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function(e,t){return e>>>=0,t||checkOffset(e,8,this.length),_$ieee754_40.read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function(e,t){return e>>>=0,t||checkOffset(e,8,this.length),_$ieee754_40.read(this,e,!1,52,8)},Buffer.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||checkInt(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},Buffer.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||checkInt(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},Buffer.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,1,255,0),this[t]=255&e,t+1},Buffer.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},Buffer.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);checkInt(this,e,t,n,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<n&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},Buffer.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);checkInt(this,e,t,n,o-1,-o)}var i=n-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},Buffer.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},Buffer.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer.prototype.writeFloatLE=function(e,t,n){return writeFloat(this,e,t,!0,n)},Buffer.prototype.writeFloatBE=function(e,t,n){return writeFloat(this,e,t,!1,n)},Buffer.prototype.writeDoubleLE=function(e,t,n){return writeDouble(this,e,t,!0,n)},Buffer.prototype.writeDoubleBE=function(e,t,n){return writeDouble(this,e,t,!1,n)},Buffer.prototype.copy=function(e,t,n,r){if(!Buffer.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var i=o-1;i>=0;--i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return o},Buffer.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Buffer.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var o=e.charCodeAt(0);("utf8"===r&&o<128||"latin1"===r)&&(e=o)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var s=Buffer.isBuffer(e)?e:Buffer.from(e,r),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=s[i%a]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g,__toString_42={}.toString,_$isarray_42=Array.isArray||function(e){return"[object Array]"==__toString_42.call(e)},_$hasBinary_38={};(function(e){var t=Object.prototype.toString,n="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===t.call(Blob),r="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===t.call(File);_$hasBinary_38=function o(t){if(!t||"object"!=typeof t)return!1;if(_$isarray_42(t)){for(var i=0,s=t.length;i<s;i++)if(o(t[i]))return!0;return!1}if("function"==typeof e&&e.isBuffer&&e.isBuffer(t)||"function"==typeof ArrayBuffer&&t instanceof ArrayBuffer||n&&t instanceof Blob||r&&t instanceof File)return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return o(t.toJSON(),!0);for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)&&o(t[a]))return!0;return!1}}).call(this,_$buffer_8.Buffer);var _$browser_30={},base64encoder,__dummy_30$0=0,__dummy_30$1=0,__dummy_30$2=0,__dummy_30$3=0,__dummy_30$4=0;"undefined"!=typeof ArrayBuffer&&(base64encoder=_$base64Arraybuffer_4);var isAndroid="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),isPhantomJS="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),dontSendBlobs=isAndroid||isPhantomJS;_$browser_30.protocol=3;var packets=_$browser_30.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},packetslist=_$keys_31(packets),err={type:"error",data:"parser error"},__dummy_30$5=0;_$browser_30.encodePacket=function(e,t,n,r){"function"==typeof t&&(r=t,t=!1),"function"==typeof n&&(r=n,n=null);var o=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&o instanceof ArrayBuffer)return function(e,t,n){if(!t)return _$browser_30.encodeBase64Packet(e,n);var r=e.data,o=new Uint8Array(r),i=new Uint8Array(1+r.byteLength);i[0]=packets[e.type];for(var s=0;s<o.length;s++)i[s+1]=o[s];return n(i.buffer)}(e,t,r);if(void 0!==_$blob_6&&o instanceof _$blob_6)return function(e,t,n){if(!t)return _$browser_30.encodeBase64Packet(e,n);if(dontSendBlobs)return function(e,t,n){if(!t)return _$browser_30.encodeBase64Packet(e,n);var r=new FileReader;return r.onload=function(){_$browser_30.encodePacket({type:e.type,data:r.result},t,!0,n)},r.readAsArrayBuffer(e.data)}(e,t,n);var r=new Uint8Array(1);return r[0]=packets[e.type],n(new _$blob_6([r.buffer,e.data]))}(e,t,r);if(o&&o.base64)return function(e,t){return t("b"+_$browser_30.packets[e.type]+e.data.data)}(e,r);var i=packets[e.type];return void 0!==e.data&&(i+=n?_$utf8_32.encode(String(e.data),{strict:!1}):String(e.data)),r(""+i)},_$browser_30.encodeBase64Packet=function(e,t){var n,r="b"+_$browser_30.packets[e.type];if(void 0!==_$blob_6&&e.data instanceof _$blob_6){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];t(r+e)},o.readAsDataURL(e.data)}try{n=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var i=new Uint8Array(e.data),s=new Array(i.length),a=0;a<i.length;a++)s[a]=i[a];n=String.fromCharCode.apply(null,s)}return r+=btoa(n),t(r)},_$browser_30.decodePacket=function(e,t,n){if(void 0===e)return err;if("string"==typeof e){if("b"===e.charAt(0))return _$browser_30.decodeBase64Packet(e.substr(1),t);if(n&&!1===(e=function(e){try{e=_$utf8_32.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return err;var r=e.charAt(0);return Number(r)==r&&packetslist[r]?e.length>1?{type:packetslist[r],data:e.substring(1)}:{type:packetslist[r]}:err}r=new Uint8Array(e)[0];var o=_$arraybufferSlice_2(e,1);return _$blob_6&&"blob"===t&&(o=new _$blob_6([o])),{type:packetslist[r],data:o}},_$browser_30.decodeBase64Packet=function(e,t){var n=packetslist[e.charAt(0)];if(!base64encoder)return{type:n,data:{base64:!0,data:e.substr(1)}};var r=base64encoder.decode(e.substr(1));return"blob"===t&&_$blob_6&&(r=new _$blob_6([r])),{type:n,data:r}},_$browser_30.encodePayload=function(e,t,n){"function"==typeof t&&(n=t,t=null);var r=_$hasBinary_38(e);return t&&r?_$blob_6&&!dontSendBlobs?_$browser_30.encodePayloadAsBlob(e,n):_$browser_30.encodePayloadAsArrayBuffer(e,n):e.length?void map(e,function(e,n){_$browser_30.encodePacket(e,!!r&&t,!1,function(e){n(null,function(e){return e.length+":"+e}(e))})},function(e,t){return n(t.join(""))}):n("0:")},_$browser_30.decodePayload=function(e,t,n){if("string"!=typeof e)return _$browser_30.decodePayloadAsBinary(e,t,n);var r;if("function"==typeof t&&(n=t,t=null),""===e)return n(err,0,1);for(var o,i,s="",a=0,u=e.length;a<u;a++){var l=e.charAt(a);if(":"===l){if(""===s||s!=(o=Number(s)))return n(err,0,1);if(s!=(i=e.substr(a+1,o)).length)return n(err,0,1);if(i.length){if(r=_$browser_30.decodePacket(i,t,!1),err.type===r.type&&err.data===r.data)return n(err,0,1);if(!1===n(r,a+o,u))return}a+=o,s=""}else s+=l}return""!==s?n(err,0,1):void 0},_$browser_30.encodePayloadAsArrayBuffer=function(e,t){return e.length?void map(e,function(e,t){_$browser_30.encodePacket(e,!0,!0,function(e){return t(null,e)})},function(e,n){var r=n.reduce(function(e,t){var n;return e+(n="string"==typeof t?t.length:t.byteLength).toString().length+n+2},0),o=new Uint8Array(r),i=0;return n.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),s=0;s<e.length;s++)r[s]=e.charCodeAt(s);n=r.buffer}o[i++]=t?0:1;var a=n.byteLength.toString();for(s=0;s<a.length;s++)o[i++]=parseInt(a[s]);for(o[i++]=255,r=new Uint8Array(n),s=0;s<r.length;s++)o[i++]=r[s]}),t(o.buffer)}):t(new ArrayBuffer(0))},_$browser_30.encodePayloadAsBlob=function(e,t){map(e,function(e,t){_$browser_30.encodePacket(e,!0,!0,function(e){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),o=0;o<e.length;o++)r[o]=e.charCodeAt(o);e=r.buffer,n[0]=0}var i=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),s=new Uint8Array(i.length+1);for(o=0;o<i.length;o++)s[o]=parseInt(i[o]);if(s[i.length]=255,_$blob_6){var a=new _$blob_6([n.buffer,s.buffer,e]);t(null,a)}})},function(e,n){return t(new _$blob_6(n))})},_$browser_30.decodePayloadAsBinary=function(e,t,n){"function"==typeof t&&(n=t,t=null);for(var r=e,o=[];r.byteLength>0;){for(var i=new Uint8Array(r),s=0===i[0],a="",u=1;255!==i[u];u++){if(a.length>310)return n(err,0,1);a+=i[u]}r=_$arraybufferSlice_2(r,2+a.length),a=parseInt(a);var l=_$arraybufferSlice_2(r,0,a);if(s)try{l=String.fromCharCode.apply(null,new Uint8Array(l))}catch(e){var c=new Uint8Array(l);for(l="",u=0;u<c.length;u++)l+=String.fromCharCode(c[u])}o.push(l),r=_$arraybufferSlice_2(r,a)}var p=o.length;o.forEach(function(e,r){n(_$browser_30.decodePacket(e,t,!0),r,p)})};var _$transport_20={},__dummy_20$0=0,__dummy_20$1=0;_$transport_20=Transport,_$componentEmitter_11(Transport.prototype),Transport.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},Transport.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},Transport.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},Transport.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},Transport.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},Transport.prototype.onData=function(e){var t=_$browser_30.decodePacket(e,this.socket.binaryType);this.onPacket(t)},Transport.prototype.onPacket=function(e){this.emit("packet",e)},Transport.prototype.onClose=function(){this.readyState="closed",this.emit("close")};var _$componentInherit_12=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},_$hasCors_39={};try{_$hasCors_39="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(err){_$hasCors_39=!1}var _$xmlhttprequest_26={};(function(e){_$xmlhttprequest_26=function(e){var t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||_$hasCors_39))return new XMLHttpRequest}catch(o){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(o){}if(!t)try{return new(o[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(o){}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var s=1e3,m=60*s,__h_27=60*m,d=24*__h_27,y=365.25*d,_$ms_27=function(e,t){t=t||{};var n,r=typeof e;if("string"===r&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*__h_27;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===r&&!1===isNaN(e))return t["long"]?plural(n=e,d,"day")||plural(n,__h_27,"hour")||plural(n,m,"minute")||plural(n,s,"second")||n+" ms":function(e){return e>=d?Math.round(e/d)+"d":e>=__h_27?Math.round(e/__h_27)+"h":e>=m?Math.round(e/m)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},_$debug_29={};_$debug_29=_$debug_29=createDebug.debug=createDebug["default"]=createDebug,_$debug_29.coerce=function(e){return e instanceof Error?e.stack||e.message:e},_$debug_29.disable=function(){_$debug_29.enable("")},_$debug_29.enable=function(e){var t;_$debug_29.save(e),_$debug_29.names=[],_$debug_29.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?_$debug_29.skips.push(new RegExp("^"+e.substr(1)+"$")):_$debug_29.names.push(new RegExp("^"+e+"$")));for(t=0;t<_$debug_29.instances.length;t++){var o=_$debug_29.instances[t];o.enabled=_$debug_29.enabled(o.namespace)}},_$debug_29.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=_$debug_29.skips.length;t<n;t++)if(_$debug_29.skips[t].test(e))return!1;for(t=0,n=_$debug_29.names.length;t<n;t++)if(_$debug_29.names[t].test(e))return!0;return!1},_$debug_29.humanize=_$ms_27,_$debug_29.instances=[],_$debug_29.names=[],_$debug_29.skips=[],_$debug_29.formatters={};var _$browser_28={};(function(e){function t(){var e;try{e=_$browser_28.storage.debug}catch(t){}return!e&&void 0!==t&&"env"in t&&(e=t.env.DEBUG),e}(_$browser_28=_$browser_28=_$debug_29).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},_$browser_28.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+_$browser_28.humanize(this.diff),t){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))}),e.splice(o,0,n)}},_$browser_28.save=function(e){try{null==e?_$browser_28.storage.removeItem("debug"):_$browser_28.storage.debug=e}catch(e){}},_$browser_28.load=t,_$browser_28.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},_$browser_28.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),_$browser_28.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],_$browser_28.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},_$browser_28.enable(t())}).call(this,_$browser_51);for(var _$parseqs_46={encode:function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},decode:function(e){for(var t={},n=e.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},_$yeast_87={},prev,alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),length=64,__map_87={},seed=0,__i_87=0;__i_87<length;__i_87++)__map_87[alphabet[__i_87]]=__i_87;yeast.encode=encode,yeast.decode=function(e){var t=0;for(__i_87=0;__i_87<e.length;__i_87++)t=t*length+__map_87[e.charAt(__i_87)];return t},_$yeast_87=yeast;var __dummy_24$0=0,__dummy_24$1=0,__dummy_24$2=0,__dummy_24$3=0,__dummy_24$4=0,debug=_$browser_28("engine.io-client:polling"),_$Polling_24=Polling,hasXHR2=null!=new _$xmlhttprequest_26({xdomain:!1}).responseType;_$componentInherit_12(Polling,_$transport_20),Polling.prototype.name="polling",Polling.prototype.doOpen=function(){this.poll()},Polling.prototype.pause=function(e){function t(){debug("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(debug("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){debug("pre-pause polling complete"),--r||t()})),this.writable||(debug("we are currently writing - waiting to pause"),r++,this.once("drain",function(){debug("pre-pause writing complete"),--r||t()}))}else t()},Polling.prototype.poll=function(){debug("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},Polling.prototype.onData=function(e){var t=this;debug("polling got data %s",e),_$browser_30.decodePayload(e,this.socket.binaryType,function(e,n,r){return"opening"===t.readyState&&t.onOpen(),"close"===e.type?(t.onClose(),!1):void t.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():debug('ignoring poll - transport state "%s"',this.readyState))},Polling.prototype.doClose=function(){function e(){debug("writing close packet"),t.write([{type:"close"}])}var t=this;"open"===this.readyState?(debug("transport open - closing"),e()):(debug("transport not open - deferring close"),this.once("open",e))},Polling.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};_$browser_30.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},Polling.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=_$yeast_87()),this.supportsBinary||e.sid||(e.b64=1),e=_$parseqs_46.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e};var _$JSONPPolling_22={};(function(e){function t(){}function n(n){_$Polling_24.call(this,n),this.query=this.query||{},r||(e.___eio||(e.___eio=[]),r=e.___eio),this.index=r.length;var o=this;r.push(function(e){o.onData(e)}),this.query.j=this.index,e.document&&e.addEventListener&&e.addEventListener("beforeunload",function(){o.script&&(o.script.onerror=t)},!1)}_$JSONPPolling_22=n;var r,o=/\n/g,i=/\\n/g;_$componentInherit_12(n,_$Polling_24),n.prototype.supportsBinary=!1,n.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),_$Polling_24.prototype.doClose.call(this)},n.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},n.prototype.doWrite=function(e,t){
function n(){r(),t()}function r(){if(s.iframe)try{s.form.removeChild(s.iframe)}catch(e){s.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+s.iframeId+'">';a=document.createElement(e)}catch(e){(a=document.createElement("iframe")).name=s.iframeId,a.src="javascript:0"}a.id=s.iframeId,s.form.appendChild(a),s.iframe=a}var s=this;if(!this.form){var a,u=document.createElement("form"),l=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;u.className="socketio",u.style.position="absolute",u.style.top="-1000px",u.style.left="-1000px",u.target=c,u.method="POST",u.setAttribute("accept-charset","utf-8"),l.name="d",u.appendChild(l),document.body.appendChild(u),this.form=u,this.area=l}this.form.action=this.uri(),r(),e=e.replace(i,"\\\n"),this.area.value=e.replace(o,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===s.iframe.readyState&&n()}:this.iframe.onload=n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var _$pollingXhr_23={};(function(e){function t(){}function n(t){if(_$Polling_24.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,e.location){var n="https:"===location.protocol,r=location.port;r||(r=n?443:80),this.xd=t.hostname!==e.location.hostname||r!==t.port,this.xs=t.secure!==n}}function r(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function o(){for(var e in r.requests)r.requests.hasOwnProperty(e)&&r.requests[e].abort()}var i=_$browser_28("engine.io-client:polling-xhr");(_$pollingXhr_23=n).Request=r,_$componentInherit_12(n,_$Polling_24),n.prototype.supportsBinary=!0,n.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new r(e)},n.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),o=this;r.on("success",t),r.on("error",function(e){o.onError("xhr post error",e)}),this.sendXhr=r},n.prototype.doPoll=function(){i("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},_$componentEmitter_11(r.prototype),r.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new _$xmlhttprequest_26(e),n=this;try{i("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var o in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&t.setRequestHeader(o,this.extraHeaders[o])}catch(s){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(s){}try{t.setRequestHeader("Accept","*/*")}catch(s){}"withCredentials"in t&&(t.withCredentials=!0),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");n.supportsBinary&&"application/octet-stream"===e&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout(function(){n.onError(t.status)},0))},i("xhr data %s",this.data),t.send(this.data)}catch(s){return void setTimeout(function(){n.onError(s)},0)}s.document&&(this.index=r.requestsCount++,r.requests[this.index]=this)},r.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},r.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},r.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},r.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=t:this.xhr.onreadystatechange=t,e)try{this.xhr.abort()}catch(n){}n.document&&delete r.requests[this.index],this.xhr=null}},r.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e="application/octet-stream"===t&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},r.prototype.hasXDR=function(){return void 0!==e.XDomainRequest&&!this.xs&&this.enablesXDR},r.prototype.abort=function(){this.cleanup()},r.requestsCount=0,r.requests={},e.document&&(e.attachEvent?e.attachEvent("onunload",o):e.addEventListener&&e.addEventListener("beforeunload",o,!1))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var _$empty_7={},_$websocket_25={};(function(e){function t(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=o&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(i=n),_$transport_20.call(this,e)}var n,r=_$browser_28("engine.io-client:websocket"),o=e.WebSocket||e.MozWebSocket;if("undefined"==typeof window)try{n=_$empty_7}catch(e){}var i=o;i||"undefined"!=typeof window||(i=n),_$websocket_25=t,_$componentInherit_12(t,_$transport_20),t.prototype.name="websocket",t.prototype.supportsBinary=!0,t.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?t?new i(e,t):new i(e):new i(e,t,n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},t.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},t.prototype.write=function(e){var t=this;this.writable=!1;for(var n=e.length,o=0,i=n;o<i;o++)!function(e){_$browser_30.encodePacket(e,t.supportsBinary,function(o){if(!t.usingBrowserWebSocket){var i={};e.options&&(i.compress=e.options.compress),t.perMessageDeflate&&("string"==typeof o?s.Buffer.byteLength(o):o.length)<t.perMessageDeflate.threshold&&(i.compress=!1)}try{t.usingBrowserWebSocket?t.ws.send(o):t.ws.send(o,i)}catch(s){r("websocket closed before onclose event")}--n||(t.emit("flush"),setTimeout(function(){t.writable=!0,t.emit("drain")},0))})}(e[o])},t.prototype.onClose=function(){_$transport_20.prototype.onClose.call(this)},t.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},t.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=_$yeast_87()),this.supportsBinary||(e.b64=1),(e=_$parseqs_46.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},t.prototype.check=function(){return!(!i||"__initialize"in i&&this.name===t.prototype.name)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var _$transports_21={};(function(e){_$transports_21.polling=function(t){var n=!1,r=!1,o=!1!==t.jsonp;if(e.location){var i="https:"===location.protocol,s=location.port;s||(s=i?443:80),n=t.hostname!==location.hostname||s!==t.port,r=t.secure!==i}if(t.xdomain=n,t.xscheme=r,"open"in new _$xmlhttprequest_26(t)&&!t.forceJSONP)return new _$pollingXhr_23(t);if(!o)throw new Error("JSONP disabled");return new _$JSONPPolling_22(t)},_$transports_21.websocket=_$websocket_25}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var indexOf=[].indexOf,_$indexof_41=function(e,t){if(indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1},re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],_$parseuri_47=function(e){var t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var o=re.exec(e||""),i={},s=14;s--;)i[parts[s]]=o[s]||"";return-1!=n&&-1!=r&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i},_$socket_19={};(function(e){function t(n,r){if(!(this instanceof t))return new t(n,r);r=r||{},n&&"object"==typeof n&&(r=n,n=null),n?(n=_$parseuri_47(n),r.hostname=n.host,r.secure="https"===n.protocol||"wss"===n.protocol,r.port=n.port,n.query&&(r.query=n.query)):r.host&&(r.hostname=_$parseuri_47(r.host).host),this.secure=null!=r.secure?r.secure:e.location&&"https:"===location.protocol,r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.agent=r.agent||!1,this.hostname=r.hostname||(e.location?location.hostname:"localhost"),this.port=r.port||(e.location&&location.port?location.port:this.secure?443:80),this.query=r.query||{},"string"==typeof this.query&&(this.query=_$parseqs_46.decode(this.query)),this.upgrade=!1!==r.upgrade,this.path=(r.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!r.forceJSONP,this.jsonp=!1!==r.jsonp,this.forceBase64=!!r.forceBase64,this.enablesXDR=!!r.enablesXDR,this.timestampParam=r.timestampParam||"t",this.timestampRequests=r.timestampRequests,this.transports=r.transports||["polling","websocket"],this.transportOptions=r.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=r.policyPort||843,this.rememberUpgrade=r.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=r.onlyBinaryUpgrades,this.perMessageDeflate=!1!==r.perMessageDeflate&&(r.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=r.pfx||null,this.key=r.key||null,this.passphrase=r.passphrase||null,this.cert=r.cert||null,this.ca=r.ca||null,this.ciphers=r.ciphers||null,this.rejectUnauthorized=void 0===r.rejectUnauthorized||r.rejectUnauthorized,this.forceNode=!!r.forceNode;var o="object"==typeof e&&e;o.global===o&&(r.extraHeaders&&Object.keys(r.extraHeaders).length>0&&(this.extraHeaders=r.extraHeaders),r.localAddress&&(this.localAddress=r.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}var n=_$browser_28("engine.io-client:socket");_$socket_19=t,t.priorWebsocketSuccess=!1,_$componentEmitter_11(t.prototype),t.protocol=_$browser_30.protocol,t.Socket=t,t.Transport=_$transport_20,t.transports=_$transports_21,t.parser=_$browser_30,t.prototype.createTransport=function(e){n('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=_$browser_30.protocol,t.transport=e;var r=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new _$transports_21[e]({query:t,socket:this,agent:r.agent||this.agent,hostname:r.hostname||this.hostname,port:r.port||this.port,secure:r.secure||this.secure,path:r.path||this.path,forceJSONP:r.forceJSONP||this.forceJSONP,jsonp:r.jsonp||this.jsonp,forceBase64:r.forceBase64||this.forceBase64,enablesXDR:r.enablesXDR||this.enablesXDR,timestampRequests:r.timestampRequests||this.timestampRequests,timestampParam:r.timestampParam||this.timestampParam,policyPort:r.policyPort||this.policyPort,pfx:r.pfx||this.pfx,key:r.key||this.key,passphrase:r.passphrase||this.passphrase,cert:r.cert||this.cert,ca:r.ca||this.ca,ciphers:r.ciphers||this.ciphers,rejectUnauthorized:r.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:r.perMessageDeflate||this.perMessageDeflate,extraHeaders:r.extraHeaders||this.extraHeaders,forceNode:r.forceNode||this.forceNode,localAddress:r.localAddress||this.localAddress,requestTimeout:r.requestTimeout||this.requestTimeout,protocols:r.protocols||void 0})},t.prototype.open=function(){var e;if(this.rememberUpgrade&&t.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var n=this;return void setTimeout(function(){n.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},t.prototype.setTransport=function(e){n("setting transport %s",e.name);var t=this;this.transport&&(n("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},t.prototype.probe=function(e){function r(){if(h.onlyBinaryUpgrades){var r=!this.supportsBinary&&h.transport.supportsBinary;p=p||r}p||(n('probe transport "%s" opened',e),c.send([{type:"ping",data:"probe"}]),c.once("packet",function(r){if(!p)if("pong"===r.type&&"probe"===r.data){if(n('probe transport "%s" pong',e),h.upgrading=!0,h.emit("upgrading",c),!c)return;t.priorWebsocketSuccess="websocket"===c.name,n('pausing current transport "%s"',h.transport.name),h.transport.pause(function(){p||"closed"!==h.readyState&&(n("changing transport and sending upgrade packet"),l(),h.setTransport(c),c.send([{type:"upgrade"}]),h.emit("upgrade",c),c=null,h.upgrading=!1,h.flush())})}else{n('probe transport "%s" failed',e);var o=new Error("probe error");o.transport=c.name,h.emit("upgradeError",o)}}))}function o(){p||(p=!0,l(),c.close(),c=null)}function i(t){var r=new Error("probe error: "+t);r.transport=c.name,o(),n('probe transport "%s" failed because of error: %s',e,t),h.emit("upgradeError",r)}function s(){i("transport closed")}function a(){i("socket closed")}function u(e){c&&e.name!==c.name&&(n('"%s" works - aborting "%s"',e.name,c.name),o())}function l(){c.removeListener("open",r),c.removeListener("error",i),c.removeListener("close",s),h.removeListener("close",a),h.removeListener("upgrading",u)}n('probing transport "%s"',e);var c=this.createTransport(e,{probe:1}),p=!1,h=this;t.priorWebsocketSuccess=!1,c.once("open",r),c.once("error",i),c.once("close",s),this.once("close",a),this.once("upgrading",u),c.open()},t.prototype.onOpen=function(){if(n("socket open"),this.readyState="open",t.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){n("starting upgrade probes");for(var e=0,r=this.upgrades.length;e<r;e++)this.probe(this.upgrades[e])}},t.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(n('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else n('packet received with socket readyState "%s"',this.readyState)},t.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},t.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},t.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){n("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},t.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},t.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},t.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(n("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},t.prototype.write=t.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},t.prototype.sendPacket=function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var o={type:e,data:t,options:n};this.emit("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}},t.prototype.close=function(){function e(){o.onClose("forced close"),n("socket closing - telling transport to close"),o.transport.close()}function t(){o.removeListener("upgrade",t),o.removeListener("upgradeError",t),e()}function r(){o.once("upgrade",t),o.once("upgradeError",t)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var o=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():e()}):this.upgrading?r():e()}return this},t.prototype.onError=function(e){n("socket error %j",e),t.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},t.prototype.onClose=function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(n('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)},t.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~_$indexof_41(this.transports,e[n])&&t.push(e[n]);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var _$lib_18={};_$lib_18=_$socket_19,_$lib_18.parser=_$browser_30;var _$on_59=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}},__s_62=1e3,__m_62=60*__s_62,__h_62=60*__m_62,__d_62=24*__h_62,__y_62=365.25*__d_62,_$ms_62=function(e,t){t=t||{};var n,r=typeof e;if("string"===r&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*__y_62;case"days":case"day":case"d":return n*__d_62;case"hours":case"hour":case"hrs":case"hr":case"h":return n*__h_62;case"minutes":case"minute":case"mins":case"min":case"m":return n*__m_62;case"seconds":case"second":case"secs":case"sec":case"s":return n*__s_62;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===r&&!1===isNaN(e))return t["long"]?__plural_62(n=e,__d_62,"day")||__plural_62(n,__h_62,"hour")||__plural_62(n,__m_62,"minute")||__plural_62(n,__s_62,"second")||n+" ms":function(e){return e>=__d_62?Math.round(e/__d_62)+"d":e>=__h_62?Math.round(e/__h_62)+"h":e>=__m_62?Math.round(e/__m_62)+"m":e>=__s_62?Math.round(e/__s_62)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},_$debug_64={};_$debug_64=_$debug_64=__createDebug_64.debug=__createDebug_64["default"]=__createDebug_64,_$debug_64.coerce=function(e){return e instanceof Error?e.stack||e.message:e},_$debug_64.disable=function(){_$debug_64.enable("")},_$debug_64.enable=function(e){var t;_$debug_64.save(e),_$debug_64.names=[],_$debug_64.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?_$debug_64.skips.push(new RegExp("^"+e.substr(1)+"$")):_$debug_64.names.push(new RegExp("^"+e+"$")));for(t=0;t<_$debug_64.instances.length;t++){var o=_$debug_64.instances[t];o.enabled=_$debug_64.enabled(o.namespace)}},_$debug_64.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=_$debug_64.skips.length;t<n;t++)if(_$debug_64.skips[t].test(e))return!1;for(t=0,n=_$debug_64.names.length;t<n;t++)if(_$debug_64.names[t].test(e))return!0;return!1},_$debug_64.humanize=_$ms_62,_$debug_64.instances=[],_$debug_64.names=[],_$debug_64.skips=[],_$debug_64.formatters={};var _$browser_63={};(function(e){function t(){var e;try{e=_$browser_63.storage.debug}catch(t){}return!e&&void 0!==t&&"env"in t&&(e=t.env.DEBUG),e}(_$browser_63=_$browser_63=_$debug_64).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},_$browser_63.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+_$browser_63.humanize(this.diff),t){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))}),e.splice(o,0,n)}},_$browser_63.save=function(e){try{null==e?_$browser_63.storage.removeItem("debug"):_$browser_63.storage.debug=e}catch(e){}},_$browser_63.load=t,_$browser_63.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},_$browser_63.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),_$browser_63.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],_$browser_63.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},_$browser_63.enable(t())}).call(this,_$browser_51);var _$isBuffer_67={};(function(e){_$isBuffer_67=function(o){return t&&e.Buffer.isBuffer(o)||n&&(o instanceof e.ArrayBuffer||r(o))};var t="function"==typeof e.Buffer&&"function"==typeof e.Buffer.isBuffer,n="function"==typeof e.ArrayBuffer,r=n&&"function"==typeof e.ArrayBuffer.isView?e.ArrayBuffer.isView:function(t){return t.buffer instanceof e.ArrayBuffer}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var _$binary_65={};(function(e){var t=Object.prototype.toString,n="function"==typeof e.Blob||"[object BlobConstructor]"===t.call(e.Blob),r="function"==typeof e.File||"[object FileConstructor]"===t.call(e.File);_$binary_65.deconstructPacket=function(e){var t=[],n=e.data,r=e;return r.data=function o(e,t){if(!e)return e;if(_$isBuffer_67(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(_$isarray_42(e)){for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=o(e[i],t);return r}if("object"==typeof e&&!(e instanceof Date)){r={};for(var s in e)r[s]=o(e[s],t);return r}return e}(n,t),r.attachments=t.length,{packet:r,buffers:t}},_$binary_65.reconstructPacket=function(e,t){return e.data=function n(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(_$isarray_42(e))for(var r=0;r<e.length;r++)e[r]=n(e[r],t);else if("object"==typeof e)for(var o in e)e[o]=n(e[o],t);return e}(e.data,t),e.attachments=void 0,e},_$binary_65.removeBlobs=function(e,t){var o=0,i=e;!function s(e,a,u){if(!e)return e;if(n&&e instanceof Blob||r&&e instanceof File){o++;var l=new FileReader;l.onload=function(){u?u[a]=this.result:i=this.result,--o||t(i)},l.readAsArrayBuffer(e)}else if(_$isarray_42(e))for(var c=0;c<e.length;c++)s(e[c],c,e);else if("object"==typeof e&&!_$isBuffer_67(e))for(var p in e)s(e[p],p,e)}(i),o||t(i)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var __s_68=1e3,__m_68=60*__s_68,__h_68=60*__m_68,__d_68=24*__h_68,__y_68=365.25*__d_68,_$ms_68=function(e,t){t=t||{};var n,r=typeof e;if("string"===r&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*__y_68;case"days":case"day":case"d":return n*__d_68;case"hours":case"hour":case"hrs":case"hr":case"h":return n*__h_68;case"minutes":case"minute":case"mins":case"min":case"m":return n*__m_68;case"seconds":case"second":case"secs":case"sec":case"s":return n*__s_68;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===r&&!1===isNaN(e))return t["long"]?__plural_68(n=e,__d_68,"day")||__plural_68(n,__h_68,"hour")||__plural_68(n,__m_68,"minute")||__plural_68(n,__s_68,"second")||n+" ms":function(e){return e>=__d_68?Math.round(e/__d_68)+"d":e>=__h_68?Math.round(e/__h_68)+"h":e>=__m_68?Math.round(e/__m_68)+"m":e>=__s_68?Math.round(e/__s_68)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},_$debug_70={};_$debug_70=_$debug_70=__createDebug_70.debug=__createDebug_70["default"]=__createDebug_70,_$debug_70.coerce=function(e){return e instanceof Error?e.stack||e.message:e},_$debug_70.disable=function(){_$debug_70.enable("")},_$debug_70.enable=function(e){var t;_$debug_70.save(e),_$debug_70.names=[],_$debug_70.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?_$debug_70.skips.push(new RegExp("^"+e.substr(1)+"$")):_$debug_70.names.push(new RegExp("^"+e+"$")));for(t=0;t<_$debug_70.instances.length;t++){var o=_$debug_70.instances[t];o.enabled=_$debug_70.enabled(o.namespace)}},_$debug_70.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=_$debug_70.skips.length;t<n;t++)if(_$debug_70.skips[t].test(e))return!1;for(t=0,n=_$debug_70.names.length;t<n;t++)if(_$debug_70.names[t].test(e))return!0;return!1},_$debug_70.humanize=_$ms_68,_$debug_70.instances=[],_$debug_70.names=[],_$debug_70.skips=[],_$debug_70.formatters={};var _$browser_69={};(function(e){function t(){var e;try{e=_$browser_69.storage.debug}catch(t){}return!e&&void 0!==t&&"env"in t&&(e=t.env.DEBUG),e}(_$browser_69=_$browser_69=_$debug_70).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},_$browser_69.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+_$browser_69.humanize(this.diff),t){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))}),e.splice(o,0,n)}},_$browser_69.save=function(e){try{null==e?_$browser_69.storage.removeItem("debug"):_$browser_69.storage.debug=e}catch(e){}},_$browser_69.load=t,_$browser_69.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},_$browser_69.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),_$browser_69.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],_$browser_69.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},_$browser_69.enable(t())}).call(this,_$browser_51);var _$socketIoParser_66={},__debug_66=_$browser_69("socket.io-parser"),__dummy_66$0=0,__dummy_66$1=0,__dummy_66$2=0,__dummy_66$3=0;_$socketIoParser_66.protocol=4,
_$socketIoParser_66.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],_$socketIoParser_66.CONNECT=0,_$socketIoParser_66.DISCONNECT=1,_$socketIoParser_66.EVENT=2,_$socketIoParser_66.ACK=3,_$socketIoParser_66.ERROR=4,_$socketIoParser_66.BINARY_EVENT=5,_$socketIoParser_66.BINARY_ACK=6,_$socketIoParser_66.Encoder=Encoder,_$socketIoParser_66.Decoder=Decoder;var ERROR_PACKET=_$socketIoParser_66.ERROR+'"encode error"';Encoder.prototype.encode=function(e,t){__debug_66("encoding packet %j",e),_$socketIoParser_66.BINARY_EVENT===e.type||_$socketIoParser_66.BINARY_ACK===e.type?function(e,t){_$binary_65.removeBlobs(e,function(e){var n=_$binary_65.deconstructPacket(e),r=encodeAsString(n.packet),o=n.buffers;o.unshift(r),t(o)})}(e,t):t([encodeAsString(e)])},_$componentEmitter_11(Decoder.prototype),Decoder.prototype.add=function(e){var t;if("string"==typeof e)t=function(e){var t=0,n={type:Number(e.charAt(0))};if(null==_$socketIoParser_66.types[n.type])return error("unknown packet type "+n.type);if(_$socketIoParser_66.BINARY_EVENT===n.type||_$socketIoParser_66.BINARY_ACK===n.type){for(var r="";"-"!==e.charAt(++t)&&(r+=e.charAt(t),t!=e.length););if(r!=Number(r)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"===e.charAt(t+1))for(n.nsp="";++t&&","!==(i=e.charAt(t))&&(n.nsp+=i,t!==e.length););else n.nsp="/";var o=e.charAt(t+1);if(""!==o&&Number(o)==o){for(n.id="";++t;){var i;if(null==(i=e.charAt(t))||Number(i)!=i){--t;break}if(n.id+=e.charAt(t),t===e.length)break}n.id=Number(n.id)}if(e.charAt(++t)){var s=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(t));if(!1===s||n.type!==_$socketIoParser_66.ERROR&&!_$isarray_42(s))return error("invalid payload");n.data=s}return __debug_66("decoded %s as %j",e,n),n}(e),_$socketIoParser_66.BINARY_EVENT===t.type||_$socketIoParser_66.BINARY_ACK===t.type?(this.reconstructor=new BinaryReconstructor(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!_$isBuffer_67(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",t))}},Decoder.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},BinaryReconstructor.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=_$binary_65.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},BinaryReconstructor.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]};var _$toArray_71=function(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n},_$socket_60={},__dummy_60$0=0,__dummy_60$1=0,__dummy_60$2=0,__dummy_60$3=0,__dummy_60$4=0,__debug_60=_$browser_63("socket.io-client:socket"),__dummy_60$5=0,__dummy_60$6=0;_$socket_60=_$socket_60=__Socket_60;var events={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},emit=_$componentEmitter_11.prototype.emit;_$componentEmitter_11(__Socket_60.prototype),__Socket_60.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[_$on_59(e,"open",_$componentBind_10(this,"onopen")),_$on_59(e,"packet",_$componentBind_10(this,"onpacket")),_$on_59(e,"close",_$componentBind_10(this,"onclose"))]}},__Socket_60.prototype.open=__Socket_60.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},__Socket_60.prototype.send=function(){var e=_$toArray_71(arguments);return e.unshift("message"),this.emit.apply(this,e),this},__Socket_60.prototype.emit=function(e){if(events.hasOwnProperty(e))return emit.apply(this,arguments),this;var t=_$toArray_71(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:_$hasBinary_38(t))?_$socketIoParser_66.BINARY_EVENT:_$socketIoParser_66.EVENT,data:t,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(__debug_60("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},__Socket_60.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},__Socket_60.prototype.onopen=function(){if(__debug_60("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?_$parseqs_46.encode(this.query):this.query;__debug_60("sending connect packet with query %s",e),this.packet({type:_$socketIoParser_66.CONNECT,query:e})}else this.packet({type:_$socketIoParser_66.CONNECT})},__Socket_60.prototype.onclose=function(e){__debug_60("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},__Socket_60.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===_$socketIoParser_66.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case _$socketIoParser_66.CONNECT:this.onconnect();break;case _$socketIoParser_66.EVENT:case _$socketIoParser_66.BINARY_EVENT:this.onevent(e);break;case _$socketIoParser_66.ACK:case _$socketIoParser_66.BINARY_ACK:this.onack(e);break;case _$socketIoParser_66.DISCONNECT:this.ondisconnect();break;case _$socketIoParser_66.ERROR:this.emit("error",e.data)}},__Socket_60.prototype.onevent=function(e){var t=e.data||[];__debug_60("emitting event %j",t),null!=e.id&&(__debug_60("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?emit.apply(this,t):this.receiveBuffer.push(t)},__Socket_60.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var r=_$toArray_71(arguments);__debug_60("sending ack %j",r),t.packet({type:_$hasBinary_38(r)?_$socketIoParser_66.BINARY_ACK:_$socketIoParser_66.ACK,id:e,data:r})}}},__Socket_60.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(__debug_60("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):__debug_60("bad ack %s",e.id)},__Socket_60.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},__Socket_60.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)emit.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},__Socket_60.prototype.ondisconnect=function(){__debug_60("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},__Socket_60.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},__Socket_60.prototype.close=__Socket_60.prototype.disconnect=function(){return this.connected&&(__debug_60("performing disconnect (%s)",this.nsp),this.packet({type:_$socketIoParser_66.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},__Socket_60.prototype.compress=function(e){return this.flags.compress=e,this},__Socket_60.prototype.binary=function(e){return this.flags.binary=e,this};var _$manager_58={},__dummy_58$0=0,__dummy_58$1=0,__dummy_58$2=0,__dummy_58$3=0,__dummy_58$4=0,__dummy_58$5=0,__debug_58=_$browser_63("socket.io-client:manager"),__dummy_58$6=0,__dummy_58$7=0,has=Object.prototype.hasOwnProperty;_$manager_58=Manager,Manager.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)has.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},Manager.prototype.updateSocketIds=function(){for(var e in this.nsps)has.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},Manager.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},_$componentEmitter_11(Manager.prototype),Manager.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},Manager.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},Manager.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},Manager.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},Manager.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},Manager.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},Manager.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},Manager.prototype.open=Manager.prototype.connect=function(e,t){if(__debug_58("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;__debug_58("opening %s",this.uri),this.engine=_$lib_18(this.uri,this.opts);var n=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var o=_$on_59(n,"open",function(){r.onopen(),e&&e()}),i=_$on_59(n,"error",function(t){if(__debug_58("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else r.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;__debug_58("connect attempt will timeout after %d",s);var a=setTimeout(function(){__debug_58("connect attempt timed out after %d",s),o.destroy(),n.close(),n.emit("error","timeout"),r.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(o),this.subs.push(i),this},Manager.prototype.onopen=function(){__debug_58("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(_$on_59(e,"data",_$componentBind_10(this,"ondata"))),this.subs.push(_$on_59(e,"ping",_$componentBind_10(this,"onping"))),this.subs.push(_$on_59(e,"pong",_$componentBind_10(this,"onpong"))),this.subs.push(_$on_59(e,"error",_$componentBind_10(this,"onerror"))),this.subs.push(_$on_59(e,"close",_$componentBind_10(this,"onclose"))),this.subs.push(_$on_59(this.decoder,"decoded",_$componentBind_10(this,"ondecoded")))},Manager.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},Manager.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},Manager.prototype.ondata=function(e){this.decoder.add(e)},Manager.prototype.ondecoded=function(e){this.emit("packet",e)},Manager.prototype.onerror=function(e){__debug_58("error",e),this.emitAll("error",e)},Manager.prototype.socket=function(e,t){function n(){~_$indexof_41(o.connecting,r)||o.connecting.push(r)}var r=this.nsps[e];if(!r){r=new _$socket_60(this,e,t),this.nsps[e]=r;var o=this;r.on("connecting",n),r.on("connect",function(){r.id=o.generateId(e)}),this.autoConnect&&n()}return r},Manager.prototype.destroy=function(e){var t=_$indexof_41(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},Manager.prototype.packet=function(e){__debug_58("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()}))},Manager.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},Manager.prototype.cleanup=function(){__debug_58("cleanup");for(var e=this.subs.length,t=0;t<e;t++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},Manager.prototype.close=Manager.prototype.disconnect=function(){__debug_58("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},Manager.prototype.onclose=function(e){__debug_58("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},Manager.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)__debug_58("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();__debug_58("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(__debug_58("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(__debug_58("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(__debug_58("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},Manager.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)};var _$url_61={};(function(e){var t=_$browser_63("socket.io-client:url");_$url_61=function(n,r){var o=n;r=r||e.location,null==n&&(n=r.protocol+"//"+r.host),"string"==typeof n&&("/"===n.charAt(0)&&(n="/"===n.charAt(1)?r.protocol+n:r.host+n),/^(https?|wss?):\/\//.test(n)||(t("protocol-less url %s",n),n=void 0!==r?r.protocol+"//"+n:"https://"+n),t("parse %s",n),o=_$parseuri_47(n)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";var i=-1!==o.host.indexOf(":")?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+i+":"+o.port,o.href=o.protocol+"://"+i+(r&&r.port===o.port?"":":"+o.port),o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var _$lib_57={},__dummy_57$0=0,__dummy_57$1=0,__dummy_57$2=0,__debug_57=_$browser_63("socket.io-client");_$lib_57=_$lib_57=__lookup_57;var cache=_$lib_57.managers={};_$lib_57.protocol=_$socketIoParser_66.protocol,_$lib_57.connect=__lookup_57,_$lib_57.Manager=_$manager_58,_$lib_57.Socket=_$socket_60;var _$parseUrl_149=function(e){var t=/^\w+:\/\//.exec(e),n=0;t&&(n=t[0].length+1);var r=e.indexOf("/",n);return-1===r?{origin:e,pathname:"/"}:{origin:e.slice(0,r),pathname:e.slice(r)}},___extends_144=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},io=function(){return socketIo||(socketIo=_$lib_57),socketIo},__dummy_144$0=0,__dummy_144$1=0,socketIo=void 0,statusOrder=["ASSEMBLY_UPLOADING","ASSEMBLY_EXECUTING","ASSEMBLY_COMPLETED"],TransloaditAssembly=function(e){function t(n){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return r.status=n,r.socket=null,r.pollInterval=null,r.closed=!1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.connect=function(){this._connectSocket(),this._beginPolling()},t.prototype._onFinished=function(){this.emit("finished"),this.close()},t.prototype._connectSocket=function(){var e=this,t=_$parseUrl_149(this.status.websocket_url),n=io().connect(t.origin,{transports:["websocket"],path:t.pathname});n.on("connect",function(){n.emit("assembly_connect",{id:e.status.assembly_id}),e.emit("connect")}),n.on("error",function(){n.disconnect(),e.socket=null}),n.on("assembly_finished",function(){e._onFinished()}),n.on("assembly_upload_finished",function(t){e.emit("upload",t),e._fetchStatus({diff:!1})}),n.on("assembly_uploading_finished",function(){e.emit("executing"),e._fetchStatus({diff:!1})}),n.on("assembly_upload_meta_data_extracted",function(){e.emit("metadata"),e._fetchStatus({diff:!1})}),n.on("assembly_result_finished",function(t,n){e.emit("result",t,n),e._fetchStatus({diff:!1})}),n.on("assembly_error",function(t){e._onError(t),e._fetchStatus({diff:!1})}),this.socket=n},t.prototype._onError=function(e){this.emit("error",___extends_144(new Error(e.message),e))},t.prototype._beginPolling=function(){var e=this;this.pollInterval=setInterval(function(){e.socket&&e.socket.connected||e._fetchStatus()},2e3)},t.prototype._fetchStatus=function(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).diff,n=void 0===t||t;return fetch(this.status.assembly_ssl_url).then(function(e){return e.json()}).then(function(t){e.closed||(e.emit("status",t),n?e.updateStatus(t):e.status=t)})},t.prototype.update=function(){return this._fetchStatus({diff:!0})},t.prototype.updateStatus=function(e){this._diffStatus(this.status,e),this.status=e},t.prototype._diffStatus=function(e,t){var n=this,r=e.ok,o=t.ok;if(t.error&&!e.error)return this._onError(t);var i=isStatus(o,"ASSEMBLY_EXECUTING")&&!isStatus(r,"ASSEMBLY_EXECUTING");i&&this.emit("executing"),Object.keys(t.uploads).filter(function(t){return!e.uploads.hasOwnProperty(t)}).map(function(e){return t.uploads[e]}).forEach(function(e){n.emit("upload",e)}),i&&this.emit("metadata"),Object.keys(t.results).forEach(function(r){var o=t.results[r],i=e.results[r];o.filter(function(e){return!i||!i.some(function(t){return t.id===e.id})}).forEach(function(e){n.emit("result",r,e)})}),isStatus(o,"ASSEMBLY_COMPLETED")&&!isStatus(r,"ASSEMBLY_COMPLETED")&&this.emit("finished")},t.prototype.close=function(){this.closed=!0,this.socket&&(this.socket.disconnect(),this.socket=null),clearInterval(this.pollInterval)},t}(_$componentEmitter_11),_$TransloaditAssembly_144=TransloaditAssembly,_$AssemblyOptions_145={},AssemblyOptions=function(){function e(t,n){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.files=t,this.opts=n}return e.prototype._normalizeAssemblyOptions=function(e,t){if(Array.isArray(t.fields)){var n=t.fields;t.fields={},n.forEach(function(n){t.fields[n]=e.meta[n]})}return t.fields||(t.fields={}),t},e.prototype._getAssemblyOptions=function(e){var t=this,n=this.opts;return Promise.resolve().then(function(){return n.getAssemblyOptions(e,n)}).then(function(n){return t._normalizeAssemblyOptions(e,n)}).then(function(t){return validateParams(t.params),{fileIDs:[e.id],options:t}})},e.prototype._dedupe=function(e){var t=Object.create(null);return e.forEach(function(e){var n,r=e.fileIDs,o=e.options,i=JSON.stringify(o);t[i]?(n=t[i].fileIDs).push.apply(n,r):t[i]={options:o,fileIDs:[].concat(r)}}),Object.keys(t).map(function(e){return t[e]})},e.prototype.build=function(){var e=this,t=this.opts;return this.files.length>0?Promise.all(this.files.map(function(t){return e._getAssemblyOptions(t)})).then(function(t){return e._dedupe(t)}):t.alwaysRunAssembly?Promise.resolve(t.getAssemblyOptions(null,t)).then(function(t){return validateParams(t.params),[{fileIDs:e.files.map(function(e){return e.id}),options:t}]}):Promise.resolve([])},e}();_$AssemblyOptions_145=AssemblyOptions,_$AssemblyOptions_145.validateParams=validateParams;var TransloaditAssemblyWatcher=function(e){function t(n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return o._uppy=n,o._assemblyIDs=r,o._remaining=r.length,o.promise=new Promise(function(e,t){o._resolve=e,o._reject=t}),o._onAssemblyComplete=o._onAssemblyComplete.bind(o),o._onAssemblyError=o._onAssemblyError.bind(o),o._onImportError=o._onImportError.bind(o),o._addListeners(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._watching=function(e){return-1!==this._assemblyIDs.indexOf(e)},t.prototype._onAssemblyComplete=function(e){this._watching(e.assembly_id)&&(this._uppy.log("[Transloadit] AssemblyWatcher: Got Assembly finish "+e.assembly_id),this.emit("assembly-complete",e.assembly_id),this._checkAllComplete())},t.prototype._onAssemblyError=function(e,t){this._watching(e.assembly_id)&&(this._uppy.log("[Transloadit] AssemblyWatcher: Got Assembly error "+e.assembly_id),this._uppy.log(t),this.emit("assembly-error",e.assembly_id,t),this._checkAllComplete())},t.prototype._onImportError=function(e,t,n){this._watching(e.assembly_id)&&this._onAssemblyError(e,n)},t.prototype._checkAllComplete=function(){this._remaining-=1,0===this._remaining&&(this._removeListeners(),this._resolve())},t.prototype._removeListeners=function(){this._uppy.off("transloadit:complete",this._onAssemblyComplete),this._uppy.off("transloadit:assembly-error",this._onAssemblyError),this._uppy.off("transloadit:import-error",this._onImportError)},t.prototype._addListeners=function(){this._uppy.on("transloadit:complete",this._onAssemblyComplete),this._uppy.on("transloadit:assembly-error",this._onAssemblyError),this._uppy.on("transloadit:import-error",this._onImportError)},t}(_$componentEmitter_11),_$TransloaditAssemblyWatcher_146=TransloaditAssemblyWatcher,_$Client_147=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.opts=t}return e.prototype.createAssembly=function(e){e.templateId;var t=e.params,n=e.fields,r=e.signature,o=e.expectedFiles,i=new FormData;return i.append("params","string"==typeof t?t:JSON.stringify(t)),r&&i.append("signature",r),Object.keys(n).forEach(function(e){i.append(e,n[e])}),i.append("num_expected_upload_files",o),fetch(this.opts.service+"/assemblies",{method:"post",body:i}).then(function(e){return e.json()}).then(function(e){if(e.error){var t=new Error(e.error);throw t.message=e.error,t.details=e.reason,t}return e})},e.prototype.reserveFile=function(e,t){var n=encodeURIComponent(t.size);return fetch(e.assembly_ssl_url+"/reserve_file?size="+n,{method:"post"}).then(function(e){return e.json()})},e.prototype.addFile=function(e,t){if(!t.uploadURL)return Promise.reject(new Error("File does not have an `uploadURL`."));var n=encodeURIComponent(t.size),r=encodeURIComponent(t.uploadURL),o="size="+n+"&filename="+encodeURIComponent(t.name)+"&fieldname=file&s3Url="+r;return fetch(e.assembly_ssl_url+"/add_file?"+o,{method:"post"}).then(function(e){return e.json()})},e.prototype.getAssemblyStatus=function(e){return fetch(e).then(function(e){return e.json()})},e}(),_$storage_77={};Object.defineProperty(_$storage_77,"__esModule",{value:!0}),_$storage_77.setItem=function(e,t){if(hasStorage)return localStorage.setItem(e,t)},_$storage_77.getItem=function(e){if(hasStorage)return localStorage.getItem(e)},_$storage_77.removeItem=function(e){if(hasStorage)return localStorage.removeItem(e)};var hasStorage=!1;try{hasStorage="localStorage"in window;var key="tusSupport";localStorage.setItem(key,localStorage.getItem(key))}catch(e){if(e.code!==e.SECURITY_ERR&&e.code!==e.QUOTA_EXCEEDED_ERR)throw e;hasStorage=!1}_$storage_77.canStoreURLs=hasStorage;var hasOwn=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,__isArray_35=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===toStr.call(e)},isPlainObject=function(e){if(!e||"[object Object]"!==toStr.call(e))return!1;var t,n=hasOwn.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&hasOwn.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;for(t in e);return void 0===t||hasOwn.call(e,t)},_$extend_35=function t(){var e,n,r,o,i,s,a=arguments[0],u=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[1]||{},u=2),(null==a||"object"!=typeof a&&"function"!=typeof a)&&(a={});u<l;++u)if(null!=(e=arguments[u]))for(n in e)r=a[n],a!==(o=e[n])&&(c&&o&&(isPlainObject(o)||(i=__isArray_35(o)))?(i?(i=!1,s=r&&__isArray_35(r)?r:[]):s=r&&isPlainObject(r)?r:{},a[n]=t(c,s,o)):void 0!==o&&(a[n]=o));return a},_$querystringify_52={},undef,__has_52=Object.prototype.hasOwnProperty;_$querystringify_52.stringify=function(e,t){t=t||"";var n,r,o=[];for(r in"string"!=typeof t&&(t="?"),e)__has_52.call(e,r)&&((n=e[r])||null!==n&&n!==undef&&!isNaN(n)||(n=""),o.push(encodeURIComponent(r)+"="+encodeURIComponent(n)));return o.length?t+o.join("&"):""},_$querystringify_52.parse=function(e){for(var t,n=/([^=?&]+)=?([^&]*)/g,r={};t=n.exec(e);){var o=decode(t[1]),i=decode(t[2]);o in r||(r[o]=i)}return r};var _$requiresPort_53=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e},_$urlParse_84={};(function(e){function t(t){var n,o=("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}).location||{},s={},u=typeof(t=t||o);if("blob:"===t.protocol)s=new r(unescape(t.pathname),{});else if("string"===u)for(n in s=new r(t,{}),a)delete s[n];else if("object"===u){for(n in t)n in a||(s[n]=t[n]);void 0===s.slashes&&(s.slashes=i.test(t.href))}return s}function n(e){var t=o.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function r(e,o,i){if(!(this instanceof r))return new r(e,o,i);var a,u,l,c,p,h,d=s.slice(),f=typeof o,_=this,m=0;for("object"!==f&&"string"!==f&&(i=o,o=null),i&&"function"!=typeof i&&(i=_$querystringify_52.parse),o=t(o),a=!(u=n(e||"")).protocol&&!u.slashes,_.slashes=u.slashes||a&&o.slashes,_.protocol=u.protocol||o.protocol||"",e=u.rest,u.slashes||(d[3]=[/(.*)/,"pathname"]);m<d.length;m++)"function"!=typeof(c=d[m])?(l=c[0],h=c[1],l!=l?_[h]=e:"string"==typeof l?~(p=e.indexOf(l))&&("number"==typeof c[2]?(_[h]=e.slice(0,p),e=e.slice(p+c[2])):(_[h]=e.slice(p),e=e.slice(0,p))):(p=l.exec(e))&&(_[h]=p[1],e=e.slice(0,p.index)),_[h]=_[h]||a&&c[3]&&o[h]||"",c[4]&&(_[h]=_[h].toLowerCase())):e=c(e);i&&(_.query=i(_.query)),a&&o.slashes&&"/"!==_.pathname.charAt(0)&&(""!==_.pathname||""!==o.pathname)&&(_.pathname=function(e,t){for(var n=(o.pathname||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],s=!1,a=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),a++):a&&(0===r&&(s=!0),n.splice(r,1),a--);return s&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(_.pathname)),_$requiresPort_53(_.port,_.protocol)||(_.host=_.hostname,_.port=""),_.username=_.password="",_.auth&&(c=_.auth.split(":"),_.username=c[0]||"",_.password=c[1]||""),_.origin=_.protocol&&_.host&&"file:"!==_.protocol?_.protocol+"//"+_.host:"null",_.href=_.toString()}var o=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,i=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,s=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],a={hash:1,query:1};r.prototype={set:function(e,t,n){var r=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||_$querystringify_52.parse)(t)),r[e]=t;break;case"port":r[e]=t,_$requiresPort_53(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,/:\d+$/.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":if(t){var o="pathname"===e?"/":"#";r[e]=t.charAt(0)!==o?o+t:t}else r[e]=t;break;default:r[e]=t}for(var i=0;i<s.length;i++){var a=s[i];a[4]&&(r[a[1]]=r[a[1]].toLowerCase())}return r.origin=r.protocol&&r.host&&"file:"!==r.protocol?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(e){e&&"function"==typeof e||(e=_$querystringify_52.stringify);var t,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var o=r+(n.slashes?"//":"");return n.username&&(o+=n.username,n.password&&(o+=":"+n.password),o+="@"),o+=n.host+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(o+=n.hash),o}},r.extractProtocol=n,r.location=t,r.qs=_$querystringify_52,_$urlParse_84=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var _$request_75={};Object.defineProperty(_$request_75,"__esModule",{value:!0}),_$request_75.newRequest=function(){return new window.XMLHttpRequest},_$request_75.resolveUrl=function(e,t){return new _urlParse2["default"](t,e).toString()};var obj,__dummy_75$0=0,_urlParse2=(obj=_$urlParse_84)&&obj.__esModule?obj:{"default":obj},_$isCordova_72={};Object.defineProperty(_$isCordova_72,"__esModule",{value:!0}),_$isCordova_72["default"]=function(){return"undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)};var _$isReactNative_73={};Object.defineProperty(_$isReactNative_73,"__esModule",{value:!0});var isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();_$isReactNative_73["default"]=isReactNative;var _$readAsByteArray_74={};Object.defineProperty(_$readAsByteArray_74,"__esModule",{value:!0}),_$readAsByteArray_74["default"]=function(e,t){var n=new FileReader;n.onload=function(){t(null,new Uint8Array(n.result))},n.onerror=function(e){t(e)},n.readAsArrayBuffer(e)};var _$uriToBlob_78={};Object.defineProperty(_$uriToBlob_78,"__esModule",{value:!0}),_$uriToBlob_78["default"]=function(e,t){var n=new XMLHttpRequest;n.responseType="blob",n.onload=function(){var e=n.response;t(null,e)},n.onerror=function(e){t(e)},n.open("GET",e),n.send()};var _$source_76={},___createClass_76=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(_$source_76,"__esModule",{value:!0}),_$source_76.getSource=function(e,t,n){if((_isReactNative2["default"]||window.__tus__forceReactNative)&&e&&void 0!==e.uri)(0,_uriToBlob2["default"])(e.uri,function(e,t){return e?n(new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. "+e)):void n(null,new FileSource(t))});else{if("function"!=typeof e.slice||void 0===e.size)return"function"==typeof e.read?(t=+t,isFinite(t)?void n(null,new StreamSource(e,t)):void n(new Error("cannot create source for stream without a finite value for the `chunkSize` option"))):void n(new Error("source object may only be an instance of File, Blob, or Reader in this environment"));n(null,new FileSource(e))}};var _isReactNative2=_interopRequireDefault(_$isReactNative_73),_uriToBlob2=_interopRequireDefault(_$uriToBlob_78),_isCordova2=_interopRequireDefault(_$isCordova_72),_readAsByteArray2=_interopRequireDefault(_$readAsByteArray_74),FileSource=function(){function e(t){___classCallCheck_76(this,e),this._file=t,this.size=t.size}return ___createClass_76(e,[{key:"slice",value:function(e,t,n){(0,_isCordova2["default"])()?(0,_readAsByteArray2["default"])(this._file.slice(e,t),function(e,t){return e?n(e):void n(null,t)}):n(null,this._file.slice(e,t))}},{key:"close",value:function(){}
}]),e}(),StreamSource=function(){function e(t,n){___classCallCheck_76(this,e),this._chunkSize=n,this._buffer=void 0,this._bufferOffset=0,this._reader=t,this._done=!1}return ___createClass_76(e,[{key:"slice",value:function(e,t,n){return e<this._bufferOffset?void n(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(e,t,n)}},{key:"_readUntilEnoughDataOrDone",value:function(e,t,n){var r=this,o=t<=this._bufferOffset+__len_76(this._buffer);if(this._done||o){var i=this._getDataFromBuffer(e,t);n(null,i)}else this._reader.read().then(function(o){var i=o.value;o.done?r._done=!0:void 0===r._buffer?r._buffer=i:r._buffer=function(e,t){if(e.concat)return e.concat(t);if(e instanceof Blob)return new Blob([e,t],{type:e.type});if(e.set){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}throw new Error("Unknown data type")}(r._buffer,i),r._readUntilEnoughDataOrDone(e,t,n)})["catch"](function(e){n(new Error("Error during read: "+e))})}},{key:"_getDataFromBuffer",value:function(e,t){e>this._bufferOffset&&(this._buffer=this._buffer.slice(e-this._bufferOffset),this._bufferOffset=e);var n=0===__len_76(this._buffer);return this._done&&n?null:this._buffer.slice(0,t-e)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}]),e}(),_$error_79={};Object.defineProperty(_$error_79,"__esModule",{value:!0});var DetailedError=function(e){function t(e){var n=arguments.length<=1||void 0===arguments[1]?null:arguments[1],r=arguments.length<=2||void 0===arguments[2]?null:arguments[2];!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e.message));o.originalRequest=r,o.causingError=n;var i=e.message;return null!=n&&(i+=", caused by "+n.toString()),null!=r&&(i+=", originated from request (response code: "+r.status+", response text: "+r.responseText+")"),o.message=i,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Error),t}();_$error_79["default"]=DetailedError;var _$fingerprint_80={};Object.defineProperty(_$fingerprint_80,"__esModule",{value:!0}),_$fingerprint_80["default"]=function(e,t){return["tus",e.name,e.type,e.size,e.lastModified,t.endpoint].join("-")};var _$base64_83={exports:{}};(function(global){!function(e,t){"object"==typeof _$base64_83.exports?_$base64_83.exports=t(e):"function"==typeof define&&define.amd?define(t):t(e)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:this,function(global){global=global||{};var _Base64=global.Base64,version="2.5.1",buffer;if(_$base64_83.exports)try{buffer=eval("require('buffer').Buffer")}catch(e){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?fromCharCode(192|t>>>6)+fromCharCode(128|63&t):fromCharCode(224|t>>>12&15)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return fromCharCode(240|t>>>18&7)+fromCharCode(128|t>>>12&63)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(e){return e.replace(re_utob,cb_utob)},cb_encode=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[b64chars.charAt(n>>>18),b64chars.charAt(n>>>12&63),t>=2?"=":b64chars.charAt(n>>>6&63),t>=1?"=":b64chars.charAt(63&n)].join("")},btoa=global.btoa?function(e){return global.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e)).toString("base64")}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e)).toString("base64")}:function(e){return btoa(utob(e))},encode=function(e,t){return t?_encode(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):_encode(String(e))},encodeURI=function(e){return encode(e,!0)},re_btou=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),cb_btou=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return fromCharCode(55296+(t>>>10))+fromCharCode(56320+(1023&t));case 3:return fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=function(e){return e.replace(re_btou,cb_btou)},cb_decode=function(e){var t=e.length,n=t%4,r=(t>0?b64tab[e.charAt(0)]<<18:0)|(t>1?b64tab[e.charAt(1)]<<12:0)|(t>2?b64tab[e.charAt(2)]<<6:0)|(t>3?b64tab[e.charAt(3)]:0),o=[fromCharCode(r>>>16),fromCharCode(r>>>8&255),fromCharCode(255&r)];return o.length-=[0,0,2,1][n],o.join("")},_atob=global.atob?function(e){return global.atob(e)}:function(e){return e.replace(/\S{1,4}/g,cb_decode)},atob=function(e){return _atob(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e,"base64")).toString()}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e,"base64")).toString()}:function(e){return btou(_atob(e))},decode=function(e){return _decode(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var e=global.Base64;return global.Base64=_Base64,e};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase64",noEnum(function(e){return encode(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,!0)}))}}return global.Meteor&&(Base64=global.Base64),_$base64_83.exports?_$base64_83.exports.Base64=global.Base64:"function"==typeof define&&define.amd&&define([],function(){return global.Base64}),{Base64:global.Base64}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),_$base64_83=_$base64_83.exports;var _$upload_82={},___createClass_82=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(_$upload_82,"__esModule",{value:!0});var _fingerprint2=___interopRequireDefault_82(_$fingerprint_80),_error2=___interopRequireDefault_82(_$error_79),_extend2=___interopRequireDefault_82(_$extend_35),__dummy_82$0=0,__dummy_82$1=0,__dummy_82$2=0,Storage=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}(_$storage_77),__defaultOptions_82={endpoint:null,fingerprint:_fingerprint2["default"],resume:!0,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,headers:{},chunkSize:1/0,withCredentials:!1,uploadUrl:null,uploadSize:null,overridePatchMethod:!1,retryDelays:null,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1},Upload=function(){function e(t,n){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.options=(0,_extend2["default"])(!0,{},__defaultOptions_82,n),this.file=t,this.url=null,this._xhr=null,this._fingerprint=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0}return ___createClass_82(e,[{key:"start",value:function(){var e=this,t=this.file;t?this.options.endpoint||this.options.uploadUrl?this._source?this._start(this._source):(0,_$source_76.getSource)(t,this.options.chunkSize,function(t,n){t?e._emitError(t):(e._source=n,e._start(n))}):this._emitError(new Error("tus: neither an endpoint or an upload URL is provided")):this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_start",value:function(e){var t=this,n=this.file;if(this.options.uploadLengthDeferred)this._size=null;else if(null!=this.options.uploadSize){if(this._size=+this.options.uploadSize,isNaN(this._size))return void this._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(this._size=e.size,null==this._size)return void this._emitError(new Error("tus: cannot automatically derive upload's size from input and must be specified manually using the `uploadSize` option"));var r,o=this.options.retryDelays;if(null!=o){if("[object Array]"!==Object.prototype.toString.call(o))return void this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"));r=t.options.onError,t.options.onError=function(e){t.options.onError=r,null!=t._offset&&t._offset>t._offsetBeforeRetry&&(t._retryAttempt=0);var n=!0;if("undefined"!=typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(n=!1),t._retryAttempt<o.length&&null!=e.originalRequest&&!inStatusCategory(e.originalRequest.status,400)&&n){var i=o[t._retryAttempt++];t._offsetBeforeRetry=t._offset,t.options.uploadUrl=t.url,t._retryTimeout=setTimeout(function(){t.start()},i)}else t._emitError(e)}}if(this._aborted=!1,null==this.url){if(null!=this.options.uploadUrl)return this.url=this.options.uploadUrl,void this._resumeUpload();if(this.options.resume){this._fingerprint=this.options.fingerprint(n,this.options);var i=Storage.getItem(this._fingerprint);if(null!=i)return this.url=i,void this._resumeUpload()}this._createUpload()}else this._resumeUpload()}},{key:"abort",value:function(){null!==this._xhr&&(this._xhr.abort(),this._source.close(),this._aborted=!0),null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null)}},{key:"_emitXhrError",value:function(e,t,n){this._emitError(new _error2["default"](t,n,e))}},{key:"_emitError",value:function(e){if("function"!=typeof this.options.onError)throw e;this.options.onError(e)}},{key:"_emitSuccess",value:function(){"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(e,t){"function"==typeof this.options.onProgress&&this.options.onProgress(e,t)}},{key:"_emitChunkComplete",value:function(e,t,n){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(e,t,n)}},{key:"_setupXHR",value:function(e){this._xhr=e,e.setRequestHeader("Tus-Resumable","1.0.0");var t=this.options.headers;for(var n in t)e.setRequestHeader(n,t[n]);e.withCredentials=this.options.withCredentials}},{key:"_createUpload",value:function(){var e=this;if(this.options.endpoint){var t=(0,_$request_75.newRequest)();t.open("POST",this.options.endpoint,!0),t.onload=function(){if(inStatusCategory(t.status,200)){var n=t.getResponseHeader("Location");if(null!=n){if(e.url=(0,_$request_75.resolveUrl)(e.options.endpoint,n),0===e._size)return e._emitSuccess(),void e._source.close();e.options.resume&&Storage.setItem(e._fingerprint,e.url),e._offset=0,e._startUpload()}else e._emitXhrError(t,new Error("tus: invalid or missing Location header"))}else e._emitXhrError(t,new Error("tus: unexpected response while creating upload"))},t.onerror=function(n){e._emitXhrError(t,new Error("tus: failed to create upload"),n)},this._setupXHR(t),this.options.uploadLengthDeferred?t.setRequestHeader("Upload-Defer-Length",1):t.setRequestHeader("Upload-Length",this._size);var n=function(e){var t=[];for(var n in e)t.push(n+" "+_$base64_83.Base64.encode(e[n]));return t.join(",")}(this.options.metadata);""!==n&&t.setRequestHeader("Upload-Metadata",n),t.send(null)}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var e=this,t=(0,_$request_75.newRequest)();t.open("HEAD",this.url,!0),t.onload=function(){if(!inStatusCategory(t.status,200))return e.options.resume&&inStatusCategory(t.status,400)&&Storage.removeItem(e._fingerprint),423===t.status?void e._emitXhrError(t,new Error("tus: upload is currently locked; retry later")):e.options.endpoint?(e.url=null,void e._createUpload()):void e._emitXhrError(t,new Error("tus: unable to resume upload (new upload cannot be created without an endpoint)"));var n=parseInt(t.getResponseHeader("Upload-Offset"),10);if(isNaN(n))e._emitXhrError(t,new Error("tus: invalid or missing offset value"));else{var r=parseInt(t.getResponseHeader("Upload-Length"),10);if(!isNaN(r)||e.options.uploadLengthDeferred){if(n===r)return e._emitProgress(r,r),void e._emitSuccess();e._offset=n,e._startUpload()}else e._emitXhrError(t,new Error("tus: invalid or missing length value"))}},t.onerror=function(n){e._emitXhrError(t,new Error("tus: failed to resume upload"),n)},this._setupXHR(t),t.send(null)}},{key:"_startUpload",value:function(){var e=this;if(!this._aborted){var t=(0,_$request_75.newRequest)();this.options.overridePatchMethod?(t.open("POST",this.url,!0),t.setRequestHeader("X-HTTP-Method-Override","PATCH")):t.open("PATCH",this.url,!0),t.onload=function(){if(inStatusCategory(t.status,200)){var n=parseInt(t.getResponseHeader("Upload-Offset"),10);if(isNaN(n))e._emitXhrError(t,new Error("tus: invalid or missing offset value"));else{if(e._emitProgress(n,e._size),e._emitChunkComplete(n-e._offset,n,e._size),e._offset=n,n==e._size)return e.options.removeFingerprintOnSuccess&&e.options.resume&&Storage.removeItem(e._fingerprint),e._emitSuccess(),void e._source.close();e._startUpload()}}else e._emitXhrError(t,new Error("tus: unexpected response while uploading chunk"))},t.onerror=function(n){e._aborted||e._emitXhrError(t,new Error("tus: failed to upload chunk at offset "+e._offset),n)},"upload"in t&&(t.upload.onprogress=function(t){t.lengthComputable&&e._emitProgress(n+t.loaded,e._size)}),this._setupXHR(t),t.setRequestHeader("Upload-Offset",this._offset),t.setRequestHeader("Content-Type","application/offset+octet-stream");var n=this._offset,r=this._offset+this.options.chunkSize;(r===1/0||r>this._size)&&!this.options.uploadLengthDeferred&&(r=this._size),this.options.uploadLengthDeferred?this._source.slice(n,r,function(n,r){n?e._emitError(n):null===r?(e._size=e._offset,t.setRequestHeader("Upload-Length",e._offset),t.send()):(t.send(r),e._emitProgress(e._offset,e._size))}):(this._source.slice(n,r,function(o,i){o?e._emitError(new _error2["default"]("tus: could not slice file or stream (from "+n+" to "+r+")",o)):t.send(i)}),this._emitProgress(this._offset,this._size))}}}]),e}();Upload.defaultOptions=__defaultOptions_82,_$upload_82["default"]=Upload;var __obj_81,__dummy_81$0=0,_upload2=(__obj_81=_$upload_82)&&__obj_81.__esModule?__obj_81:{"default":__obj_81},__dummy_81$1=0,__defaultOptions_81=_upload2["default"].defaultOptions,__isSupported_81=void 0;if("undefined"!=typeof window){var _window=window,__XMLHttpRequest_81=_window.XMLHttpRequest,__Blob_81=_window.Blob;__isSupported_81=__XMLHttpRequest_81&&__Blob_81&&"function"==typeof __Blob_81.prototype.slice}else __isSupported_81=!0;var _$libEs5_81={Upload:_upload2["default"]},___extends_150=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__Plugin_150=_$lib_96.Plugin,__dummy_150$0=0,__dummy_150$1=0,__Provider_150=_$lib_94.Provider,__RequestClient_150=_$lib_94.RequestClient,__Socket_150=_$lib_94.Socket,__dummy_150$2=0,__dummy_150$3=0,__dummy_150$4=0,__dummy_150$5=0,tusDefaultOptions={endpoint:"",resume:!0,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,headers:{},chunkSize:1/0,withCredentials:!1,uploadUrl:null,uploadSize:null,overridePatchMethod:!1,retryDelays:null},_$lib_150=function(e){function t(n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return o.type="uploader",o.id="Tus",o.title="Tus",o.opts=___extends_150({},{resume:!0,autoRetry:!0,useFastRemoteRetry:!0,limit:0,retryDelays:[0,1e3,3e3,5e3]},r),"number"==typeof o.opts.limit&&0!==o.opts.limit?o.limitUploads=_$limitPromises_171(o.opts.limit):o.limitUploads=function(e){return e},o.uploaders=Object.create(null),o.uploaderEvents=Object.create(null),o.uploaderSockets=Object.create(null),o.handleResetProgress=o.handleResetProgress.bind(o),o.handleUpload=o.handleUpload.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.handleResetProgress=function(){var e=___extends_150({},this.uppy.getState().files);Object.keys(e).forEach(function(t){if(e[t].tus&&e[t].tus.uploadUrl){var n=___extends_150({},e[t].tus);delete n.uploadUrl,e[t]=___extends_150({},e[t],{tus:n})}}),this.uppy.setState({files:e})},t.prototype.resetUploaderReferences=function(e){this.uploaders[e]&&(this.uploaders[e].abort(),this.uploaders[e]=null),this.uploaderEvents[e]&&(this.uploaderEvents[e].remove(),this.uploaderEvents[e]=null),this.uploaderSockets[e]&&(this.uploaderSockets[e].close(),this.uploaderSockets[e]=null)},t.prototype.upload=function(e,t,n){var r=this;return this.resetUploaderReferences(e.id),new Promise(function(t,n){var o=___extends_150({},tusDefaultOptions,r.opts,e.tus||{});o.onError=function(t){r.uppy.log(t),r.uppy.emit("upload-error",e,t),t.message="Failed because: "+t.message,r.resetUploaderReferences(e.id),n(t)},o.onProgress=function(t,n){r.onReceiveUploadUrl(e,a.url),r.uppy.emit("upload-progress",e,{uploader:r,bytesUploaded:t,bytesTotal:n})},o.onSuccess=function(){var n={uploadURL:a.url};r.uppy.emit("upload-success",e,n),a.url&&r.uppy.log("Download "+a.file.name+" from "+a.url),r.resetUploaderReferences(e.id),t(a)};var i=function(e,t,n){Object.prototype.hasOwnProperty.call(e,t)&&!Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=e[t])},s=___extends_150({},e.meta);i(s,"type","filetype"),i(s,"name","filename"),o.metadata=s;var a=new _$libEs5_81.Upload(e.data,o);r.uploaders[e.id]=a,r.uploaderEvents[e.id]=__createEventTracker_150(r.uppy),r.onFileRemove(e.id,function(n){r.resetUploaderReferences(e.id),t("upload "+n+" was removed")}),r.onPause(e.id,function(e){e?a.abort():a.start()}),r.onPauseAll(e.id,function(){a.abort()}),r.onCancelAll(e.id,function(){r.resetUploaderReferences(e.id)}),r.onResumeAll(e.id,function(){e.error&&a.abort(),a.start()}),e.isPaused||a.start()})},t.prototype.uploadRemote=function(e,t,n){var r=this;this.resetUploaderReferences(e.id);var o=___extends_150({},this.opts,e.tus||{});return new Promise(function(t,n){return r.uppy.log(e.remote.url),e.serverToken?r.connectToServerSocket(e).then(function(){return t()})["catch"](n):(r.uppy.emit("upload-started",e),void new(e.remote.providerOptions.provider?__Provider_150:__RequestClient_150)(r.uppy,e.remote.providerOptions).post(e.remote.url,___extends_150({},e.remote.body,{endpoint:o.endpoint,uploadUrl:o.uploadUrl,protocol:"tus",size:e.data.size,metadata:e.meta})).then(function(t){return r.uppy.setFileState(e.id,{serverToken:t.token}),e=r.uppy.getFile(e.id)}).then(function(e){return r.connectToServerSocket(e)}).then(function(){t()})["catch"](function(e){n(new Error(e))}))})},t.prototype.connectToServerSocket=function(e){var t=this;return new Promise(function(n,r){var o=e.serverToken,i=_$getSocketHost_164(e.remote.serverUrl),s=new __Socket_150({target:i+"/api/"+o});t.uploaderSockets[e.id]=s,t.uploaderEvents[e.id]=__createEventTracker_150(t.uppy),t.onFileRemove(e.id,function(){s.send("pause",{}),n("upload "+e.id+" was removed")}),t.onPause(e.id,function(e){e?s.send("pause",{}):s.send("resume",{})}),t.onPauseAll(e.id,function(){return s.send("pause",{})}),t.onCancelAll(e.id,function(){return s.send("pause",{})}),t.onResumeAll(e.id,function(){e.error&&s.send("pause",{}),s.send("resume",{})}),t.onRetry(e.id,function(){s.send("pause",{}),s.send("resume",{})}),t.onRetryAll(e.id,function(){s.send("pause",{}),s.send("resume",{})}),e.isPaused&&s.send("pause",{}),s.on("progress",function(n){return _$emitSocketProgress_156(t,n,e)}),s.on("error",function(n){var o=n.error.message,i=___extends_150(new Error(o),{cause:n.error});t.opts.useFastRemoteRetry||(t.resetUploaderReferences(e.id),t.uppy.setFileState(e.id,{serverToken:null})),t.uppy.emit("upload-error",e,i),r(i)}),s.on("success",function(r){var o={uploadURL:r.url};t.uppy.emit("upload-success",e,o),t.resetUploaderReferences(e.id),n()})})},t.prototype.onReceiveUploadUrl=function(e,t){var n=this.uppy.getFile(e.id);n&&(n.tus&&n.tus.uploadUrl===t||(this.uppy.log("[Tus] Storing upload url"),this.uppy.setFileState(n.id,{tus:___extends_150({},n.tus,{uploadUrl:t})})))},t.prototype.onFileRemove=function(e,t){this.uploaderEvents[e].on("file-removed",function(n){e===n.id&&t(n.id)})},t.prototype.onPause=function(e,t){this.uploaderEvents[e].on("upload-pause",function(n,r){e===n&&t(r)})},t.prototype.onRetry=function(e,t){this.uploaderEvents[e].on("upload-retry",function(n){e===n&&t()})},t.prototype.onRetryAll=function(e,t){var n=this;this.uploaderEvents[e].on("retry-all",function(r){n.uppy.getFile(e)&&t()})},t.prototype.onPauseAll=function(e,t){var n=this;this.uploaderEvents[e].on("pause-all",function(){n.uppy.getFile(e)&&t()})},t.prototype.onCancelAll=function(e,t){var n=this;this.uploaderEvents[e].on("cancel-all",function(){n.uppy.getFile(e)&&t()})},t.prototype.onResumeAll=function(e,t){var n=this;this.uploaderEvents[e].on("resume-all",function(){n.uppy.getFile(e)&&t()})},t.prototype.uploadFiles=function(e){var t=this,n=e.map(function(n,r){var o=parseInt(r,10)+1,i=e.length;return n.error?function(){return Promise.reject(new Error(n.error))}:n.isRemote?(t.uppy.emit("upload-started",n),t.uploadRemote.bind(t,n,o,i)):(t.uppy.emit("upload-started",n),t.upload.bind(t,n,o,i))}).map(function(e){return t.limitUploads(e)()});return _$settle_175(n)},t.prototype.handleUpload=function(e){var t=this;if(0===e.length)return this.uppy.log("Tus: no files to upload!"),Promise.resolve();this.uppy.log("Tus is uploading...");var n=e.map(function(e){return t.uppy.getFile(e)});return this.uploadFiles(n).then(function(){return null})},t.prototype.install=function(){this.uppy.setState({capabilities:___extends_150({},this.uppy.getState().capabilities,{resumableUploads:!0})}),this.uppy.addUploader(this.handleUpload),this.uppy.on("reset-progress",this.handleResetProgress),this.opts.autoRetry&&this.uppy.on("back-online",this.uppy.retryAll)},t.prototype.uninstall=function(){this.uppy.setState({capabilities:___extends_150({},this.uppy.getState().capabilities,{resumableUploads:!1})}),this.uppy.removeUploader(this.handleUpload),this.opts.autoRetry&&this.uppy.off("back-online",this.uppy.retryAll)},t}(__Plugin_150),_$lib_148={},___extends_148=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__dummy_148$0=0,__Plugin_148=_$lib_96.Plugin,__dummy_148$1=0,__dummy_148$2=0,__dummy_148$3=0,__dummy_148$4=0,__dummy_148$5=0,COMPANION="https://api2.transloadit.com/companion",TL_COMPANION=/https?:\/\/api2(?:-\w+)?\.transloadit\.com\/companion/,TL_UPPY_SERVER=/https?:\/\/api2(?:-\w+)?\.transloadit\.com\/uppy-server/;_$lib_148=function(e){function t(n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));o.type="uploader",o.id="Transloadit",o.title="Transloadit";var i={strings:{creatingAssembly:"Preparing upload...",creatingAssemblyFailed:"Transloadit: Could not create Assembly",encoding:"Encoding..."}},s={service:"https://api2.transloadit.com",waitForEncoding:!1,waitForMetadata:!1,alwaysRunAssembly:!1,importFromUploadURLs:!1,signature:null,params:null,fields:{},getAssemblyOptions:defaultGetAssemblyOptions,locale:i};o.opts=___extends_148({},s,r),o.translator=new _$Translator_153([i,o.uppy.locale,o.opts.locale]),o.i18n=o.translator.translate.bind(o.translator),o.i18nArray=o.translator.translateArray.bind(o.translator),o._prepareUpload=o._prepareUpload.bind(o),o._afterUpload=o._afterUpload.bind(o),o._handleError=o._handleError.bind(o),o._onFileUploadURLAvailable=o._onFileUploadURLAvailable.bind(o),o._onRestored=o._onRestored.bind(o),o._getPersistentData=o._getPersistentData.bind(o);var a=o.opts.getAssemblyOptions!==s.getAssemblyOptions;return o.opts.params?_$AssemblyOptions_145.validateParams(o.opts.params):a||_$AssemblyOptions_145.validateParams(null),o.client=new _$Client_147({service:o.opts.service}),o.activeAssemblies={},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._attachAssemblyMetadata=function(e,t){var n=___extends_148({},e.meta,{assembly_url:t.assembly_url,filename:e.name,fieldname:"file"}),r=___extends_148({},e.tus,{endpoint:t.tus_url}),o=e.remote;if(e.remote&&TL_UPPY_SERVER.test(e.remote.serverUrl)){var i=new Error("The https://api2.transloadit.com/uppy-server endpoint was renamed to https://api2.transloadit.com/companion, please update your `serverUrl` options accordingly.");throw this.uppy.log(i),i}if(e.remote&&TL_COMPANION.test(e.remote.serverUrl)){var s=t.companion_url.replace(/\/$/,""),a=e.remote.url.replace(e.remote.serverUrl,"").replace(/^\//,"");o=___extends_148({},e.remote,{serverUrl:s,url:s+"/"+a})}var u=___extends_148({},e,{transloadit:{assembly:t.assembly_id}});return this.opts.importFromUploadURLs||___extends_148(u,{meta:n,tus:r,remote:o}),u},t.prototype._createAssembly=function(e,t,n){var r=this;return this.uppy.log("[Transloadit] create Assembly"),this.client.createAssembly({params:n.params,fields:n.fields,expectedFiles:e.length,signature:n.signature}).then(function(n){var o,i,s=new _$TransloaditAssembly_144(n),a=s.status,u=r.getPluginState(),l=u.assemblies,c=u.uploadsAssemblies;r.setPluginState({assemblies:___extends_148({},l,(o={},o[a.assembly_id]=a,o)),uploadsAssemblies:___extends_148({},c,(i={},i[t]=[].concat(c[t],[a.assembly_id]),i))});var p=r.uppy.getState().files,h={};return e.forEach(function(e){h[e]=r._attachAssemblyMetadata(r.uppy.getFile(e),a)}),r.uppy.setState({files:___extends_148({},p,h)}),r.uppy.emit("transloadit:assembly-created",a,e),r._connectAssembly(s),r.uppy.log("[Transloadit] Created Assembly "+a.assembly_id),s})["catch"](function(e){throw e.message=r.i18n("creatingAssemblyFailed")+": "+e.message,e})},t.prototype._shouldWaitAfterUpload=function(){return this.opts.waitForEncoding||this.opts.waitForMetadata},t.prototype._reserveFiles=function(e,t){var n=this;return Promise.all(t.map(function(t){var r=n.uppy.getFile(t);return n.client.reserveFile(e,r)}))},t.prototype._onFileUploadURLAvailable=function(e){var t=this;if(e&&e.transloadit&&e.transloadit.assembly){var n=this.getPluginState().assemblies[e.transloadit.assembly];this.client.addFile(n,e)["catch"](function(r){t.uppy.log(r),t.uppy.emit("transloadit:import-error",n,e.id,r)})}},t.prototype._findFile=function(e){for(var t=this.uppy.getFiles(),n=0;n<t.length;n++){var r=t[n];if(r.uploadURL===e.tus_upload_url)return r;if(r.tus&&r.tus.uploadUrl===e.tus_upload_url)return r;if(!e.is_tus_file&&r.name===e.name&&r.size===e.size)return r}},t.prototype._onFileUploadComplete=function(e,t){var n,r=this.getPluginState(),o=this._findFile(t);o?(this.setPluginState({files:___extends_148({},r.files,(n={},n[t.id]={assembly:e,id:o.id,uploadedFile:t},n))}),this.uppy.emit("transloadit:upload",t,this.getAssembly(e))):this.uppy.log("[Transloadit] Couldn’t file the file, it was likely removed in the process")},t.prototype._onResult=function(e,t,n){var r=this.getPluginState(),o=r.files[n.original_id];n.localId=o?o.id:null;var i={result:n,stepName:t,id:n.id,assembly:e};this.setPluginState({results:[].concat(r.results,[i])}),this.uppy.emit("transloadit:result",t,n,this.getAssembly(e))},t.prototype._onAssemblyFinished=function(e){var t=this,n=e.assembly_ssl_url;this.client.getAssemblyStatus(n).then(function(e){var n,r=t.getPluginState();t.setPluginState({assemblies:___extends_148({},r.assemblies,(n={},n[e.assembly_id]=e,n))}),t.uppy.emit("transloadit:complete",e)})},t.prototype._getPersistentData=function(e){var t,n=this.getPluginState(),r=n.assemblies,o=n.uploadsAssemblies;e(((t={})[this.id]={assemblies:r,uploadsAssemblies:o},t))},t.prototype._onRestored=function(e){var t=this,n=e&&e[this.id]?e[this.id]:{},r=n.assemblies||{},o=n.uploadsAssemblies||{};0!==Object.keys(o).length&&(this.restored=Promise.resolve().then(function(){var e,n,i;return e=r,n={},i=[],Object.keys(e).forEach(function(r){var o=e[r];o.uploads.forEach(function(e){var o=t._findFile(e);n[e.id]={id:o.id,assembly:r,uploadedFile:e}});var s=t.getPluginState();Object.keys(o.results).forEach(function(e){o.results[e].forEach(function(t){var n=s.files[t.original_id];t.localId=n?n.id:null,i.push({id:t.id,result:t,stepName:e,assembly:r})})})}),t.setPluginState({assemblies:e,files:n,results:i,uploadsAssemblies:o}),function(){var e=t.getPluginState().assemblies;Object.keys(e).forEach(function(n){var r=new _$TransloaditAssembly_144(e[n]);t._connectAssembly(r)})}(),function(){var e=t.getPluginState().assemblies;return Promise.all(Object.keys(e).map(function(e){return t.activeAssemblies[e].update()}))}()}),this.restored.then(function(){t.restored=null}))},t.prototype._connectAssembly=function(e){var t=this,n=e.status.assembly_id;return this.activeAssemblies[n]=e,e.on("status",function(e){var r,o=t.getPluginState().assemblies;t.setPluginState({assemblies:___extends_148({},o,(r={},r[n]=e,r))})}),e.on("upload",function(e){t._onFileUploadComplete(n,e)}),e.on("error",function(n){t.uppy.emit("transloadit:assembly-error",e.status,n)}),e.on("executing",function(){t.uppy.emit("transloadit:assembly-executing",e.status)}),this.opts.waitForEncoding&&e.on("result",function(e,r){t._onResult(n,e,r)}),this.opts.waitForEncoding?e.on("finished",function(){t._onAssemblyFinished(e.status)}):this.opts.waitForMetadata&&e.on("metadata",function(){t._onAssemblyFinished(e.status)}),"ASSEMBLY_COMPLETE"===e.ok?e:(new Promise(function(t,n){e.once("connect",t),e.once("status",t),e.once("error",n)}).then(function(){t.uppy.log("[Transloadit] Socket is ready")}),e.connect(),e)},t.prototype._prepareUpload=function(e,t){var n,r=this;(e=e.filter(function(e){return!e.error})).forEach(function(e){var t=r.uppy.getFile(e);r.uppy.emit("preprocess-progress",t,{mode:"indeterminate",message:r.i18n("creatingAssembly")})});var o=function(e){
var n=e.fileIDs,o=e.options;return r._createAssembly(n,t,o).then(function(e){if(r.opts.importFromUploadURLs)return r._reserveFiles(e,n)}).then(function(){n.forEach(function(e){var t=r.uppy.getFile(e);r.uppy.emit("preprocess-complete",t)})})["catch"](function(e){throw n.forEach(function(t){var n=r.uppy.getFile(t);r.uppy.emit("preprocess-complete",n),r.uppy.emit("upload-error",n,e)}),e})},i=this.getPluginState().uploadsAssemblies;this.setPluginState({uploadsAssemblies:___extends_148({},i,(n={},n[t]=[],n))});var s=e.map(function(e){return r.uppy.getFile(e)});return new _$AssemblyOptions_145(s,this.opts).build().then(function(e){return Promise.all(e.map(o))},function(t){throw e.forEach(function(e){var n=r.uppy.getFile(e);r.uppy.emit("preprocess-complete",n),r.uppy.emit("upload-error",n,t)}),t})},t.prototype._afterUpload=function(e,t){var n=this;e=e.filter(function(e){return!e.error});var r=this.getPluginState();if(this.restored)return this.restored.then(function(){return n._afterUpload(e,t)});var o=r.uploadsAssemblies[t];if(!this._shouldWaitAfterUpload()){o.forEach(function(e){n.activeAssemblies[e].close(),delete n.activeAssemblies[e]});var i=o.map(function(e){return n.getAssembly(e)});return this.uppy.addResultData(t,{transloadit:i}),Promise.resolve()}if(0===o.length)return this.uppy.addResultData(t,{transloadit:[]}),Promise.resolve();var s=new _$TransloaditAssemblyWatcher_146(this.uppy,o);return e.forEach(function(e){var t=n.uppy.getFile(e);n.uppy.emit("postprocess-progress",t,{mode:"indeterminate",message:n.i18n("encoding")})}),s.on("assembly-complete",function(e){n.getAssemblyFiles(e).forEach(function(e){n.uppy.emit("postprocess-complete",e)})}),s.on("assembly-error",function(e,t){n.getAssemblyFiles(e).forEach(function(e){n.uppy.emit("upload-error",e,t),n.uppy.emit("postprocess-complete",e)})}),s.promise.then(function(){var e=o.map(function(e){return n.getAssembly(e)}),r=n.getPluginState(),i=___extends_148({},r.uploadsAssemblies);delete i[t],n.setPluginState({uploadsAssemblies:i}),n.uppy.addResultData(t,{transloadit:e})})},t.prototype._handleError=function(e,t){var n=this;this.uppy.log("[Transloadit] _handleError in upload "+t),this.uppy.log(e),this.getPluginState().uploadsAssemblies[t].forEach(function(e){n.activeAssemblies[e]&&n.activeAssemblies[e].close()})},t.prototype.install=function(){this.uppy.addPreProcessor(this._prepareUpload),this.uppy.addPostProcessor(this._afterUpload),this.uppy.on("error",this._handleError),this.opts.importFromUploadURLs?this.uppy.on("upload-success",this._onFileUploadURLAvailable):this.uppy.use(_$lib_150,{resume:!1,useFastRemoteRetry:!1,metaFields:["assembly_url","filename","fieldname"]}),this.uppy.on("restore:get-data",this._getPersistentData),this.uppy.on("restored",this._onRestored),this.setPluginState({assemblies:{},uploadsAssemblies:{},files:{},results:[]})},t.prototype.uninstall=function(){this.uppy.removePreProcessor(this._prepareUpload),this.uppy.removePostProcessor(this._afterUpload),this.uppy.off("error",this._handleError),this.opts.importFromUploadURLs&&this.uppy.off("upload-success",this._onFileUploadURLAvailable)},t.prototype.getAssembly=function(e){return this.getPluginState().assemblies[e]},t.prototype.getAssemblyFiles=function(e){return this.uppy.getFiles().filter(function(t){return t&&t.transloadit&&t.transloadit.assembly===e})},t}(__Plugin_148),_$lib_148.COMPANION=COMPANION,_$lib_148.UPPY_SERVER=COMPANION,_$lib_148.COMPANION_PATTERN=/\.transloadit\.com$/;var __dummy_151$0=0,__h_151=_$preact_49.h,UrlUI=function(e){function t(n){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.handleKeyPress=r.handleKeyPress.bind(r),r.handleClick=r.handleClick.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){var e=this;this.input.value="",setTimeout(function(){e.input&&e.input.focus({preventScroll:!0})},150)},t.prototype.handleKeyPress=function(e){13===e.keyCode&&this.props.addFile(this.input.value)},t.prototype.handleClick=function(){this.props.addFile(this.input.value)},t.prototype.render=function(){var e=this;return __h_151("div",{"class":"uppy-Url"},__h_151("input",{"class":"uppy-c-textInput uppy-Url-input",type:"text","aria-label":this.props.i18n("enterUrlToImport"),placeholder:this.props.i18n("enterUrlToImport"),onkeyup:this.handleKeyPress,ref:function(t){e.input=t}}),__h_151("button",{"class":"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Url-importButton",type:"button",onclick:this.handleClick},this.props.i18n("import")))},t}(_$preact_49.Component),_$UrlUI_151=UrlUI,___extends_152=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__Plugin_152=_$lib_96.Plugin,__dummy_152$0=0,__h_152=_$preact_49.h,__RequestClient_152=_$lib_94.RequestClient,__dummy_152$1=0,__dummy_152$2=0,_$lib_152=function(e){function t(n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));o.id=o.opts.id||"Url",o.title=o.opts.title||"Link",o.type="acquirer",o.icon=function(){return __h_152("svg",{"aria-hidden":"true",width:"23",height:"23",viewBox:"0 0 23 23",xmlns:"http://www.w3.org/2000/svg"},__h_152("path",{d:"M20.485 11.236l-2.748 2.737c-.184.182-.367.365-.642.547-1.007.73-2.107 1.095-3.298 1.095-1.65 0-3.298-.73-4.398-2.19-.275-.365-.183-1.003.183-1.277.367-.273 1.008-.182 1.283.183 1.191 1.642 3.482 1.915 5.13.73a.714.714 0 0 0 .367-.365l2.75-2.737c1.373-1.46 1.373-3.74-.093-5.108a3.72 3.72 0 0 0-5.13 0L12.33 6.4a.888.888 0 0 1-1.283 0 .88.88 0 0 1 0-1.277l1.558-1.55a5.38 5.38 0 0 1 7.605 0c2.29 2.006 2.382 5.564.274 7.662zm-8.979 6.294L9.95 19.081a3.72 3.72 0 0 1-5.13 0c-1.467-1.368-1.467-3.74-.093-5.108l2.75-2.737.366-.365c.824-.547 1.74-.82 2.748-.73 1.008.183 1.833.639 2.382 1.46.275.365.917.456 1.283.182.367-.273.458-.912.183-1.277-.916-1.186-2.199-1.915-3.573-2.098-1.374-.273-2.84.091-4.031 1.004l-.55.547-2.749 2.737c-2.107 2.189-2.015 5.655.092 7.753C4.727 21.453 6.101 22 7.475 22c1.374 0 2.749-.547 3.848-1.55l1.558-1.551a.88.88 0 0 0 0-1.278c-.367-.364-1.008-.456-1.375-.09z",fill:"#FF814F","fill-rule":"nonzero"}))};var i={strings:{"import":"Import",enterUrlToImport:"Enter URL to import a file",failedToFetch:"Companion failed to fetch this URL, please make sure it’s correct",enterCorrectUrl:"Incorrect URL: Please make sure you are entering a direct link to a file"}},s={locale:i};if(o.opts=___extends_152({},s,r),o.translator=new _$Translator_153([i,o.uppy.locale,o.opts.locale]),o.i18n=o.translator.translate.bind(o.translator),o.i18nArray=o.translator.translateArray.bind(o.translator),o.hostname=o.opts.serverUrl,!o.hostname)throw new Error("Companion hostname is required, please consult https://uppy.io/docs/companion");return o.getMeta=o.getMeta.bind(o),o.addFile=o.addFile.bind(o),o.handleDrop=o.handleDrop.bind(o),o.handleDragOver=o.handleDragOver.bind(o),o.handleDragLeave=o.handleDragLeave.bind(o),o.handlePaste=o.handlePaste.bind(o),o.client=new __RequestClient_152(n,{serverUrl:o.opts.serverUrl,serverHeaders:o.opts.serverHeaders}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getFileNameFromUrl=function(e){return e.substring(e.lastIndexOf("/")+1)},t.prototype.checkIfCorrectURL=function(e){if(!e)return!1;var t=e.match(/^([a-z0-9]+):\/\//)[1];return"http"===t||"https"===t},t.prototype.addProtocolToURL=function(e){return/^[a-z0-9]+:\/\//.test(e)?e:"http://"+e},t.prototype.getMeta=function(e){var t=this;return this.client.post("url/meta",{url:e}).then(function(e){if(e.error)throw t.uppy.log("[URL] Error:"),t.uppy.log(e.error),new Error("Failed to fetch the file");return e})},t.prototype.addFile=function(e){var t=this;return e=this.addProtocolToURL(e),this.checkIfCorrectURL(e)?this.getMeta(e).then(function(n){return{source:t.id,name:t.getFileNameFromUrl(e),type:n.type,data:{size:n.size},isRemote:!0,body:{url:e},remote:{serverUrl:t.opts.serverUrl,url:t.hostname+"/url/get",body:{fileId:e,url:e},providerOptions:t.client.opts}}}).then(function(e){t.uppy.log("[Url] Adding remote file");try{t.uppy.addFile(e)}catch(e){}}).then(function(){})["catch"](function(e){t.uppy.log(e),t.uppy.info({message:t.i18n("failedToFetch"),details:e},"error",4e3)}):(this.uppy.log("[URL] Incorrect URL entered: "+e),void this.uppy.info(this.i18n("enterCorrectUrl"),"error",4e3))},t.prototype.handleDrop=function(e){var t=this;e.preventDefault(),e.dataTransfer.items&&_$toArray_176(e.dataTransfer.items).forEach(function(e){"string"===e.kind&&"text/uri-list"===e.type&&e.getAsString(function(e){t.uppy.log("[URL] Adding file from dropped url: "+e),t.addFile(e)})})},t.prototype.handleDragOver=function(e){e.preventDefault(),this.el.classList.add("drag")},t.prototype.handleDragLeave=function(e){e.preventDefault(),this.el.classList.remove("drag")},t.prototype.handlePaste=function(e){var t=this;if(e.clipboardData.items){var n=_$toArray_176(e.clipboardData.items);n.filter(function(e){return"file"===e.kind}).length>0||n.forEach(function(e){"string"===e.kind&&"text/plain"===e.type&&e.getAsString(function(e){t.uppy.log("[URL] Adding file from pasted url: "+e),t.addFile(e)})})}},t.prototype.render=function(e){return __h_152(_$UrlUI_151,{i18n:this.i18n,addFile:this.addFile})},t.prototype.onMount=function(){this.el&&(this.el.addEventListener("drop",this.handleDrop),this.el.addEventListener("dragover",this.handleDragOver),this.el.addEventListener("dragleave",this.handleDragLeave),this.el.addEventListener("paste",this.handlePaste))},t.prototype.install=function(){var e=this.opts.target;e&&this.mount(e,this)},t.prototype.uninstall=function(){this.el&&(this.el.removeEventListener("drop",this.handleDrop),this.el.removeEventListener("dragover",this.handleDragOver),this.el.removeEventListener("dragleave",this.handleDragLeave),this.el.removeEventListener("paste",this.handlePaste)),this.unmount()},t}(__Plugin_152),_$canvasToBlob_154=function(e,t,n){return e.toBlob?new Promise(function(r){e.toBlob(r,t,n)}):Promise.resolve().then(function(){return _$dataURItoBlob_155(e.toDataURL(t,n),{})})},mimeToExtensions={"video/ogg":"ogv","audio/ogg":"ogg","video/webm":"webm","audio/webm":"webm","video/x-matroska":"mkv","video/mp4":"mp4","audio/mp3":"mp3"},_$getFileTypeExtension_163=function(e){return e=e.replace(/;.*$/,""),mimeToExtensions[e]||null},__h_177=_$preact_49.h,_$CameraIcon_177=function(e){return __h_177("svg",{"aria-hidden":"true",fill:"#0097DC",width:"66",height:"55",viewBox:"0 0 66 55",xmlns:"http://www.w3.org/2000/svg"},__h_177("path",{d:"M57.3 8.433c4.59 0 8.1 3.51 8.1 8.1v29.7c0 4.59-3.51 8.1-8.1 8.1H8.7c-4.59 0-8.1-3.51-8.1-8.1v-29.7c0-4.59 3.51-8.1 8.1-8.1h9.45l4.59-7.02c.54-.54 1.35-1.08 2.16-1.08h16.2c.81 0 1.62.54 2.16 1.08l4.59 7.02h9.45zM33 14.64c-8.62 0-15.393 6.773-15.393 15.393 0 8.62 6.773 15.393 15.393 15.393 8.62 0 15.393-6.773 15.393-15.393 0-8.62-6.773-15.393-15.393-15.393zM33 40c-5.648 0-9.966-4.319-9.966-9.967 0-5.647 4.318-9.966 9.966-9.966s9.966 4.319 9.966 9.966C42.966 35.681 38.648 40 33 40z","fill-rule":"evenodd"}))},__h_180=_$preact_49.h,_$RecordButton_180=function(e){var t=e.recording,n=e.onStartRecording,r=e.onStopRecording,o=e.i18n;return console.log("is recording",t),t?__h_180("button",{"class":"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--video",type:"button",title:o("stopRecording"),"aria-label":o("stopRecording"),onclick:r},__h_180("svg",{"aria-hidden":"true","class":"UppyIcon",width:"100",height:"100",viewBox:"0 0 100 100"},__h_180("rect",{x:"15",y:"15",width:"70",height:"70"}))):__h_180("button",{"class":"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--video",type:"button",title:o("startRecording"),"aria-label":o("startRecording"),onclick:n},__h_180("svg",{"aria-hidden":"true","class":"UppyIcon",width:"100",height:"100",viewBox:"0 0 100 100"},__h_180("circle",{cx:"50",cy:"50",r:"40"})))},__h_181=_$preact_49.h,__dummy_181$0=0,_$SnapshotButton_181=function(e){var t=e.onSnapshot,n=e.i18n;return __h_181("button",{"class":"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--picture",type:"button",title:n("takePicture"),"aria-label":n("takePicture"),onclick:t},_$CameraIcon_177())},__dummy_178$0=0,__h_178=_$preact_49.h,__Component_178=_$preact_49.Component,__dummy_178$1=0,__dummy_178$2=0,CameraScreen=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props.onFocus(),this.btnContainer.firstChild.focus()},t.prototype.componentWillUnmount=function(){this.props.onStop()},t.prototype.render=function(){var e=this,t=this.props.supportsRecording&&(isModeAvailable(this.props.modes,"video-only")||isModeAvailable(this.props.modes,"audio-only")||isModeAvailable(this.props.modes,"video-audio")),n=isModeAvailable(this.props.modes,"picture");return __h_178("div",{"class":"uppy uppy-Webcam-container"},__h_178("div",{"class":"uppy-Webcam-videoContainer"},__h_178("video",{"class":"uppy-Webcam-video  "+(this.props.mirror?"uppy-Webcam-video--mirrored":""),autoplay:!0,muted:!0,playsinline:!0,srcObject:this.props.src||""})),__h_178("div",{"class":"uppy-Webcam-buttonContainer",ref:function(t){e.btnContainer=t}},n?_$SnapshotButton_181(this.props):null," ",t?_$RecordButton_180(this.props):null))},t}(__Component_178),_$CameraScreen_178=CameraScreen,__h_179=_$preact_49.h,_$PermissionsScreen_179=function(e){return __h_179("div",{"class":"uppy-Webcam-permissons"},__h_179("div",{"class":"uppy-Webcam-permissonsIcon"},e.icon()),__h_179("h1",{"class":"uppy-Webcam-title"},e.i18n("allowAccessTitle")),__h_179("p",null,e.i18n("allowAccessDescription")))},_$supportsMediaRecorder_183=function(){return"function"==typeof MediaRecorder&&!!MediaRecorder.prototype&&"function"==typeof MediaRecorder.prototype.start},___typeof_182="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},___extends_182=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__h_182=_$preact_49.h,__Plugin_182=_$lib_96.Plugin,__dummy_182$0=0,__dummy_182$1=0,__dummy_182$2=0,__dummy_182$3=0,__dummy_182$4=0,__dummy_182$5=0,__dummy_182$6=0,_$lib_182=function(e){function t(n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));o.mediaDevices=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices;var e=navigator.mozGetUserMedia||navigator.webkitGetUserMedia;return e?{getUserMedia:function(t){return new Promise(function(n,r){e.call(navigator,t,n,r)})}}:null}(),o.supportsUserMedia=!!o.mediaDevices,o.protocol=location.protocol.match(/https/i)?"https":"http",o.id=o.opts.id||"Webcam",o.title=o.opts.title||"Camera",o.type="acquirer",o.icon=_$CameraIcon_177;var i={strings:{smile:"Smile!",takePicture:"Take a picture",startRecording:"Begin video recording",stopRecording:"Stop video recording",allowAccessTitle:"Please allow access to your camera",allowAccessDescription:"In order to take pictures or record video with your camera, please allow camera access for this site."}},s={onBeforeSnapshot:function(){return Promise.resolve()},countdown:!1,locale:i,modes:["video-audio","video-only","audio-only","picture"],mirror:!0,facingMode:"user"};return o.opts=___extends_182({},s,r),o.translator=new _$Translator_153([i,o.uppy.locale,o.opts.locale]),o.i18n=o.translator.translate.bind(o.translator),o.i18nArray=o.translator.translateArray.bind(o.translator),o.install=o.install.bind(o),o.setPluginState=o.setPluginState.bind(o),o.render=o.render.bind(o),o.start=o.start.bind(o),o.stop=o.stop.bind(o),o.takeSnapshot=o.takeSnapshot.bind(o),o.startRecording=o.startRecording.bind(o),o.stopRecording=o.stopRecording.bind(o),o.oneTwoThreeSmile=o.oneTwoThreeSmile.bind(o),o.focus=o.focus.bind(o),o.webcamActive=!1,o.opts.countdown&&(o.opts.onBeforeSnapshot=o.oneTwoThreeSmile),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.isSupported=function(){return!!this.mediaDevices},t.prototype.getConstraints=function(){return{audio:-1!==this.opts.modes.indexOf("video-audio")||-1!==this.opts.modes.indexOf("audio-only"),video:!(-1===this.opts.modes.indexOf("video-audio")&&-1===this.opts.modes.indexOf("video-only")&&-1===this.opts.modes.indexOf("picture"))&&{facingMode:this.opts.facingMode}}},t.prototype.start=function(){var e=this;if(!this.isSupported())return Promise.reject(new Error("Webcam access not supported"));this.webcamActive=!0;var t=this.getConstraints();return this.mediaDevices.getUserMedia(t).then(function(t){e.stream=t,e.setPluginState({cameraReady:!0})})["catch"](function(t){e.setPluginState({cameraError:t})})},t.prototype.startRecording=function(){var e=this;this.recorder=new MediaRecorder(this.stream),this.recordingChunks=[],this.recorder.addEventListener("dataavailable",function(t){e.recordingChunks.push(t.data)}),this.recorder.start(),this.setPluginState({isRecording:!0})},t.prototype.stopRecording=function(){var e=this;return new Promise(function(t,n){e.recorder.addEventListener("stop",function(){t()}),e.recorder.stop()}).then(function(){return e.setPluginState({isRecording:!1}),e.getVideo()}).then(function(e){try{t.uppy.addFile(e)}catch(t){}}).then(function(){e.recordingChunks=null,e.recorder=null},function(t){throw e.recordingChunks=null,e.recorder=null,t})},t.prototype.stop=function(){this.stream.getAudioTracks().forEach(function(e){e.stop()}),this.stream.getVideoTracks().forEach(function(e){e.stop()}),this.webcamActive=!1,this.stream=null},t.prototype.getVideoElement=function(){return this.el.querySelector(".uppy-Webcam-video")},t.prototype.oneTwoThreeSmile=function(){var e=this;return new Promise(function(t,n){var r=e.opts.countdown,o=setInterval(function(){return e.webcamActive?void(r>0?(e.uppy.info(r+"...","warning",800),r--):(clearInterval(o),e.uppy.info(e.i18n("smile"),"success",1500),setTimeout(function(){return t()},1500))):(clearInterval(o),e.captureInProgress=!1,n(new Error("Webcam is not active")))},1e3)})},t.prototype.takeSnapshot=function(){var e=this;this.captureInProgress||(this.captureInProgress=!0,this.opts.onBeforeSnapshot()["catch"](function(t){var n="object"===(void 0===t?"undefined":___typeof_182(t))?t.message:t;return e.uppy.info(n,"error",5e3),Promise.reject(new Error("onBeforeSnapshot: "+n))}).then(function(){return e.getImage()}).then(function(e){t.captureInProgress=!1;try{t.uppy.addFile(e)}catch(t){}},function(t){throw e.captureInProgress=!1,t}))},t.prototype.getImage=function(){var e=this,t=this.getVideoElement();if(!t)return Promise.reject(new Error("No video element found, likely due to the Webcam tab being closed."));var n="webcam-"+Date.now()+".jpg",r=t.videoWidth,o=t.videoHeight,i=document.createElement("canvas");return i.width=r,i.height=o,i.getContext("2d").drawImage(t,0,0),_$canvasToBlob_154(i,"image/jpeg").then(function(t){return{source:e.id,name:n,data:new Blob([t],{type:"image/jpeg"}),type:"image/jpeg"}})},t.prototype.getVideo=function(){var e=this.recordingChunks[0].type,t=_$getFileTypeExtension_163(e);if(!t)return Promise.reject(new Error('Could not retrieve recording: Unsupported media type "'+e+'"'));var n="webcam-"+Date.now()+"."+t,r=new Blob(this.recordingChunks,{type:e}),o={source:this.id,name:n,data:new Blob([r],{type:e}),type:e};return Promise.resolve(o)},t.prototype.focus=function(){var e=this;this.opts.countdown||setTimeout(function(){e.uppy.info(e.i18n("smile"),"success",1500)},1e3)},t.prototype.render=function(e){this.webcamActive||this.start();var t=this.getPluginState();return t.cameraReady?__h_182(_$CameraScreen_178,___extends_182({},t,{onSnapshot:this.takeSnapshot,onStartRecording:this.startRecording,onStopRecording:this.stopRecording,onFocus:this.focus,onStop:this.stop,i18n:this.i18n,modes:this.opts.modes,supportsRecording:_$supportsMediaRecorder_183(),recording:t.isRecording,mirror:this.opts.mirror,src:this.stream})):__h_182(_$PermissionsScreen_179,{icon:_$CameraIcon_177,i18n:this.i18n})},t.prototype.install=function(){this.setPluginState({cameraReady:!1});var e=this.opts.target;e&&this.mount(e,this)},t.prototype.uninstall=function(){this.stream&&this.stop(),this.unmount()},t}(__Plugin_182),_$uppy_186={};_$uppy_186.Core=_$lib_96,_$uppy_186.server=_$lib_94,_$uppy_186.views={ProviderView:_$lib_136},_$uppy_186.DefaultStore=_$lib_141,_$uppy_186.ReduxStore=_$lib_142,_$uppy_186.Dashboard=_$lib_110,_$uppy_186.DragDrop=_$lib_115,_$uppy_186.FileInput=_$lib_117,_$uppy_186.Informer=_$lib_125,_$uppy_186.ProgressBar=_$lib_127,_$uppy_186.StatusBar=_$lib_140,_$uppy_186.Dropbox=_$lib_116,_$uppy_186.GoogleDrive=_$lib_124,_$uppy_186.Instagram=_$lib_126,_$uppy_186.Url=_$lib_152,_$uppy_186.Webcam=_$lib_182,_$uppy_186.AwsS3=_$lib_90,_$uppy_186.AwsS3Multipart=_$lib_89,_$uppy_186.Transloadit=_$lib_148,_$uppy_186.Tus=_$lib_150,_$uppy_186.XHRUpload=_$lib_184,_$uppy_186.Form=_$lib_118,_$uppy_186.GoldenRetriever=_$lib_122,_$uppy_186.ReduxDevTools=_$lib_137,_$uppy_186.ThumbnailGenerator=_$lib_143;var _$bundle_185={};return _$bundle_185=_$uppy_186})}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;!function(e,t){e.VMasker=t()}(e.Mango,function(){var t="9",n="A",r="S",o=[9,16,17,18,36,37,38,39,40,91,92,93],i=function(e){for(var t=0,n=o.length;t<n;t++)if(e==o[t])return!1;return!0},s=function(e){return e=e||{},e={precision:e.hasOwnProperty("precision")?e.precision:2,separator:e.separator||",",delimiter:e.delimiter||".",unit:e.unit&&e.unit.replace(/[\s]/g,"")+" "||"",suffixUnit:e.suffixUnit&&" "+e.suffixUnit.replace(/[\s]/g,"")||"",zeroCents:e.zeroCents,lastOutput:e.lastOutput},e.moneyPrecision=e.zeroCents?0:e.precision,e},a=function(e,o,i){for(;o<e.length;o++)e[o]!==t&&e[o]!==n&&e[o]!==r||(e[o]=i);return e},u=function(e){this.elements=e};u.prototype.unbindElementToMask=function(){for(var e=0,t=this.elements.length;e<t;e++)this.elements[e].lastOutput="",this.elements[e].onkeyup=!1,this.elements[e].onkeydown=!1,this.elements[e].value.length&&(this.elements[e].value=this.elements[e].value.replace(/\D/g,""))},u.prototype.bindElementToMask=function(t){for(var n=this,r=function(r){r=r||e.event;var o=r.target||r.srcElement;i(r.keyCode)&&setTimeout(function(){n.opts.lastOutput=o.lastOutput,o.value=l[t](o.value,n.opts),o.lastOutput=o.value,o.setSelectionRange&&n.opts.suffixUnit&&o.setSelectionRange(o.value.length,o.value.length-n.opts.suffixUnit.length)},0)},o=0,s=this.elements.length;o<s;o++)this.elements[o].lastOutput="",this.elements[o].onkeyup=r,this.elements[o].value.length&&(this.elements[o].value=l[t](this.elements[o].value,this.opts))},u.prototype.maskMoney=function(e){this.opts=s(e),this.bindElementToMask("toMoney")},u.prototype.maskNumber=function(){this.opts={},this.bindElementToMask("toNumber")},u.prototype.maskAlphaNum=function(){this.opts={},this.bindElementToMask("toAlphaNumeric")},u.prototype.maskPattern=function(e){this.opts={pattern:e},this.bindElementToMask("toPattern")},u.prototype.unMask=function(){this.unbindElementToMask()};var l=function(e){if(!e)throw new Error("VanillaMasker: There is no element to bind.");var t="length"in e?e.length?e:[]:[e];return new u(t)};return l.toMoney=function(e,t){if(t=s(t),t.zeroCents){t.lastOutput=t.lastOutput||"";var n="("+t.separator+"[0]{0,"+t.precision+"})",r=new RegExp(n,"g"),o=e.toString().replace(/[\D]/g,"").length||0,i=t.lastOutput.toString().replace(/[\D]/g,"").length||0;e=e.toString().replace(r,""),o<i&&(e=e.slice(0,e.length-1))}var a=e.toString().replace(/[\D]/g,""),u=new RegExp("^(0|\\"+t.delimiter+")"),l=new RegExp("(\\"+t.separator+")$"),c=a.substr(0,a.length-t.moneyPrecision),p=c.substr(0,c.length%3),h=new Array(t.precision+1).join("0");c=c.substr(c.length%3,c.length);for(var d=0,f=c.length;d<f;d++)d%3===0&&(p+=t.delimiter),p+=c[d];if(p=p.replace(u,""),p=p.length?p:"0",!t.zeroCents){var _=a.length-t.precision,m=a.substr(_,t.precision),g=m.length,y=t.precision>g?t.precision:g;h=(h+m).slice(-y)}var v=t.unit+p+t.separator+h+t.suffixUnit;return v.replace(l,"")},l.toPattern=function(e,o){var i,s="object"==typeof o?o.pattern:o,u=s.replace(/\W/g,""),l=s.split(""),c=e.toString().replace(/\W/g,""),p=c.replace(/\W/g,""),h=0,d=l.length,f="object"==typeof o?o.placeholder:void 0;for(i=0;i<d;i++){if(h>=c.length){if(u.length==p.length)return l.join("");if(void 0!==f&&u.length>p.length)return a(l,i,f).join("");break}if(l[i]===t&&c[h].match(/[0-9]/)||l[i]===n&&c[h].match(/[a-zA-Z]/)||l[i]===r&&c[h].match(/[0-9a-zA-Z]/))l[i]=c[h++];else if(l[i]===t||l[i]===n||l[i]===r)return void 0!==f?a(l,i,f).join(""):l.slice(0,i).join("")}return l.join("").substr(0,i)},l.toNumber=function(e){return e.toString().replace(/(?!^-)[^0-9]/g,"")},l.toAlphaNumeric=function(e){return e.toString().replace(/[^a-z0-9 ]+/i,"")},l})}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;n.ClientConfig={calltrackingHost:"dct.mango-office.ru",multichannelHost:"mcw.mango-office.ru",pushStreamModuleHost:"mcw.mango-office.ru",fs4talkHost:"chatfs.mango-office.ru"},n.version="19.40"}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";var r=n.$;n._,n.Promise;n.Common=n.Common||{},n.Common.Http=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"get",value:function(e,t){return r.ajax({type:"GET",url:e,data:t||{},dataType:"jsonp",jsonpCallback:"mgo"+(new Date).getTime(),cache:!1})}},{key:"postJson",value:function(e,t){return r.ajax({type:"POST",global:!1,url:e,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(t)})}},{key:"sendGet",value:function(e,t){return r.ajax({type:"GET",url:e,global:!1,data:t})}}]),e}()}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";function r(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}function o(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";e.length<t;)e=n+e;return e}function i(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";e.length<t;)e+=n;return e}function s(e){var t=e.randomPartSize,n=void 0===t?4:t,r=e.secondRandomPartSize,i=void 0===r?5:r,s=e.currDate,a=void 0===s?new Date:s,u=e.sessionsCountGetter,l=b(n),c=Math.round(a.getTime()/1e3).toString(36),p=_.toString(),h=m.toString(),d=o(u().toString(36),3,"0"),f=b(i);return""+l+c+p+h+d+f}n.$,n._,n.Promise;n.Common=n.Common||{};var a="mgo_uid",u="mgo_sid",l="mgo_uip",c="mgo_cnt",p=Number.POSITIVE_INFINITY,h=Number.POSITIVE_INFINITY,d=1800,f=parseInt("x00",36);n.Common.Session=function(){function e(){_classCallCheck(this,e),this.isNewUser=!1}return _createClass(e,[{key:"getSessionCount",value:function(){return parseInt(n.Cookies.get(c),10)||0}},{key:"incrementSessionCount",value:function(){var e=this.getSessionCount(),t=p,r=this._getDomain();if(0===e&&!this.isNewUser)return n.Cookies.set(c,f,{expires:t,domain:r}),f;this.isNewUser&&e>0&&(e=0);var o=e+1;return n.Cookies.set(c,o,{expires:t,domain:r}),o}},{key:"getUserId",value:function(){return n.Cookies.get(a)||this._createUserId()}},{key:"getUserIp",value:function(){return n.Cookies.get(l)}},{key:"getSessionId",value:function(){return n.Cookies.get(u)||this._createSessionId()}},{key:"_createUserId",value:function(){var e=r();return n.Cookies.set(a,e,{expires:h,domain:this._getDomain()}),this.isNewUser=!0,e}},{key:"_createSessionId",value:function(){var e=this,t=function(){return e.incrementSessionCount()},r=s({sessionsCountGetter:t});return n.Cookies.set(u,r,{expires:d,domain:this._getDomain()}),r}},{key:"refreshSession",value:function(e){var t=this.getSessionId(),r=e?e:d;n.Cookies.set(u,t,{expires:r,domain:this._getDomain()})}},{key:"_getDomain",value:function(){var e=t.location.hostname;return e.match(/[а-яё]/)?"":"."+e.replace("www.","")}}]),e}();var _=1,m=1,g=function(e){return parseInt(i("1",e,"0"),36)},y=function(e){return parseInt(i("",e,"z"),36)},v=function(e,t){return Math.floor(Math.random()*(t-e))+e},b=function(e){return v(g(e),y(e)).toString(36)}}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";var r=n.$,o=n._;n.Promise;n.Analytics=n.Analytics||{};var i=3e4,s=1e3;n.Analytics.ActivitySpy=function(){function e(t){_classCallCheck(this,e),o.extend(this,n.Backbone.Events),this.isActive=!1,this.isSpying=!1,this.startTime=t}return _createClass(e,[{key:"start",value:function(){this.isSpying&&this.stop(),this.isSpying=!0,this._updateActivityHandler=o.bind(this._updateActivity,this),r(t).on("mousemove scroll keydown",this._updateActivityHandler),this._intervalId=setInterval(o.bind(this._onInterval,this),s),this.startTime=this.startTime||this._getCurrentTime(),this.activeTimeArray=[],this._activate()}},{key:"stop",value:function(){this.isActive=!1,r(t).off("mousemove scroll keydown",this._updateActivityHandler),clearInterval(this._intervalId),this.isSpying=!1}},{key:"_activate",value:function(){this.isActive=!0,this.startActivityTime=this._getCurrentTime(),
this.trigger("activity:on")}},{key:"_deactivate",value:function(){this.isActive=!1,this.activeTimeArray.push({start:this.startActivityTime,end:this._getCurrentTime()}),this.trigger("activity:off")}},{key:"_updateActivity",value:function(){this.lastActivityTime=this._getCurrentTime()}},{key:"_onInterval",value:function(){var e=this._getCurrentTime()-this.lastActivityTime;this.isActive&&e>=i&&this._deactivate(),!this.isActive&&e<i&&this._activate(),this.trigger("tick",this.getTotalTime(),this.getActiveTime(),this)}},{key:"getTotalTime",value:function(){return this._getCurrentTime()-this.startTime}},{key:"getActiveTime",value:function(){var e=0;return o(this.activeTimeArray).forEach(function(t){e+=t.end-t.start}),this.isActive&&(e+=this._getCurrentTime()-this.startActivityTime),e}},{key:"getTimeSinceLastActive",value:function(){return this.isActive?0:this._getCurrentTime()-o.last(this.activeTimeArray).end}},{key:"_getCurrentTime",value:function(){return(new Date).getTime()}}]),e}()}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";var r=n.$,o=n._;n.Promise;n.Analytics=n.Analytics||{};var i=100,s=200,a=100;n.Analytics.CursorSpy=function(){function u(e,t,r){_classCallCheck(this,u),o.extend(this,n.Backbone.Events),this.isSpying=!1,this.pageY=0,this.oldPageY=0,this.diffPageY=0,this.scrollTopArea=0,this._intervalId="",this.speed=e||i,this.top=t||s,this.interval=r||a}return _createClass(u,[{key:"start",value:function(){this.isSpying&&this.stop(),this.isSpying=!0,this._mouseMoveHandler=o.bind(this._onMouseSpy,this),r(t).on("mousemove",this._mouseMoveHandler),this._intervalId=setInterval(o.bind(this._onInterval,this),this.interval)}},{key:"stop",value:function(){this._mouseMoveHandler&&(r(t).off("mousemove",this._mouseMoveHandler),this._mouseMoveHandler=null),clearInterval(this._intervalId),this.isSpying=!1}},{key:"_onInterval",value:function(){this.diffPageY=this.oldPageY>this.pageY?this.oldPageY-this.pageY:0,this.scrollTopArea=r(e).scrollTop()+this.top,this.diffPageY>0&&this.diffPageY>this.speed&&this.pageY<this.scrollTopArea&&this.trigger("cursor:up"),this._updateCoords()}},{key:"_onMouseSpy",value:function(e){this.pageY=e.pageY}},{key:"_updateCoords",value:function(){this.oldPageY=this.pageY}}]),u}()}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";var r=n.$,o=n._;n.Promise;n.Analytics=n.Analytics||{};var i=10;n.Analytics.ScrollSpy=function(){function s(){_classCallCheck(this,s),o.extend(this,n.Backbone.Events),this.isSpying=!1}return _createClass(s,[{key:"_initVariables",value:function(){this.scrollTop=0,this.scrollHeight=0,this.clientHeight=0,this.scrollStep=0,this.currentScroll=0,this.scrollPercent=0,this.currentScrollPercent=0,this.scrollTopStep=0,this.currentScrollTopStep=0}},{key:"start",value:function(){this._initVariables(),this.isSpying&&this.stop(),this.isSpying=!0,this._scrollEventHandler()}},{key:"stop",value:function(){this._scrollHandler&&(r(e).off("scroll",this._scrollHandler),this._scrollHandler=null),this.isSpying=!1}},{key:"_scrollEventHandler",value:function(){var n=t.body,s=t.documentElement;this.scrollHeight=Math.max(n.scrollHeight,s.scrollHeight),this.clientHeight=r(e).height(),this.scrollStep=this.scrollHeight*i/100,this._getScrollParams(),0==r(e).scrollTop()&&this._getScrollPercent(),this._scrollHandler=o.bind(this._onScroll,this),r(e).on("scroll",this._scrollHandler)}},{key:"_onScroll",value:function(){this._getScrollParams(),this.scrollTop>this.currentScroll&&this.scrollTopStep>this.currentScrollTopStep&&this._getScrollPercent(!0)}},{key:"_getScrollParams",value:function(){this.scrollTop=r(e).scrollTop()+this.clientHeight,this.scrollTopStep=Math.floor(this.scrollTop/this.scrollStep)}},{key:"_getScrollPercent",value:function(e){e&&(this.currentScroll=this.scrollTop,this.currentScrollTopStep=this.scrollTopStep),this.currentScrollPercent=this.scrollPercent,this.scrollPercent=Math.floor(this.scrollTop/(this.scrollHeight/100)),this.scrollPercent=this.scrollPercent-this.scrollPercent%i,this.currentScrollPercent!=this.scrollPercent&&this.trigger("scroll",this.scrollPercent)}}]),s}()}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";var r=n.$,o=n._;n.Promise;n.Analytics=n.Analytics||{};var i=".mango-call-site > button",s=".mango-call-site > a",a=".mango-callback > button.button-widget-open",u=".mango-callback > a.button-widget-open",l=".mango-callback > .selected-label button.button-widget-open",c=[i,s].join(","),p=[a,u,l].join(",");n.Analytics.WidgetSpy=function(){function e(){_classCallCheck(this,e),o.extend(this,n.Backbone.Events),this.isSpying=!1}return _createClass(e,[{key:"start",value:function(){this.isSpying&&this.stop(),this.isSpying=!0,r(t).on("click",c,o.bind(this._callSiteHandler,this)),r(t).on("click",p,o.bind(this._callBackHandler,this))}},{key:"stop",value:function(){this.isSpying=!1,r(t).off("click",c,this._callSiteHandler),r(t).off("click",p,this._callBackHandler)}},{key:"_callSiteHandler",value:function(){this.trigger("callsite:open")}},{key:"_callBackHandler",value:function(e){setTimeout(o.bind(function(){var t=r(e.target).parent(".selected-label");(1==t.length&&t.hasClass("widget-show")||0==t.length)&&this.trigger("callback:open")},this),10)}}]),e}()}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.Analytics=n.Analytics||{},n.Analytics.Information=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getPageTitle",value:function(){var e=n.$("title");return e?e.text():""}}]),e}()}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";var r=(n.$,n._);n.Promise;n.Analytics=n.Analytics||{},n.Analytics.Tracker=function(){function o(){_classCallCheck(this,o),this.session=n.session,this.http=n.http}return _createClass(o,[{key:"track",value:function(e){var t=r.extend(e,{sid:this.session.getSessionId(),uid:this.session.getUserId(),title:this._getPageTitle(),referrer:this._getReferrerUrl()});this.session.isNewUser&&(t.nu=Number(this.session.isNewUser));var o=this.session.getUserIp();o&&(t.uip=o),r.isEmpty(t.url)&&(t.url=this._getPageUrl()),this.http.get(n.Urls.track(),t)}},{key:"hit",value:function(e){var t=r.extend(e,{type:"hit"});this.track(t)}},{key:"form",value:function(e){var t=r.extend(e,{type:"form"});this.track(t)}},{key:"pageview",value:function(e){var t={type:"pageview"};e&&(t.url=e),this.track(t)}},{key:"event",value:function(e,t,n){var o={type:"event",event:e};r.isNumber(t)&&(o.value=t),n&&r.each(n,function(e,t){o["p_"+t]=e}),this.track(o)}},{key:"_getPageUrl",value:function(){return e.location.href}},{key:"_getPageTitle",value:function(){var e=n.$("head title");return e?e.text():""}},{key:"_getPageDomain",value:function(){return e.location.hostname}},{key:"_getPagePath",value:function(){return e.location.pathname}},{key:"_getReferrerUrl",value:function(){return t.referrer}}]),o}()}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";var r=(n.$,n._);n.Promise;n.Analytics=n.Analytics||{};var o=3e4;n.Analytics.Module=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"start",value:function(){this._initTracker(),this._initActivitySpy(),this._initScrollSpy(),this._initCursorSpy(),this._initWidgetSpy(),this.tracker.pageview()}},{key:"_initTracker",value:function(){this.tracker=new n.Analytics.Tracker}},{key:"_initScrollSpy",value:function(){var e=new n.Analytics.ScrollSpy;e.on("scroll",function(e){100==e&&this.tracker.event("scroll",e)},this),e.start()}},{key:"_initCursorSpy",value:function(){var e=new n.Analytics.CursorSpy;e.on("cursor:up",function(){this.tracker.hit()},this),e.start()}},{key:"_initActivitySpy",value:function(){var e=new n.Analytics.ActivitySpy(n.startTime);e.on("activity:on",function(){this._startLifecycle()},this),e.on("activity:off",function(){this._clearLifecycle()},this),e.start()}},{key:"_initWidgetSpy",value:function(){var e=new n.Analytics.WidgetSpy;e.on("callsite:open",function(){this.tracker.event("callsite")},this),e.on("callback:open",function(){this.tracker.event("callback")},this),e.start()}},{key:"_startLifecycle",value:function(){this.lifecycleId&&this._clearLifecycle(),this.lifecycleId=setInterval(r.bind(this._onLifecycle,this),o)}},{key:"_clearLifecycle",value:function(){clearInterval(this.lifecycleId)}},{key:"_onLifecycle",value:function(){this.tracker.hit()}},{key:"getTracker",value:function(){return this.tracker||this._initTracker(),this.tracker}}]),e}()}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";var r=(n.$,n._,n.Promise);n.CallTracking=n.CallTracking||{};var o=300,i=5e3;n.CallTracking.clientIdsProvider=function(){function e(){_classCallCheck(this,e),this.ga=new n.CallTracking.GAProvider,this.metrika=new n.CallTracking.MetrikaProvider,this.roistat=new n.CallTracking.RoiStatProvider,this.js=new n.CallTracking.JSProvider}return _createClass(e,[{key:"handleErrors",value:function(e){if(e)return r.reject(e)}},{key:"ready",value:function(){return r.all([this.ga.ready(o),this.metrika.ready(o),this.roistat.ready(o),this.js.ready(o)])}},{key:"_waitPromise",value:function(e){return new r(function(t){var n=e();if(n)return void t(n);var r=Date.now(),s=setInterval(function(){var n=e();return n?(clearInterval(s),void t(n)):Date.now()-r>i?(clearInterval(s),void t(null)):void 0},o)})}},{key:"waitIds",value:function(e){var e=e||{},t=[],n=this;return this.isAllIds(e)?r.resolve(null):(e.gaCid?t.push(e.gaCid):t.push(this._waitPromise(this.ga.getClientId.bind(this.ga))),e.yaCid?t.push(e.yaCid):t.push(this._waitPromise(this.metrika.getClientId.bind(this.metrika))),e.rsCid?t.push(e.rsCid):t.push(this._waitPromise(this.roistat.getClientId.bind(this.roistat))),e.jsCid?t.push(e.jsCid):t.push(this._waitPromise(this.js.getClientId.bind(this.js))),e.gaUid?t.push(e.gaUid):t.push(this._waitPromise(this.ga.getGoogleUserId.bind(this.ga))),r.all(t).then(function(t){var r={gaCid:t[0],yaCid:t[1],rsCid:t[2],jsCid:t[3],gaUid:t[4]};return n.isIdsLoaded(e,r)?r:null}))}},{key:"getIds",value:function(){return{gaCid:this.ga.getClientId(),yaCid:this.metrika.getClientId(),rsCid:this.roistat.getClientId(),jsCid:this.js.getClientId(),gaUid:this.ga.getGoogleUserId()}}},{key:"isAllIds",value:function(e){return!!(e.gaCid&&e.yaCid&&e.rsCid&&e.jsCid&&e.gaUid)}},{key:"isIdsLoaded",value:function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t.hasOwnProperty(n)&&!e[n]&&t[n])return!0;return!1}}]),e}()}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";var r=(n.$,n._,n.Promise);n.CallTracking=n.CallTracking||{};var o="_ga",i="__utma",s="__utmb",a="__utmz";n.CallTracking.GAProvider=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ready",value:function(t){return new r(function(n){var r=e.GoogleAnalyticsObject,o=e[r];if(o){var i=setTimeout(n,t);return void o(function(){clearTimeout(i),n()})}var s=e._gaq;if(s){var a=setTimeout(n,t);return void s.push(function(){clearTimeout(a),n()})}n()})}},{key:"getTracker",value:function(){var t=e.GoogleAnalyticsObject,n=e[t];return n}},{key:"getTrackers",value:function(){var e=this.getTracker();return e&&e.getAll?e.getAll():[]}},{key:"getClientId",value:function(){var e=n.Cookies.get(o);if(e){var t=e.split(".");if(t.length>3)return t[2]+"."+t[3]}var r=n.Cookies.get(i);if(r){var s=r.split(".");if(s.length>2)return s[1]+"."+s[2]}return null}},{key:"getGoogleUserId",value:function(){var e=this.getTrackers()[0];return e&&e.get?e.get("userId"):null}},{key:"getUtma",value:function(){return n.Cookies.get(i)}},{key:"getUtmb",value:function(){return n.Cookies.get(s)}},{key:"getUtmz",value:function(){return n.Cookies.get(a)}}]),t}()}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";var r=(n.$,n._,n.Promise);n.CallTracking=n.CallTracking||{},n.CallTracking.JSProvider=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ready",value:function(t){return new r(function(n){var r=e.jivo_api;r?n():setTimeout(n,t)})}},{key:"getClientId",value:function(){var t=e.jivo_api;if(t){var n=new r(function(e,n){t.getVisitorNumber(function(t,n){e(n)})});return n}return null}}]),t}()}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";var r=(n.$,n._,n.Promise);n.CallTracking=n.CallTracking||{};var o="_ym_uid";n.CallTracking.MetrikaProvider=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ready",value:function(t){return new r(function(n){var r=e.Ya;r?n():setTimeout(n,t)})}},{key:"getClientId",value:function(){var t=n.Cookies.get(o);if(t)return t;var r={};e.Ya&&e.Ya._metrika&&e.Ya._metrika.counters&&(r=e.Ya._metrika.counters);var i=Object.keys(r);if(i.length)for(var s in i)if(r[i[s]].getClientID())return r[i[s]].getClientID();return null}}]),t}()}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.CallTracking=n.CallTracking||{};var r=["8 (xxx) xxx-xxxx","8 (xxx) xxx-xx-xx","8 (xxx) xxx xxxx","8 (xxx) xxx xx xx","8 (xxxx) xx-xx-xx","8 (xxxx) xx xx xx","8 xxx xxx xxxx","8 xxx xxx xx xx","+7 (xxx) xxx-xxxx","+7 (xxx) xxx-xx-xx","+7 (xxx) xxx xxxx","+7 (xxx) xxx xx xx","+7 (xxxx) xx-xx-xx","+7 (xxxx) xx xx xx","+7 xxx xxx xxxx","+7 xxx xxx xx xx","7 (xxx) xxx-xxxx","7 (xxx) xxx-xx-xx","7 (xxx) xxx xxxx","7 (xxx) xxx xx xx","7 (xxxx) xx-xx-xx","7 (xxxx) xx xx xx","7 xxx xxx xxxx","7 xxx xxx xx xx"];n.CallTracking.NumberFormatter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"format",value:function(e,t){if(!e)return"";r.indexOf(t)<0&&(t=r[0]);var n=e.replace(/[^0-9]/g,"");if(n.length<10)return e;var o=n.substr(0,n.length-10);n=n.substr(n.length-10,10);var i=n.substr(0,3),s=n.substr(3,3),a=n.substr(6,2),u=n.substr(8,2),l=n.substr(0,4),c=n.substr(4,2),p=n.substr(6,2),h=n.substr(8,2);switch(t){case"8 (xxx) xxx-xxxx":return"8 ("+i+") "+s+"-"+a+u;case"8 (xxx) xxx-xx-xx":return"8 ("+i+") "+s+"-"+a+"-"+u;case"8 (xxx) xxx xxxx":return"8 ("+i+") "+s+" "+a+u;case"8 (xxx) xxx xx xx":return"8 ("+i+") "+s+" "+a+" "+u;case"8 (xxxx) xx-xx-xx":return"8 ("+l+") "+c+"-"+p+"-"+h;case"8 (xxxx) xx xx xx":return"8 ("+l+") "+c+" "+p+" "+h;case"8 xxx xxx xxxx":return"8 "+i+" "+s+" "+a+u;case"8 xxx xxx xx xx":return"8 "+i+" "+s+" "+a+" "+u;case"+7 (xxx) xxx-xxxx":return"+"+o+" ("+i+") "+s+"-"+a+u;case"+7 (xxx) xxx-xx-xx":return"+"+o+" ("+i+") "+s+"-"+a+"-"+u;case"+7 (xxx) xxx xxxx":return"+"+o+" ("+i+") "+s+" "+a+u;case"+7 (xxx) xxx xx xx":return"+"+o+" ("+i+") "+s+" "+a+" "+u;case"+7 (xxxx) xx-xx-xx":return"+"+o+" ("+l+") "+c+"-"+p+"-"+h;case"+7 (xxxx) xx xx xx":return"+"+o+" ("+l+") "+c+" "+p+" "+h;case"+7 xxx xxx xxxx":return"+"+o+" "+i+" "+s+" "+a+u;case"+7 xxx xxx xx xx":return"+"+o+" "+i+" "+s+" "+a+" "+u;case"7 (xxx) xxx-xxxx":return o+" ("+i+") "+s+"-"+a+u;case"7 (xxx) xxx-xx-xx":return o+" ("+i+") "+s+"-"+a+"-"+u;case"7 (xxx) xxx xxxx":return o+" ("+i+") "+s+" "+a+u;case"7 (xxx) xxx xx xx":return o+" ("+i+") "+s+" "+a+" "+u;case"7 (xxxx) xx-xx-xx":return o+" ("+l+") "+c+"-"+p+"-"+h;case"7 (xxxx) xx xx xx":return o+" ("+l+") "+c+" "+p+" "+h;case"7 xxx xxx xxxx":return o+" "+i+" "+s+" "+a+u;case"7 xxx xxx xx xx":return o+" "+i+" "+s+" "+a+" "+u;default:return e}}}]),e}()}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";var r=(n.$,n._,n.Promise);n.CallTracking=n.CallTracking||{};var o="roistat_visit";n.CallTracking.RoiStatProvider=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ready",value:function(t){return new r(function(n){var r=e.roistat;r?n():setTimeout(n,t)})}},{key:"getClientId",value:function(){var e=n.Cookies.get(o);return e?e:null}}]),t}()}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";var r=(n.$,n._);n.Promise;n.CallTracking=n.CallTracking||{},n.CallTracking.UtmProvider=function(){function e(){_classCallCheck(this,e),this.sb=n.sbjs,this.sb.init(this._getSourceBusterConfig())}return _createClass(e,[{key:"getCurrent",value:function(){var e=r.pick(this.sb.get.current,["src","mdm","cmp","cnt","trm","mango"]);try{e.trm="undefined"!==decodeURIComponent(e.trm)?decodeURIComponent(e.trm):"(none)"}catch(t){}return e}},{key:"_getSourceBusterConfig",value:function(){return{lifetime:6,session_length:30,timezone_offset:3}}}]),e}()}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";var r=n.$,o=n._,i=n.Promise;n.CallTracking=n.CallTracking||{},n.CallTracking.Widget=function(){function e(t){var r=this;_classCallCheck(this,e),this.params=t=t||{},this.id=t.id,this.cookies=n.Cookies,this.ids=new n.CallTracking.clientIdsProvider,this.utm=new n.CallTracking.UtmProvider,this.activitySpy=new n.Analytics.ActivitySpy,this.intervalId=null,this.tracking=n.Analytics.Module.prototype.getTracker(),this.numbers=[],this._isAutoLoad()&&this.activitySpy.on("activity:on",function(){return r._loadSettings()}),this.previousPhoneTextReplace={}}return _createClass(e,[{key:"start",value:function(){this.activitySpy.start()}},{key:"_isAutoLoad",value:function(){return!(!this.params.elements&&!this.params.onReady)}},{key:"_loadSettings",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.ids.ready().then(function(){var t=e.ids.getIds().jsCid;return null===t?new i(function(e){return e(null)}):t}).then(function(r){var o=e.ids.getIds();return o.jsCid=r,e._requestSettings(o,t,n),e.ids.waitIds(o)}).then(function(r){r&&e._requestSettings(r,t,n)})["catch"](this.ids.handleErrors.bind(this.ids))}},{key:"postForm",value:function(e){var n=["name","number","email","subject","comment"],r={};n.forEach(function(t){if(e.hasOwnProperty(t)){var n="form"+t.substring(0,1).toUpperCase()+t.substring(1);r[n]=e[t]}}),e.customParam&&(r.customParam=e.customParam),r=o.extend(r,{wid:this.id,url:t.location.href},this.utm.getCurrent()),this.tracking.form(r)}},{key:"getNumber",value:function(e,t){return"function"==typeof e&&(t=e,e=""),this._loadSettings({hash:e},t)}},{key:"getNumberByRegion",value:function(e,t,n){return"function"==typeof t&&(n=t,t=""),this._loadSettings({hash:t,region:e},n)}},{key:"getExistsNumbers",value:function(e){this._executeCallback(this.numbers,e)}},{key:"_requestSettings",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=this._ensureOptions(i),u=n.Urls.calltracking(this.id),l=o.extend({uid:n.session.getUserId(),sid:n.session.getSessionId(),url:t.location.href,title:n.$("head title").text()||""},a);n.session.isNewUser&&(l.nu=Number(n.session.isNewUser));var c=n.session.getUserIp();c&&(l.uip=c),l.is_cookies=this.cookies.enabled,this.params.customParam&&(l.custom=this.params.customParam),o.extend(l,this.utm.getCurrent(),e),n.http.get(u,l).then(function(t){return r._onSettingsLoad(t,e,a.hash,s)})}},{key:"_ensureOptions",value:function(e){e=e||{};var t={};return e.hash&&(t.hash=e.hash),(e.region||this.params.region)&&(t.region=e.region||this.params.region,t.country="RU"),t}},{key:"_onSettingsLoad",value:function(e,t,r,i){if(!o.isEmpty(e)){this.settings=e.widget;var s=e.number,a=e.type;this._saveNumber(s,a,r),n.session.refreshSession(60*this.settings.expire),!r&&this._isAutoLoad()&&(this._populateElementsByNumber(s),this._executeCallback({number:s},this.params.onReady));var u=o.extend({wid:this.id,hash:r},this.utm.getCurrent(),t);this.tracking.hit(u),this.params.visitEvents===!0&&this._notifyGA(s,e.type),this._executeCallback({number:s},i)}}},{key:"_populateElementsByNumber",value:function(e){var i=new n.CallTracking.NumberFormatter,s=o.isFunction(this.params.formatNumber)?this.params.formatNumber:i.format;o.each(this.params.elements,o.bind(function(n){var o=s(e,this.settings.number_template);if(n.selector){var i=r(n.selector);this._tagType(i,e),i.html(o)}else if(n.numberText){var a=this.previousPhoneTextReplace[n.numberText]||n.numberText;this._replacePhoneText(t.body.firstChild,a,o),this.previousPhoneTextReplace[n.numberText]=o&&o.replace(/[ \(\)-]/g,"")}},this))}},{key:"_saveNumber",value:function(e,t,n){n=n||"";var r=o.find(this.numbers,{hash:n});r?(r.number=e,r.type=t):this.numbers.push({hash:n,number:e,type:t})}},{key:"_executeCallback",value:function(e,t){if(o.isFunction(t))try{t(e)}catch(r){n.Log.error("[mango.js] Failed to execute callback.",r)}}},{key:"_getPhoneInfo",value:function(e){if(!e||!e.length)return[];for(var t,n=[],r=/(\([+0-9][\) 0-9\-]{3,19}[0-9])|([+0-9][\(\) 0-9\-]{3,19}[0-9])/g;t=r.exec(e);){var o=t[0].replace(/[ \(\)-]/g,""),i=void 0;i="8"===o[0]?"7"+o.slice(1):"+"===o[0]?o.slice(1):o,n.push({phone:i,startPosition:t.index,endPosition:t[0].length+t.index})}return n}},{key:"_getNext",value:function(e){if(e.firstChild)return e.firstChild;if(e.nextSibling)return e.nextSibling;for(var n=e;n.parentNode&&n.parentNode!==t.body&&!n.parentNode.nextSibling;)n=n.parentNode;return n.parentNode===t.body?null:n.parentNode&&n.parentNode.nextSibling}},{key:"_replacePhoneText",value:function(e,n,r){for(var o=e;o;){var i=this._getNext(o);if(3===o.nodeType&&o.data&&o.data.trim){var s=o.data,a=this._getPhoneInfo(s).filter(function(e){return e.phone===n});if(a.length){for(var u=s.substring(0,a[0].startPosition),l=0;l<a.length-1;l++)u+=r+s.substring(a[l].endPosition,a[l+1].startPosition);u+=r+s.substring(a[a.length-1].endPosition);for(var c=o.parentNode;c&&c!==t.body;){if("A"===c.tagName){c.href&&0===c.href.indexOf("tel:")&&(c.href="tel:"+r);break}c=c.parentNode}var p=["parentElement","parentNode"];p.forEach(function(e){o[e]&&(o[e].insertBefore(t.createTextNode(u),o),o[e].removeChild(o))})}}o=i}}},{key:"_tagType",value:function(e,t){if(t="+7"+t.toString().substr(1,11),e.length)for(var n=0;n<e.length;n++)if(r(e[n]).is("a"))this._telMatch(r(e[n]),t);else for(var o=r(e[n]).parent(),i=0;i<3;i++)if(o.is("a")){if(this._telMatch(o,t))break}else o=o.parent()}},{key:"_telMatch",value:function(e,t){var n=e.attr("href");return!(!n||!n.match(/^tel:/))&&(e.attr("href","tel:"+t),!0)}},{key:"_notifyGA",value:function(e,t){var n=void 0;switch(t){case 1:n="dynamic visit";break;case 2:n="static visit";break;case 3:n="default visit"}n&&e&&this.ids.ga.getTrackers().forEach(function(t){t.send("event",n,"visit",e)})}}]),e}()}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";var r=(n.$,n._);n.Promise;n.CallTracking=n.CallTracking||{},n.CallTracking.Module=function(){function e(t){_classCallCheck(this,e);var o=this.widgets={};r.each(t,function(e){o[e.id]=new n.CallTracking.Widget(e)})}return _createClass(e,[{key:"start",value:function(){r.each(this.widgets,function(e){e.start()})}}]),e}()}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;n.SEO=n.SEO||{},n.SEO.events={mch_chat_established:"mch_chat_established",mch_chat_created:"mch_chat_created",mch_chat_propose:"mch_chat_propose",mch_callback_created:"mch_callback_created",mch_callback_established:"mch_callback_established",mch_callback_lead:"mch_callback_lead",mch_leadgen_shown:"mch_leadgen_shown",mch_leadgen_created:"mch_leadgen_created",mch_leadgen_established:"mch_leadgen_established",widget_callback_created:"widget_callback_created",widget_callback_established:"widget_callback_established",widget_leadgen_shown:"widget_leadgen_shown",widget_leadgen_created:"widget_leadgen_created"},n.SEO.Yandex=function(){function t(t){var n=e.ym;if(n){var r=n.a.map(function(e){return e[0]}),o=[].concat(_toConsumableArray(new Set(r)));o.forEach(function(e){return n(e,"reachGoal",t)})}}return{reachGoal:t}}(),n.SEO.Google=function(){function t(){o&&o("event","page_view",{event_callback:function(){i=!0,s.forEach(n),s=[]}})}function n(e){var t=r[e];if(t){var n=t.action,a=t.category;return o&&i?void o("event",n,{event_category:a}):void(o&&s.push(e))}}var r={mch_chat_established:{category:"mch_chat",action:"established"},mch_chat_created:{category:"mch_chat",action:"created"},mch_chat_propose:{category:"mch_chat",action:"propose"},mch_callback_created:{category:"mch_callback",action:"created"},mch_callback_established:{category:"mch_callback",action:"established"},mch_callback_lead:{category:"mch_callback",action:"lead"},mch_leadgen_shown:{category:"mch_leadgen",action:"shown"},mch_leadgen_created:{category:"mch_leadgen",action:"created"},mch_leadgen_established:{category:"mch_leadgen",action:"established"},widget_callback_created:{category:"widget_callback",action:"created"},widget_callback_established:{category:"widget_callback",action:"established"},widget_leadgen_shown:{category:"widget_leadgen",action:"shown"},widget_leadgen_created:{category:"widget_leadgen",action:"created"}},o=e.gtag,i=!1,s=[];return t(),{sendEvent:n}}(),n.SEO.sendEvent=function(e){n.SEO.Yandex&&n.SEO.Yandex.reachGoal(e),n.SEO.Google&&n.SEO.Google.sendEvent(e)}}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{},n.MultiChannel.WidgetStates={DEFAULT:"default",CALLBACK_MINIMIZED:"callback-minimized",LEADGENERATION:"leadgeneration",MOBILE_MENU:"mobile-menu",CHAT_OPEN:"chat"}}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r={messages:[],autoresponderWasInited:!1,isAutoresponseNeeded:!0,manager:null,scrollToBottom:!1,isTyping:!1,isHistoryLoaded:!0,session:null,isLiveSession:!1,activeWidget:n.MultiChannel.WidgetStates.DEFAULT,unreadMessages:0,discardedMessages:[]};n.MultiChannel.ChatReducer=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"reducerFn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1],o=function(e,t,n){for(var r=0;r<e.length;r++)if(e[r].localId===t){e[r]=Object.assign(e[r],n);break}return e},i=void 0;switch(t.type){case"AUTORESPONDER_WAS_INITED":return Object.assign({},e,{autoresponderWasInited:t.autoresponderWasInited});case"AUTORESPONDER_ADD_MESSAGE":return Object.assign({},e,{messages:e.messages.concat([t.message])});case"USER_ADD_MESSAGE":return Object.assign({},e,{messages:e.messages.concat([t.message]),isAutoresponseNeeded:!1,scrollToBottom:!0});case"CHAT_TAKEN_BY_MANAGER":return Object.assign({},e,{manager:t.data});case"RECEIVE_NEW_MESSAGE":return Object.assign({},e,t.newState);case"RECEIVE_HISTORY":return Object.assign({},e,{messages:e.messages.concat([].concat(_toConsumableArray(t.messages))),isAutoresponseNeeded:!1,scrollToBottom:!1,isHistoryLoaded:t.messages.length<10});case"UPDATE_UNREAD":return Object.assign({},e,{unreadMessages:t.messages});case"UPDATE_INITIAL":return Object.assign({},e,{messages:e.messages.concat([].concat(_toConsumableArray(t.messages))),isAutoresponseNeeded:!1});case"CONNECTION_ESTABLISHED":return Object.assign({},e,{discardedMessages:t.discardedMessages});case"ON_TYPING_RECEIVED":return Object.assign({},e,{isTyping:t.typing});case"END_TYPING":return Object.assign({},e,{isTyping:!1});case"DISCARD_MESSAGE":var s=e.discardedMessages;return e.messages.forEach(function(e){if(e.localId===t.message.localId)return e.discarded=!0,s.push(e),!1}),Object.assign({},e,{messages:e.messages.concat([]),discardedMessages:s});case"CONFIRM_MESSAGE":return e.messages.forEach(function(e,n,r){if(e.localId===t.message.localId)return r[n]=t.message,!1}),Object.assign({},e,{messages:e.messages.concat([])});case"SESSION_UPDATE":return Object.assign({},e,{session:t.session,isLiveSession:!!t.session});case"SESSION_END":return Object.assign({},e,{});case"SESSION_REMOVED":return Object.assign({},e,{isLiveSession:!1});case"SYSTEM_MESSAGE":return Object.assign({},e,{messages:e.messages.concat([t.message]),scrollToBottom:!0});case"UPLOAD_FILE":return Object.assign({},e,{messages:e.messages.concat([t.message]),
scrollToBottom:!1});case"PROGRESS_FILE":return Object.assign({},e,{messages:o(e.messages.concat([]),t.localId,{progress:t.pcntProgress,status:"uploading"})});case"CANCEL_FILE":for(var a=0;a<e.messages.length;a++)if(e.messages[a].localId===t.localId)return e.messages.splice(a,1),Object.assign({},e,{messages:e.messages.concat([])});break;case"UPLOADED_FILE":return Object.assign({},e,{messages:o(e.messages.concat([]),t.localId,{status:"uploaded"})});case"ERROR_FILE":return Object.assign({},e,{messages:o(e.messages.concat([]),t.localId,{status:"error"})});case"WIDGET_NEW_STATE":return i={activeWidget:t.activeWidget},t.activeWidget===n.MultiChannel.WidgetStates.CHAT_OPEN&&(i.unreadMessages=0),Object.assign({},e,i);case"GET_SESSION":return Object.assign({},e,{session:t.session,isLiveSession:!!t.session,isHistoryLoaded:t.isHistoryLoaded});default:return e}}}]),e}()}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r={settings:null,params:null};n.MultiChannel.SettingsReducer=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"reducerFn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1];switch(t.type){case"GET_SETTINGS":return Object.assign({},e,{settings:t.settings});case"RECEIVE_PARAMS":return Object.assign({},e,{params:t.params});default:return e}}},{key:"getSettings",value:function(e){return e.SettingsReducer.settings}}]),e}()}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r=n.Redux,o=r.createStore,i=r.applyMiddleware,s=r.combineReducers,a=[n.ReduxThunk["default"]];n.MultiChannel.Store=o(s({ChatReducer:n.MultiChannel.ChatReducer.reducerFn,SettingsReducer:n.MultiChannel.SettingsReducer.reducerFn}),i.apply(void 0,a))}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{},n.MultiChannel.StorageService=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"getData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.session.getUserId(),r=void 0,o=e.getItem(t);try{r=JSON.parse(o)}catch(i){}return r||{}}},{key:"saveData",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.session.getUserId();e.setItem(r,JSON.stringify(t))}}]),e}()}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r=n.MultiChannel.Store,o=n.MultiChannel.StorageService;n.MultiChannel.Actions=function(){function e(e){return function(t){n.MultiChannel.WidgetService.getWidget(e).then(function(e){t({type:n.MultiChannel.ActionTypes.GET_SETTINGS,settings:e.widget}),e.session&&n.MultiChannel.ChatService.openSocket().then(function(){if(t({type:n.MultiChannel.ActionTypes.GET_SESSION,session:e.session,isHistoryLoaded:!1}),e.session&&e.session.operator){var r=o.getData(localStorage);r.initialMessages&&(r.initialMessages=[]),o.saveData(localStorage,r)}})})}}function t(e){return{type:n.MultiChannel.ActionTypes.RECEIVE_PARAMS,params:e}}function i(){var e=r.getState().ChatReducer.discardedMessages;return e.length&&e.forEach(function(e){e.discarded=!1,setTimeout(function(){n.MultiChannel.Actions.resendDiscardedMessage(e)},200)}),{type:n.MultiChannel.ActionTypes.CONNECTION_ESTABLISHED,discardedMessages:[]}}function s(e){return function(e){}}function a(e){return function(t){return r.dispatch(m({localId:n.Helpers.makeId(),payload:{body:n.MultiChannel.locale.getMessage("THANKS_FOR_RATE")},time:Date.now(),type:n.MultiChannel.MessageTypes.SYSTEM})),n.MultiChannel.ChatService.sendRate(e)}}function u(e){return function(t){n.MultiChannel.ChatService.addUserMessage(e).then(function(e){t({type:n.MultiChannel.ActionTypes.USER_ADD_MESSAGE,message:e}),t({type:n.MultiChannel.ActionTypes.CONFIRM_MESSAGE,message:e})},function(){t({type:n.MultiChannel.ActionTypes.USER_ADD_MESSAGE,message:e}),t({type:n.MultiChannel.ActionTypes.DISCARD_MESSAGE,message:e})})}}function l(e){return function(t){var r=o.getData(localStorage);r.initialMessages?r.initialMessages=r.initialMessages.concat([e]):r.initialMessages=[e],o.saveData(localStorage,r),n.MultiChannel.ChatService.startChat(e).then(function(r){e.time=r.time,t({type:n.MultiChannel.ActionTypes.USER_ADD_MESSAGE,message:e}),t({type:n.MultiChannel.ActionTypes.GET_SESSION,session:r.session,isHistoryLoaded:!0})},function(){t({type:n.MultiChannel.ActionTypes.USER_ADD_MESSAGE,message:e}),t({type:n.MultiChannel.ActionTypes.DISCARD_MESSAGE,message:e})}),n.SEO&&n.SEO.sendEvent&&n.SEO.events&&n.SEO.sendEvent(n.SEO.events.mch_chat_created)}}function c(e){return function(t){return n.SEO&&n.SEO.sendEvent&&n.SEO.events&&n.SEO.sendEvent(n.SEO.events.mch_chat_propose),n.MultiChannel.ChatService.sendOfflineRequest(e)}}function p(e){return function(t){t({type:n.MultiChannel.ActionTypes.AUTORESPONDER_WAS_INITED,autoresponderWasInited:e})}}function h(e){return function(t){t({type:n.MultiChannel.ActionTypes.AUTORESPONDER_ADD_MESSAGE,message:e})}}function d(e){if(!e.isClientMessage){e.localId=n.Helpers.makeId(),n.MultiChannel.ChatService.messageReceived(e);var t=o.getData(localStorage);t&&(t.lastRecievedMessage=e.messageId),r.getState().ChatReducer.activeWidget===n.MultiChannel.Channels.CHAT&&(n.MultiChannel.ChatService.messageRead(e),t&&(t.lastReadMessage=e.messageId)),o.saveData(localStorage,t)}var i={messages:r.getState().ChatReducer.messages.concat([e]),isAutoresponseNeeded:!1,isTyping:!!e.isClientMessage&&r.getState().ChatReducer.isTyping,scrollToBottom:!0};if(r.getState().ChatReducer.activeWidget!==n.MultiChannel.Channels.CHAT){var s=o.getData(sessionStorage);s.unreadMessages?s.unreadMessages=s.unreadMessages.concat([e]):s.unreadMessages=[e],i.unreadMessages=s.unreadMessages.length,o.saveData(sessionStorage,s)}return{type:n.MultiChannel.ActionTypes.RECEIVE_NEW_MESSAGE,newState:i}}function f(e){return{type:n.MultiChannel.ActionTypes.ON_TYPING_RECEIVED,typing:e}}function _(e){n.MultiChannel.ChatService.addUserMessage(e).then(function(e){r.dispatch({type:n.MultiChannel.ActionTypes.CONFIRM_MESSAGE,message:e})},function(){r.dispatch({type:n.MultiChannel.ActionTypes.DISCARD_MESSAGE,message:e})})}function m(e){return{type:n.MultiChannel.ActionTypes.SYSTEM_MESSAGE,message:e}}function g(e){return function(t){t({type:n.MultiChannel.ActionTypes.UPLOAD_FILE,message:e})}}function y(e){return function(t){t({type:n.MultiChannel.ActionTypes.UPLOADED_FILE,localId:e})}}function v(e,t){return function(r){r({type:n.MultiChannel.ActionTypes.PROGRESS_FILE,localId:e,pcntProgress:t})}}function b(e){return function(t){t({type:n.MultiChannel.ActionTypes.CANCEL_FILE,localId:e})}}function w(e){return function(t){t({type:n.MultiChannel.ActionTypes.ERROR_FILE,localId:e})}}function C(e){var t=void 0;r.getState().ChatReducer.session.operator?(e.rate=null,t=n.MultiChannel.locale.getMessage("MANAGER_CHANGED")):t=n.MultiChannel.locale.getMessage("CHAT_TAKEN_BY_MANAGER");var i=o.getData(localStorage);return i.initialMessages&&(i.initialMessages=[]),o.saveData(localStorage,i),r.dispatch(m({localId:n.Helpers.makeId(),payload:{body:t},time:e.time,type:n.MultiChannel.MessageTypes.SYSTEM})),n.MultiChannel.WidgetService&&n.MultiChannel.WidgetService.hit&&n.MultiChannel.WidgetService.hit(),{type:n.MultiChannel.ActionTypes.SESSION_UPDATE,session:e}}function S(e){return r.dispatch(m({localId:n.Helpers.makeId(),payload:{body:n.MultiChannel.locale.getMessage("CHAT_CLOSED")},time:e.time,type:n.MultiChannel.MessageTypes.SYSTEM})),{type:n.MultiChannel.ActionTypes.SESSION_END}}function A(e){return{type:n.MultiChannel.ActionTypes.SESSION_REMOVED}}function E(e){return{type:n.MultiChannel.ActionTypes.END_TYPING,message:e}}function k(e){return{type:n.MultiChannel.ActionTypes.UPDATE_UNREAD,messages:e}}function M(e){return{type:n.MultiChannel.ActionTypes.UPDATE_INITIAL,messages:e}}function T(e){if(e===n.MultiChannel.WidgetStates.CHAT_OPEN){var t=o.getData(localStorage),i=o.getData(sessionStorage);r.getState().ChatReducer.messages.forEach(function(e){t.lastReadMessage<e.messageId&&(n.MultiChannel.ChatService.messageRead(e),t.lastReadMessage=e.messageId)}),i.unreadMessages=[],o.saveData(localStorage,t),o.saveData(sessionStorage,i)}return{type:n.MultiChannel.ActionTypes.WIDGET_NEW_STATE,activeWidget:e}}function P(){return function(){n.MultiChannel.ChatService.userStartTyping()}}function O(){return function(){n.MultiChannel.ChatService.userEndTyping()}}function x(e){return n.SEO&&n.SEO.sendEvent&&n.SEO.events&&n.SEO.sendEvent(n.SEO.events.mch_callback_created),function(){return n.MultiChannel.CallbackService.orderCallback(e)}}function I(e){return function(){return n.MultiChannel.CallbackService.orderLeadgen(e)}}return{getWidget:e,autoresponderInit:p,autoresponderAddMessage:h,onNewMessageReceived:d,loadHistory:s,onTypingReceived:f,receiveParams:t,sendOfflineRequest:c,onConnectionEstablished:i,updateWidgetUIState:T,endTyping:E,startChat:l,onSessionUpdate:C,onSessionEnd:S,onSessionRemoved:A,resendDiscardedMessage:_,updateUnread:k,updateInitial:M,userEndTyping:O,userStartTyping:P,orderCallback:x,orderLeadgen:I,addMessage:u,sendRate:a,onUploadFile:g,onUploadedFile:y,onProgressFile:v,onCancelFile:b,onErrorFile:w}}()}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r=n.MultiChannel.Store;n.MultiChannel.CallbackService=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"orderCallback",value:function(e){var t=r.getState().SettingsReducer;return e.mgoSid=n.session.getSessionId(),n.http.postJson(n.Urls.multichannel(t.params.id)+"/orderCallback",e).then(function(e){return e},function(e){var t=JSON.parse(e.responseText);return t.data})}},{key:"orderLeadgen",value:function(e){var t=r.getState().SettingsReducer;return e.mgoSid=n.session.getSessionId(),n.http.postJson(n.Urls.multichannel(t.params.id)+"/orderLeadgen",e).then(function(e){return e},function(e){var t=JSON.parse(e.responseText);return t.data})}}]),e}()}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";var r=(n.$,n._,n.Promise);n.MultiChannel=n.MultiChannel||{};var o=n.MultiChannel.Store,i=n.Uppy,s=n.MultiChannel.Actions,a=s.onNewMessageReceived,u=s.onTypingReceived,l=s.onSessionUpdate,c=s.onConnectionEstablished,p=s.onSessionEnd,h=s.onSessionRemoved,d=s.onUploadFile,f=s.onUploadedFile,_=s.onProgressFile,m=s.onCancelFile,g=s.onErrorFile,y=n.moment;n.MultiChannel.ChatService=function(){function t(e,t,r){var s=n.Helpers.makeId(32),a=i.Core({debug:!0,restrictions:{maxFileSize:1073741824}});I.hasOwnProperty(s)||(a.addFile(r),a.use(i.XHRUpload,{endpoint:n.Urls.fs4talkUrl(e,s),formData:!1,timeout:0,headers:{Authorization:"Basic "+t,Accept:"application/json","Content-Type":"application/octet-stream","Content-Disposition":'attachment; filename="'+encodeURIComponent(r.name)+'"'}}).on("upload",function(e){e.fileIDs&&e.fileIDs.length&&e.fileIDs.forEach(function(e){var t=a.getFile(e);!t||t.meta&&t.meta.localId||(a.setFileMeta(e,{localId:s}),o.dispatch(d({type:n.MultiChannel.MessageTypes.FILE,isClientMessage:!0,progress:0,status:"uploading",time:y().valueOf(),localId:s,payload:{name:t.name,size:t.size}})))})}).on("upload-progress",function(e,t){var n=Math.round(100/t.bytesTotal*t.bytesUploaded);o.dispatch(_(e.meta.localId,n))}).on("upload-success",function(e,t){o.dispatch(f(e.meta.localId))}).on("upload-error",function(e,t,n){o.dispatch(g(e.meta.localId))}),I[s]=a,I[s].upload())}function s(e){I.hasOwnProperty(e)&&(I[e].cancelAll(),o.dispatch(m(e)))}function v(e){I.hasOwnProperty(e)&&I[e].retryAll()}function b(e){R=e,x&&(x.disconnect(),x=null,w())}function w(){function t(e){e.isClientMessage||o.dispatch(a(e))}function i(e){o.dispatch(u(e.typing))}function s(e){o.dispatch(l(e))}function d(e){o.dispatch(p(e))}function f(e){o.dispatch(h(e))}if(x)return x;x=new n.PushStream({modes:R,host:n.Urls.pushstream(),jsonTextKey:"message",extraParams:function(){return{qs:"on"}},useSSL:"https:"===e.location.protocol}),x.onmessage=function(e){switch(e.eventType){case"onMessage":t(e.data);break;case"onUserType":i(e.data);break;case"onSessionRoute":s(e.data);break;case"onSessionEnd":d(e.data);break;case"onSessionRemoved":f(e.data),x.disconnect(),x=null}};var _=new r(function(e){x.onstatuschange=function(t){t===n.PushStream.OPEN&&(e(),o.dispatch(c()))}});return x.addChannel(n.session.getUserId()),x.connect(),_}function C(e){var t=o.getState().SettingsReducer,r={message:e,mgoSid:n.session.getSessionId(),uid:n.session.getUserId(),channelId:t.settings.channels.chat.channelId};return n.http.postJson(n.Urls.multichannel(t.params.id)+"/startChat",r).then(function(e){return w(),e},function(){})}function S(e){var t=o.getState().SettingsReducer,r={message:e,uid:n.session.getUserId(),channelId:t.settings.channels.chat.channelId};return n.http.postJson(n.Urls.multichannel(t.params.id)+"/sendMessage",r).then(function(t){return e.time=t.time,e},function(){})}function A(e){var t=o.getState().SettingsReducer;return n.http.postJson(n.Urls.multichannel(t.params.id)+"/sendRate",{uid:n.session.getUserId(),channelId:t.settings.channels.chat.channelId,rate:e}).then(function(){},function(){})}function E(e){var t=o.getState().SettingsReducer,r=Object.assign(e,{uid:n.session.getUserId(),channelId:t.settings.channels.chat.channelId,mgoSid:n.session.getSessionId()});return n.http.postJson(n.Urls.multichannel(t.params.id)+"/submitApplication",r).then(function(){},function(){})}function k(e){var t=o.getState().SettingsReducer,r={uid:n.session.getUserId(),channelId:t.settings.channels.chat.channelId};return e?r=Object.assign(r,{toId:e,limit:N}):r.latest=N,n.http.sendGet(n.Urls.multichannel(t.params.id)+"/history",r).then(function(e){return e},function(){})}function M(){var e=o.getState().SettingsReducer,t={uid:n.session.getUserId(),channelId:e.settings.channels.chat.channelId};return n.http.postJson(n.Urls.multichannel(e.params.id)+"/type",t).then(function(e){},function(){})}function T(){var e=o.getState().SettingsReducer,t={uid:n.session.getUserId(),channelId:e.settings.channels.chat.channelId};return n.http.postJson(n.Urls.multichannel(e.params.id)+"/typeFinished",t).then(function(e){},function(){})}function P(e){var t=o.getState().SettingsReducer,r={uid:n.session.getUserId(),channelId:t.settings.channels.chat.channelId,messageId:e.messageId};return n.http.postJson(n.Urls.multichannel(t.params.id)+"/notifyReceived",r).then(function(e){},function(){})}function O(e){var t=o.getState().SettingsReducer,r={uid:n.session.getUserId(),channelId:t.settings.channels.chat.channelId,messageId:e.messageId};return n.http.postJson(n.Urls.multichannel(t.params.id)+"/notifyRead",r).then(function(e){},function(){})}var x=void 0,I={},R="longpolling",N=10;return{addUserMessage:S,sendRate:A,loadHistory:k,openSocket:w,messageRead:O,sendOfflineRequest:E,messageReceived:P,userEndTyping:T,userStartTyping:M,startChat:C,connectVia:b,uploadFile:t,cancelUpload:s,retryUpload:v}}()}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r=n.MultiChannel.Store;n.MultiChannel.WidgetService=function(){function o(){_classCallCheck(this,o)}return _createClass(o,null,[{key:"initActivitySpy",value:function(){var e=new n.Analytics.ActivitySpy;e.on("activity:on",n.MultiChannel.WidgetService.hit),e.on("activity:i_am_online",n.MultiChannel.WidgetService.hit),e.start()}},{key:"getWidget",value:function(o){var i={uid:n.session.getUserId(),url:e.location.href,title:t.title};return n.http.sendGet(n.Urls.multichannel(r.getState().SettingsReducer.params.id),Object.assign(i,o)).then(function(e){if(!e.error&&e.data)return e.data.widget.channels.chat&&n.MultiChannel.WidgetService.initActivitySpy(),e.data.session,e.data},function(){})}},{key:"hit",value:function(){var e={uid:n.session.getUserId()};n.http.sendGet(n.Urls.multichannel(r.getState().SettingsReducer.params.id)+"/hit",e)}}]),o}()}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r=n.Inferno.Component;n.MultiChannel.BaseComponent=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.createRef=n.createRef.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"createRef",value:function(e){e&&(this.refs=this.refs||{},this.refs[e.id]=e)}}]),t}(r)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};n.Inferno.Component;n.MultiChannel.WidgetButtonGroupComponent=function(e){function t(e,r){_classCallCheck(this,t);var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.onMouseEnter=o.onMouseEnter.bind(o),o.onMouseLeave=o.onMouseLeave.bind(o),o.onWidgetOpen=o.onWidgetOpen.bind(o),o.onWidgetClose=o.onWidgetClose.bind(o),o.isMessengerChannelEnabled=o.isMessengerChannelEnabled.bind(o),o.isSocNetChannelEnabled=o.isSocNetChannelEnabled.bind(o),o.checkCloseButtonPosition=o.checkCloseButtonPosition.bind(o),o.state={isHovered:!1},n.MultiChannel.EventBus.on("chatWillOpen",o.onWidgetOpen),n.MultiChannel.EventBus.on("chatWillClose",o.onWidgetClose),o}return _inherits(t,e),_createClass(t,[{key:"onWidgetClose",value:function(){n.$(this.refs["mgo-mcw-group-buttons"]).removeClass("mgo-mcw__group-buttons_state-vertical")}},{key:"onWidgetOpen",value:function(){n.$(this.refs["mgo-mcw-group-buttons"]).removeClass("mgo-mcw__group-buttons_state-horizontal mgo-mcw__group-buttons_state-hover")}},{key:"onMouseEnter",value:function(){this.setState({isHovered:!0})}},{key:"classNames",value:function(){var e=["mgo-mcw__group-buttons"];if(!n.Helpers.isMobileViewMode())switch(this.state.isHovered){case!0:e.push("mgo-mcw__group-buttons_state-hover");break;case!1:}return n.Helpers.isMobileViewMode()?this.props.getComponentState()===n.MultiChannel.WidgetStates.DEFAULT?e.push("mgo-mcw__group-buttons_state-horizontal"):this.props.getComponentState()===n.MultiChannel.WidgetStates.MOBILE_MENU&&(n.Helpers.isPortraitOrientation()?e.push("mgo-mcw__group-buttons_state-portrait-mobile"):e.push("mgo-mcw__group-buttons_state-landscape-mobile")):this.props.getComponentState()===n.MultiChannel.WidgetStates.DEFAULT?e.push("mgo-mcw__group-buttons_state-horizontal"):this.props.getComponentState()===n.MultiChannel.WidgetStates.CALLBACK_MINIMIZED?e.push("mgo-mcw__group-buttons_state-horizontal"):this.props.getComponentState()===n.MultiChannel.WidgetStates.LEADGENERATION?e.push("mgo-mcw__group-buttons_state-horizontal"):e.push("mgo-mcw__group-buttons_state-vertical"),e.join(" ")}},{key:"checkCloseButtonPosition",value:function(e){return n.Helpers.isMobileViewMode()&&this.props.getComponentState()===n.MultiChannel.WidgetStates.MOBILE_MENU&&this.props.widgetSettings.styles.position===e}},{key:"isChannelEnabled",value:function(e){return this.props.widgetSettings.channels[e]&&(this.props.widgetSettings.channels[e].abonentId||this.props.widgetSettings.channels[e].groupId)&&this.props.widgetSettings.channels[e].status===n.MultiChannel.ChannelStatuses.ENABLED}},{key:"isMessengerChannelEnabled",value:function(e){return this.props.widgetSettings.channels[e]&&(this.props.widgetSettings.channels[e].abonentId||this.props.widgetSettings.channels[e].groupId)&&this.props.widgetSettings.channels[e].auth&&this.props.widgetSettings.channels[e].status===n.MultiChannel.ChannelStatuses.ENABLED}},{key:"isSocNetChannelEnabled",value:function(e){return this.props.widgetSettings.channels[e]&&(this.props.widgetSettings.channels[e].abonentId||this.props.widgetSettings.channels[e].groupId)&&this.props.widgetSettings.channels[e].auth&&this.props.widgetSettings.channels[e].auth.groupId&&this.props.widgetSettings.channels[e].status===n.MultiChannel.ChannelStatuses.ENABLED}},{key:"onMouseLeave",value:function(){var e=n.$(this.refs["mgo-mcw-group-buttons"]);e.width(n.$(e).width()),this.setState({isHovered:!1}),setTimeout(function(){e.css("width","")},0)}},{key:"render",value:function(){return n.Inferno.createVNode(2,"div",this.classNames(),[this.checkCloseButtonPosition("left")&&n.Inferno.createVNode(16,n.MultiChannel.MobileCloseButtonComponent,null,null,{updateComponentState:this.props.updateComponentState}),this.props.widgetSettings.channels.chat&&(this.props.widgetSettings.channels.chat.abonentId||this.props.widgetSettings.channels.chat.groupId)&&this.props.widgetSettings.channels.chat.status===n.MultiChannel.ChannelStatuses.ENABLED&&n.Inferno.createVNode(16,n.MultiChannel.ChatOpenButtonComponent,null,null,{styleSettings:this.props.widgetSettings.styles,channelSettings:this.props.widgetSettings.channels.chat,getComponentState:this.props.getComponentState,updateComponentState:this.props.updateComponentState}),this.isMessengerChannelEnabled(n.MultiChannel.Channels.VB)&&n.Inferno.createVNode(16,n.MultiChannel.ViberButtonComponent,null,null,{channelSettings:this.props.widgetSettings.channels.vb,getComponentState:this.props.getComponentState,updateComponentState:this.props.updateComponentState}),this.isSocNetChannelEnabled(n.MultiChannel.Channels.VK)&&n.Inferno.createVNode(16,n.MultiChannel.VkontakteButtonComponent,null,null,{channelSettings:this.props.widgetSettings.channels.vk,getComponentState:this.props.getComponentState,updateComponentState:this.props.updateComponentState}),this.isSocNetChannelEnabled(n.MultiChannel.Channels.FB)&&n.Inferno.createVNode(16,n.MultiChannel.FacebookButtonComponent,null,null,{channelSettings:this.props.widgetSettings.channels.fb,getComponentState:this.props.getComponentState,updateComponentState:this.props.updateComponentState}),this.isMessengerChannelEnabled(n.MultiChannel.Channels.TG)&&n.Inferno.createVNode(16,n.MultiChannel.TelegramButtonComponent,null,null,{channelSettings:this.props.widgetSettings.channels.tg,getComponentState:this.props.getComponentState,updateComponentState:this.props.updateComponentState}),this.isChannelEnabled(n.MultiChannel.Channels.EMAIL)&&n.Inferno.createVNode(16,n.MultiChannel.EmailButtonComponent,null,null,{channelSettings:this.props.widgetSettings.channels.email,getComponentState:this.props.getComponentState,updateComponentState:this.props.updateComponentState}),this.checkCloseButtonPosition("right")&&n.Inferno.createVNode(16,n.MultiChannel.MobileCloseButtonComponent,null,null,{updateComponentState:this.props.updateComponentState})],{id:"mgo-mcw-group-buttons",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},null,this.createRef)}}]),t}(n.MultiChannel.BaseComponent)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";var r=(n.$,n._,n.Promise,n.Inferno),o=r.Component;r.linkEvent;n.MultiChannel=n.MultiChannel||{},n.MultiChannel.CallsiteButtonComponent=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return n.Inferno.createVNode(2,"div","mgo-mcw__button mgo-mcw__button_cs",[n.Inferno.createVNode(2,"div","mgo-mcw__button-bg"),n.Inferno.createVNode(2,"span","mgo-mcw__button-icon")],{id:"mgo-mcw-cs-button"})}}]),t}(o)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r=n.Inferno.Component;n.MultiChannel.MobileCloseButtonComponent=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onButtonClicked=n.onButtonClicked.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"onButtonClicked",value:function(){this.props.updateComponentState(n.MultiChannel.WidgetStates.DEFAULT)}},{key:"render",value:function(){return n.Inferno.createVNode(2,"div","mgo-mcw__button mgo-mcw__button_close",[n.Inferno.createVNode(2,"div","mgo-mcw__button-bg"),n.Inferno.createVNode(2,"span","mgo-mcw__button-icon")],{onClick:this.onButtonClicked,id:"mgo-mcw-close-button"})}}]),t}(r)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};n.Inferno.Component;n.MultiChannel.WindowComponent=function(e){function t(e){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.onCloseWidgetClick=r.onCloseWidgetClick.bind(r),r.onWidgetOpen=r.onWidgetOpen.bind(r),r.recalculateHeight=r.recalculateHeight.bind(r),r.getStyle=r.getStyle.bind(r),n.MultiChannel.EventBus.on("chatWillOpen",r.onWidgetOpen),r.state={windowHeight:null},r}return _inherits(t,e),_createClass(t,[{key:"getStyle",value:function(){return this.state.windowHeight&&this.state.windowHeight>0?{height:this.state.windowHeight+"px"}:{}}},{key:"recalculateHeight",value:function(e){this.setState({windowHeight:e})}},{key:"onWidgetOpen",value:function(){n.$(this.refs["mgo-mcw-window"]).show(0)}},{key:"onCloseWidgetClick",value:function(){var e=this;n.MultiChannel.EventBus.trigger("chatWillClose"),this.setState({windowHeight:"auto"}),setTimeout(function(){e.props.updateComponentState(n.MultiChannel.WidgetStates.DEFAULT)},0)}},{key:"render",value:function(){return n.Inferno.createVNode(2,"div","mgo-mcw__window",[n.Inferno.createVNode(2,"div","mgo-mcw__button-close",null,{id:"mgo-mcw-widget-close-btn",onClick:this.onCloseWidgetClick}),this.props.getComponentState()===n.MultiChannel.WidgetStates.CHAT_OPEN&&n.MultiChannel.Timesheet.isWorkingTime(this.props.widgetSettings.timesheet)&&n.Inferno.createVNode(16,n.MultiChannel.ChatWindowComponent,null,null,{widgetSettings:this.props.widgetSettings,channelSettings:this.props.widgetSettings.channels.chat}),this.props.getComponentState()===n.MultiChannel.WidgetStates.CHAT_OPEN&&!n.MultiChannel.Timesheet.isWorkingTime(this.props.widgetSettings.timesheet)&&n.Inferno.createVNode(16,n.MultiChannel.ChatOfflineComponent,null,null,{recalculateHeight:this.recalculateHeight,widgetSettings:this.props.widgetSettings,channelSettings:this.props.widgetSettings.channels.chat})],{style:this.getStyle(),id:"mgo-mcw-window"},null,this.createRef)}}]),t}(n.MultiChannel.BaseComponent)}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{},n.MultiChannel.ActionTypes={GET_SETTINGS:"GET_SETTINGS",USER_ADD_MESSAGE:"USER_ADD_MESSAGE",UPLOAD_FILE:"UPLOAD_FILE",UPLOADED_FILE:"UPLOADED_FILE",PROGRESS_FILE:"PROGRESS_FILE",CANCEL_FILE:"CANCEL_FILE",ERROR_FILE:"ERROR_FILE",AUTORESPONDER_ADD_MESSAGE:"AUTORESPONDER_ADD_MESSAGE",RECEIVE_NEW_MESSAGE:"RECEIVE_NEW_MESSAGE",RECEIVE_HISTORY:"RECEIVE_HISTORY",AUTORESPONDER_WAS_INITED:"AUTORESPONDER_WAS_INITED",ON_TYPING_RECEIVED:"ON_TYPING_RECEIVED",END_TYPING:"END_TYPING",GET_SESSION:"GET_SESSION",WIDGET_NEW_STATE:"WIDGET_NEW_STATE",SESSION_UPDATE:"SESSION_UPDATE",SESSION_END:"SESSION_END",SESSION_REMOVED:"SESSION_REMOVED",SYSTEM_MESSAGE:"SYSTEM_MESSAGE",CONFIRM_MESSAGE:"CONFIRM_MESSAGE",DISCARD_MESSAGE:"DISCARD_MESSAGE",RECEIVE_PARAMS:"RECEIVE_PARAMS",UPDATE_UNREAD:"UPDATE_UNREAD",UPDATE_INITIAL:"UPDATE_INITIAL",CONNECTION_ESTABLISHED:"CONNECTION_ESTABLISHED"}}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{},n.MultiChannel.ChannelStatuses={ENABLED:200,DISABLED:100}}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{},n.MultiChannel.Channels={CHAT:"chat",VK:"vk",FB:"fb",TG:"tg",VB:"vb",EMAIL:"email",CALLBACK:"callback",LEADGEN:"leadgen"}}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{},n.MultiChannel.MessageTypes={SYSTEM:"system",IMAGE:"image",TEXT:"text",FILE:"file",AUTORESPONDER:"autoresponder"}}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{},n.MultiChannel.Messages=n.MultiChannel.Messages||{},n.MultiChannel.Messages.en=function(){function e(){return _classCallCheck(this,e),{TEST_MESSAGE:"Test message",TODAY:"Today",COPYRIGHT:"MANGO OFFICE Technology",COMPANY_EMPLOYEE:"Company employee",COMPANY_NAME:"Company name",CHAT_TAKEN_BY_MANAGER:"Chat taken by manager",SEND_MESSAGE:"Send message...",CHAT_CLOSED:"Chat was ended by operator",MANAGER_CHANGED:"Chat was redirected to new operator",MESSAGE_NOT_DELIVERED:"Message not delivered",REQUIRED_MESSAGE:"Field is required",EMAIL_FORMAT_MESSAGE:"Wrong Email format",SUBMIT_APPLICATION:"Submit your application",SUBMIT_APPLICATION_TEXT:"Unfortunately, we can not respond right now. Leave your contact details and we will get back to you as soon as possible.",THANKS:"Thank you",SEND:"Send",EMAIL:"Email",NAME:"Name",MESSAGE:"Message",APPLICATION_ACCEPTED:"Your application is accepted",PERSONAL_DATA_AGREEMENT_LABEL:"I agree with personal data processing"}}return e}()}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{},n.MultiChannel.Messages=n.MultiChannel.Messages||{},n.MultiChannel.Locale=function(){function e(t){_classCallCheck(this,e),
this.currentLanguage=t.language.toLowerCase(),this.messages=new n.MultiChannel.Messages[this.currentLanguage]}return _createClass(e,[{key:"getMessage",value:function(e){return this.messages[e]}}]),e}()}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{},n.MultiChannel.Messages=n.MultiChannel.Messages||{},n.MultiChannel.Messages.ru=function(){function e(){return _classCallCheck(this,e),{TEST_MESSAGE:"Тестовое сообщение",TODAY:"Сегодня",TOMORROW:"Завтра",ON_SUNDAY:"В воскресенье",ON_MONDAY:"В понедельник",ON_TUESDAY:"Во вторник",ON_WEDNESDAY:"В среду",ON_THURSDAY:"В четверг",ON_FRIDAY:"В пятницу",ON_SATURDAY:"В субботу",SEND_MESSAGE:"Отправить сообщение...",SEND:"Отправить",COPYRIGHT:"Технология MANGO OFFICE",COMPANY_EMPLOYEE:"Сотрудник компании",COMPANY_NAME:"Название компании",CHAT_TAKEN_BY_MANAGER:"Чат получен оператором",SYSTEM_MESSAGE:"чат передан",CHAT_CLOSED:"Чат окончен оператором",MANAGER_CHANGED:"Чат передан новому оператору",MESSAGE_NOT_DELIVERED:"Не доставлено",THANKS_FOR_RATE:"Спасибо за вашу обратную связь",REQUIRED_MESSAGE:"Поле обязательно для заполнения",EMAIL_FORMAT_MESSAGE:"Неверный формат Email",EMAIL:"Email",WE_ARE_CALLING_YOU:"Мы вам уже звоним",NAME:"Имя",SUBMIT_APPLICATION:"Оставить заявку",THANKS:"Спасибо",MESSAGE:"Сообщение",SUBMIT_APPLICATION_TEXT:"К сожалению мы не можем ответить прямо сейчас. Оставьте свои контактные данные и мы свяжемся с вами в ближайшее время.",APPLICATION_ACCEPTED:"Ваша заявка принята",PERSONAL_DATA_AGREEMENT_LABEL:"Соглашаюсь на обработку персональных данных",ORDER_CALLBACK_SUCCESS_MESSAGE:"Спасибо! Заявку получили, сейчас позвоним.",ORDER_CALLBACK_PROGRESS_MESSAGE:"Подождите, Ваша заявка обрабатывается!",ERR_PHONE_FILTER:"На этот номер уже заказан обратный звонок",ERROR_OCCURED:"Произошла ошибка",AUSTRALIA:"Австралия",NEW_ZELAND:"Новая Зеландия",MALAYSIA:"Малайзия",INDONESIA:"Индонезия",PHILIPPINES:"Филиппины",SINGAPORE:"Сингапур",THAILAND:"Таиланд",JAPAN:"Япония",KOREA_REP:"Респ. Корея",VIETNAM:"Вьетнам",CHINA:"Китай",TURKEY:"Турция",INDIA:"Индия",PAKISTAN:"Пакистан",AFGHANISTAN:"Афганистан",SRI_LANKA:"Шри-Ланка",MYANMAR:"Бирма (Мьянма)",IRAN:"Иран",BRUNEI_DARUSSALAM:"Бруней-Даруссалам",DPR_KOREA:"Корейская НДР",HONG_KONG_CHINA:"Гонконг",MACAO_CHINA:"Макао",CAMBODIA:"Камбоджа",LAO_PDR:"Лаос",BANGLADESH:"Бангладеш",TAIWAN_CHINA:"Тайвань",MALDIVES:"Мальдивские острова",LEBANON:"Ливан",JORDAN:"Иордания",SYRIAN_ARAB_REPUBLIC:"Сирийская арабская республика",IRAQ:"Ирак",KUWAIT:"Кувейт",SAUDI_ARABIA:"Саудовская Аравия",YEMEN:"Йемен",OMAN:"Оман",UNITED_ARAB_EMIRATES:"Арабские Эмираты",ISRAEL:"Израиль",BAHRAIN:"Бахрейн",QATAR:"Катар",BHUTAN:"Бутан",MONGOLIA:"Монголия",NEPAL:"Непал",EGYPT:"Египет",SOUTH_AFRICA:"Южно-Африканская Респ.",MOROCCO:"Марокко",ALGERIA:"Алжир",TUNISIA:"Тунис",LIBYA:"Ливия",GAMBIA:"Гамбия",SENEGAL:"Сенегал",MAURITANIA:"Мавритания",MALI:"Мали",GUINEA:"Гвинея",COTE_DIVOIRE:"Кот-д’Ивуар",BURKINA_FASO:"Буркина Фасо",NIGER:"Нигер",TOGO:"Того",BENIN:"Бенин",MAURITIUS:"Маврикий",LIBERIA:"Либерия",SIERRA_LEONE:"Сьерра-Леоне",GHANA:"Гана",NIGERIA:"Нигерия",CHAD:"Чад",CENTRAL_AFRICAN_REP:"Центральноафриканская Республика",CAMEROON:"Камерун",CAPE_VERDE:"Кабо-Верде",SAO_TOME_AND_PRINCIPE:"Сан-Томе и Принсипи",EQUATORIAL_GUINEA:"Экваториальная Гвинея",GABON:"Габон",CONGO:"Конго (Браззавиль)",DR_CONGO:"Конго (Киншаса)",ANGOLA:"Ангола",GUINEA_BISSAU:"Гвинея-Бисау",DIEGO_GARCIA:"Диего-Гарсия",SEYCHELLES:"Сейшелы",SUDAN:"Судан",RWANDA:"Руанда",ETHIOPIA:"Эфиопия",SOMALIA:"Сомали",DJIBOUTI:"Джибути",KENYA:"Кения",TANZANIA:"Танзания",UGANDA:"Уганда",BURUNDI:"Бурунди",MOZAMBIQUE:"Мозамбик",ZAMBIA:"Замбия",MADAGASCAR:"Мадагаскар",FRENCH_DEPARTMENTS_AND_TERRITORIES_IN_THE_INDIAN_OCEAN:"Майотта",ZIMBABWE:"Зимбабве",NAMIBIA:"Намибия",MALAWI:"Малави",LESOTHO:"Лесото",BOTSWANA:"Ботсвана",SWAZILAND:"Свазиленд",COMOROS:"Коморы",ERITREA:"Эритрея",GREECE:"Греция",NETHERLANDS:"Нидерланды",BELGIUM:"Бельгия",FRANCE:"Франция",SPAIN:"Испания",HUNGARY:"Венгрия",VATICAN:"Ватикан",ITALY:"Италия",ROMANIA:"Румыния",SWITZERLAND:"Швейцария",AUSTRIA:"Австрия",UNITED_KINGDOM:"Великобритания",DENMARK:"Дания",SWEDEN:"Швеция",NORWAY:"Норвегия",POLAND:"Польша",GERMANY:"Германия",FAROE_ISLANDS:"Фарерские острова",GIBRALTAR:"Гибралтар",PORTUGAL:"Португалия",LUXEMBOURG:"Люксембург",IRELAND:"Ирландия",ICELAND:"Исландия",ALBANIA:"Албания",MALTA:"Мальта",CYPRUS:"Кипр",FINLAND:"Финляндия",BULGARIA:"Болгария",ANDORRA:"Андорра",MONACO:"Монако",SAN_MARINO:"Сан-Марино",SERBIA:"Сербия",MONTENEGRO:"Черногория",CROATIA:"Хорватия",SLOVENIA:"Словения",BOSNIA_AND_HERZEGOVINA:"Босния и Герцеговина",THE_FORMER_YUGOSLAV_REPUBLIC_OF_MACEDONIA:"Респ. Македония",CZECH_REP:"Чехия",SLOVAKIA:"Словакия",LIECHTENSTEIN:"Лихтенштейн",TIMOR_LESTE:"Восточный Тимор",NAURU:"Науру",PAPUA_NEW_GUINEA:"Папуа-Новая Гвинея",TONGA:"Тонга",SOLOMON_ISLANDS:"Соломоновы Острова",VANUATU:"Вануату",FIJI:"Фиджи",PALAU:"Палау",WALLIS_AND_FUTUNA:"Уоллис и Футуна",COOK_ISLANDS:"Острова Кука",NIUE:"Ниуэ",SAMOA:"Самоа",KIRIBATI:"Кирибати",NEW_CALEDONIA:"Новая Каледония",TUVALU:"Тувалу",FRENCH_POLYNESIA:"Французская Полинезия (Таити)",TOKELAU:"Токелау",MICRONESIA:"Ф.Ш. Микронезии",MARSHALL_ISLANDS:"Маршалловы Острова",RUSSIAN_FEDERATION:"Россия",CANADA:"Канада",UNITED_STATES:"Соединенные Штаты",GREENLAND:"Гренландия",BAHAMAS:"Багамские Острова",BARBADOS:"Барбадос",ANGUILLA:"Ангилья",ANTIGUA_AND_BARBUDA:"Антигуа и Барбуда",BRITISH_VIRGIN_ISLANDS:"Виргинские острова (Британия)",UNITED_STATES_VIRGIN_ISLANDS:"Виргинские острова (Америка)",CAYMAN_ISLANDS:"Каймановы острова",BERMUDA:"Бермудские острова",GRENADA:"Гренада",TURKS_AND_CAICOS_ISLANDS:"Тёркс и Кайкос",MONTSERRAT:"Монтсеррат",NORTHERN_MARIANAS:"Северные Марианские острова",GUAM:"Гуам",AMERICAN_SAMOA:"Американское Самоа",SAINT_LUCIA:"Сент-Люсия",DOMINICA:"Доминика",SAINT_VINCENT_AND_THE_GRENADINES:"Сент-Винсент и Гренадины",PUERTO_RICO:"Пуэрто-Рико",DOMINICAN_REP:"Доминиканская Республика",TRINIDAD_AND_TOBAGO:"Тринидад и Тобаго",SAINT_KITTS_AND_NEVIS:"Сент-Китс и Невис",JAMAICA:"Ямайка",KAZAKHSTAN:"Казахстан",LITHUANIA:"Литва",LATVIA:"Латвия",ESTONIA:"Эстония",MOLDOVA:"Молдова",ARMENIA:"Армения",BELARUS:"Белоруссия",UKRAINE:"Украина",TAJIKISTAN:"Таджикистан",TURKMENISTAN:"Туркменистан",AZERBAIJAN:"Азербайджан",GEORGIA:"Грузия",KYRGYZSTAN:"Киргизия",UZBEKISTAN:"Узбекистан",PERU:"Перу",MEXICO:"Мексика",CUBA:"Куба",ARGENTINA:"Аргентина",BRAZIL:"Бразилия",CHILE:"Чили",COLOMBIA:"Колумбия",VENEZUELA:"Венесуэла",ARUBA:"Аруба",FALKLAND_ISLANDS:"Фолклендские острова",BELIZE:"Белиз",GUATEMALA:"Гватемала",EL_SALVADOR:"Сальвадор",HONDURAS:"Гондурас",NICARAGUA:"Никарагуа",COSTA_RICA:"Коста-Рика",PANAMA:"Панама",SAINT_PIERRE_AND_MIQUELON:"Сен-Пьер и Микелон",HAITI:"Гаити",GUADELOUPE:"Гваделупа",BOLIVIA:"Боливия",GUYANA:"Гайана",ECUADOR:"Эквадор",FRENCH_GUIANA:"Фр. Гвиана",PARAGUAY:"Парагвай",MARTINIQUE:"Мартиника",SURINAME:"Суринам",URUGUAY:"Уругвай"}}return e}()}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{},n.MultiChannel.Timesheet={TIME_FORMAT:"HH:mm",DATE_FORMAT:"YYYY-MM-DD",LOCALE_DAYS:{TODAY:"TODAY",TOMORROW:"TOMORROW",0:"ON_SUNDAY",1:"ON_MONDAY",2:"ON_TUESDAY",3:"ON_WEDNESDAY",4:"ON_THURSDAY",5:"ON_FRIDAY",6:"ON_SATURDAY"},isWorkingTime:function r(e){var t=n.moment(),o=t.clone().tz(e.timezone),i=this._checkIsException(o,e.exceptions,e.timezone);if(void 0!==i)return i;var r=this._checkIsWorkingTime(o,e.days,e.timezone)&&!this._checkIsHoliday(o,e)&&!this._checkIsLunch(o,e.lunch,e.timezone)&&!this._checkIsPreHolidayHour(o,e);return r},getNextWorkingDays:function(e,t){for(var r=[],o=n.moment().clone().tz(t.timezone),i=o.clone(),s=0;r.length<e;){if(this._checkIsWorkingDay(i,t,0===s)){var a=i.clone().startOf("day");r.push({id:a.valueOf(),date:a,value:this._getDayValue(a,o.clone()),intervals:this._getCallIntervals(a,t,0===s,i.clone())})}i.add(1,"days"),s++}return r},_getDayValue:function(e,t){return e.isSame(t,"day")?this.LOCALE_DAYS.TODAY:e.isSame(t.add(1,"day"),"day")?this.LOCALE_DAYS.TOMORROW:this.LOCALE_DAYS[e.day()]},_getCallIntervals:function(e,t,r,o){for(var i=this._getDayOfWeek(e,t.days),s=[],a=n.moment(i.start,this.TIME_FORMAT),u=n.moment(i.end,this.TIME_FORMAT),l=r&&o.hours()>a.hours()&&o.minutes()>a.minutes(),c=e.clone().set({hour:l?o.hours():a.hours(),minute:l?o.minutes():a.minutes()}).ceil(30,"minutes"),p=e.clone().set({hour:u.hours(),minute:u.minutes()}).floor(30,"minutes"),h=c.clone();h.isBefore(p);){var d=h.clone();this._checkIsLunchTime(d,t.lunch,t.timezone)?h.add(30,"minutes"):s.push({id:h.valueOf(),start:d.format(this.TIME_FORMAT),end:h.add(30,"minutes").clone().format(this.TIME_FORMAT)})}return s},_checkIsLunchTime:function(e,t){if(t.enabled){var r=n.moment(t.start,this.TIME_FORMAT),o=n.moment(t.end,this.TIME_FORMAT),i=e.clone().set({hour:r.hours(),minute:r.minutes()}),s=e.clone().set({hour:o.hours(),minute:o.minutes()});return e.isBetween(i,s,"minutes","[)")}return!1},_checkIsWorkingDay:function(e,t,n){var r=this._checkIsException(e,t.exceptions,t.timezone);if(void 0!==r)return!r;var o=this._checkIsWorking(e,t.days)&&!this._checkIsHoliday(e,t);return n?o&&this._checkIsEnoughTimeForCallback(e,t.days):o},_checkIsWorking:function(e,t){var n=this._getDayOfWeek(e,t),r=n&&n.enabled;return r},_checkIsEnoughTimeForCallback:function(e,t){var r=this._getDayOfWeek(e,t),o=n.moment(r.end,this.TIME_FORMAT),i=e.clone().set({hour:o.hours(),minute:o.minutes()});return e.isBefore(i.subtract(.5,"hours"))},_checkIsWorkingTime:function(e,t,r,o){var i=this._getDayOfWeek(e,t),s=void 0;if(i&&i.enabled){var a=n.moment(i.start,this.TIME_FORMAT),u=n.moment(i.end,this.TIME_FORMAT),l=e.clone().set({hour:a.hours(),minute:a.minutes()}),c=e.clone().set({hour:u.hours(),minute:u.minutes()});s=e.isBetween(l,o?c.subtract(1,"hours"):c)}else s=(i&&!i.enabled,!1);return s},_getDayOfWeek:function(e,t){var n=0===e.day()?6:e.day()-1;return t[n]},_checkIsLunch:function(e,t,r){if(t.enabled){var o=n.moment.tz(t.start,this.TIME_FORMAT,r),i=n.moment.tz(t.end,this.TIME_FORMAT,r);return e.isBetween(o,i)}return!1},_checkIsHoliday:function(e,t){if(t.enableHolidays){for(var r=!1,o=void 0,i=0;i<t.holidays.length;i++)if(o=n.moment.tz(t.holidays[i],this.DATE_FORMAT,t.timezone),e.isSame(o,"day")){r=!0;break}return r}return!1},_checkIsException:function(e,t,r){for(var o=void 0,i=0;i<t.length;i++){var s=n.moment.tz(t[i].date,this.DATE_FORMAT,r),a="work"==t[i].mode;if(e.isSame(s,"day")){var u=n.moment.tz(t[i].start,this.TIME_FORMAT,r),l=n.moment.tz(t[i].end,this.TIME_FORMAT,r);o=!!e.isBetween(u,l)&&a;break}}return o},_checkIsPreHolidayHour:function(e,t){if(t.enablePreHolidays){for(var r=!1,o=void 0,i=void 0,s=0;s<t.holidays.length;s++)if(o=n.moment.tz(t.holidays[s],this.DATE_FORMAT,t.timezone),i=o.subtract(1,"days"),e.isSame(i,"day")){r=!this._checkIsWorkingTime(e,t.days,t.timezone,!0);break}return r}return!1}}}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";var r=n.$;n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var o=n.Inferno.Component,i=n.Inferno.Redux.connect,s=n.MultiChannel.Actions.updateWidgetUIState,a=(n.MultiChannel.WidgetStates,n.MultiChannel.Store);n.MultiChannel.MainComponent=function(t){function o(e){_classCallCheck(this,o);var t=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return t.updateComponentState=t.updateComponentState.bind(t),t.getComponentState=t.getComponentState.bind(t),t.isLeadgenEnabled=t.isLeadgenEnabled.bind(t),t.isTextChannelsEnabled=t.isTextChannelsEnabled.bind(t),t.state={activeState:n.MultiChannel.WidgetStates.DEFAULT},t}return _inherits(o,t),_createClass(o,[{key:"getComponentState",value:function(){return this.state.activeState}},{key:"updateComponentState",value:function(e){a.dispatch(s(e)),this.setState({activeState:e})}},{key:"componentWillReceiveProps",value:function(e){this.initLocale(e.settings)}},{key:"componentDidMount",value:function(){var t=this;r(e).on("resize",function(){n.Helpers.isMobileViewMode()||t.state.activeState!==n.MultiChannel.WidgetStates.MOBILE_MENU?t.forceUpdate():t.updateComponentState(n.MultiChannel.WidgetStates.DEFAULT)})}},{key:"initLocale",value:function(e){n.MultiChannel.locale=new n.MultiChannel.Locale(e)}},{key:"classNames",value:function(){var e=["mgo-mcw-widget"];switch(this.state.activeState){case n.MultiChannel.WidgetStates.CHAT_OPEN:e.push("mgo-mcw_state-window-open");break;case n.MultiChannel.WidgetStates.MOBILE_MENU:e.push("mgo-mcw_state-mobile-menu");break;case n.MultiChannel.WidgetStates.CALLBACK_MINIMIZED:case n.MultiChannel.WidgetStates.LEADGENERATION:break;case n.MultiChannel.WidgetStates.DEFAULT:}switch(this.props.settings.styles.position){case"left":e.push("mgo-mcw-widget_position-left");break;case"right":default:e.push("mgo-mcw-widget_position-right")}switch(this.props.settings.styles.theme){case"dark":e.push("mgo-mcw_theme-dark");break;case"light":default:e.push("mgo-mcw_theme-light")}return n.Helpers.isPortraitOrientation()?e.push("mgo-mcw_orientation-portrait"):e.push("mgo-mcw_orientation-landscape"),n.Helpers.isMobileViewMode()&&e.push("mgo-mcw-widget_mobile-view"),this.props.settings.styles.themeColor?e.push("mgo-mcw_color-"+this.props.settings.styles.themeColor):e.push("mgo-mcw_color-green"),e.join(" ")}},{key:"isLeadgenEnabled",value:function(){return this.props.settings&&this.props.settings.status===n.MultiChannel.ChannelStatuses.ENABLED&&this.props.settings.channels.leadgen&&this.props.settings.channels.leadgen.status===n.MultiChannel.ChannelStatuses.ENABLED&&n.MultiChannel.Timesheet.isWorkingTime(this.props.settings.timesheet)}},{key:"isTextChannelsEnabled",value:function(){var e=this,t=[n.MultiChannel.Channels.CHAT,n.MultiChannel.Channels.VK,n.MultiChannel.Channels.FB,n.MultiChannel.Channels.VB,n.MultiChannel.Channels.TG,n.MultiChannel.Channels.EMAIL],r=!1;return Object.keys(this.props.settings.channels).forEach(function(o){t.indexOf(o)!==-1&&(e.props.settings.channels[o].abonentId||e.props.settings.channels[o].groupId)&&e.props.settings.channels[o].status===n.MultiChannel.ChannelStatuses.ENABLED&&(r=!0)}),r}},{key:"render",value:function(){return n.Inferno.createVNode(2,"div",null,[this.props.settings&&this.props.settings.status===n.MultiChannel.ChannelStatuses.ENABLED&&n.Inferno.createVNode(2,"div",this.classNames(),n.Inferno.createVNode(2,"div","mgo-mcw__wrapper",[this.props.settings.channels.callback&&this.props.settings.channels.callback.status===n.MultiChannel.ChannelStatuses.ENABLED&&n.Inferno.createVNode(16,n.MultiChannel.CallbackButtonContainerComponent,null,null,{widgetSettings:this.props.settings,updateComponentState:this.updateComponentState,getComponentState:this.getComponentState}),this.isTextChannelsEnabled()&&n.Inferno.createVNode(2,"div","mgo-mcw__window-container",[n.Inferno.createVNode(16,n.MultiChannel.WindowComponent,null,null,{widgetSettings:this.props.settings,getComponentState:this.getComponentState,updateComponentState:this.updateComponentState}),this.props.settings.showCopyright&&n.Inferno.createVNode(2,"div","mgo-mcw__copyright",n.Inferno.createVNode(2,"a",null,n.MultiChannel.locale.getMessage("COPYRIGHT"),{target:"_blank",href:this.props.settings.styles.copyrightLink}),{id:"mgo-mcw-copyright"})],{id:"mgo-mcw-window-c"}),this.isTextChannelsEnabled()&&n.Inferno.createVNode(16,n.MultiChannel.WidgetButtonGroupComponent,null,null,{widgetSettings:this.props.settings,updateComponentState:this.updateComponentState,getComponentState:this.getComponentState})]),{id:"mgo-mcw-widget"}),this.isLeadgenEnabled()&&n.Inferno.createVNode(16,n.MultiChannel.LeadgenerationComponent,null,null,{widgetSettings:this.props.settings,updateComponentState:this.updateComponentState,getComponentState:this.getComponentState}),n.Helpers.isMobileViewMode()&&n.Inferno.createVNode(2,"div","mgo-mcw__overlay")])}}],[{key:"mapStateToProps",value:function(e){return{settings:n.MultiChannel.SettingsReducer.getSettings(e)}}}]),o}(o),n.MultiChannel.MainComponent=i(n.MultiChannel.MainComponent.mapStateToProps)(n.MultiChannel.MainComponent)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";var r=n.$,o=n._,i=n.Promise;n.MultiChannel=n.MultiChannel||{};var s=n.Inferno.Redux.Provider,a=n.MultiChannel.Actions,u=a.getWidget,l=a.receiveParams,c=n.MultiChannel.Store;n.MultiChannel.Widget=function(){function e(t){_classCallCheck(this,e),this.params=t=t||{},this.id=t.id,this.utm=new n.CallTracking.UtmProvider}return _createClass(e,[{key:"init",value:function(){this.createEventBus(),this.start()}},{key:"createEventBus",value:function(){n.MultiChannel.EventBus=o.extend({},n.Backbone.Events)}},{key:"loadStyles",value:function(){return new i(function(e,t){var o=n.$("<link />").prop("href",n.Urls.url()+"css/multichannel-widget.css").prop("rel","stylesheet").prop("type","text/css");r("head").append(o),o.on("load",function(){e(!0)}).on("error",function(){t()})})}},{key:"start",value:function(){this.loadStyles().then(this.render.bind(this),function(){})}},{key:"render",value:function(){c.dispatch(l(this.params)),c.dispatch(u(this.utm.getCurrent()));var e=t.createElement("div");n.Inferno.render(n.Inferno.createVNode(16,s,null,null,{store:c,children:n.Inferno.createVNode(16,n.MultiChannel.MainComponent)}),e),t.body.appendChild(e)}}]),e}()}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r=n.Inferno.Component;n.MultiChannel.CallbackBackgroundComponent=function(r){function o(e){_classCallCheck(this,o);var t=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return t.getBgClasses=t.getBgClasses.bind(t),t.includeYoutubeApi=t.includeYoutubeApi.bind(t),t.initVideo=t.initVideo.bind(t),t.parseYoutubeId=t.parseYoutubeId.bind(t),t.setPlayerSizes=t.setPlayerSizes.bind(t),t.deinitVideo=t.deinitVideo.bind(t),t.players={},t.initVideo(),t}return _inherits(o,r),_createClass(o,[{key:"componentWillUnmount",value:function(){Object.keys(this.players).length&&this.deinitVideo()}},{key:"getBgClasses",value:function(){var e=["mgo-mcw__callback-bg"];return this.props.channelStyles.useVideo&&this.props.channelStyles.videoUrl&&e.push("mgo-mcw__callback-bg_video"),this.props.channelStyles.backgroundColor?e.push("mgo-mcw__callback-bg_"+this.props.channelStyles.backgroundColor):e.push("mgo-mcw__callback-bg_blue"),e.join(" ")}},{key:"initVideo",value:function(){this.props.channelStyles.useVideo&&0===Object.keys(this.players).length&&this.includeYoutubeApi(this.parseYoutubeId(this.props.channelStyles.videoUrl))}},{key:"parseYoutubeId",value:function(e){var t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,n=e.match(t);return!(!n||11!==n[7].length)&&n[7]}},{key:"includeYoutubeApi",value:function(r){function o(e,t){"undefined"!=typeof YT&&(s.players[e]=new YT.Player(e,{videoId:t,playerVars:{loop:1,autoplay:1,autohide:1,controls:0,showinfo:0,disablekb:1,modestbranding:1,rel:0,cc_load_policy:1,iv_load_policy:3},events:{onReady:function(t){t.target.mute(),s.props.getComponentState()===n.MultiChannel.WidgetStates.CALLBACK_MINIMIZED&&s.setPlayerSizes(s.players[e]),t.target.playVideo()},onStateChange:function(e){e.data==YT.PlayerState.ENDED&&e.target.playVideo()}}}))}function i(){Object.keys(s.players).length?Object.keys(s.players).forEach(function(e){s.players[e].loadVideoById(r)}):o("mango-video-container",r)}var s=this,a=t.createElement("script"),u=t.getElementsByTagName("script")[0];a.id="youtube-api",a.src="https://www.youtube.com/player_api",r&&(t.getElementById(a.id)||u.parentNode.insertBefore(a,u),e.onYouTubeIframeAPIReady?i():e.onYouTubeIframeAPIReady=i)}},{key:"deinitVideo",value:function(){var n=this,r=t.getElementById("youtube-api");Object.keys(this.players).forEach(function(e){n.players[e].destroy()}),r.parentNode.removeChild(r),YT=e.onYouTubeIframeAPIReady=null}},{key:"setPlayerSizes",value:function(e){var t=e.getIframe();if(t){var n=t.parentNode,r=n.offsetWidth,o=n.offsetHeight,i=16/9,s=Math.round(r/i),a=Math.round(o*i),u=-Math.round(s/2-o/2);o>r&&(t.style.width=a+"px",t.style.height=o+"px",u=-Math.round(a/2-r/2),t.style.marginLeft=u+"px",t.style.marginTop="0px"),o<=r&&u>=0&&(t.style.height=o+"px",t.style.width=r+"px",t.style.marginTop="0px",t.style.marginLeft="0px"),o<=r&&u<0&&(t.style.width=r+"px",t.style.height=s+"px",t.style.marginTop=u+"px",t.style.marginLeft="0px")}}},{key:"render",value:function(){return n.Inferno.createVNode(2,"div",null,n.Inferno.createVNode(2,"div",this.getBgClasses(),[this.props.channelStyles.useVideo&&this.props.channelStyles.videoUrl&&n.Inferno.createVNode(2,"div",null,null,{id:"mango-video-container"}),n.Inferno.createVNode(2,"div","mgo-mcw__callback-bg-overlay")]))}}]),o}(r)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r=n.Inferno.Component;n.MultiChannel.CallbackButtonComponent=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onButtonClicked=n.onButtonClicked.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"classNames",value:function(){var e=["mgo-mcw__button","mgo-mcw__button_cb","mgo-mcw__callback-button"];return this.props.widgetSettings.styles.callback.buttonColor?e.push("mgo-mcw__callback-button_"+this.props.widgetSettings.styles.callback.buttonColor):e.push("mgo-mcw__callback-button_blue"),e.join(" ")}},{key:"onButtonClicked",value:function(){this.props.updateComponentState(n.MultiChannel.WidgetStates.CALLBACK_MINIMIZED)}},{key:"render",value:function(){return n.Inferno.createVNode(2,"div",this.classNames(),[n.Inferno.createVNode(2,"div","mgo-mcw__button-bg"),n.Inferno.createVNode(2,"span","mgo-mcw__button-icon")],{onClick:this.onButtonClicked,id:"mgo-mcw-cb-button"})}}]),t}(r)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r=n.Inferno.Component;n.MultiChannel.CallbackButtonContainerComponent=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.createRef=n.createRef.bind(n),n.onCloseWidgetClick=n.onCloseWidgetClick.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"createRef",value:function(e){this.refs=this.refs||{},this.refs[e.id]=e}},{key:"onCloseWidgetClick",value:function(){var e=this;setTimeout(function(){e.props.updateComponentState(n.MultiChannel.WidgetStates.DEFAULT)},0)}},{key:"classNames",value:function(){var e=["mgo-mcw__callback-container"];return this.props.getComponentState()===n.MultiChannel.WidgetStates.CALLBACK_MINIMIZED&&e.push("mgo-mcw__callback-container_minimized"),e.join(" ")}},{key:"render",value:function(){return n.Inferno.createVNode(2,"div",this.classNames(),this.props.getComponentState()===n.MultiChannel.WidgetStates.CALLBACK_MINIMIZED?n.Inferno.createVNode(16,n.MultiChannel.CallbackMinimizedComponent,null,null,{widgetSettings:this.props.widgetSettings,updateComponentState:this.props.updateComponentState,getComponentState:this.props.getComponentState}):n.Inferno.createVNode(16,n.MultiChannel.CallbackButtonComponent,null,null,{widgetSettings:this.props.widgetSettings,updateComponentState:this.props.updateComponentState}),{id:"mgo-mcw-callback"})}}]),t}(r)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";var r=(n.$,n._);n.Promise;n.MultiChannel=n.MultiChannel||{};n.Inferno.Component,n.moment;n.MultiChannel.CallbackFormComponent=function(e){function o(e){_classCallCheck(this,o);var t=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return t.setCurrentCountry=t.setCurrentCountry.bind(t),t.handleClickOutside=t.handleClickOutside.bind(t),t.onCountrySelectClick=t.onCountrySelectClick.bind(t),t.getCountryFlag=t.getCountryFlag.bind(t),t.sortCountries=t.sortCountries.bind(t),t.getPhone=t.getPhone.bind(t),t.getClasses=t.getClasses.bind(t),t.state={showCountriesList:!1},t}return _inherits(o,e),_createClass(o,[{key:"handleClickOutside",value:function(e){this.refs["mgo-mcw-countries-list"]&&!this.refs["mgo-mcw-countries-list"].contains(e.target)&&this.setState({showCountriesList:!1})}},{key:"componentDidUpdate",value:function(){n.VMasker(this.refs["mgo-mcw-phone-input"]).maskPattern(this.props.currentCountry.mask.replace(/\?/g,""))}},{key:"componentWillUnmount",value:function(){t.removeEventListener("mousedown",this.handleClickOutside)}},{key:"componentDidMount",value:function(){n.VMasker(this.refs["mgo-mcw-phone-input"]).maskPattern(this.props.currentCountry.mask.replace(/\?/g,"")),this.sortCountries()}},{key:"setCurrentCountry",value:function(e){n.VMasker(this.refs["mgo-mcw-phone-input"]).unMask(),this.refs["mgo-mcw-phone-input"].value="",this.refs["mgo-mcw-phone-input"].style.width=12*e.mask.replace(/\?/g,"").length+"px",this.setState({showCountriesList:!1}),this.props.setCountry(e)}},{key:"sortCountries",value:function(){this.sortedCountries=r.sortBy(this.props.widgetSettings.allowedCountries,function(e){return n.MultiChannel.locale.getMessage(e.country)})}},{key:"getPhone",value:function(){return this.refs["mgo-mcw-phone-input"].value}},{key:"onCountrySelectClick",value:function(){this.setState({showCountriesList:!this.state.showCountriesList})}},{key:"getCountryFlag",value:function(){var e=["mgo-mcw__country-flag","mgo-mcw__flag","mgo-mcw__flag_"+this.props.currentCountry.country_code];return e.join(" ")}},{key:"getClasses",value:function(){var e=["mgo-mcw__phone-form"];return e.push("mgo-mcw__phone-form_"+this.props.widgetType),e.join(" ")}},{key:"render",value:function(){return n.Inferno.createVNode(2,"div",this.getClasses(),n.Inferno.createVNode(2,"div","mgo-mcw__phone-input",[(1===this.props.widgetSettings.allowedCountries.length||0===this.props.widgetSettings.allowedCountries.length)&&n.Inferno.createVNode(2,"div","mgo-mcw__phone-country",n.Inferno.createVNode(2,"div",this.getCountryFlag())),this.props.widgetSettings.allowedCountries.length>1&&n.Inferno.createVNode(2,"div","mgo-mcw__phone-country mgo-mcw__callback-country_clickable",[n.Inferno.createVNode(2,"div","mgo-mcw__country-triangle",null,{onClick:this.onCountrySelectClick}),n.Inferno.createVNode(2,"div",this.getCountryFlag(),null,{onClick:this.onCountrySelectClick}),this.getCountriesList()]),n.Inferno.createVNode(2,"div","mgo-mcw__phone-input-c",[n.Inferno.createVNode(2,"span","mgo-mcw__phone-code",["+",this.props.currentCountry.phone_code]),n.Inferno.createVNode(512,"input","mgo-mcw__phone-phone-input",null,{type:"text",id:"mgo-mcw-phone-input",placeholder:this.props.currentCountry.placeholder},null,this.createRef)])]))}},{key:"getCountriesList",value:function(){var e=this;if(this.state.showCountriesList){t.addEventListener("mousedown",this.handleClickOutside);var r=[];return this.sortedCountries.map(function(t){t.country===e.props.widgetSettings.defaultCountry.country?r.unshift(n.Inferno.createVNode(2,"div","mgo-mcw__country-item mgo-mcw__country-item_default",[n.Inferno.createVNode(2,"div","mgo-mcw__country-item-flag-cell",n.Inferno.createVNode(2,"div","mgo-mcw__country-item-flag mgo-mcw__flag mgo-mcw__flag_"+t.country_code)),n.Inferno.createVNode(2,"div","mgo-mcw__country-item-name",n.MultiChannel.locale.getMessage(t.country)),n.Inferno.createVNode(2,"div","mgo-mcw__country-item-code",["+",t.phone_code])],{onClick:function(){return e.setCurrentCountry(t)}})):r.push(n.Inferno.createVNode(2,"div","mgo-mcw__country-item",[n.Inferno.createVNode(2,"div","mgo-mcw__country-item-flag-cell",n.Inferno.createVNode(2,"div","mgo-mcw__country-item-flag mgo-mcw__flag mgo-mcw__flag_"+t.country_code)),n.Inferno.createVNode(2,"div","mgo-mcw__country-item-name",n.MultiChannel.locale.getMessage(t.country)),n.Inferno.createVNode(2,"div","mgo-mcw__country-item-code",["+",t.phone_code])],{onClick:function(){return e.setCurrentCountry(t)}}))}),n.Inferno.createVNode(2,"div","mgo-mcw__countries-list",r,{id:"mgo-mcw-countries-list"},null,this.createRef)}t.removeEventListener("mousedown",this.handleClickOutside)}}]),o}(n.MultiChannel.BaseComponent)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r=(n.Inferno.Component,n.MultiChannel.Actions.orderCallback),o=n.Redux.bindActionCreators,i=n.Inferno.Redux.connect;n.moment;n.MultiChannel.CallbackMinimizedComponent=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onButtonClicked=n.onButtonClicked.bind(n),n.getButtonClasses=n.getButtonClasses.bind(n),n.orderCallback=n.orderCallback.bind(n),n.successfulCallback=n.successfulCallback.bind(n),n.errorCallback=n.errorCallback.bind(n),n.onDelayedOrderClicked=n.onDelayedOrderClicked.bind(n),n.getNonWorkingForm=n.getNonWorkingForm.bind(n),n.getNextWorkingDays=n.getNextWorkingDays.bind(n),n.onDayChanged=n.onDayChanged.bind(n),n.onIntervalChanged=n.onIntervalChanged.bind(n),n.onCountrySelectClick=n.onCountrySelectClick.bind(n),n.getClasses=n.getClasses.bind(n),n.onCloseWidgetClick=n.onCloseWidgetClick.bind(n),n.setCurrentCountry=n.setCurrentCountry.bind(n),n.STATES={CALLBACK_FORM:"callback-form",CALLBACK_NON_WORKING:"callback-non-working",CALLBACK_PROGRESS:"callback-progress",CALLBACK_ERROR:"callback-error",CALLBACK_SUCCESS:"callback-success"},n.state={currentCountry:n.props.widgetSettings.defaultCountry,phone:"",internalState:n.STATES.CALLBACK_FORM,selectedDay:null,selectedInterval:null,errorMsg:null,showCountriesList:!1},n}return _inherits(t,e),_createClass(t,[{key:"getClasses",value:function(){var e=["mgo-mcw__callback-minimized"];return n.Helpers.isMobileViewMode()&&e.push("mgo-mcw__callback-minimized_mobile"),e.join(" ")}},{key:"getButtonClasses",value:function(){var e=["mgo-mcw__callback-call-button"];return this.props.widgetSettings.styles.callback.buttonColor?e.push("mgo-mcw__callback-call-button_"+this.props.widgetSettings.styles.callback.buttonColor):e.push("mgo-mcw__callback-call-button_blue"),
e.join(" ")}},{key:"onButtonClicked",value:function(){var e=this.refs["callback-form-component"].getPhone().replace(/[()\-\s]/g,"");e.length>=this.state.currentCountry.min&&e.length>=this.state.currentCountry.max&&(n.MultiChannel.Timesheet.isWorkingTime(this.props.widgetSettings.timesheet)?(this.setState({phone:e}),this.orderCallback(this.state.currentCountry.phone_code+e)):this.setState({internalState:this.STATES.CALLBACK_NON_WORKING,phone:e}))}},{key:"orderCallback",value:function(e){var t={number:e,uid:n.session.getUserId(),startDate:this.state.selectedInterval};this.setState({internalState:this.STATES.CALLBACK_PROGRESS}),this.props.orderCallback(t).then(this.successfulCallback,this.errorCallback)}},{key:"onCountrySelectClick",value:function(){this.setState({showCountriesList:!this.state.showCountriesList})}},{key:"onDelayedOrderClicked",value:function(){this.orderCallback(this.state.currentCountry.phone_code+this.state.phone)}},{key:"errorCallback",value:function(e){var t=this;setTimeout(function(){t.setState({internalState:t.STATES.CALLBACK_ERROR,errorMsg:e}),setTimeout(function(){t.props.getComponentState()===n.MultiChannel.WidgetStates.CALLBACK_MINIMIZED&&t.props.updateComponentState(n.MultiChannel.WidgetStates.DEFAULT)},5e3)},3e3)}},{key:"successfulCallback",value:function(){var e=this;setTimeout(function(){e.setState({internalState:e.STATES.CALLBACK_SUCCESS}),setTimeout(function(){e.props.getComponentState()===n.MultiChannel.WidgetStates.CALLBACK_MINIMIZED&&e.props.updateComponentState(n.MultiChannel.WidgetStates.DEFAULT)},5e3)},3e3)}},{key:"setCurrentCountry",value:function(e){this.setState({currentCountry:e,phone:null})}},{key:"getNextWorkingDays",value:function(){return n.MultiChannel.Timesheet.getNextWorkingDays(3,this.props.widgetSettings.timesheet)}},{key:"onCloseWidgetClick",value:function(){var e=this;setTimeout(function(){e.props.updateComponentState(n.MultiChannel.WidgetStates.DEFAULT)},0)}},{key:"onDayChanged",value:function(e,t){var n=+e.target.value,r=t.find(function(e){return e.id===n});this.setState({selectedDay:n,selectedInterval:r.intervals[0].id})}},{key:"onIntervalChanged",value:function(e){this.setState({selectedInterval:+e.target.value})}},{key:"render",value:function(){var e=this;return n.Inferno.createVNode(2,"div",this.getClasses(),[n.Inferno.createVNode(2,"div","mgo-mcw__button-close",null,{onClick:this.onCloseWidgetClick}),n.Inferno.createVNode(16,n.MultiChannel.CallbackBackgroundComponent,null,null,{channelStyles:this.props.widgetSettings.styles.callback,getComponentState:this.props.getComponentState}),this.state.internalState===this.STATES.CALLBACK_SUCCESS&&n.Inferno.createVNode(2,"div","mgo-mcw__callback-msg ",n.MultiChannel.locale.getMessage("ORDER_CALLBACK_SUCCESS_MESSAGE")),this.state.internalState===this.STATES.CALLBACK_ERROR&&n.Inferno.createVNode(2,"div","mgo-mcw__callback-msg ",n.MultiChannel.locale.getMessage(this.state.errorMsg)),this.state.internalState===this.STATES.CALLBACK_PROGRESS&&n.Inferno.createVNode(2,"div","mgo-mcw__callback-msg ",n.MultiChannel.locale.getMessage("ORDER_CALLBACK_PROGRESS_MESSAGE")),this.state.internalState===this.STATES.CALLBACK_FORM&&n.Inferno.createVNode(2,"div","mgo-mcw__callback-form-c",[n.Inferno.createVNode(2,"div","mgo-mcw__callback-form-text",n.MultiChannel.Timesheet.isWorkingTime(this.props.widgetSettings.timesheet)?this.props.widgetSettings.styles.callback.mainText:this.props.widgetSettings.styles.callback.nonWorkingText,{id:"mgo-mcw-callback-text"}),n.Inferno.createVNode(16,n.MultiChannel.CallbackFormComponent,null,null,{widgetType:n.MultiChannel.Channels.CALLBACK,widgetSettings:this.props.widgetSettings,currentCountry:this.state.currentCountry,setCountry:this.setCurrentCountry},null,function(t){t&&(t.id="callback-form-component",e.createRef(t))}),n.Inferno.createVNode(2,"div",this.getButtonClasses(),this.props.widgetSettings.styles.callback.buttonText,{onClick:this.onButtonClicked,id:"mgo-mcw-call-button"})]),this.state.internalState===this.STATES.CALLBACK_NON_WORKING&&this.getNonWorkingForm(),this.props.widgetSettings.showCopyright&&n.Inferno.createVNode(2,"div","mgo-mcw__callback-copyright",n.Inferno.createVNode(2,"a",null,n.MultiChannel.locale.getMessage("COPYRIGHT"),{target:"_blank",href:this.props.widgetSettings.styles.copyrightLink}))])}},{key:"getNonWorkingForm",value:function(){var e=this,t=this.getNextWorkingDays(),r=void 0,o=[],i=[];this.state.selectedDay||(this.setState({selectedDay:t[0].id,selectedInterval:t[0].intervals[0].id}),r=t[0].id);for(var s=0;s<t.length;s++)if(o.push(n.Inferno.createVNode(2,"option",null,n.MultiChannel.locale.getMessage(t[s].value),{value:t[s].id},t[s].id)),this.state.selectedDay===t[s].id){r=t[s].id;for(var a=0;a<t[s].intervals.length;a++)i.push(n.Inferno.createVNode(2,"option",null,[t[s].intervals[a].start," – ",t[s].intervals[a].end],{value:t[s].intervals[a].id},t[s].intervals[a].id))}return n.Inferno.createVNode(2,"div",null,[n.Inferno.createVNode(2,"div","mgo-mcw__callback-form-text",this.props.widgetSettings.styles.callback.nonWorkingText),n.Inferno.createVNode(2,"div","mgo-mcw__callback-form",[n.Inferno.createVNode(2,"div","mgo-mcw__callback-time-select",[n.Inferno.createVNode(2,"div","mgo-mcw__callback-select-item",n.Inferno.createVNode(2048,"select",null,o,{onChange:function(n){e.onDayChanged(n,t)}})),n.Inferno.createVNode(2,"div","mgo-mcw__callback-select-item",n.Inferno.createVNode(2048,"select",null,i,{onChange:this.onIntervalChanged}))]),n.Inferno.createVNode(2,"div",this.getButtonClasses(),"OK",{onClick:this.onDelayedOrderClicked})])])}}],[{key:"mapStateToProps",value:function(e){return{}}},{key:"mapDispatchToProps",value:function(e){return{orderCallback:o(r,e)}}}]),t}(n.MultiChannel.BaseComponent),n.MultiChannel.CallbackMinimizedComponent=i(n.MultiChannel.CallbackMinimizedComponent.mapStateToProps,n.MultiChannel.CallbackMinimizedComponent.mapDispatchToProps)(n.MultiChannel.CallbackMinimizedComponent)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r=n.Inferno.Component,o=n.Inferno.Redux.connect,i=n.MultiChannel.Actions.updateUnread,s=n.Redux.bindActionCreators,a=n.MultiChannel.StorageService;n.MultiChannel.ChatOpenButtonComponent=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.changeWidgetState=n.changeWidgetState.bind(n),n.onMouseEnter=n.onMouseEnter.bind(n),n.onMouseLeave=n.onMouseLeave.bind(n),n.createRef=n.createRef.bind(n),n.state={isHovered:!1},n}return _inherits(t,e),_createClass(t,[{key:"changeWidgetState",value:function(){var e=this;n.Helpers.isMobileViewMode()&&this.props.getComponentState()===n.MultiChannel.WidgetStates.MOBILE_MENU?setTimeout(function(){e.props.updateComponentState(n.MultiChannel.WidgetStates.CHAT_OPEN)},0):n.Helpers.isMobileViewMode()&&this.props.getComponentState()!==n.MultiChannel.WidgetStates.MOBILE_MENU?setTimeout(function(){e.props.updateComponentState(n.MultiChannel.WidgetStates.MOBILE_MENU)},0):(n.MultiChannel.EventBus.trigger("chatWillOpen"),setTimeout(function(){e.props.updateComponentState(n.MultiChannel.WidgetStates.CHAT_OPEN)},0))}},{key:"componentWillMount",value:function(){var e=a.getData(sessionStorage);e.unreadMessages&&this.props.updateUnread(e.unreadMessages.length)}},{key:"onMouseEnter",value:function(){this.setState({isHovered:!0})}},{key:"createRef",value:function(e){e&&(this.refs=this.refs||{},this.refs[e.id]=e)}},{key:"onMouseLeave",value:function(){var e=n.$(this.refs["mgo-mcw-chat-button"]);e.width(e.width()),this.setState({isHovered:!1}),e.css("width","")}},{key:"classNames",value:function(){var e=["mgo-mcw__button","mgo-mcw__button_chat","mgo-mcw__button_main"];return n.Helpers.isMobileViewMode()||this.state.isHovered&&e.push("mgo-mcw__button_chat_state-hover"),this.props.getComponentState()===n.MultiChannel.WidgetStates.CHAT_OPEN&&e.push("mgo-mcw__button_state-active"),e.join(" ")}},{key:"render",value:function(){return n.Inferno.createVNode(2,"div",this.classNames(),[n.Inferno.createVNode(2,"div","mgo-mcw__button-bg"),n.Inferno.createVNode(2,"div","mgo-mcw__button-icon"),0!==this.props.unreadMessages&&n.Inferno.createVNode(2,"div","mgo-mcw__unread-bullet"),!n.Helpers.isMobileViewMode()&&n.Inferno.createVNode(2,"div","mgo-mcw__button-text",this.props.styleSettings.triggerButtonText,{id:"mgo-mcw-main-button-text"},null,this.createRef)],{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onClick:this.changeWidgetState,id:"mgo-mcw-chat-button"},null,this.createRef)}}],[{key:"mapStateToProps",value:function(e){return{unreadMessages:e.ChatReducer.unreadMessages}}},{key:"mapDispatchToProps",value:function(e){return{updateUnread:s(i,e)}}}]),t}(r),n.MultiChannel.ChatOpenButtonComponent=o(n.MultiChannel.ChatOpenButtonComponent.mapStateToProps,n.MultiChannel.ChatOpenButtonComponent.mapDispatchToProps)(n.MultiChannel.ChatOpenButtonComponent)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r=n.Inferno.Component,o=n.moment;n.MultiChannel.ChatDateComponent=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.formatDate=n.formatDate.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"formatDate",value:function(e){return o(Number(e)).isSame(o(),"day")?n.MultiChannel.locale.getMessage("TODAY"):o(Number(e)).format("D MMMM")}},{key:"render",value:function(){return n.Inferno.createVNode(2,"div","mgo-mcw__chat-date",this.formatDate(this.props.date))}}]),t}(r)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r=n.moment,o="kk:mm";n.MultiChannel.ChatMessageComponent=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.formatTime=n.formatTime.bind(n),n.classNames=n.classNames.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"formatTime",value:function(e){return r(e).format(o)}},{key:"classNames",value:function(){var e=["mgo-mcw__chat-message"];return this.props.message.isClientMessage?e.push("mgo-mcw__chat-message_my"):e.push("mgo-mcw__chat-message_man"),e.join(" ")}}]),t}(n.MultiChannel.BaseComponent)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};n.Inferno.Redux.connect,n.Redux.bindActionCreators;n.MultiChannel.ChatFileMessageComponent=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getFileIcon=n.getFileIcon.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"getFilename",value:function(e){e=e.split(".");var t=e.pop();return e=e.join("."),e.length>20&&(e=e.substring(0,20)+"..."),e+"."+t}},{key:"getFilesize",value:function(e){var t=["Bytes","KB","MB","GB","TB"];if(0===e)return"0 Byte";var n=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,n),2)+" "+t[n]}},{key:"getFileIcon",value:function(e){var t=["mgo-mcw__chat-message-file-icon"],n=e.split(".").pop();switch(n){case"pdf":t.push("mgo-mcw__chat-message-file-icon_pdf");break;case"xls":case"xlsx":t.push("mgo-mcw__chat-message-file-icon_xls");break;case"doc":case"docx":t.push("mgo-mcw__chat-message-file-icon_doc");break;case"zip":t.push("mgo-mcw__chat-message-file-icon_zip");break;case"rar":t.push("mgo-mcw__chat-message-file-icon_rar");break;case"ppt":case"pps":case"pot":case"pptm":case"potx":case"pptx":t.push("mgo-mcw__chat-message-file-icon_ppt");break;case"flv":case"ogv":case"mov":case"wmv":case"mp4":case"mpg":case"mpeg":case"3gp":case"avi":t.push("mgo-mcw__chat-message-file-icon_video");break;case"flac":case"mp3":case"ogg":case"wav":case"wma":t.push("mgo-mcw__chat-message-file-icon_audio");break;case"jpg":case"jpeg":case"png":case"gif":case"bmp":case"ttf":t.push("mgo-mcw__chat-message-file-icon_image");break;default:t.push("mgo-mcw__chat-message-file-icon_file")}return t.join(" ")}},{key:"calcStrokeProgress",value:function(){var e=12,t=Math.PI*(2*e),n=(100-this.props.message.progress)/100*t;return n}},{key:"cancelUpload",value:function(){n.MultiChannel.ChatService.cancelUpload(this.props.message.localId)}},{key:"retryUpload",value:function(){n.MultiChannel.ChatService.retryUpload(this.props.message.localId)}},{key:"getFileLink",value:function(){return this.props.message.isClientMessage?"":"https://"+this.props.message.payload.url.domain+this.props.message.payload.url.path}},{key:"render",value:function(){return n.Inferno.createVNode(2,"div",this.classNames(),this.props.message.isClientMessage?n.Inferno.createVNode(2,"div",null,[n.Inferno.createVNode(2,"div","mgo-mcw__chat-message-time",this.formatTime(this.props.message.time)),n.Inferno.createVNode(2,"div","mgo-mcw__chat-message-file",["uploading"==this.props.message.status&&n.Inferno.createVNode(2,"div","mgo-mcw__chat-message-file-icon mgo-mcw__chat-message-file-icon_upload",n.Inferno.createVNode(128,"svg",null,[n.Inferno.createVNode(2,"circle",null,null,{r:"16",cx:"16",cy:"16",fill:"#333333"}),n.Inferno.createVNode(2,"circle",null,null,{r:"10",cx:"16",cy:"16",fill:"#333333",stroke:"#82B337","stroke-width":"2","stroke-dasharray":"75","stroke-dashoffset":"0"}),n.Inferno.createVNode(2,"circle",null,null,{r:"10",cx:"16",cy:"16",fill:"transparent",stroke:"#FFFFFF","stroke-width":"2","stroke-dasharray":"75","stroke-dashoffset":this.calcStrokeProgress()}),n.Inferno.createVNode(2,"path",null,null,{id:"svg_1",d:"m16.312498,15.183998l3.059,-3.059l0.941,0.941l-3.059,3.059l3.059,3.059l-0.941,0.941l-3.059,-3.059l-3.059,3.059l-0.941,-0.941l3.059,-3.059l-3.059,-3.059l0.941,-0.941l3.059,3.059z","fill-rule":"evenodd",fill:"#FFF"})],{xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 36 36"}),{onClick:this.cancelUpload.bind(this)}),"uploaded"==this.props.message.status&&n.Inferno.createVNode(2,"div",this.getFileIcon(this.props.message.payload.name)),"error"==this.props.message.status&&n.Inferno.createVNode(2,"div","mgo-mcw__chat-message-file-icon mgo-mcw__chat-message-file-icon_retry",n.Inferno.createVNode(128,"svg",null,n.Inferno.createVNode(2,"g",null,[n.Inferno.createVNode(2,"circle",null,null,{cx:"18",cy:"18",r:"18",fill:"#333"}),n.Inferno.createVNode(2,"path",null,null,{fill:"#FFF","fill-rule":"nonzero",d:"M23.65 12.35A7.958 7.958 0 0 0 18 10c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 18 24c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L19 17h7v-7l-2.35 2.35z"})],{fill:"none","fill-rule":"evenodd"}),{xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 36 36"}),{onClick:this.retryUpload.bind(this)})]),n.Inferno.createVNode(2,"div","mgo-mcw__chat-message-image-name",[this.getFilename(this.props.message.payload.name),n.Inferno.createVNode(2,"span","mgo-mcw__chat-message-image-size",[" (",this.getFilesize(this.props.message.payload.size),")"])]),this.props.message.discarded&&n.Inferno.createVNode(2,"div","mgo-mcw__unprocessed-msg",n.MultiChannel.locale.getMessage("MESSAGE_NOT_DELIVERED"))]):n.Inferno.createVNode(2,"div",null,[n.Inferno.createVNode(2,"div","mgo-mcw__chat-message-file",n.Inferno.createVNode(2,"a",null,n.Inferno.createVNode(2,"div",this.getFileIcon(this.props.message.payload.name)),{href:this.getFileLink(),target:"_blank"})),n.Inferno.createVNode(2,"div","mgo-mcw__chat-message-time",this.formatTime(this.props.message.time)),n.Inferno.createVNode(2,"div","mgo-mcw__chat-message-image-name",[this.getFilename(this.props.message.payload.name),n.Inferno.createVNode(2,"span","mgo-mcw__chat-message-image-size",[" (",this.getFilesize(this.props.message.payload.size),")"])])]))}}]),t}(n.MultiChannel.ChatMessageComponent)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r=n.Inferno.Component,o=n.Inferno.Redux.connect;n.MultiChannel.ChatHeaderComponent=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(n.createRef=n.createRef.bind(n),n.checkAndSetAvatar=n.checkAndSetAvatar.bind(n),e.session&&e.session.operator){var r=e.session.operator;n.state={name:r.name,role:r.position,photo:null,isLiveSession:e.isLiveSession},n.checkAndSetAvatar(r.avatarUrl)}else n.state={name:null,role:null,photo:null,isLiveSession:e.isLiveSession};return n}return _inherits(t,e),_createClass(t,[{key:"createRef",value:function(e){e&&(this.refs=this.refs||{},this.refs[e.id]=e)}},{key:"checkAndSetAvatar",value:function(e){var t=this,n=new Image;n.onload=function(){t.setState({photo:e}),n=null},n.onerror=function(){t.setState({photo:null}),n=null},n.src=e}},{key:"managerMetaClasses",value:function(){var e=["mgo-mcw__manager-meta"];return this.props.settings.rateQuality&&e.push("mgo-mcw__rate_enabled"),e.join(" ")}},{key:"componentWillReceiveProps",value:function(e){if(e.session&&e.session.operator){var t=e.session.operator;this.setState({name:t.name,role:t.position,photo:null}),this.checkAndSetAvatar(t.avatarUrl)}this.setState({isLiveSession:e.isLiveSession})}},{key:"componentDidMount",value:function(){this.props.setElementHeightProp("mgo-mcw-chat-header",this.refs["mgo-mcw-chat-header"].offsetHeight)}},{key:"render",value:function(){var e=this.props.settings.showOperatorName?this.state.name:n.MultiChannel.locale.getMessage("COMPANY_EMPLOYEE");return n.Inferno.createVNode(2,"div","mgo-mcw__chat-header",[this.props.settings.rateQuality&&this.state.name&&this.state.isLiveSession&&n.Inferno.createVNode(16,n.MultiChannel.ChatRateComponent,null,null,null,null,this.createRef),n.Inferno.createVNode(2,"div","mgo-mcw__manager-photo",[this.props.settings.showOperatorAvatar&&this.state.photo?n.Inferno.createVNode(2,"img",null,null,{src:this.state.photo,alt:""}):n.Inferno.createVNode(2,"div","mgo-mcw__default-photo"),n.Inferno.createVNode(2,"div","mgo-mcw__manager-status")]),n.Inferno.createVNode(2,"div",this.managerMetaClasses(),this.state.name?n.Inferno.createVNode(2,"div",null,[n.Inferno.createVNode(2,"div","mgo-mcw__manager-name",e),n.Inferno.createVNode(2,"div","mgo-mcw__manager-position",this.state.role)]):n.Inferno.createVNode(2,"div","mgo-mcw__initial-name",n.MultiChannel.locale.getMessage("COMPANY_EMPLOYEE")))],{id:"mgo-mcw-chat-header"},null,this.createRef)}}],[{key:"mapStateToProps",value:function(e){return{session:e.ChatReducer.session,isLiveSession:e.ChatReducer.isLiveSession}}},{key:"mapDispatchToProps",value:function(e){return{dispatch:e}}}]),t}(r),n.MultiChannel.ChatHeaderComponent=o(n.MultiChannel.ChatHeaderComponent.mapStateToProps)(n.MultiChannel.ChatHeaderComponent)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{},n.MultiChannel.ChatImageMessageComponent=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"getFilename",value:function(e,t){var n=t.split(".").pop();return e.length>20&&(e=e.substring(0,20)+"..."),e+"."+n}},{key:"getFilesize",value:function(e){var t=["Bytes","KB","MB","GB","TB"];if(0===e)return"0 Byte";var n=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,n),2)+" "+t[n]}},{key:"render",value:function(){return n.Inferno.createVNode(2,"div",this.classNames(),this.props.message.isClientMessage?n.Inferno.createVNode(2,"div",null,[n.Inferno.createVNode(2,"div","mgo-mcw__chat-message-image",n.Inferno.createVNode(2,"a",null,n.Inferno.createVNode(2,"img",null,null,{src:this.props.message.payload.link,alt:this.props.message.payload.name}),{href:this.props.message.payload.link,target:"_blank"})),n.Inferno.createVNode(2,"div","mgo-mcw__chat-message-time",this.formatTime(this.props.message.time)),n.Inferno.createVNode(2,"div","mgo-mcw__chat-message-image-name",[this.getFilename(this.props.message.payload.name,this.props.message.payload.link),n.Inferno.createVNode(2,"span","mgo-mcw__chat-message-image-size",[" (",this.getFilesize(this.props.message.payload.filesize),")"])]),this.props.message.discarded&&n.Inferno.createVNode(2,"div","mgo-mcw__unprocessed-msg",n.MultiChannel.locale.getMessage("MESSAGE_NOT_DELIVERED"))]):n.Inferno.createVNode(2,"div",null,[n.Inferno.createVNode(2,"div","mgo-mcw__chat-message-image",n.Inferno.createVNode(2,"a",null,n.Inferno.createVNode(2,"img",null,null,{src:this.props.message.payload.link,alt:this.props.message.payload.name}),{href:this.props.message.payload.link,target:"_blank"})),n.Inferno.createVNode(2,"div","mgo-mcw__chat-message-time",this.formatTime(this.props.message.time)),n.Inferno.createVNode(2,"div","mgo-mcw__chat-message-image-name",[this.getFilename(this.props.message.payload.name,this.props.message.payload.link),n.Inferno.createVNode(2,"span","mgo-mcw__chat-message-image-size",[" (",this.getFilesize(this.props.message.payload.filesize),")"])])]))}}]),t}(n.MultiChannel.ChatMessageComponent)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r=n.Inferno.Component,o=n.MultiChannel.Actions,i=o.addMessage,s=o.startChat,a=o.userStartTyping,u=o.userEndTyping,l=n.Redux.bindActionCreators,c=n.Inferno.Redux.connect,p=n.moment,h=13,d=5e3;n.MultiChannel.ChatMessageFormComponent=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onKeyPressed=n.onKeyPressed.bind(n),n.createRef=n.createRef.bind(n),n.timer=null,n}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){this.props.setElementHeightProp("mgo-mcw-chat-footer",this.refs["mgo-mcw-chat-footer"].offsetHeight)}},{key:"onKeyPressed",value:function(e){var t=this;e.keyCode===h?this.createAndSendMessage():!this.timer&&this.props.session&&this.props.session.operator&&(this.props.userStartTyping(),this.timer=setTimeout(function(){clearTimeout(t.timer),t.timer=null},d))}},{key:"onSendButtonClicked",value:function(e){this.createAndSendMessage()}},{key:"onAttachFileButtonClicked",value:function(e){this.refs["mgo-mcw-file-input"].click()}},{key:"onAttachedFiles",value:function(e){var t=Array.prototype.slice.call(e.target.files||[],0);if(this.props.session){var r=this.props.session;t.forEach(function(e){n.MultiChannel.ChatService.uploadFile(r.id4talkChat,r.authKey4talk,{name:e.name,type:e.type,data:e})})}var o=n.$(this.refs["mgo-mcw-file-input"]).val("").clone(!0);n.$(this.refs["mgo-mcw-file-input"]).replaceWith(o)}},{key:"createAndSendMessage",value:function(){var e=n.$(this.refs["mgo-mcw-message-input"]).val();if(e.trim()){var t={type:n.MultiChannel.MessageTypes.TEXT,isClientMessage:!0,time:p().valueOf(),localId:n.Helpers.makeId(),payload:{body:e}};this.props.session&&this.props.session.operator&&this.props.isLiveSession?this.props.addNewMessage(t):this.props.startChat(t),n.$(this.refs["mgo-mcw-message-input"]).val("")}}},{key:"componentWillReceiveProps",value:function(e){this.setState({isLiveSession:e.isLiveSession})}},{key:"createRef",value:function(e){e&&(this.refs=this.refs||{},this.refs[e.id]=e)}},{key:"render",value:function(){return n.Inferno.createVNode(2,"div","mgo-mcw__chat-footer",n.Inferno.createVNode(2,"div","mgo-mcw__chat-form",[n.Inferno.createVNode(2,"div","mgo-mcw__chat-input",n.Inferno.createVNode(512,"input","mgo-mcw__chat-message-input",null,{maxlength:"5000",onKeyUp:this.onKeyPressed,id:"mgo-mcw-message-input",type:"text",placeholder:n.MultiChannel.locale.getMessage("SEND_MESSAGE")},null,this.createRef)),n.Inferno.createVNode(2,"div","mgo-mcw__chat-buttons",[n.Inferno.createVNode(512,"input",null,null,{onChange:this.onAttachedFiles.bind(this),type:"file",id:"mgo-mcw-file-input"},null,this.createRef),this.props.session&&this.props.session.operator&&n.Inferno.createVNode(2,"div","mgo-mcw__chat-attach-button",n.Inferno.createVNode(128,"svg",null,n.Inferno.createVNode(2,"path",null,null,{fill:"#A8B3B9","fill-rule":"evenodd",d:"M1.452 8.683l7.424-7.425a3.999 3.999 0 0 1 5.657 0 3.999 3.999 0 0 1 0 5.657l-6.01 6.01A2.5 2.5 0 0 1 4.987 9.39l5.304-5.303L11.705 5.5l-5.367 5.367c-.389.389.318 1.096.707.707l6.074-6.074a2.006 2.006 0 0 0 0-2.828 2.006 2.006 0 0 0-2.828 0l-7.425 7.424a3.504 3.504 0 0 0 0 4.95 3.504 3.504 0 0 0 4.95 0l6.717-6.718 1.415 1.415L9.23 16.46a5.497 5.497 0 0 1-7.778 0 5.497 5.497 0 0 1 0-7.778z"}),{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"18",viewBox:"0 0 16 18"}),{onClick:this.onAttachFileButtonClicked.bind(this)}),n.Inferno.createVNode(2,"div","mgo-mcw__chat-send-button",n.Inferno.createVNode(128,"svg",null,n.Inferno.createVNode(2,"path",null,null,{"fill-rule":"evenodd",d:"M.009 16l18.658-8L.009 0 0 6.222 13.333 8 0 9.778z"}),{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 19 16"}),{onClick:this.onSendButtonClicked.bind(this)})])]),{id:"mgo-mcw-chat-footer"},null,this.createRef)}}],[{key:"mapStateToProps",value:function(e){return{user:e.ChatReducer.user,session:e.ChatReducer.session,isLiveSession:e.ChatReducer.isLiveSession}}},{key:"mapDispatchToProps",value:function(e){return{addNewMessage:l(i,e),startChat:l(s,e),userStartTyping:l(a,e),userEndTyping:l(u,e)}}}]),t}(r),n.MultiChannel.ChatMessageFormComponent=c(n.MultiChannel.ChatMessageFormComponent.mapStateToProps,n.MultiChannel.ChatMessageFormComponent.mapDispatchToProps)(n.MultiChannel.ChatMessageFormComponent)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";var r=(n.$,n._);n.Promise;n.MultiChannel=n.MultiChannel||{};var o=(n.Inferno.Component,n.MultiChannel.Actions),i=o.autoresponderInit,s=o.autoresponderAddMessage,a=o.loadHistory,u=o.updateInitial,l=n.Redux.bindActionCreators,c=n.Inferno.Redux.connect,p=n.MultiChannel.StorageService;n.MultiChannel.ChatMsgListComponent=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onScrolled=n.onScrolled.bind(n),n.getMessages=n.getMessages.bind(n),n.initAutoresponder(),n.updateInitialMessages(),n.scrollHeight=0,n}return _inherits(t,e),_createClass(t,[{key:"onScrolled",value:function(){0!==this.refs["mgo-mcw-chat-body-inner"].scrollTop||this.props.isHistoryLoaded||(this.scrollHeight=this.refs["mgo-mcw-chat-wrapper"].scrollHeight,this.props.loadHistory(this.latestMessageId))}},{key:"scrollToBottom",value:function(){this.props.scrollToBottom?this.refs["mgo-mcw-chat-body-inner"].scrollTop=this.refs["mgo-mcw-chat-wrapper"].scrollHeight:this.refs["mgo-mcw-chat-body-inner"].scrollTop=this.refs["mgo-mcw-chat-wrapper"].scrollHeight-this.scrollHeight}},{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"updateInitialMessages",value:function(){if(!(this.props.autoresponderWasInited||this.props.session&&this.props.session.operator)){var e=p.getData(localStorage);e.initialMessages&&this.props.updateInitial(e.initialMessages)}}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"sortAndGroupMessages",value:function(e){if(!e.length)return{};var t=r.sortBy(e,function(e){return e.time});return this.latestMessageId=t[0].messageId,r.groupBy(t,function(e){return n.moment(e.time).startOf("day").valueOf()})}},{key:"initAutoresponder",value:function(){var e=this;if(!this.props.autoresponderWasInited){var t=this;this.timeouts=[],this.props.autoresponderInit(!0),this.props.settings.rules.forEach(function(r){t.timeouts.push(setTimeout(function(){if(e.props.isAutoresponseNeeded){var t={time:(new Date).getTime(),localId:n.Helpers.makeId(),payload:{body:r.text},type:n.MultiChannel.MessageTypes.AUTORESPONDER};e.props.autoresponderAddMessage(t)}},1e3*r.delay))})}}},{key:"getMessages",value:function(){return this.sortAndGroupMessages(this.props.messages)}},{key:"render",value:function(){var e=this.getMessages(),t=[];for(var r in e){var o=e[r];t.push(n.Inferno.createVNode(16,n.MultiChannel.ChatDateComponent,null,null,{date:r}));for(var i=0;i<o.length;i++)o[i].type==n.MultiChannel.MessageTypes.SYSTEM?t.push(n.Inferno.createVNode(16,n.MultiChannel.ChatSystemMessageComponent,null,null,{session:this.props.session,message:o[i]},o[i].localId)):o[i].type==n.MultiChannel.MessageTypes.IMAGE?t.push(n.Inferno.createVNode(16,n.MultiChannel.ChatImageMessageComponent,null,null,{session:this.props.session,message:o[i]},o[i].localId)):o[i].type==n.MultiChannel.MessageTypes.FILE?t.push(n.Inferno.createVNode(16,n.MultiChannel.ChatFileMessageComponent,null,null,{session:this.props.session,message:o[i]},o[i].localId)):o[i].type!=n.MultiChannel.MessageTypes.TEXT&&o[i].type!=n.MultiChannel.MessageTypes.AUTORESPONDER||t.push(n.Inferno.createVNode(16,n.MultiChannel.ChatTextMessageComponent,null,null,{session:this.props.session,message:o[i]},o[i].localId))}return n.Inferno.createVNode(2,"div","mgo-mcw__chat-body-inner",[n.Inferno.createVNode(2,"div","mgo-mcw__chat-wrapper",t,{id:"mgo-mcw-chat-wrapper"},null,this.createRef),n.Inferno.createVNode(2,"div","mgo-mcw__chat-bottom-anchor",null,{id:"mgo-mcw-chat-bottom-anchor"}),this.props.isTyping&&n.Inferno.createVNode(16,n.MultiChannel.ChatTypeIndicatorComponent)],{id:"mgo-mcw-chat-body-inner",onScroll:this.onScrolled},null,this.createRef)}}],[{key:"mapStateToProps",value:function(e,t){return{messages:e.ChatReducer.messages,autoresponderWasInited:e.ChatReducer.autoresponderWasInited,session:e.ChatReducer.session,scrollToBottom:e.ChatReducer.scrollToBottom,isAutoresponseNeeded:e.ChatReducer.isAutoresponseNeeded,isHistoryLoaded:e.ChatReducer.isHistoryLoaded,isTyping:e.ChatReducer.isTyping}}},{key:"mapDispatchToProps",
value:function(e,t){return{autoresponderInit:l(i,e),autoresponderAddMessage:l(s,e),loadHistory:l(a,e),updateInitial:l(u,e)}}}]),t}(n.MultiChannel.BaseComponent),n.MultiChannel.ChatMsgListComponent=c(n.MultiChannel.ChatMsgListComponent.mapStateToProps,n.MultiChannel.ChatMsgListComponent.mapDispatchToProps)(n.MultiChannel.ChatMsgListComponent)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";var r=n.$;n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var o=n.Inferno.Component,i=n.MultiChannel.Actions.sendOfflineRequest,s=n.Redux.bindActionCreators,a=n.Inferno.Redux.connect;n.MultiChannel.ChatOfflineComponent=function(o){function a(e){_classCallCheck(this,a);var t=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.onFormSubmit=t.onFormSubmit.bind(t),t.handleKeyPress=t.handleKeyPress.bind(t),t.handleCheckboxChange=t.handleCheckboxChange.bind(t),t.getStyle=t.getStyle.bind(t),t.createRef=t.createRef.bind(t),t.recalculateHeight=t.recalculateHeight.bind(t),t.successCallback=t.successCallback.bind(t),t.errorCallback=t.errorCallback.bind(t),t.STATES={FORM:"form",SUCCESS:"success"},t.state={mgoMcwName:"",mgoMcwEmail:"",mgoMcwMessage:"",mgoMcwAgreement:!1,mgoMcwNameStatus:!0,mgoMcwEmailStatus:!0,mgoMcwMessageStatus:!0,mgoMcwAgreementStatus:!0,bodyHeight:0,windowHeight:0,internalState:t.STATES.FORM},t}return _inherits(a,o),_createClass(a,[{key:"getStyle",value:function(){return this.state.bodyHeight>0?{height:this.state.bodyHeight+"px"}:{}}},{key:"getWindowStyle",value:function(){return this.state.windowHeight>0?{height:this.state.windowHeight+"px"}:{}}},{key:"validateRequired",value:function(e){if(this.state[e]&&""!==this.state[e]){var t;return this.setState((t={},_defineProperty(t,e+"Status",!0),_defineProperty(t,e+"Message",""),t)),!0}var r;return this.setState((r={},_defineProperty(r,e+"Status",!1),_defineProperty(r,e+"Message",n.MultiChannel.locale.getMessage("REQUIRED_MESSAGE")),r)),!1}},{key:"createRef",value:function(e){e&&(this.refs=this.refs||{},this.refs[e.id]=e)}},{key:"validateEmail",value:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(t.test(this.state[e])){var r;return this.setState((r={},_defineProperty(r,e+"Status",!0),_defineProperty(r,e+"Message",""),r)),!0}var o;return this.setState((o={},_defineProperty(o,e+"Status",!1),_defineProperty(o,e+"Message",n.MultiChannel.locale.getMessage("EMAIL_FORMAT_MESSAGE")),o)),!1}},{key:"onFormSubmit",value:function(){this.validate()?this.props.sendOfflineRequest({email:this.state.mgoMcwEmail,name:this.state.mgoMcwName,text:this.state.mgoMcwMessage}).then(this.successCallback,this.errorCallback):this.state.mgoMcwNameStatus&&this.state.mgoMcwEmailStatus&&this.state.mgoMcwMessageStatus||this.props.recalculateHeight(this.refs["mgo-mcw-form"].offsetHeight)}},{key:"successCallback",value:function(){this.setState({internalState:this.STATES.SUCCESS})}},{key:"errorCallback",value:function(){}},{key:"handleCheckboxChange",value:function(e){var t,n=e.target.checked,r=e.target.name;return this.setState((t={},_defineProperty(t,r+"Status",!0),_defineProperty(t,r+"Message",""),_defineProperty(t,r,n),t)),!0}},{key:"handleKeyPress",value:function(e){var t,n=e.target.value,r=e.target.name;return this.setState((t={},_defineProperty(t,r+"Status",!0),_defineProperty(t,r+"Message",""),_defineProperty(t,r,n),t)),!0}},{key:"validate",value:function(){var e=this.validateRequired("mgoMcwName"),t=this.validateRequired("mgoMcwEmail")&&this.validateEmail("mgoMcwEmail"),n=this.validateRequired("mgoMcwMessage"),r=!this.props.widgetSettings.styles.personalDataAgreement||this.validateRequired("mgoMcwAgreement");return e&&t&&n&&r}},{key:"classNames",value:function u(e){var u=["mgo-mcw__text-input"];return this.state[e+"Status"]||u.push("mgo-mcw__text-input_invalid"),u.join(" ")}},{key:"textareaClassNames",value:function(e){var t=["mgo-mcw__textarea-input"];return this.state[e+"Status"]||t.push("mgo-mcw__textarea-input_invalid"),t.join(" ")}},{key:"checkboxClassNames",value:function(e){var t=["mgo-mcw__checkbox-input-lbl"];return this.state[e+"Status"]||t.push("mgo-mcw__checkbox-input-lbl_invalid"),t.join(" ")}},{key:"recalculateHeight",value:function(){if(n.Helpers.isMobileViewMode()){var r=e.innerHeight;this.props.widgetSettings.showCopyright&&(r-=t.getElementById("mgo-mcw-copyright").offsetHeight),this.setState({bodyHeight:r})}}},{key:"componentDidMount",value:function(){this.recalculateHeight(),r(e).on("resize",this.recalculateHeight)}},{key:"render",value:function(){return n.Inferno.createVNode(2,"div","mgo-mcw__widget-window mgo-mcw__chat-window",[this.state.internalState===this.STATES.FORM&&n.Inferno.createVNode(2,"div","mgo-mcw__chat-offline-form",n.Inferno.createVNode(2,"div",null,[n.Inferno.createVNode(2,"div","mgo-mcw__chat-offline-header",this.props.widgetSettings.styles.nonworkingFormHeader,{id:"mgo-mcw-form-header"},null,this.createRef),n.Inferno.createVNode(2,"div","mgo-mcw__chat-offline-text",this.props.widgetSettings.styles.nonworkingFormText,{id:"mgo-mcw-form-text"},null,this.createRef),n.Inferno.createVNode(2,"div","",[n.Inferno.createVNode(2,"div","mgo-mcw__chat-offline-form-row",[n.Inferno.createVNode(512,"input",this.classNames("mgoMcwName"),null,{value:this.state.mgoMcwName,onChange:this.handleInputChange,onKeyUp:this.handleKeyPress,name:"mgoMcwName",placeholder:n.MultiChannel.locale.getMessage("NAME"),type:"text"}),n.Inferno.createVNode(2,"div","mgo-mcw__error-msg",this.state.mgoMcwNameMessage)]),n.Inferno.createVNode(2,"div","mgo-mcw__chat-offline-form-row",[n.Inferno.createVNode(512,"input",this.classNames("mgoMcwEmail"),null,{value:this.state.mgoMcwEmail,onChange:this.handleInputChange,onKeyUp:this.handleKeyPress,name:"mgoMcwEmail",placeholder:n.MultiChannel.locale.getMessage("EMAIL"),type:"text"}),n.Inferno.createVNode(2,"div","mgo-mcw__error-msg",this.state.mgoMcwEmailMessage)]),n.Inferno.createVNode(2,"div","mgo-mcw__chat-offline-form-row",[n.Inferno.createVNode(1024,"textarea",this.textareaClassNames("mgoMcwMessage"),null,{maxlength:"5000",value:this.state.mgoMcwMessage,onChange:this.handleInputChange,onKeyUp:this.handleKeyPress,name:"mgoMcwMessage",placeholder:n.MultiChannel.locale.getMessage("MESSAGE")}),n.Inferno.createVNode(2,"div","mgo-mcw__error-msg",this.state.mgoMcwMessageMessage)]),this.props.widgetSettings.styles.personalDataAgreement&&n.Inferno.createVNode(2,"div","mgo-mcw__chat-offline-form-row",[n.Inferno.createVNode(512,"input","mgo-mcw__checkbox-input",null,{onChange:this.handleCheckboxChange,name:"mgoMcwAgreement",type:"checkbox",id:"mgo-mcw-agreement-checkbox"}),n.Inferno.createVNode(2,"label",this.checkboxClassNames("mgoMcwAgreement"),null,{"for":"mgo-mcw-agreement-checkbox"}),n.Inferno.createVNode(2,"label","mgo-mcw__checkbox-label",n.MultiChannel.locale.getMessage("PERSONAL_DATA_AGREEMENT_LABEL"),{"for":"mgo-mcw-agreement-checkbox"})]),n.Inferno.createVNode(2,"div","mgo-mcw__chat-offline-submit-row",n.Inferno.createVNode(2,"button","mgo-mcw__rounded-button mgo-mcw__rounded-button_width-100 ",n.MultiChannel.locale.getMessage("SEND"),{onClick:this.onFormSubmit}))],{id:"mgo-mcw-form-text"},null,this.createRef)],{style:this.getStyle(),id:"mgo-mcw-form"},null,this.createRef)),this.state.internalState===this.STATES.SUCCESS&&n.Inferno.createVNode(2,"div","mgo-mcw__success-message",n.Inferno.createVNode(2,"div",null,[n.Inferno.createVNode(2,"div","mgo-mcw__success-icon"),n.Inferno.createVNode(2,"div","mgo-mcw__success-header",[n.MultiChannel.locale.getMessage("THANKS"),"!"]),n.Inferno.createVNode(2,"div","mgo-mcw__success-text",n.MultiChannel.locale.getMessage("APPLICATION_ACCEPTED"))]))])}}],[{key:"mapStateToProps",value:function(e){return{}}},{key:"mapDispatchToProps",value:function(e){return{sendOfflineRequest:s(i,e)}}}]),a}(o),n.MultiChannel.ChatOfflineComponent=a(n.MultiChannel.ChatOfflineComponent.mapStateToProps,n.MultiChannel.ChatOfflineComponent.mapDispatchToProps)(n.MultiChannel.ChatOfflineComponent)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r=n.Inferno.Component,o=n.Inferno.Redux.connect,i=n.MultiChannel.Actions.sendRate,s=n.Redux.bindActionCreators;n.MultiChannel.ChatRateComponent=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseEnter=n.onMouseEnter.bind(n),n.onMouseLeave=n.onMouseLeave.bind(n),n.createRef=n.createRef.bind(n),n.state={rate:e.session&&e.session.rate?e.session.rate:null,isRateUpHovered:!1,isRateDownHovered:!1},n}return _inherits(t,e),_createClass(t,[{key:"createRef",value:function(e){e&&(this.refs=this.refs||{},this.refs[e.id]=e)}},{key:"onMouseEnter",value:function(e){if(!this.state.rate){var t={};t[e]=!0,this.setState(t)}}},{key:"onMouseLeave",value:function(e){if(!this.state.rate){var t={};t[e]=!1,this.setState(t)}}},{key:"setRate",value:function(e){this.state.rate||(this.setState({rate:e}),this.props.sendRate(e))}},{key:"rateClasses",value:function(){var e=["mgo-mcw__rates"];return this.state.rate&&e.push("mgo-mcw__rates__used"),e.join(" ")}},{key:"componentWillReceiveProps",value:function(e){this.setState({rate:e.session&&e.session.rate?e.session.rate:null,isRateUpHovered:!1,isRateDownHovered:!1})}},{key:"render",value:function(){var e=this;return n.Inferno.createVNode(2,"div",this.rateClasses(),[n.Inferno.createVNode(2,"div","mgo-mcw__rateup",this.state.isRateUpHovered||this.state.rate&&2==this.state.rate?n.Inferno.createVNode(128,"svg",null,n.Inferno.createVNode(2,"path",null,null,{fill:"#82B337","fill-rule":"nonzero",d:"M0 16h3.032V7.017H0V16zm16-8c0-1.492-.26-1.979-1.455-1.979H10.03l.618-4.077.022-.256c0-.328-.124-.632-.32-.848L9.58 0 5.454 5.272c-.27.288-.43 1.305-.43 1.745V14.4c0 .88.655 1.6 1.455 1.6h5.884c.603 0 1.12-.4 1.338-.976l2.196-5.64A1.72 1.72 0 0 0 16 8.8V8z"}),{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}):n.Inferno.createVNode(128,"svg",null,n.Inferno.createVNode(2,"path",null,null,{fill:"#A8B3B9","fill-rule":"nonzero",d:"M0 16h3.032V7.017H0V16zm16-8c0-1.492-.26-1.979-1.455-1.979H10.03l.618-4.077.022-.256c0-.328-.124-.632-.32-.848L9.58 0 5.454 5.272c-.27.288-.43 1.305-.43 1.745V14.4c0 .88.655 1.6 1.455 1.6h5.884c.603 0 1.12-.4 1.338-.976l2.196-5.64A1.72 1.72 0 0 0 16 8.8V8z",opacity:".5"}),{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),{onClick:function(){e.setRate(2)},onMouseEnter:function(){return e.onMouseEnter("isRateUpHovered")},onMouseLeave:function(){return e.onMouseLeave("isRateUpHovered")}}),n.Inferno.createVNode(2,"div","mgo-mcw__ratedown",this.state.isRateDownHovered||this.state.rate&&1==this.state.rate?n.Inferno.createVNode(128,"svg",null,n.Inferno.createVNode(2,"path",null,null,{fill:"#EC4A3A","fill-rule":"nonzero",d:"M16 0h-3.032v8.983H16V0zM0 8c0 1.492.26 1.979 1.455 1.979H5.97l-.618 4.077-.022.256c0 .328.124.632.32.848l.77.84 4.124-5.272c.27-.288.43-1.305.43-1.745V1.6c0-.88-.655-1.6-1.455-1.6H3.636c-.603 0-1.12.4-1.338.976L.102 6.616A1.72 1.72 0 0 0 0 7.2V8z"}),{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}):n.Inferno.createVNode(128,"svg",null,n.Inferno.createVNode(2,"path",null,null,{fill:"#A8B3B9","fill-rule":"nonzero",d:"M16 0h-3.032v8.983H16V0zM0 8c0 1.492.26 1.979 1.455 1.979H5.97l-.618 4.077-.022.256c0 .328.124.632.32.848l.77.84 4.124-5.272c.27-.288.43-1.305.43-1.745V1.6c0-.88-.655-1.6-1.455-1.6H3.636c-.603 0-1.12.4-1.338.976L.102 6.616A1.72 1.72 0 0 0 0 7.2V8z",opacity:".5"}),{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),{onClick:function(){return e.setRate(1)},onMouseEnter:function(){return e.onMouseEnter("isRateDownHovered")},onMouseLeave:function(){return e.onMouseLeave("isRateDownHovered")}})])}}],[{key:"mapStateToProps",value:function(e){return{session:e.ChatReducer.session}}},{key:"mapDispatchToProps",value:function(e){return{sendRate:s(i,e)}}}]),t}(r),n.MultiChannel.ChatRateComponent=o(n.MultiChannel.ChatRateComponent.mapStateToProps,n.MultiChannel.ChatRateComponent.mapDispatchToProps)(n.MultiChannel.ChatRateComponent)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r=n.Inferno.Component;n.moment;n.MultiChannel.ChatSystemMessageComponent=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return n.Inferno.createVNode(2,"div","mgo-mcw__chat-system-message",this.props.message.payload.body)}}]),t}(r)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{},n.MultiChannel.ChatTextMessageComponent=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.formatMessage=n.formatMessage.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"formatMessage",value:function(e){return this.replaceURLWithHTMLLinks(e)}},{key:"replaceURLWithHTMLLinks",value:function(e){var t=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;return e.replace(t,"<a target='_blank' href='$1'>$1</a>")}},{key:"render",value:function(){return n.Inferno.createVNode(2,"div",this.classNames(),this.props.message.isClientMessage?n.Inferno.createVNode(2,"div",null,[n.Inferno.createVNode(2,"div","mgo-mcw__chat-message-time",this.formatTime(this.props.message.time)),n.Inferno.createVNode(2,"div","mgo-mcw__chat-message-text ",null,{dangerouslySetInnerHTML:{__html:this.formatMessage(this.props.message.payload.body)}}),this.props.message.discarded&&n.Inferno.createVNode(2,"div","mgo-mcw__unprocessed-msg",n.MultiChannel.locale.getMessage("MESSAGE_NOT_DELIVERED"))]):n.Inferno.createVNode(2,"div",null,[n.Inferno.createVNode(2,"div","mgo-mcw__chat-message-text ",null,{dangerouslySetInnerHTML:{__html:this.formatMessage(this.props.message.payload.body)}}),n.Inferno.createVNode(2,"div","mgo-mcw__chat-message-time",this.formatTime(this.props.message.time))]))}}]),t}(n.MultiChannel.ChatMessageComponent)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r=n.Inferno.Component;n.MultiChannel.ChatTypeIndicatorComponent=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return n.Inferno.createVNode(2,"div","mgo-mcw__typing-indicator",[n.Inferno.createVNode(2,"div","mgo-mcw__typing-indicator-bullet mgo-mcw__typing-indicator-bullet_1"),n.Inferno.createVNode(2,"div","mgo-mcw__typing-indicator-bullet mgo-mcw__typing-indicator-bullet_2"),n.Inferno.createVNode(2,"div","mgo-mcw__typing-indicator-bullet mgo-mcw__typing-indicator-bullet_3")])}}]),t}(r)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";var r=n.$;n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var o=n.Inferno.Component,i=n.Inferno.Redux.connect;n.MultiChannel.ChatWindowComponent=function(o){function i(e){_classCallCheck(this,i);var t=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.createRef=t.createRef.bind(t),t.setElementHeightProp=t.setElementHeightProp.bind(t),t.recalculateHeight=t.recalculateHeight.bind(t),t.onDragOver=t.onDragOver.bind(t),t.onDrop=t.onDrop.bind(t),t.state={bodyHeight:0},t.elementsHeight=0,t}return _inherits(i,o),_createClass(i,[{key:"setElementHeightProp",value:function(e,t){this.elementsHeight+=t}},{key:"createRef",value:function(e){e&&(this.refs=this.refs||{},this.refs[e.id]=e)}},{key:"getStyle",value:function(){return this.state.bodyHeight>0?{height:this.state.bodyHeight+"px"}:{}}},{key:"recalculateHeight",value:function(){if(n.Helpers.isMobileViewMode()){var r=e.innerHeight-this.elementsHeight;this.props.widgetSettings.showCopyright&&(r-=t.getElementById("mgo-mcw-copyright").offsetHeight),this.setState({bodyHeight:r})}else this.setState({bodyHeight:""})}},{key:"componentDidMount",value:function(){this.recalculateHeight(),r(e).on("resize",this.recalculateHeight)}},{key:"onDragOver",value:function(e){e.preventDefault()}},{key:"onDrop",value:function(e){e.preventDefault();var t=Array.prototype.slice.call(e.dataTransfer.files||[],0);if(this.props.session){var r=this.props.session;t.forEach(function(e){n.MultiChannel.ChatService.uploadFile(r.id4talkChat,r.authKey4talk,{name:e.name,type:e.type,data:e})})}}},{key:"render",value:function(){return n.Inferno.createVNode(2,"div","mgo-mcw__widget-window mgo-mcw__chat-window",[n.Inferno.createVNode(16,n.MultiChannel.ChatHeaderComponent,null,null,{setElementHeightProp:this.setElementHeightProp,settings:this.props.channelSettings},null,this.createRef),n.Inferno.createVNode(2,"div","mgo-mcw__chat-body",n.Inferno.createVNode(16,n.MultiChannel.ChatMsgListComponent,null,null,{heightProp:this.state.bodyHeight,widgetSettings:this.props.widgetSettings,settings:this.props.channelSettings},null,this.createRef),{style:this.getStyle(),onDragOver:this.onDragOver,onDrop:this.onDrop}),n.Inferno.createVNode(2,"div","mgo-mcw__chat-wrapfooter",n.Inferno.createVNode(16,n.MultiChannel.ChatMessageFormComponent,null,null,{setElementHeightProp:this.setElementHeightProp,id:"mgo-mcw-chat-footer"},null,this.createRef),{onDragOver:this.onDragOver,onDrop:this.onDrop})])}}],[{key:"mapStateToProps",value:function(e){return{session:e.ChatReducer.session}}}]),i}(o),n.MultiChannel.ChatWindowComponent=i(n.MultiChannel.ChatWindowComponent.mapStateToProps)(n.MultiChannel.ChatWindowComponent)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r=n.Inferno.Component;n.MultiChannel.EmailButtonComponent=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onButtonClicked=n.onButtonClicked.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"onButtonClicked",value:function(){var e=this;n.Helpers.isMobileViewMode()&&this.props.getComponentState()!==n.MultiChannel.WidgetStates.MOBILE_MENU?setTimeout(function(){e.props.updateComponentState(n.MultiChannel.WidgetStates.MOBILE_MENU)},0):this.props.channelSettings.auth&&this.props.channelSettings.auth.email&&(location.href="mailto: "+this.props.channelSettings.auth.email)}},{key:"render",value:function(){return n.Inferno.createVNode(2,"div","mgo-mcw__button mgo-mcw__button_email",[n.Inferno.createVNode(2,"div","mgo-mcw__button-bg"),n.Inferno.createVNode(2,"span","mgo-mcw__button-icon")],{onClick:this.onButtonClicked,id:"mgo-mcw-email-button"})}}]),t}(r)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r=n.Inferno.Component;n.MultiChannel.FacebookButtonComponent=function(t){function r(e){_classCallCheck(this,r);var t=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.onButtonClicked=t.onButtonClicked.bind(t),t}return _inherits(r,t),_createClass(r,[{key:"onButtonClicked",value:function(){var t=this;n.Helpers.isMobileViewMode()&&this.props.getComponentState()!==n.MultiChannel.WidgetStates.MOBILE_MENU?setTimeout(function(){t.props.updateComponentState(n.MultiChannel.WidgetStates.MOBILE_MENU)},0):this.props.channelSettings.auth&&e.open("https://m.me/"+this.props.channelSettings.auth.groupId,"fb")}},{key:"render",value:function(){return n.Inferno.createVNode(2,"div","mgo-mcw__button mgo-mcw__button_fb",[n.Inferno.createVNode(2,"div","mgo-mcw__button-bg"),n.Inferno.createVNode(2,"span","mgo-mcw__button-icon")],{onClick:this.onButtonClicked,id:"mgo-mcw-fb-button"})}}]),r}(r)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r=(n.Inferno.Component,n.MultiChannel.Actions.orderLeadgen),o=n.Redux.bindActionCreators,i=n.Inferno.Redux.connect;n.MultiChannel.LeadgenerationComponent=function(t){function i(e){_classCallCheck(this,i);var t=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.getBgClasses=t.getBgClasses.bind(t),t.getButtonClasses=t.getButtonClasses.bind(t),t.onButtonClicked=t.onButtonClicked.bind(t),t.showByCloseCondition=t.showByCloseCondition.bind(t),t.showByScrollCondition=t.showByScrollCondition.bind(t),t.showByTimeCondition=t.showByTimeCondition.bind(t),t.setExpiresCookies=t.setExpiresCookies.bind(t),t.showWidget=t.showWidget.bind(t),t.onCloseClicked=t.onCloseClicked.bind(t),t.isLeadgenAvailable=t.isLeadgenAvailable.bind(t),t.orderLeadgen=t.orderLeadgen.bind(t),t.successCallback=t.successCallback.bind(t),t.errorCallback=t.errorCallback.bind(t),t.updateTimer=t.updateTimer.bind(t),t.setCurrentCountry=t.setCurrentCountry.bind(t),t.STATES={LEADGEN_FORM:"leadgen-form",LEADGEN_TIMER:"leadgen-timer",LEADGEN_ERROR:"leadgen-error"},t.state={shown:!1,phone:"",timerStr:"",selectedInterval:null,errorMsg:null,internalState:t.STATES.LEADGEN_FORM,currentCountry:t.props.widgetSettings.defaultCountry},t}return _inherits(i,t),_createClass(i,[{key:"isLeadgenAvailable",value:function(){return!n.Cookies.get(this.TIMEOUT_COOKIE_NAME)&&!n.Cookies.get(this.ORDERED_COOKIE_NAME)}},{key:"orderComplete",value:function(){this.props.widgetSettings.channels.leadgen.notShowTwice&&n.Cookies.set(this.ORDERED_COOKIE_NAME,"1",{domain:location.hostname,expires:this.ORDERED_COOKIE_EXPIRES})}},{key:"setExpiresCookies",value:function(){n.Cookies.set(this.TIMEOUT_COOKIE_NAME,"1",{domain:location.hostname,expires:60*this.props.widgetSettings.channels.leadgen.conversionRate})}},{key:"startTimer",value:function(){var e=this,t=1e3*this.props.widgetSettings.styles.leadgen.callDelay,r=setInterval(function(){t-=e.TIMER_TICK,t<=0&&(clearInterval(r),t=0,e.setState({internalState:e.STATES.LEADGEN_FORM,shown:!1}),e.props.getComponentState()===n.MultiChannel.WidgetStates.LEADGENERATION&&e.props.updateComponentState(n.MultiChannel.WidgetStates.DEFAULT)),e.updateTimer(t)},this.TIMER_TICK)}},{key:"updateTimer",value:function(e){this.setState({timerStr:n.moment.utc(e).format(this.TIMER_FORMAT)})}},{key:"componentWillMount",value:function(){this.updateTimer(1e3*this.props.widgetSettings.styles.leadgen.callDelay)}},{key:"componentDidMount",value:function(){this.props.widgetSettings.channels.leadgen.userLeave&&(this.cursorSpy=new n.Analytics.CursorSpy,this.cursorSpy.on("cursor:up",this.showByCloseCondition),this.cursorSpy.start()),this.props.widgetSettings.channels.leadgen.userScrollToEnd&&(this.scrollSpy=new n.Analytics.ScrollSpy,this.scrollSpy.on("scroll",this.showByScrollCondition),this.scrollSpy.start()),this.props.widgetSettings.channels.leadgen.userLongerThat&&(this.activitySpy=new n.Analytics.ActivitySpy,this.activitySpy.on("tick",this.showByTimeCondition),this.activitySpy.start())}},{key:"showWidget",value:function(){this.props.updateComponentState(n.MultiChannel.WidgetStates.LEADGENERATION),this.setExpiresCookies(),this.setState({shown:!0}),n.SEO&&n.SEO.events&&n.SEO.sendEvent&&n.SEO.sendEvent(n.SEO.events.mch_leadgen_shown)}},{key:"isShown",value:function(){return this.state.shown||this.props.getComponentState()!==n.MultiChannel.WidgetStates.DEFAULT||!this.isLeadgenAvailable()}},{key:"showByCloseCondition",value:function(){this.isShown()||this.showWidget()}},{key:"showByScrollCondition",value:function(t){t>=this.SCROLL_TOP_THRESHOLD&&!this.isShown()&&e.pageYOffset&&this.showWidget()}},{key:"showByTimeCondition",value:function(e){1e3*this.props.widgetSettings.channels.leadgen.longerThatTime<=e&&!this.isShown()&&this.showWidget()}},{key:"setCurrentCountry",value:function(e){this.setState({currentCountry:e,phone:""})}},{key:"onButtonClicked",value:function(){var e=this.refs["leadgen-form-component"].getPhone().replace(/[()\-\s]/g,"");e.length>=this.state.currentCountry.min&&e.length>=this.state.currentCountry.max&&(this.setState({phone:e}),this.orderLeadgen(this.state.currentCountry.phone_code+e))}},{key:"orderLeadgen",value:function(e){var t={number:e,uid:n.session.getUserId(),startDate:this.state.selectedInterval};this.props.orderLeadgen(t).then(this.successCallback,this.errorCallback),n.SEO&&n.SEO.sendEvent&&n.SEO.events&&n.SEO.sendEvent(n.SEO.events.mch_leadgen_created)}},{key:"successCallback",value:function(){this.setState({internalState:this.STATES.LEADGEN_TIMER}),this.startTimer(),this.orderComplete()}},{key:"errorCallback",value:function(e){var t=this;setTimeout(function(){t.setState({internalState:t.STATES.LEADGEN_ERROR,errorMsg:e}),setTimeout(function(){t.props.getComponentState()===n.MultiChannel.WidgetStates.LEADGENERATION&&t.props.updateComponentState(n.MultiChannel.WidgetStates.DEFAULT),t.setState({internalState:t.STATES.LEADGEN_FORM,shown:!1})},5e3)},3e3)}},{key:"onCloseClicked",value:function(){this.props.updateComponentState(n.MultiChannel.WidgetStates.DEFAULT),this.setState({shown:!1})}},{key:"getBgClasses",value:function(){var e=["mgo-mcw__leadgen-popup"];return this.props.widgetSettings.styles.leadgen.backgroundColor?e.push("mgo-mcw__leadgen-popup_"+this.props.widgetSettings.styles.leadgen.backgroundColor):e.push("mgo-mcw__leadgen-popup_blue"),n.Helpers.isMobileViewMode()&&e.push("mgo-mcw__leadgen-popup_mobile"),e.join(" ")}},{key:"getTimerClass",value:function(){var e=["mgo-mcw__leadgen-countdown"];return this.state.internalState===this.STATES.LEADGEN_TIMER?e.push("mgo-mcw__leadgen-countdown_ticking"):e.push("mgo-mcw__leadgen-countdown_static"),e.join(" ")}},{key:"getButtonClasses",value:function(){var e=["mgo-mcw__button","mgo-mcw__button_lg","mgo-mcw__leadgen-button"];return this.props.widgetSettings.styles.leadgen.buttonColor?e.push("mgo-mcw__leadgen-button_"+this.props.widgetSettings.styles.leadgen.buttonColor):e.push("mgo-mcw__leadgen-button_blue"),e.join(" ")}},{key:"render",value:function(){var e=this,t=void 0,r=void 0;return this.state.internalState===this.STATES.LEADGEN_TIMER?(t=n.MultiChannel.locale.getMessage("THANKS")+",",r=n.MultiChannel.locale.getMessage("WE_ARE_CALLING_YOU")):this.state.internalState===this.STATES.LEADGEN_ERROR?(t=n.MultiChannel.locale.getMessage("ERROR_OCCURED"),r=n.MultiChannel.locale.getMessage(this.state.errorMsg)):(t=this.props.widgetSettings.styles.leadgen.headerText,r=this.props.widgetSettings.styles.leadgen.mainText),n.Inferno.createVNode(2,"div",null,this.props.getComponentState()===n.MultiChannel.WidgetStates.LEADGENERATION&&n.Inferno.createVNode(2,"div",this.getBgClasses(),[n.Inferno.createVNode(2,"div","mgo-mcw__leadgen-close",null,{id:"mgo-mcw-leadgen-close",onClick:this.onCloseClicked}),n.Inferno.createVNode(2,"div","mgo-mcw__leadgen-header",t,{id:"mgo-mcw-leadgen-header"}),n.Inferno.createVNode(2,"div","mgo-mcw__leadgen-description",r,{id:"mgo-mcw-leadgen-text"}),this.state.internalState===this.STATES.LEADGEN_FORM&&n.Inferno.createVNode(2,"div","mgo-mcw__leadgen-phone-form",[n.Inferno.createVNode(16,n.MultiChannel.CallbackFormComponent,null,null,{widgetType:n.MultiChannel.Channels.LEADGEN,widgetSettings:this.props.widgetSettings,currentCountry:this.state.currentCountry,setCountry:this.setCurrentCountry},null,function(t){t&&(t.id="leadgen-form-component",e.createRef(t))}),n.Inferno.createVNode(2,"div",this.getButtonClasses(),[n.Inferno.createVNode(2,"div","mgo-mcw__button-bg"),n.Inferno.createVNode(2,"span","mgo-mcw__button-icon")],{onClick:this.onButtonClicked,id:"mgo-mcw-lg-button"})]),this.state.internalState!==this.STATES.LEADGEN_ERROR&&n.Inferno.createVNode(2,"div",this.getTimerClass(),[n.Inferno.createVNode(2,"span","mgo-mcw__countdown-icon"),n.Inferno.createVNode(2,"span","mgo-mcw__countdown-timer",this.state.timerStr)]),this.props.widgetSettings.showCopyright&&n.Inferno.createVNode(2,"div","mgo-mcw__leadgen-copyright",n.Inferno.createVNode(2,"a",null,n.MultiChannel.locale.getMessage("COPYRIGHT"),{target:"_blank",href:this.props.widgetSettings.styles.copyrightLink}))]),{id:"mgo-mcw-leadgen"})}},{key:"SCROLL_TOP_THRESHOLD",get:function(){return 80}},{key:"TIMEOUT_COOKIE_NAME",get:function(){return"mgo-mcw-leadgen-timeout"}},{key:"ORDERED_COOKIE_NAME",get:function(){return"mgo-mcw-leadgen-ordered"}},{key:"TIMER_TICK",get:function(){return 75}},{key:"TIMER_FORMAT",get:function(){return"mm:ss.SS"}},{key:"ORDERED_COOKIE_EXPIRES",get:function(){return n.moment().add(1,"years").toDate()}}],[{key:"mapDispatchToProps",value:function(e){return{orderLeadgen:o(r,e)}}}]),i}(n.MultiChannel.BaseComponent),n.MultiChannel.LeadgenerationComponent=i(n.MultiChannel.LeadgenerationComponent.mapStateToProps,n.MultiChannel.LeadgenerationComponent.mapDispatchToProps)(n.MultiChannel.LeadgenerationComponent)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r=n.Inferno.Component;n.MultiChannel.TelegramButtonComponent=function(t){function r(e){_classCallCheck(this,r);var t=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.onButtonClicked=t.onButtonClicked.bind(t),
t}return _inherits(r,t),_createClass(r,[{key:"onButtonClicked",value:function(){var t=this;n.Helpers.isMobileViewMode()&&this.props.getComponentState()!==n.MultiChannel.WidgetStates.MOBILE_MENU?setTimeout(function(){t.props.updateComponentState(n.MultiChannel.WidgetStates.MOBILE_MENU)},0):this.props.channelSettings.auth&&this.props.channelSettings.auth.botName&&e.open("https://telegram.me/"+this.props.channelSettings.auth.botName,"tg")}},{key:"render",value:function(){return n.Inferno.createVNode(2,"div","mgo-mcw__button mgo-mcw__button_tg",[n.Inferno.createVNode(2,"div","mgo-mcw__button-bg"),n.Inferno.createVNode(2,"span","mgo-mcw__button-icon")],{onClick:this.onButtonClicked,id:"mgo-mcw-tg-button"})}}]),r}(r)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r=n.Inferno.Component;n.MultiChannel.ViberButtonComponent=function(t){function r(e){_classCallCheck(this,r);var t=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.onButtonClicked=t.onButtonClicked.bind(t),t}return _inherits(r,t),_createClass(r,[{key:"onButtonClicked",value:function(){var t=this;n.Helpers.isMobileViewMode()&&this.props.getComponentState()!==n.MultiChannel.WidgetStates.MOBILE_MENU?setTimeout(function(){t.props.updateComponentState(n.MultiChannel.WidgetStates.MOBILE_MENU)},0):this.props.channelSettings.auth&&this.props.channelSettings.auth.botName&&e.open("viber://pa?chatURI="+this.props.channelSettings.auth.botName,"vb")}},{key:"render",value:function(){return n.Inferno.createVNode(2,"div","mgo-mcw__button mgo-mcw__button_vibe",[n.Inferno.createVNode(2,"div","mgo-mcw__button-bg"),n.Inferno.createVNode(2,"span","mgo-mcw__button-icon")],{onClick:this.onButtonClicked,id:"mgo-mcw-vibe-button"})}}]),r}(r)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";n.$,n._,n.Promise;n.MultiChannel=n.MultiChannel||{};var r=n.Inferno.Component;n.MultiChannel.VkontakteButtonComponent=function(t){function r(e){_classCallCheck(this,r);var t=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.onButtonClicked=t.onButtonClicked.bind(t),t}return _inherits(r,t),_createClass(r,[{key:"onButtonClicked",value:function(){var t=this;n.Helpers.isMobileViewMode()&&this.props.getComponentState()!==n.MultiChannel.WidgetStates.MOBILE_MENU?setTimeout(function(){t.props.updateComponentState(n.MultiChannel.WidgetStates.MOBILE_MENU)},0):this.props.channelSettings.auth&&e.open("https://vk.com/im?sel=-"+this.props.channelSettings.auth.groupId,"vk")}},{key:"render",value:function(){return n.Inferno.createVNode(2,"div","mgo-mcw__button mgo-mcw__button_vk",[n.Inferno.createVNode(2,"div","mgo-mcw__button-bg"),n.Inferno.createVNode(2,"span","mgo-mcw__button-icon")],{onClick:this.onButtonClicked,id:"mgo-mcw-vk-button"})}}]),r}(r)}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";var r=(n.$,n._);n.Promise;n.MultiChannel=n.MultiChannel||{},n.MultiChannel.Module=function(){function e(t){_classCallCheck(this,e);var o=this.widgets={};r.each(t,function(e){o[e.id]=new n.MultiChannel.Widget(e)})}return _createClass(e,[{key:"start",value:function(){r.each(this.widgets,function(e){e.init()})}}]),e}()}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";function r(t,r){n.Log.enabled&&e.console&&i.indexOf(t)>=i.indexOf(n.Log.level)&&e.console[t].apply(e.console,r)}var o=(n.$,n._),i=(n.Promise,"debug info warn error".split(" "));n.Log={enabled:!0,level:"info"},o.each(i,function(e){n.Log[e]=function(){r(e,arguments)}})}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;n.Urls={track:function(){return this.calltrackingUrl("track")},module:function(e){return this.url("widgets",e+".js")},calltracking:function(e){return this.calltrackingUrl("calltracking",e)},calltrackingNumbers:function(e,t){return this.calltrackingUrl("calltracking/numbers",e,t)},multichannel:function(e){return this.multichannelUrl("multichannel",e)},pushstream:function(e){return this.pushstreamUrl()},url:function(){var e=n.schema?n.schema+":":"",t=n.host;return e+"//"+t+"/"+Array.prototype.join.call(arguments,"/")},calltrackingUrl:function(){var e=n.schema?n.schema+":":"",t=n.ClientConfig&&n.ClientConfig.calltrackingHost?n.ClientConfig.calltrackingHost:n.host;return e+"//"+t+"/"+Array.prototype.join.call(arguments,"/")},multichannelUrl:function(){var e=n.schema?n.schema+":":"",t=n.ClientConfig&&n.ClientConfig.multichannelHost?n.ClientConfig.multichannelHost:n.host;return e+"//"+t+"/"+Array.prototype.join.call(arguments,"/")},fs4talkUrl:function(e,t){var r=n.ClientConfig&&n.ClientConfig.fs4talkHost?n.ClientConfig.fs4talkHost:n.host;return"https://"+r+"/upload_chunk.php?toAccount="+e+"&localId="+t},pushstreamUrl:function(){var e=(n.schema?n.schema+":":"",n.ClientConfig&&n.ClientConfig.pushStreamModuleHost?n.ClientConfig.pushStreamModuleHost:n.host);return e}}}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";n.$,n._,n.Promise;n.Helpers={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n},isPortraitOrientation:function(){return e.innerHeight>e.innerWidth},isMobileViewMode:function(){return e.innerHeight<540||e.innerWidth<576}}}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";var r=(n.$,n._),o=(n.Promise,{analytics:{namespace:"Analytics",filename:"mango.analytics.js"},calltracking:{namespace:"CallTracking",filename:"mango.calltracking.js"},multichannel:{namespace:"MultiChannel",filename:"mango.multichannel.js"}});n.Modules=function(){function e(){_classCallCheck(this,e),r.extend(this,n.Backbone.Events),this._loading=!1,this._modules={}}return _createClass(e,[{key:"add",value:function(e,t){var n=o[e];n&&(this._modules[e]?this._modules[e].params.push(t):this._modules[e]=r.extend({},n,{name:e,params:[t],instance:null}))}},{key:"start",value:function(){this._loading||this.isLoaded||(this._loading=!0,r.isEmpty(this._modules)?this._checkAllModulesReady():r.each(this._modules,r.bind(this._loadModule,this)))}},{key:"getModule",value:function(e){return this._modules[e]?this._modules[e].instance:null}},{key:"_loadModule",value:function(e){if(n[e.namespace])return void this._startModule(e);var o="mango-"+e.name+"-js",i=t.createElement("script"),s=t.getElementsByTagName("script")[0];t.getElementById(o)||(i.async=!0,i.id=o,i.src=n.Urls.module("mango."+e.name),s.parentNode.insertBefore(i,s),i.onload=r.bind(function(){this._startModule(e)},this))}},{key:"_startModule",value:function(e){var t=n[e.namespace]?n[e.namespace].Module:null;t&&(this._modules[e.name].instance=new t(e.params)),this._checkAllModulesReady()}},{key:"_checkAllModulesReady",value:function(){this.isLoaded&&(this._loading=!1,r.each(this._modules,function(e){e.instance.start()}),this.trigger("started"))}},{key:"isLoaded",get:function(){return!r.isEmpty(this._modules)&&r.every(r.values(this._modules),function(e){return!!e.instance})}}]),e}()}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";var r=(n.$,n._),o=(n.Promise,"productId"),i="analytics",s="calltracking",a="multichannel";n.Starter=function(){function e(){_classCallCheck(this,e),r.extend(this,n.Backbone.Events),this.init()}return _createClass(e,[{key:"init",value:function(){n.session=new n.Common.Session,n.http=new n.Common.Http,n.modules=new n.Modules,n.modules.once("started",r.bind(this._onModulesReady,this))}},{key:"load",value:function(e){this._checkCallTracking(e),this._checkMultiChannel(e)}},{key:"_checkProductId",value:function(e){r.isNumber(e[o])&&(r.isNumber(n.productId)&&n.productId!==e[o]?n.Log.warn('[mango.js] Cannot set two different parameters "productId".'):n.productId=e[o])}},{key:"_checkAnalytics",value:function(e){e[i]===!0&&n.modules.add("analytics")}},{key:"_checkCallTracking",value:function(e){var t=e[s];t&&n.modules.add("calltracking",t)}},{key:"_checkMultiChannel",value:function(e){var t=e[a];t&&n.modules.add("multichannel",t)}},{key:"start",value:function(){this._validate()&&n.modules.start()}},{key:"_validate",value:function(){return!0}},{key:"_onModulesReady",value:function(){n.isReady=!0,this.trigger("started")}}]),e}()}(window,document,window.Mango=window.Mango||{});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n){"use strict";function r(e,t,r){var o=n.modules.getModule(e);o?t.call(r,o):n.Log.warn("[MANGO] Cannot call an API method of the module "+e)}var o=(n.$,n._);n.Promise;n.Api=function(){function e(){_classCallCheck(this,e),o.extend(this,n.Backbone.Events)}return _createClass(e,[{key:"pageview",value:function(){var e=arguments;r("analytics",function(t){t.tracker.pageview.apply(t.tracker,e)})}},{key:"event",value:function(){var e=arguments;r("analytics",function(t){t.tracker.event.apply(t.tracker,e)})}},{key:"hit",value:function(){var e=arguments;r("analytics",function(t){t.tracker.hit.apply(t.tracker,e)})}},{key:"postForm",value:function(){var e=arguments;r("calltracking",function(t){o.each(t.widgets,function(t){t.postForm.apply(t,e)})})}},{key:"getNumber",value:function(){var e=arguments;r("calltracking",function(t){o.each(t.widgets,function(t){t.getNumber.apply(t,e)})})}},{key:"getNumberByRegion",value:function(){var e=arguments;r("calltracking",function(t){o.each(t.widgets,function(t){t.getNumberByRegion.apply(t,e)})})}},{key:"getExistsNumbers",value:function(){var e=arguments;r("calltracking",function(t){o.each(t.widgets,function(t){t.getExistsNumbers.apply(t,e)})})}}]),e}()}(window,document,window.Mango=window.Mango||{}),function(e,t,n){"use strict";function r(){var t=e.MangoObject,r=e[t],a=r.q||[];n.startTime=r.t,n.host=s(r.u),n.starter=new n.Starter,n.api=new n.Api;var u=function(){n.api.isReady?i([arguments]):a.push(arguments)};u.__proto__=n.api,e[t]=u,o(a,n.starter),n.starter.once("started",function(){n.api.isReady=!0,i(a,u)}),n.starter.start()}function o(e,t){u.each(e,function(e){u.each(e,function(e){u.isObject(e)&&t.load(e)})})}function i(t,n){u.each(t,function(t){u.each(t,function(t){u.isFunction(t)&&t.call(e,n)})})}function s(e){var n=t.createElement("a");return n.href=e,n.host}var a=n.$,u=n._;n.Promise;a(r)}(window,document,window.Mango=window.Mango||{});